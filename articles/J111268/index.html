<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📬 🤮 👨‍👦‍👦 OTP原則を使用したノンブロッキングTCPサーバーの作成 🤟🏻 🖐🏼 👨🏽‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="エントリー  
  
 このマニュアルの読者は、 gen_serverおよびgen_fsmの動作、 gen_tcpモジュールを使用したTCPソケットの相互作用、アクティブおよびパッシブソケットモード、および「OTPスーパーバイザー」の原理に既に精通していることを前提としています。 
  
 
  
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>OTP原則を使用したノンブロッキングTCPサーバーの作成</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body"><h4> エントリー </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このマニュアルの読者は、 <i>gen_server</i>および<i>gen_fsmの</i>動作、 <i>gen_tcp</i>モジュールを使用したTCPソケットの相互作用、アクティブおよびパッシブソケットモード、および「OTPスーパーバイザー」の原理に既に精通していることを<i>前提</i>として<i>い</i>ます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OTPは、堅牢なアプリケーションを構築するための便利なツールを提供します。 部分的には、これは、OTPスーパーバイザーの階層によって接続されている<i>gen_server</i>や<i>gen_fsm</i>などの動作に一般的な機能を抽象化することで実現されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     いくつかの有名なTCPサーバーテンプレートがあります。 検討するプロセスには、1つのリッスンプロセスと、接続されたクライアントごとに新しいFSMプロセスを作成するプロセスが含まれます。  <i>gen_tcp</i>モジュールを介したOTPでのTCP接続はサポートされていますが、OTPの原理に基づいて非ブロッキングTCPサーバーを作成するための標準的な動作はありません。 非ブロッキングサーバーとは、リスニングプロセスとFSMプロセスがブロッキング呼び出しを行わず、タイムアウトを発生させずに着信メッセージ（構成の変更、再起動など）にすばやく応答することを意味します。  Erlangコンテキストでのロックは、オペレーティングシステムプロセスではなく、Erlangプロセスのロックを意味することに注意してください。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このガイドでは、アプリケーションの動作を制御し、OTPの原則に完全に準拠する<i>gen_server</i>および<i>gen_fsm</i>を使用して、ノンブロッキングTCPサーバーを作成する方法を示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OTPに詳しくない読者は、OTPを使用せずにブロッキングコール<i>gen_tcp：connect / 3</i>および<i>gen_tcp：acceept / 1</i>を使用してフォールトトレラントサーバーを構築する方法に関するJoe Armstrongのガイドに注意を払うことをお勧めします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> サーバー構造 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     サーバーの設計には、 <i>tcp_server_app</i>メインアプリケーションスーパーバイザー<i>プロセス</i>と再起動戦略<i>one_for_one</i>および2つの子プロセスが含まれます。  1つ目は、クライアント接続に関する非同期通知を待機する<i>gen_server</i>として実装されたリスニングプロセスです。  2番目は別の<i>tcp_client_sup</i>アプリケーション<i>スーパーバイザーで</i>あり、クライアント要求を処理するためのFSMプロセスを開始し、標準SASLエラーレポートを使用して異常なシャットダウンを記録します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この資料を簡単にするために、クライアント要求ハンドラー（tcp_echo_fsm）は、クライアント要求を返す「エコー」サーバーを提供します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> アプリケーションの動作とスーパーバイザー </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     アプリケーションを作成するには、「Supervisor」および「Application」ビヘイビアコールバック関数を実装するモジュールを作成する必要があります。 従来、これらの関数は簡潔さを考慮して別々のモジュールに実装されていますが、それらを1つに結合します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     追加ボーナスとして、 <i>get_app_env</i>関数を実装します。これは、構成パラメーターの処理方法と、起動時のエミュレーターのコマンドラインパラメーターを示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     スーパーバイザー階層の2つのレベルには、 <i>init / 1</i>関数の2つのインスタンスが必要です。  2つの異なる再起動戦略が使用されるため、それらを異なるレベルで実装します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     アプリケーションの起動後、 <i>tcp_server_app：start / 2</i>コールバック関数は、 <i>supervisor：start_link / 2</i>関数を呼び出します。この関数は、 <i>tcp_server_app：init（[Port、Module]）を</i>呼び出してメインアプリケーションスーパーバイザーを作成します。 このスーパーバイザーは、 <i>tcp_listener</i>プロセスと、クライアント接続の処理を担当する<i>tcp_client_sup</i>子スーパーバイザーを作成します。  <i>init</i>関数の<i>Module</i>引数は、FSMクライアント接続ハンドラーの名前です（この場合、 <i>tcp_echo_fsm</i> ）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      TCPサーバーアプリケーション（tcp_server_app.erl）： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs julia">-<span class="hljs-keyword"><span class="hljs-keyword">module</span></span>(tcp_server_app). -author('saleyn<span class="hljs-meta"><span class="hljs-meta">@gmail</span></span>.com'). -behaviour(application). %% Internal API -<span class="hljs-keyword"><span class="hljs-keyword">export</span></span>([start_client/<span class="hljs-number"><span class="hljs-number">0</span></span>]). %% Application and Supervisor callbacks -<span class="hljs-keyword"><span class="hljs-keyword">export</span></span>([start/<span class="hljs-number"><span class="hljs-number">2</span></span>, stop/<span class="hljs-number"><span class="hljs-number">1</span></span>, init/<span class="hljs-number"><span class="hljs-number">1</span></span>]). -define(MAX_RESTART, <span class="hljs-number"><span class="hljs-number">5</span></span>). -define(MAX_TIME, <span class="hljs-number"><span class="hljs-number">60</span></span>). -define(DEF_PORT, <span class="hljs-number"><span class="hljs-number">2222</span></span>). %% A startup <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> spawning new client connection handling FSM. %% To be called by the TCP listener process. start_client() -&gt; supervisor:start_child(tcp_client_sup, []). %%---------------------------------------------------------------------- %% Application behaviour callbacks %%---------------------------------------------------------------------- start(_Type, _Args) -&gt; ListenPort = get_app_env(listen_port, ?DEF_PORT), supervisor:start_link({<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, ?MODULE}, ?MODULE, [ListenPort, tcp_echo_fsm]). stop(_S) -&gt; ok. %%---------------------------------------------------------------------- %% Supervisor behaviour callbacks %%---------------------------------------------------------------------- init([Port, <span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]) -&gt; {ok, {_SupFlags = {one_for_one, ?MAX_RESTART, ?MAX_TIME}, [ % TCP Listener { tcp_server_sup, % Id = internal id {tcp_listener,start_link,[Port,<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]}, % StartFun = {M, F, A} permanent, % Restart = permanent | transient | temporary <span class="hljs-number"><span class="hljs-number">2000</span></span>, % Shutdown = brutal_kill | int() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> | infinity worker, % <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span> = worker | supervisor [tcp_listener] % Modules = [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>] | dynamic }, % Client instance supervisor { tcp_client_sup, {supervisor,start_link,[{<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, tcp_client_sup}, ?MODULE, [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]]}, permanent, % Restart = permanent | transient | temporary infinity, % Shutdown = brutal_kill | int() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> | infinity supervisor, % <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span> = worker | supervisor [] % Modules = [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>] | dynamic } ] } }; init([<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]) -&gt; {ok, {_SupFlags = {simple_one_for_one, ?MAX_RESTART, ?MAX_TIME}, [ % TCP Client { undefined, % Id = internal id {<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>,start_link,[]}, % StartFun = {M, F, A} temporary, % Restart = permanent | transient | temporary <span class="hljs-number"><span class="hljs-number">2000</span></span>, % Shutdown = brutal_kill | int() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> | infinity worker, % <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span> = worker | supervisor [] % Modules = [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>] | dynamic } ] } }. %%---------------------------------------------------------------------- %% Internal functions %%---------------------------------------------------------------------- get_app_env(Opt, Default) -&gt; case application:get_env(application:get_application(), Opt) of {ok, <span class="hljs-built_in"><span class="hljs-built_in">Val</span></span>} -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Val</span></span>; _ -&gt; case init:get_argument(Opt) of [[<span class="hljs-built_in"><span class="hljs-built_in">Val</span></span> | _]] -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Val</span></span>; error -&gt; Default <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> リスニングプロセス </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>gen_tcp</i>モジュールの欠点の1つは、接続をブロックするためだけのインターフェイスを提供することです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>prim_inet</i>モジュールのテストは、クライアント接続を受け入れるためのネットワークドライバーへのコマンドが非同期であるという興味深い事実を示しました。 これは文書化されていません。つまり、OTPチームはいつでもこれを変更できますが、この機能を使用してサーバーを作成します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     リスニングプロセスは<i>gen_server</i>として実装され<i>ます</i> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      TCPリスナープロセス（tcp_listener.erl）： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs scala">-module(tcp_listener). -author(<span class="hljs-symbol"><span class="hljs-symbol">'saleyn</span></span><span class="hljs-meta"><span class="hljs-meta">@gmail</span></span>.com'). -behaviour(gen_server). %% <span class="hljs-type"><span class="hljs-type">External</span></span> <span class="hljs-type"><span class="hljs-type">API</span></span> -export([start_link/<span class="hljs-number"><span class="hljs-number">2</span></span>]). %% gen_server callbacks -export([init/<span class="hljs-number"><span class="hljs-number">1</span></span>, handle_call/<span class="hljs-number"><span class="hljs-number">3</span></span>, handle_cast/<span class="hljs-number"><span class="hljs-number">2</span></span>, handle_info/<span class="hljs-number"><span class="hljs-number">2</span></span>, terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>, code_change/<span class="hljs-number"><span class="hljs-number">3</span></span>]). -record(state, { listener, % <span class="hljs-type"><span class="hljs-type">Listening</span></span> socket acceptor, % <span class="hljs-type"><span class="hljs-type">Asynchronous</span></span> acceptor<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> internal reference module % <span class="hljs-type"><span class="hljs-type">FSM</span></span> handling module }). %%-------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Port</span></span>::integer(), <span class="hljs-type"><span class="hljs-type">Module</span></span>) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">Pid</span></span>} | {error, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} % %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Called</span></span> by a supervisor to start the listening process. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %%---------------------------------------------------------------------- start_link(<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Module</span></span>) when is_integer(<span class="hljs-type"><span class="hljs-type">Port</span></span>), is_atom(<span class="hljs-type"><span class="hljs-type">Module</span></span>) -&gt; gen_server:start_link({local, ?<span class="hljs-type"><span class="hljs-type">MODULE</span></span>}, ?<span class="hljs-type"><span class="hljs-type">MODULE</span></span>, [<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Module</span></span>], []). %%%------------------------------------------------------------------------ %%% <span class="hljs-type"><span class="hljs-type">Callback</span></span> functions from gen_server %%%------------------------------------------------------------------------ %%---------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Port</span></span>::integer()) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {ok, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% ignore | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} %% %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Called</span></span> by gen_server framework at process startup. %% <span class="hljs-type"><span class="hljs-type">Create</span></span> listening socket. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %%---------------------------------------------------------------------- init([<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Module</span></span>]) -&gt; process_flag(trap_exit, <span class="hljs-literal"><span class="hljs-literal">true</span></span>), <span class="hljs-type"><span class="hljs-type">Opts</span></span> = [binary, {packet, <span class="hljs-number"><span class="hljs-number">2</span></span>}, {reuseaddr, <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {keepalive, <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {backlog, <span class="hljs-number"><span class="hljs-number">30</span></span>}, {active, <span class="hljs-literal"><span class="hljs-literal">false</span></span>}], <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> gen_tcp:listen(<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Opts</span></span>) of {ok, <span class="hljs-type"><span class="hljs-type">Listen_socket</span></span>} -&gt; %%<span class="hljs-type"><span class="hljs-type">Create</span></span> first accepting process {ok, <span class="hljs-type"><span class="hljs-type">Ref</span></span>} = prim_inet:async_accept(<span class="hljs-type"><span class="hljs-type">Listen_socket</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>), {ok, #state{listener = <span class="hljs-type"><span class="hljs-type">Listen_socket</span></span>, acceptor = <span class="hljs-type"><span class="hljs-type">Ref</span></span>, module = <span class="hljs-type"><span class="hljs-type">Module</span></span>}}; {error, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} -&gt; {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} end. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Request</span></span>, <span class="hljs-type"><span class="hljs-type">From</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {reply, <span class="hljs-type"><span class="hljs-type">Reply</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {reply, <span class="hljs-type"><span class="hljs-type">Reply</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">Reply</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> synchronous server calls. <span class="hljs-type"><span class="hljs-type">If</span></span> `{stop, ...}' tuple %% is returned, the server is stopped and `terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>' is called. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- handle_call(<span class="hljs-type"><span class="hljs-type">Request</span></span>, _From, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {stop, {unknown_call, <span class="hljs-type"><span class="hljs-type">Request</span></span>}, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Msg</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt;{noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> asyncrous server calls. <span class="hljs-type"><span class="hljs-type">If</span></span> `{stop, ...}' tuple %% is returned, the server is stopped and `terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>' is called. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- handle_cast(_Msg, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Msg</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt;{noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> messages sent directly to server<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> mailbox. %% <span class="hljs-type"><span class="hljs-type">If</span></span> `{stop, ...}' tuple is returned, the server is stopped and %% `terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>' is called. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- handle_info({inet_async, <span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">Ref</span></span>, {ok, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>}}, #state{listener=<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, acceptor=<span class="hljs-type"><span class="hljs-type">Ref</span></span>, module=<span class="hljs-type"><span class="hljs-type">Module</span></span>} = <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> set_sockopt(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>) of ok -&gt; ok; {error, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} -&gt; exit({set_sockopt, <span class="hljs-type"><span class="hljs-type">Reason</span></span>}) end, %% <span class="hljs-type"><span class="hljs-type">New</span></span> client connected - spawn a <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> process using the simple_one_for_one %% supervisor. {ok, <span class="hljs-type"><span class="hljs-type">Pid</span></span>} = tcp_server_app:start_client(), gen_tcp:controlling_process(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>, <span class="hljs-type"><span class="hljs-type">Pid</span></span>), %% <span class="hljs-type"><span class="hljs-type">Instruct</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">FSM</span></span> that it owns the socket. <span class="hljs-type"><span class="hljs-type">Module</span></span>:set_socket(<span class="hljs-type"><span class="hljs-type">Pid</span></span>, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>), %% <span class="hljs-type"><span class="hljs-type">Signal</span></span> the network driver that we are ready to accept another connection <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> prim_inet:async_accept(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>) of {ok, <span class="hljs-type"><span class="hljs-type">NewRef</span></span>} -&gt; ok; {error, <span class="hljs-type"><span class="hljs-type">NewRef</span></span>} -&gt; exit({async_accept, inet:format_error(<span class="hljs-type"><span class="hljs-type">NewRef</span></span>)}) end, {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>#state{acceptor=<span class="hljs-type"><span class="hljs-type">NewRef</span></span>}} <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> exit:<span class="hljs-type"><span class="hljs-type">Why</span></span> -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"Error in async accept: ~p.\n"</span></span>, [<span class="hljs-type"><span class="hljs-type">Why</span></span>]), {stop, <span class="hljs-type"><span class="hljs-type">Why</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} end; handle_info({inet_async, <span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">Ref</span></span>, <span class="hljs-type"><span class="hljs-type">Error</span></span>}, #state{listener=<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, acceptor=<span class="hljs-type"><span class="hljs-type">Ref</span></span>} = <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"Error in socket acceptor: ~p.\n"</span></span>, [<span class="hljs-type"><span class="hljs-type">Error</span></span>]), {stop, <span class="hljs-type"><span class="hljs-type">Error</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>}; handle_info(_Info, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; any %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> executed on server shutdown. <span class="hljs-type"><span class="hljs-type">It</span></span> is only invoked <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> %% `process_flag(trap_exit, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)' is set by the server process. %% <span class="hljs-type"><span class="hljs-type">The</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value is ignored. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- terminate(_Reason, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; gen_tcp:close(<span class="hljs-type"><span class="hljs-type">State</span></span>#state.listener), ok. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">OldVsn</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Extra</span></span>) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">NewState</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Convert</span></span> process state when code is changed. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- code_change(_OldVsn, <span class="hljs-type"><span class="hljs-type">State</span></span>, _Extra) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%%------------------------------------------------------------------------ %%% <span class="hljs-type"><span class="hljs-type">Internal</span></span> functions %%%------------------------------------------------------------------------ %% <span class="hljs-type"><span class="hljs-type">Taken</span></span> from prim_inet. <span class="hljs-type"><span class="hljs-type">We</span></span> are merely copying some socket options from the %% listening socket to the <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> client socket. set_sockopt(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>) -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> = inet_db:register_socket(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>, inet_tcp), <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> prim_inet:getopts(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, [active, nodelay, keepalive, delay_send, priority, tos]) of {ok, <span class="hljs-type"><span class="hljs-type">Opts</span></span>} -&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> prim_inet:setopts(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>, <span class="hljs-type"><span class="hljs-type">Opts</span></span>) of ok -&gt; ok; <span class="hljs-type"><span class="hljs-type">Error</span></span> -&gt; gen_tcp:close(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>), <span class="hljs-type"><span class="hljs-type">Error</span></span> end; <span class="hljs-type"><span class="hljs-type">Error</span></span> -&gt; gen_tcp:close(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>), <span class="hljs-type"><span class="hljs-type">Error</span></span> end.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このモジュールでは、 <i>init / 1</i>は2つのパラメーターを取ります-待機プロセスが開くポート番号とクライアント接続ハンドラーの名前。 初期化関数は、パッシブモードでソケットを開きます。 これは、クライアントから受信したデータの流れを制御できるようにするために行われます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このコードの最も興味深い部分は、 <i>prim_inet：async_accept / 2の</i>呼び出しです。 これを機能させるには、ソケットの登録とクライアントソケットのオプションのコピーを処理する<i>set_sockopt / 2</i>関数からOTP内部コードの一部をコピーする必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     クライアントソケットが接続されるとすぐに、ネットワークドライバーはメッセージ<i>{inet_async、ListSock、Ref、{OK、CliSocket}}</i>を使用してこれをリッスンプロセスに通知します。 現時点では、クライアントリクエストを処理してCliSocketに転送するプロセスのインスタンスを起動しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> クライアントメッセージを処理するプロセス </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>tcp_listener</i>は一般的な実装ですが、 <i>tcp_echo_fsm</i>はTCPサーバーの作成方法を記述するためのFSMスタブにすぎません。  2つの関数をこのモジュールからエクスポートする必要があります<i>。tcp_client_sup</i>スーパーバイザーの場合は<i>start_link / 0</i> 、リスニングプロセスの場合は<i>set_socket / 2</i>です<i>。</i> <i>{active、true}</i>オプション。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     間違った（リスニング）プロセスへの転送によるメッセージ損失を回避するために、リスニングプロセスとクライアントプロセスの間で使用される同期パターンを強調したいと思います。 ソケットを所有するプロセスは、パッシブモードでソケットを開いたままにします。 次に、クライアントプロセスは、リスニングプロセスからオプション（パッシブモードを含む）を継承するソケットを受け取ります。  <i>ソケットの</i>所有権は、 <i>gen_tcp</i>を呼び出すことによってクライアントプロセスに転送されます<i>。controling_process/ 2</i>および<i>set_socket / 2</i>は、ソケットからのメッセージの受信を開始できることをクライアントプロセスに通知します。 ソケットがアクティブモードに設定されるまで、受信したすべてのデータはソケットバッファに保存されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ソケットの所有権がWAIT_FOR_SOCKET状態のクライアントFSMプロセスに転送されると、 <i>{active、once}</i>モードが設定され、ネットワークドライバーが一度に1つのメッセージを送信できるようになります。 これは、データフローの制御を維持し、プロセスキューでのメッセージとTCPトラフィックの混合を回避するために使用されるOTP原則です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      FSM状態は、命名規則を使用する<i>tcp_echo_fsm</i>モジュールの特別な関数を使用して実装されます。  FSMは2つの状態で構成されています。  <i>WAIT_FOR_SOCKET</i>は、FSMがソケットの所有権を待機している初期状態です<i>。WAIT_FOR_DATA</i>は、クライアントからのTCPメッセージを待機している状態です。 この状態では、FSMは特別な「タイムアウト」メッセージも処理します。これは、クライアントからのアクティビティがないことを意味し、プロセスはクライアントとの接続を閉じます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs mel">-module(tcp_echo_fsm). -author(<span class="hljs-string"><span class="hljs-string">'saleyn@gmail.com'</span></span>). -behaviour(gen_fsm). -export([start_link/<span class="hljs-number"><span class="hljs-number">0</span></span>, set_socket/<span class="hljs-number"><span class="hljs-number">2</span></span>]). %% gen_fsm callbacks -export([init/<span class="hljs-number"><span class="hljs-number">1</span></span>, handle_event/<span class="hljs-number"><span class="hljs-number">3</span></span>, handle_sync_event/<span class="hljs-number"><span class="hljs-number">4</span></span>, handle_info/<span class="hljs-number"><span class="hljs-number">3</span></span>, terminate/<span class="hljs-number"><span class="hljs-number">3</span></span>, code_change/<span class="hljs-number"><span class="hljs-number">4</span></span>]). %% FSM States -export([ <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> ]). -record(state, { socket, % client socket addr % client address }). -define(TIMEOUT, <span class="hljs-number"><span class="hljs-number">120000</span></span>). %%%------------------------------------------------------------------------ %%% API %%%------------------------------------------------------------------------ %%------------------------------------------------------------------------- %% @spec (Socket) -&gt; {ok,Pid} | ignore | {<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>,Error} %% @doc To be called by the supervisor <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> order to start the server. %% If init/<span class="hljs-number"><span class="hljs-number">1</span></span> fails with Reason, the function returns {<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>,Reason}. %% If init/<span class="hljs-number"><span class="hljs-number">1</span></span> returns {stop,Reason} or ignore, the process is %% terminated and the function returns {<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>,Reason} or ignore, %% respectively. %% @end %%------------------------------------------------------------------------- start_link() -&gt; gen_fsm:start_link(?MODULE, [], []). set_socket(Pid, Socket) when is_pid(Pid), is_port(Socket) -&gt; gen_fsm:send_event(Pid, {socket_ready, Socket}). %%%------------------------------------------------------------------------ %%% Callback functions from gen_server %%%------------------------------------------------------------------------ %%------------------------------------------------------------------------- %% Func: init/<span class="hljs-number"><span class="hljs-number">1</span></span> %% Returns: {ok, StateName, StateData} | %% {ok, StateName, StateData, Timeout} | %% ignore | %% {stop, StopReason} %% @private %%------------------------------------------------------------------------- init([]) -&gt; process_flag(trap_exit, true), {ok, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>, #state{}}. %%------------------------------------------------------------------------- %% Func: StateName/<span class="hljs-number"><span class="hljs-number">2</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} %% @private %%------------------------------------------------------------------------- <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>({socket_ready, Socket}, State) when is_port(Socket) -&gt; % Now we own the socket inet:setopts(Socket, [{active, once}, {packet, <span class="hljs-number"><span class="hljs-number">2</span></span>}, binary]), {ok, {IP, _Port}} = inet:peername(Socket), {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>, State#state{socket=Socket, addr=IP}, ?TIMEOUT}; <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>(Other, State) -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"State: 'WAIT_FOR_SOCKET'. Unexpected message: ~p\n"</span></span>, [Other]), %% Allow to receive async messages {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>, State}. %% Notification <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> coming from client <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>({data, Data}, #state{socket=S} = State) -&gt; ok = gen_tcp:send(S, Data), {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>, State, ?TIMEOUT}; <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>(timeout, State) -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"~p Client connection timeout - closing.\n"</span></span>, [self()]), {stop, normal, State}; <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>(Data, State) -&gt; io:<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>(<span class="hljs-string"><span class="hljs-string">"~p Ignoring data: ~p\n"</span></span>, [self(), Data]), {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>, State, ?TIMEOUT}. %%------------------------------------------------------------------------- %% Func: handle_event/<span class="hljs-number"><span class="hljs-number">3</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} %% @private %%------------------------------------------------------------------------- handle_event(Event, StateName, StateData) -&gt; {stop, {StateName, undefined_event, Event}, StateData}. %%------------------------------------------------------------------------- %% Func: handle_sync_event/<span class="hljs-number"><span class="hljs-number">4</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {reply, Reply, NextStateName, NextStateData} | %% {reply, Reply, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} | %% {stop, Reason, Reply, NewStateData} %% @private %%------------------------------------------------------------------------- handle_sync_event(Event, _From, StateName, StateData) -&gt; {stop, {StateName, undefined_event, Event}, StateData}. %%------------------------------------------------------------------------- %% Func: handle_info/<span class="hljs-number"><span class="hljs-number">3</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} %% @private %%------------------------------------------------------------------------- handle_info({tcp, Socket, Bin}, StateName, #state{socket=Socket} = StateData) -&gt; % Flow <span class="hljs-keyword"><span class="hljs-keyword">control</span></span>: enable forwarding of next TCP message inet:setopts(Socket, [{active, once}]), ?MODULE:StateName({data, Bin}, StateData); handle_info({tcp_closed, Socket}, _StateName, #state{socket=Socket, addr=Addr} = StateData) -&gt; error_logger:info_msg(<span class="hljs-string"><span class="hljs-string">"~p Client ~p disconnected.\n"</span></span>, [self(), Addr]), {stop, normal, StateData}; handle_info(_Info, StateName, StateData) -&gt; {noreply, StateName, StateData}. %%------------------------------------------------------------------------- %% Func: terminate/<span class="hljs-number"><span class="hljs-number">3</span></span> %% Purpose: Shutdown the fsm %% Returns: any %% @private %%------------------------------------------------------------------------- terminate(_Reason, _StateName, #state{socket=Socket}) -&gt; (<span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> gen_tcp:close(Socket)), ok. %%------------------------------------------------------------------------- %% Func: code_change/<span class="hljs-number"><span class="hljs-number">4</span></span> %% Purpose: Convert process state when code is changed %% Returns: {ok, NewState, NewStateData} %% @private %%------------------------------------------------------------------------- code_change(_OldVsn, StateName, StateData, _Extra) -&gt; {ok, StateName, StateData}.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> アプリケーションの説明 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OTPアプリケーションの作成に必要なもう1つの部分は、アプリケーション名、バージョン、開始モジュール、および環境変数を含む構成ファイルを作成することです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     アプリケーションファイル（tcp_server.app）： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs mel">{application, tcp_server, [ {description, <span class="hljs-string"><span class="hljs-string">"Demo TCP server"</span></span>}, {vsn, <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>}, {id, <span class="hljs-string"><span class="hljs-string">"tcp_server"</span></span>}, {modules, [tcp_listener, tcp_echo_fsm]}, {registered, [tcp_server_sup, tcp_listener]}, {applications, [kernel, stdlib]}, %% %% mod: Specify the module name to start the application, plus args %% {mod, {tcp_server_app, []}}, {<span class="hljs-keyword"><span class="hljs-keyword">env</span></span>, []} ] }.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> 編集 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このアプリケーション用に次のディレクトリ構造を作成します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs coffeescript">.<span class="hljs-regexp"><span class="hljs-regexp">/tcp_server ./tcp_server/ebin/</span></span> ./tcp_server/ebin/tcp_server.app ./tcp_server/src/tcp_server_app.erl ./tcp_server/src/tcp_listener.erl ./tcp_server/src/tcp_echo_fsm.erl</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs ruby">$ cd tcp_server/src $ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tcp*.erl ; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> erlc +debug_info -o ../ebin $f</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> 打ち上げ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      SASLをサポートするErlangシェルを起動して、アプリケーションのプロセスとエラーレポートのステータスを確認できるようにします。 さらに、スーパーバイザーの階層を視覚的に調べるために、appmonアプリケーションを起動します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs dos">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ebin $ erl -boot start_sasl ... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; appmon:<span class="hljs-built_in"><span class="hljs-built_in">start</span></span>(). {ok,&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">44</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;} <span class="hljs-number"><span class="hljs-number">2</span></span>&gt; application:<span class="hljs-built_in"><span class="hljs-built_in">start</span></span>(tcp_server). ok</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      appmonアプリケーションの<i>tcp_server</i>ボタンをクリックして、アプリケーションスーパーバイザーの階層を表示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">3&gt; </span></span>{ok,S} = gen_tcp:connect({<span class="hljs-number"><span class="hljs-number">127</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},<span class="hljs-number"><span class="hljs-number">2222</span></span>,[{packet,<span class="hljs-number"><span class="hljs-number">2</span></span>}]). {ok,#Port&lt;<span class="hljs-number"><span class="hljs-number">0.150</span></span>&gt;}</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     新しいEchoサーバークライアント接続を開始しました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">4&gt; </span></span>gen_tcp:send(S,&lt;&lt;<span class="hljs-string"><span class="hljs-string">"hello"</span></span>&gt;&gt;). ok <span class="hljs-number"><span class="hljs-number">5</span></span>&gt; f(M), receive M -&gt; M end. {tcp,#Port&lt;<span class="hljs-number"><span class="hljs-number">0.150</span></span>&gt;,<span class="hljs-string"><span class="hljs-string">"hello"</span></span>}</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     エコーサーバーが期待どおりに動作していることを確認しました。 次に、サーバーにクライアント接続を「配置」して、エラーメッセージの生成を見てみましょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">6&gt; </span></span>[{_,Pid,_,_}] = supervisor:which_children(tcp_client_sup). [{undefined,&lt;<span class="hljs-number"><span class="hljs-number">0.64</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,worker,[]}] <span class="hljs-number"><span class="hljs-number">7</span></span>&gt; exit(Pid,kill). true =SUPERVISOR REPORT==== <span class="hljs-number"><span class="hljs-number">31</span></span>-Jul-<span class="hljs-number"><span class="hljs-number">2007</span></span>::<span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span> === Supervisor: {local,tcp_client_sup} Context: child_terminated Reason: killed Offender: [{pid,&lt;<span class="hljs-number"><span class="hljs-number">0.77</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;}, {name,undefined}, {mfa,{tcp_echo_fsm,start_link,[]}}, {restart_type,temporary}, {shutdown,<span class="hljs-number"><span class="hljs-number">2000</span></span>}, {child_type,worker}]</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     サーバーが多数の接続で負荷がかかっている場合、リスニングプロセスはオペレーティングシステムで設定された特定の制限を超えると新しい接続を受け入れない場合があることに注意してください。 この場合、エラーメッセージが表示されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"too many open files"</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> おわりに </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OTPは、ノンブロッキングTCPサーバーを構築するためのビルディングブロックを提供します。 このガイドでは、標準のOTP動作を使用して簡単なサーバーを作成する方法を示します。 </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J111263/index.html">PythonのICQボット</a></li>
<li><a href="../J111264/index.html">Drupal Forms API。 パート1-Drupal 6用</a></li>
<li><a href="../J111265/index.html">データベース構造のチーム開発の組織</a></li>
<li><a href="../J111266/index.html">ptraceを使用したシステムコールのインターセプト</a></li>
<li><a href="../J111267/index.html">Zappos.com：靴で10億ドルを稼ぐ方法は？</a></li>
<li><a href="../J111270/index.html">Googleドキュメントのアニメーション</a></li>
<li><a href="../J111271/index.html">開発された触覚技術市場向けの辞書</a></li>
<li><a href="../J111272/index.html">ポストマシンでのプログラミング</a></li>
<li><a href="../J111274/index.html">クラウドコンピューティング、上司向けの概要または記事</a></li>
<li><a href="../J111275/index.html">Visual Studioを使用したWindows用アセンブラー</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
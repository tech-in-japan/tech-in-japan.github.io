<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¼ ğŸ–•ğŸ» ğŸš¶ å®Ÿè·µçš„ãªPythoné–‹ç™ºè€…å‘ã‘ã®AsyncIO â¤ï¸ ğŸ‘°ğŸ¼ ãŠ—ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã€Œã©ã‚Œã ã‘ã‚†ã£ãã‚Šã¨å‹•ä½œã™ã‚‹ã®ã‹ã€å‘¼ã³å‡ºã—ã‚’ä¸¦åˆ—åŒ–ã™ã‚‹ã¨ã©ã†ãªã‚‹ã®ã‹ï¼Ÿã€ 
  
 
  
 ãã‚Œã‹ã‚‰asyncioã«å‡ºä¼šã„ã€ã™ã¹ã¦ãŒå¤‰ã‚ã‚Šã¾ã—ãŸã€‚ 
  
  
  
 èª°ã‚‚çŸ¥ã‚‰ãªã„å ´åˆã€asyncioã¯ç«¶åˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®çµ„ç¹”å‘ã‘ã®æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚Šã€Python 3.4ã§ç™»å ´ã—ã¾ã—ãŸã€‚ é...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>å®Ÿè·µçš„ãªPythoné–‹ç™ºè€…å‘ã‘ã®AsyncIO</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/337420/">  ã€Œã©ã‚Œã ã‘ã‚†ã£ãã‚Šã¨å‹•ä½œã™ã‚‹ã®ã‹ã€å‘¼ã³å‡ºã—ã‚’ä¸¦åˆ—åŒ–ã™ã‚‹ã¨ã©ã†ãªã‚‹ã®ã‹ï¼Ÿã€ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãã‚Œã‹ã‚‰<a href="https://docs.python.org/dev/library/asyncio.html">asyncio</a>ã«å‡ºä¼šã„ã€ã™ã¹ã¦ãŒå¤‰ã‚ã‚Šã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     èª°ã‚‚çŸ¥ã‚‰ãªã„å ´åˆã€asyncioã¯ç«¶åˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®çµ„ç¹”å‘ã‘ã®æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚Šã€Python 3.4ã§ç™»å ´ã—ã¾ã—ãŸã€‚ éåŒæœŸã‚³ãƒ¼ãƒ‰ã§ã‚³ãƒ«ãƒ¼ãƒãƒ³ã¨å°†æ¥ã®ä½¿ç”¨ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™-ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã—ã§ã‚³ãƒ¼ãƒ‰ãŒåŒæœŸã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å½“æ™‚ã€ä¼¼ãŸã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ãŒã„ãã¤ã‹ã‚ã‚Šã€ãã®ã†ã¡ã®1ã¤ãŒéš›ç«‹ã£ã¦ã„ãŸã“ã¨ã‚’<a href="http://www.gevent.org/">æ€ã„å‡ºã—</a>ã¾ã™ã€‚ã“ã‚ŒãŒ<a href="http://www.gevent.org/">gevent</a>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚  <a href="http://sdiehl.github.io/gevent-tutorial/">å®Ÿè·µçš„ãªpythoné–‹ç™ºè€…å‘ã‘</a>ã®å„ªã‚ŒãŸ<a href="http://sdiehl.github.io/gevent-tutorial/">geventãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a>ã‚’èª­ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ã“ã®<a href="http://sdiehl.github.io/gevent-tutorial/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€</a>ä½œæ¥­<a href="http://sdiehl.github.io/gevent-tutorial/">æ–¹æ³•</a>ã ã‘ã§ãªãã€ä¸€èˆ¬ã«ç«¶åˆãŒç†è§£ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã«ã¤ã„ã¦ã‚‚<a href="http://sdiehl.github.io/gevent-tutorial/">èª¬æ˜ã—ã¦</a>ã„ã¾ã™ã€‚ ç§ã¯ã“ã®è¨˜äº‹ãŒã¨ã¦ã‚‚æ°—ã«å…¥ã£ãŸã®ã§ã€asyncioã®æ¦‚è¦ã‚’æ›¸ããŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å°ã•ãªå…è²¬äº‹é …ã¯ã€geventå¯¾asyncioã®è¨˜äº‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ ãƒã‚¤ã‚µãƒ³ãƒ­ãƒ¼ãƒ‰ã¯å½¼ã®<a href="http://www.getoffmalawn.com/blog/playing-with-asyncio">ãƒ¡ãƒ¢</a>ã§ã™ã§ã«ã“ã‚Œã‚’ã—ã¦ã„ã¾ã—ãŸã€‚  <a href="https://github.com/yeraydiazdiaz/asyncio-ftwpd">GitHubã§</a>ã™ã¹ã¦ã®ä¾‹ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚ãªãŸã¯ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ã‚’å¾…ã¤ã“ã¨ãŒã§ããªã„ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã¾ã™ãŒã€æœ€åˆã«å°†æ¥çš„ã«ç§ãŸã¡ã«å½¹ç«‹ã¤ã„ãã¤ã‹ã®æ¦‚å¿µã‚’æ¤œè¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ã‚¹ãƒ¬ãƒƒãƒ‰ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã€ã‚³ãƒ«ãƒ¼ãƒãƒ³ã€ãŠã‚ˆã³å…ˆç‰© </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚¹ãƒ¬ãƒƒãƒ‰ã¯æœ€ã‚‚ä¸€èˆ¬çš„ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ èã„ãŸã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€asyncioã§ã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚µã‚¤ã‚¯ãƒ«ã€ã‚³ãƒ«ãƒ¼ãƒãƒ³ã€æœªæ¥ãªã©ã€ä»–ã®ã„ãã¤ã‹ã®æ¦‚å¿µã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> ã»ã¨ã‚“ã©ã®<a href="https://docs.python.org/dev/library/asyncio-eventloop.html">å ´åˆ</a> ã€ <a href="https://docs.python.org/dev/library/asyncio-eventloop.html">ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—</a>ã¯ã•ã¾ã–ã¾ãªã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œã®ã¿ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚å—ä¿¡ã‚’ç™»éŒ²ã—ã€é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§é–‹å§‹ã—ã¾ã™ </li><li>  <a href="https://docs.python.org/3.5/library/asyncio-task.html">ã‚³ãƒ«ãƒ¼ãƒãƒ³</a>ã¯ã€Pythonã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨åŒæ§˜ã«ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã«åˆ¶å¾¡ã‚’æˆ»ã™ã“ã¨ãŒæœŸå¾…ã•ã‚Œã‚‹ï¼ˆ <b>await</b> ï¼‰ç‰¹åˆ¥ãªé–¢æ•°ã§ã™ã€‚ ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã‚’é€šã˜ã¦æ­£ç¢ºã«èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ </li><li>  <a href="https://docs.python.org/3.5/library/asyncio-task.html">å…ˆç‰©</a>ã¯ã€ã‚¿ã‚¹ã‚¯ã®ç¾åœ¨ã®çµæœãŒä¿å­˜ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ ã“ã‚Œã¯ã€ã‚¿ã‚¹ã‚¯ãŒã¾ã å‡¦ç†ã•ã‚Œã¦ã„ãªã„ã‹ã€çµæœãŒã™ã§ã«å–å¾—ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†æƒ…å ±ã§ã™ã€‚ ã¾ãŸã¯å¤šåˆ†ä¾‹å¤– </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã¨ã¦ã‚‚ç°¡å˜ã§ã™ã‹ï¼Ÿ è¡Œã“ã†ï¼ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> åŒæœŸãŠã‚ˆã³éåŒæœŸå®Ÿè¡Œ </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ã€Œ <a href="https://vimeo.com/49718712">ç«¶äº‰ã¯ä¸¦è¡Œæ€§ã§ã¯ãªãã€ã‚ˆã‚Šè‰¯ã„</a> ã€ã¨ã„ã†ãƒ“ãƒ‡ã‚ª<a href="https://vimeo.com/49718712">ã§ã¯ã€</a>ãƒ­ãƒ–ãƒ‘ã‚¤ã‚¯ãŒé‡è¦ãªã“ã¨ã«æ³¨æ„ã‚’å‘ã‘ã¦ã„ã¾ã™ã€‚ ã‚¿ã‚¹ã‚¯ã‚’ç«¶äº‰åŠ›ã®ã‚ã‚‹ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã«åˆ†å‰²ã™ã‚‹ã“ã¨ã¯ã€å½¼ãŒã“ã‚Œã‚‰ã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚‚ç®¡ç†ã—ã¦ã„ã‚‹å ´åˆã«ã®ã¿ã€ã“ã®ã‚ˆã†ãªä¸¦åˆ—å‡¦ç†ã§ã®ã¿å¯èƒ½ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Asyncioã‚‚åŒã˜ã§ã™-ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ«ãƒ¼ãƒãƒ³ã¨ã—ã¦å®šç¾©ã•ã‚ŒãŸãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ã«åˆ†å‰²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åŒæ™‚å®Ÿè¡Œã‚’å«ã‚ã€å¿…è¦ã«å¿œã˜ã¦ãã‚Œã‚‰ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ ã‚³ãƒ«ãƒ¼ãƒãƒ³ã«ã¯yieldã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ã€å®Œäº†ã™ã‚‹ã®ã‚’å¾…ã£ã¦ã„ã‚‹ä»–ã®ã‚¿ã‚¹ã‚¯ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹å ´æ‰€ã‚’æ±ºå®šã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      asyncioã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã«ã¯ã€yieldãŒè²¬ä»»ã‚’è² ã„ã¾ã™ã€‚yieldã¯åˆ¶å¾¡ã‚’ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã«æˆ»ã—ã€æ¬¡ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã¯åˆ¥ã®ã‚³ãƒ«ãƒ¼ãƒãƒ³ã«é€²ã¿ã¾ã™ã€‚ åŸºæœ¬çš„ãªä¾‹ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">'Running in foo'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Explicit context switch to foo again'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">'Explicit context to bar'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(<span class="hljs-number"><span class="hljs-number">0</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Implicit context switch back to bar'</span></span>) ioloop = asyncio.get_event_loop() tasks = [ioloop.create_task(foo()), ioloop.create_task(bar())] wait_tasks = asyncio.wait(tasks) ioloop.run_until_complete(wait_tasks) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 1-sync-async-execution-asyncio-await.py Running <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> foo Explicit context to bar Explicit context switch to foo again Implicit context switch back to bar</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      *æœ€åˆã«ã€asyncioã‹ã‚‰ã®<b>ã‚¹ãƒªãƒ¼ãƒ—</b>ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã®ãµã‚Šã‚’ã™ã‚‹ã„ãã¤ã‹ã®ç°¡å˜ãªã‚³ãƒ«ãƒ¼ãƒãƒ³ã‚’ç™ºè¡¨ã—ã¾ã—ãŸ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      *ã‚³ãƒ«ãƒ¼ãƒãƒ³ã¯åˆ¥ã®ã‚³ãƒ«ãƒ¼ãƒãƒ³ã‹ã‚‰ã®ã¿èµ·å‹•ã™ã‚‹ã‹ã€ <b>create_task</b>ã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚¹ã‚¯ã«ãƒ©ãƒƒãƒ—ã§ã<b>ã¾ã™ã€‚</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      * 2ã¤ã®ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ãŸã‚‰ã€ <b>wait</b>ã‚’ä½¿ç”¨ã—ã¦ãã‚Œã‚‰ã‚’çµåˆ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      *æœ€å¾Œã«ã€ <b>run_until_completeã‚’</b>ä»‹ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã«å®Ÿè¡Œã‚’é€ä¿¡ã—ã¾ã™ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã—ãŸãŒã£ã¦ã€ã‚ã‚‹ç¨®ã®ã‚³ãƒ«ãƒ¼ãƒãƒ³ã§<b>await</b>ã‚’ä½¿ç”¨ã—<b>ã¦</b> ã€ã‚³ãƒ«ãƒ¼ãƒãƒ³ãŒã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã«åˆ¶å¾¡ã‚’æˆ»ã™ã“ã¨ãŒã§ãã‚‹ã“ã¨ã‚’å®£è¨€ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ¬¡ã®ã‚¿ã‚¹ã‚¯ã®ã„ãã¤ã‹ãŒèµ·å‹•ã•ã‚Œã¾ã™ã€‚ åŒã˜ã“ã¨ãŒbarã§ã‚‚èµ·ã“ã‚Šã¾ã™ï¼š <b>await asyncio.sleep</b>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã«æˆ»ã•ã‚Œã€é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§fooã«æˆ»ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2ã¤ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚¿ã‚¹ã‚¯ã‚’æƒ³åƒã—ã¦ãã ã•ã„ã€‚gr1ã¨gr2ã¯ã€ç‰¹å®šã®ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ã‹ã®ã‚ˆã†ã§ã‚ã‚Šã€å¿œç­”ã‚’å¾…ã£ã¦ã„ã‚‹é–“ã€3ç•ªç›®ã®é–¢æ•°ã¯éåŒæœŸã«å‹•ä½œã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio start = time.time() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'at %1.1f seconds'</span></span> % (time.time() - start) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gr1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Busy waits for a second, but we don't want to stick around... print('gr1 started work: {}'.format(tic())) await asyncio.sleep(2) print('gr1 ended work: {}'.format(tic())) async def gr2(): # Busy waits for a second, but we don't want to stick around... print('gr2 started work: {}'.format(tic())) await asyncio.sleep(2) print('gr2 Ended work: {}'.format(tic())) async def gr3(): print("Let's do some stuff while the coroutines are blocked, {}".format(tic())) await asyncio.sleep(1) print("Done!") ioloop = asyncio.get_event_loop() tasks = [ ioloop.create_task(gr1()), ioloop.create_task(gr2()), ioloop.create_task(gr3()) ] ioloop.run_until_complete(asyncio.wait(tasks)) ioloop.close()</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 1b-cooperatively-scheduled-asyncio-await.py gr1 started work: at 0.0 seconds gr2 started work: at 0.0 seconds Lets <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> some stuff <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> the coroutines are blocked, at 0.0 seconds Done! gr1 ended work: at 2.0 seconds gr2 Ended work: at 2.0 seconds</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I / Oã¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã«æ³¨æ„ã‚’æ‰•ã„ã€ã“ã‚Œã‚‰ã™ã¹ã¦ã‚’å˜ä¸€ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã«åã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  I / Oå¾…æ©Ÿã«ã‚ˆã£ã¦2ã¤ã®ã‚¿ã‚¹ã‚¯ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹é™ã‚Šã€3ç•ªç›®ã®æ©Ÿèƒ½ã¯ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µæ™‚é–“ã‚’å æœ‰ã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> å®Ÿè¡Œé †åº </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     åŒæœŸã®ä¸–ç•Œã§ã¯ã€é †ç•ªã«è€ƒãˆã¾ã™ã€‚ å®Œäº†ã™ã‚‹ã¾ã§ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã‚¿ã‚¹ã‚¯ã®ãƒªã‚¹ãƒˆãŒã‚ã‚‹å ´åˆã€ãã‚Œã‚‰ã¯å‡¦ç†ã•ã‚ŒãŸã®ã¨åŒã˜é †åºã§çµ‚äº†ã—ã¾ã™ã€‚ ã—ã‹ã—ã€ç«¶äº‰ã®å ´åˆã€ã“ã‚Œã‚’ç¢ºèªã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">task</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pid)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""Synchronous non-deterministic task. """</span></span> sleep(random.randint(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) * <span class="hljs-number"><span class="hljs-number">0.001</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Task %s done'</span></span> % pid) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">task_coro</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pid)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""Coroutine non-deterministic task """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(random.randint(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) * <span class="hljs-number"><span class="hljs-number">0.001</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Task %s done'</span></span> % pid) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">synchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>): task(i) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> tasks = [asyncio.ensure_future(task_coro(i)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait(tasks) print(<span class="hljs-string"><span class="hljs-string">'Synchronous:'</span></span>) synchronous() ioloop = asyncio.get_event_loop() print(<span class="hljs-string"><span class="hljs-string">'Asynchronous:'</span></span>) ioloop.run_until_complete(asynchronous()) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 1c-determinism-sync-async-asyncio-await.py Synchronous: Task 1 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 2 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 3 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 4 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 5 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 6 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 7 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 8 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 9 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Asynchronous: Task 2 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 5 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 6 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 8 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 9 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 1 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 4 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 3 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> Task 7 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚‚ã¡ã‚ã‚“ã€å„ã‚¿ã‚¹ã‚¯ã¯ãƒ©ãƒ³ãƒ€ãƒ ã«ã‚¹ãƒªãƒ¼ãƒ—çŠ¶æ…‹ã«ãªã‚‹ãŸã‚ã€çµæœã¯ç•°ãªã‚Šã¾ã™ãŒã€å¸¸ã«åŒã˜é †åºã§ã‚¿ã‚¹ã‚¯ã‚’è¨­å®šã—ã¾ã™ãŒã€å®Ÿè¡Œçµæœã¯å®Œå…¨ã«ç•°ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã¾ãŸã€ã‹ãªã‚Šå˜ç´”ãªã‚¿ã‚¹ã‚¯ã®ã‚³ãƒ«ãƒ¼ãƒãƒ³ã«ã‚‚æ³¨æ„ã—ã¦ãã ã•ã„ã€‚  asyncioã§ã¯ã€éãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè£…ã™ã‚‹éš›ã«é­”æ³•ã¯ãªã„ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ å®Ÿè£…ä¸­ã€asyncioã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å€‹åˆ¥ã«å­˜åœ¨ã—ã¾ã—ãŸã€‚ æ®‹ã‚Šã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°æ©Ÿèƒ½ã®ã¿ã‚’æä¾›ã—ã¾ã—ãŸã€‚  <a href="https://docs.python.org/3/library/concurrent.futures.html">concurrent.futures</a>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã¾ãŸã¯ãƒ—ãƒ­ã‚»ã‚¹ã§ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã‚¿ã‚¹ã‚¯ã‚’ãƒ©ãƒƒãƒ—ã—ã€asyncioã§ä½¿ç”¨ã™ã‚‹ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚’å–å¾—ã§ãã¾ã™ã€‚  <a href="https://github.com/yeraydiazdiaz/asyncio-ftwpd">GitHubã«ã¯</a>ãã®ã‚ˆã†ãªä¾‹<a href="https://github.com/yeraydiazdiaz/asyncio-ftwpd">ãŒ</a>ã„ãã¤ã‹<a href="https://github.com/yeraydiazdiaz/asyncio-ftwpd">ã‚ã‚Šã¾ã™</a> ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã‚Œã¯ãŠãã‚‰ãasyncioã‚’ä½¿ç”¨ã™ã‚‹ã¨ãã®ä¸»ãªæ¬ ç‚¹ã§ã™ãŒã€ã“ã®å•é¡Œã®è§£æ±ºã«å½¹ç«‹ã¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ—¢ã«ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     æœ€ã‚‚ä¸€èˆ¬çš„ãªãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã‚¿ã‚¹ã‚¯ã¯ã€HTTPè¦æ±‚ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ã™ã€‚  GitHubã§å…¬é–‹ã‚¤ãƒ™ãƒ³ãƒˆã«é–¢ã™ã‚‹æƒ…å ±ã‚’å—ä¿¡ã™ã‚‹ä¾‹ã‚’<a href="http://tp.readthedocs.org/">ä½¿ç”¨</a>ã—ã¦ã€å„ªã‚ŒãŸ<a href="http://tp.readthedocs.org/">aiohttp</a>ãƒ©ã‚¤ãƒ–ãƒ©ãƒª<a href="http://tp.readthedocs.org/">ã‚’æ“ä½œ</a>ã—ã¦<a href="http://tp.readthedocs.org/">ã¿</a>ã¾ã—ã‚‡ã†ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> urllib.request <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp URL = <span class="hljs-string"><span class="hljs-string">'https://api.github.com/events'</span></span> MAX_CLIENTS = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_sync</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pid)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">'Fetch sync process {} started'</span></span>.format(pid)) start = time.time() response = urllib.request.urlopen(URL) datetime = response.getheader(<span class="hljs-string"><span class="hljs-string">'Date'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Process {}: {}, took: {:.2f} seconds'</span></span>.format( pid, datetime, time.time() - start)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_async</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pid)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">'Fetch async process {} started'</span></span>.format(pid)) start = time.time() response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, URL) datetime = response.headers.get(<span class="hljs-string"><span class="hljs-string">'Date'</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Process {}: {}, took: {:.2f} seconds'</span></span>.format( pid, datetime, time.time() - start)) response.close() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> datetime <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">synchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> start = time.time() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, MAX_CLIENTS + <span class="hljs-number"><span class="hljs-number">1</span></span>): fetch_sync(i) print(<span class="hljs-string"><span class="hljs-string">"Process took: {:.2f} seconds"</span></span>.format(time.time() - start)) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> start = time.time() tasks = [asyncio.ensure_future( fetch_async(i)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, MAX_CLIENTS + <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait(tasks) print(<span class="hljs-string"><span class="hljs-string">"Process took: {:.2f} seconds"</span></span>.format(time.time() - start)) print(<span class="hljs-string"><span class="hljs-string">'Synchronous:'</span></span>) synchronous() print(<span class="hljs-string"><span class="hljs-string">'Asynchronous:'</span></span>) ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous()) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 1d-async-fetch-from-server-asyncio-await.py Synchronous: Fetch sync process 1 started Process 1: Wed, 17 Feb 2016 13:10:11 GMT, took: 0.54 seconds Fetch sync process 2 started Process 2: Wed, 17 Feb 2016 13:10:11 GMT, took: 0.50 seconds Fetch sync process 3 started Process 3: Wed, 17 Feb 2016 13:10:12 GMT, took: 0.48 seconds Process took: 1.54 seconds Asynchronous: Fetch async process 1 started Fetch async process 2 started Fetch async process 3 started Process 3: Wed, 17 Feb 2016 13:10:12 GMT, took: 0.50 seconds Process 2: Wed, 17 Feb 2016 13:10:12 GMT, took: 0.52 seconds Process 1: Wed, 17 Feb 2016 13:10:12 GMT, took: 0.54 seconds Process took: 0.54 seconds</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã“ã§ã¯ã€ã„ãã¤ã‹ã®ç‚¹ã«æ³¨æ„ã™ã‚‹ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã¾ãšã€æ™‚é–“å·®-éåŒæœŸå‘¼ã³å‡ºã—ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åŒæ™‚ã«å®Ÿè¡Œã—ã¾ã™ã€‚ å‰ã«è¿°ã¹ãŸã‚ˆã†ã«ã€ãã‚Œãã‚ŒãŒåˆ¶å¾¡ã‚’æ¬¡ã¸ç§»ã—ã€å®Œäº†æ™‚ã«çµæœã‚’è¿”ã—ã¾ã—ãŸã€‚ ã¤ã¾ã‚Šã€å®Ÿè¡Œé€Ÿåº¦ã¯0.54ç§’ã ã‘ã‹ã‹ã£ãŸæœ€ã‚‚é…ã„è¦æ±‚ã®å®Ÿè¡Œæ™‚é–“ã«ç›´æ¥ä¾å­˜ã—ã¾ã™ã€‚ ã„ã„ã§ã™ã­ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ç¬¬äºŒã«ã€ã‚³ãƒ¼ãƒ‰ãŒã©ã‚Œã ã‘åŒæœŸçš„ã«è¦‹ãˆã‚‹ã‹ã€‚ ã“ã‚Œã¯æœ¬è³ªçš„ã«åŒã˜ã“ã¨ã§ã™ï¼ ä¸»ãªé•ã„ã¯ã€ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œã€ä½œæˆã€ãŠã‚ˆã³ã‚¿ã‚¹ã‚¯ã®å®Œäº†ã‚’å¾…æ©Ÿã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å®Ÿè£…ã«é–¢é€£ã—ã¦ã„ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ç«¶äº‰åŠ›ã®å‰µå‡º </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã‚Œã¾ã§ã€ã‚³ãƒ«ãƒ¼ãƒãƒ³ã‹ã‚‰çµæœã‚’ä½œæˆãŠã‚ˆã³å–å¾—ã—ã€ä¸€é€£ã®ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã—ã¦ãã®å®Œäº†ã‚’å¾…æ©Ÿã™ã‚‹ãŸã‚ã®å”¯ä¸€ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ãã¾ã—ãŸã€‚ ãŸã ã—ã€ã„ãã¤ã‹ã®æ–¹æ³•ã§ã‚³ãƒ«ãƒ¼ãƒãƒ³ã‚’å®Ÿè¡Œã—ã¦çµæœã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«è¨ˆç”»ã§ãã¾ã™ã€‚  GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã®çµæœã‚’å—ã‘å–ã£ãŸã¨ãã«å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹çŠ¶æ³ã‚’æƒ³åƒã—ã¦ãã ã•ã„ã€‚ å®Ÿéš›ã€å®Ÿè£…ã¯å‰ã®ã‚‚ã®ã¨éå¸¸ã«ä¼¼ã¦ã„ã¾ã™ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp URL = <span class="hljs-string"><span class="hljs-string">'https://api.github.com/events'</span></span> MAX_CLIENTS = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_async</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pid)</span></span></span><span class="hljs-function">:</span></span> start = time.time() sleepy_time = random.randint(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) print(<span class="hljs-string"><span class="hljs-string">'Fetch async process {} started, sleeping for {} seconds'</span></span>.format( pid, sleepy_time)) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(sleepy_time) response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, URL) datetime = response.headers.get(<span class="hljs-string"><span class="hljs-string">'Date'</span></span>) response.close() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Process {}: {}, took: {:.2f} seconds'</span></span>.format( pid, datetime, time.time() - start) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> start = time.time() futures = [fetch_async(i) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, MAX_CLIENTS + <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, future <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(asyncio.as_completed(futures)): result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> future print(<span class="hljs-string"><span class="hljs-string">'{} {}'</span></span>.format(<span class="hljs-string"><span class="hljs-string">"&gt;&gt;"</span></span> * (i + <span class="hljs-number"><span class="hljs-number">1</span></span>), result)) print(<span class="hljs-string"><span class="hljs-string">"Process took: {:.2f} seconds"</span></span>.format(time.time() - start)) ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous()) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 2a-async-fetch-from-server-as-completed-asyncio-await.py Fetch async process 1 started, sleeping <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> 4 seconds Fetch async process 3 started, sleeping <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> 5 seconds Fetch async process 2 started, sleeping <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> 3 seconds &gt;&gt; Process 2: Wed, 17 Feb 2016 13:55:19 GMT, took: 3.53 seconds &gt;&gt;&gt;&gt; Process 1: Wed, 17 Feb 2016 13:55:20 GMT, took: 4.49 seconds &gt;&gt;&gt;&gt;&gt;&gt; Process 3: Wed, 17 Feb 2016 13:55:21 GMT, took: 5.48 seconds Process took: 5.48 seconds</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¦‹ã¦ãã ã•ã„-ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’åŒæ™‚ã«èµ·å‹•ã—ã¾ã—ãŸãŒã€å®Œäº†é †ã«å‡¦ç†ã•ã‚Œã¾ã—ãŸã€‚ ã“ã®å ´åˆã®ã‚³ãƒ¼ãƒ‰ã¯ã‚ãšã‹ã«ç•°ãªã‚Šã¾ã™ã€‚ã‚³ãƒ«ãƒ¼ãƒãƒ³ã‚’ãƒªã‚¹ãƒˆã«ãƒ‘ãƒƒã‚¯ã—ã¾ã™ã€‚å„ã‚³ãƒ«ãƒ¼ãƒãƒ³ã¯å®Ÿè¡Œã®ãŸã‚ã«ã™ã§ã«æº–å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚  <b><a href="https://docs.python.org/dev/library/asyncio-task.html">as_completed</a></b>é–¢æ•°ã¯ã€å®Ÿè¡Œæ™‚ã«<b><a href="https://docs.python.org/dev/library/asyncio-task.html">ã‚³ãƒ«ãƒ¼ãƒãƒ³ã®</a></b>çµæœã‚’è¿”ã™åå¾©å­ã‚’è¿”ã—ã¾ã™ã€‚ æœ¬å½“ã«ã‹ã£ã“ã„ã„ï¼Ÿï¼ ã¨ã“ã‚ã§ã€ <b>as_completed</b>ã¨<b>wait</b>ã¯ã€ <b><a href="https://docs.python.org/dev/library/concurrent.futures.html">concurrent.futures</a></b>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é–¢æ•°ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚‚ã†1ã¤ã®ä¾‹ã¯ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã§ã™ã€‚ ã“ã‚Œã«ã¯å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚Šã¾ã™ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ™‚ç‚¹ã§ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚‹ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚ å„ãƒªã‚¹ãƒˆã‚’é †ç•ªã«ãƒãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ä»£ã‚ã‚Šã«ã€ã™ã¹ã¦ã®ã‚¯ã‚¨ãƒªã‚’ç«¶åˆã—ã¦å®Ÿè¡Œã—ã€æœ€åˆã«æˆåŠŸã—ãŸã‚¯ã‚¨ãƒªã‚’é¸æŠã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã•ã¦ã€ã“ã®ãŸã‚ã«ã€ç§ãŸã¡ã®ãŠæ°—ã«å…¥ã‚Šã®é–¢æ•°<b><a href="https://docs.python.org/dev/library/asyncio-task.html">wait</a></b>ã«ã¯ç‰¹åˆ¥ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼<b>return_whenãŒã‚ã‚Š</b>ã¾ã™ã€‚ ã“ã‚Œã¾ã§ã€ <b>å¾…æ©Ÿ</b>ãŒè¿”ã™ã‚‚ã®ã‚’ç„¡è¦–ã—ã¾ã—ãŸã€‚ ä¸¦åˆ—åŒ–ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã®ã¿ã€‚ ã—ã‹ã—ã€ã‚³ãƒ«ãƒ¼ãƒãƒ³ã‹ã‚‰çµæœã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å®Œäº†æ¸ˆã¿ãŠã‚ˆã³ä¿ç•™ä¸­ã®å…ˆç‰©ã®ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> collections <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> namedtuple <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> concurrent.futures <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FIRST_COMPLETED <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp Service = namedtuple(<span class="hljs-string"><span class="hljs-string">'Service'</span></span>, (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip_attr'</span></span>)) SERVICES = ( Service(<span class="hljs-string"><span class="hljs-string">'ipify'</span></span>, <span class="hljs-string"><span class="hljs-string">'https://api.ipify.org?format=json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'ip-api'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://ip-api.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'query'</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_ip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(service)</span></span></span><span class="hljs-function">:</span></span> start = time.time() print(<span class="hljs-string"><span class="hljs-string">'Fetching IP from {}'</span></span>.format(service.name)) response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, service.url) json_response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() ip = json_response[service.ip_attr] response.close() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'{} finished with result: {}, took: {:.2f} seconds'</span></span>.format( service.name, ip, time.time() - start) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> futures = [fetch_ip(service) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> SERVICES] done, pending = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait( futures, return_when=FIRST_COMPLETED) print(done.pop().result()) ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous()) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 2c-fetch-first-ip-address-response-await.py Fetching IP from ip-api Fetching IP from ipify ip-api finished with result: 82.34.76.170, took: 0.09 seconds Unclosed client session client_session: &lt;aiohttp.client.ClientSession object at 0x10f95c6d8&gt; Task was destroyed but it is pending! task: &lt;Task pending coro=&lt;fetch_ip() running at 2c-fetch-first-ip-address-response.py:20&gt; wait_for=&lt;Future pending cb=[BaseSelectorEventLoop._sock_connect_done(10)(), Task._wakeup()]&gt;&gt;</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã©ã†ã—ãŸã®ï¼Ÿ æœ€åˆã®ã‚µãƒ¼ãƒ“ã‚¹ã¯æ­£å¸¸ã«å¿œç­”ã—ã¾ã—ãŸãŒã€ãƒ­ã‚°ã«è­¦å‘ŠãŒã‚ã‚Šã¾ã—ãŸï¼ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å®Ÿéš›ã€2ã¤ã®ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œã‚’é–‹å§‹ã—ã¾ã—ãŸãŒã€æœ€åˆã®çµæœã®å¾Œã«ã‚µã‚¤ã‚¯ãƒ«ã‚’æ®‹ã—ã€2ç•ªç›®ã®ã‚³ãƒ«ãƒ¼ãƒãƒ³ã¯ã¾ã å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã—ãŸã€‚  Asyncioã¯ãƒã‚°ã ã¨è€ƒãˆã€è­¦å‘Šã—ã¦ãã‚Œã¾ã—ãŸã€‚ ãŠãã‚‰ãã‚ãªãŸè‡ªèº«ã®ãŸã‚ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹ä¾¡å€¤ãŒã‚ã‚Šã€æ˜ã‚‰ã‹ã«ä¸è¦ãªã‚¿ã‚¹ã‚¯ã‚’æ®ºã—ã¾ã™ã€‚ ã©ã†ã‚„ã£ã¦ï¼Ÿ èã„ã¦ãã‚Œã¦ã†ã‚Œã—ã„ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> æœªæ¥å· </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> ä¿ç•™ä¸­ </li><li> å®Ÿè¡Œï¼ˆå®Ÿè¡Œä¸­ï¼‰ </li><li> ã‚„ã£ãŸ </li><li> ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿ï¼‰ </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã™ã¹ã¦ãŒã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã€‚  futurãŒdoneçŠ¶æ…‹ã«ãªã£ãŸã‚‰ã€ãã“ã‹ã‚‰å®Ÿè¡Œçµæœã‚’å–å¾—ã§ãã¾ã™ã€‚ ä¿ç•™ä¸­ãŠã‚ˆã³å®Ÿè¡Œä¸­ã®çŠ¶æ…‹ã§ã¯ã€ã“ã®ã‚ˆã†ãªæ“ä½œã¯<b>InvalidStateError</b>ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã—ã¾ã™ã€‚canelledã®å ´åˆã€ <b>CancelledError</b>ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã€æœ€å¾Œã«ã€ã‚³ãƒ«ãƒ¼ãƒãƒ³è‡ªä½“ã§ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ <b>ä¾‹å¤–ãŒ</b>å‘¼ã³å‡ºã•ã‚ŒãŸã¨ãã¨åŒã˜ã‚ˆã†ã«å†ã³ã‚¹ãƒ­ãƒ¼<b>ã•</b>ã‚Œã¾ã™ã€‚  <a href="https://docs.python.org/dev/library/asyncio-task.html">ã—ã‹ã—ã€ç§ã®è¨€è‘‰ã‚’ä¿¡ã˜ãªã„ã§ãã ã•ã„</a> ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>done</b> ã€ <b>canceledã€</b>ã¾ãŸã¯<b>running</b>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦æœªæ¥ã®çŠ¶æ…‹ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€ <b>done</b>ã®å ´åˆã€ <b>result</b>ã‚’å‘¼ã³å‡ºã™ã¨ã€æœŸå¾…ã•ã‚Œã‚‹çµæœã¨æ“ä½œä¸­ã«ç™ºç”Ÿã—ãŸä¾‹å¤–ã®ä¸¡æ–¹ãŒè¿”ã•ã‚Œã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚ å…ˆç‰©<b>ã®</b>å®Ÿè¡Œã‚’<b>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</b>ã™ã‚‹<b>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</b>ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã™ ã“ã‚Œã¯ä¾‹ã‚’ä¿®æ­£ã™ã‚‹ã®ã«é©ã—ã¦ã„ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> collections <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> namedtuple <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> concurrent.futures <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FIRST_COMPLETED <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp Service = namedtuple(<span class="hljs-string"><span class="hljs-string">'Service'</span></span>, (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip_attr'</span></span>)) SERVICES = ( Service(<span class="hljs-string"><span class="hljs-string">'ipify'</span></span>, <span class="hljs-string"><span class="hljs-string">'https://api.ipify.org?format=json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'ip-api'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://ip-api.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'query'</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_ip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(service)</span></span></span><span class="hljs-function">:</span></span> start = time.time() print(<span class="hljs-string"><span class="hljs-string">'Fetching IP from {}'</span></span>.format(service.name)) response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, service.url) json_response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() ip = json_response[service.ip_attr] response.close() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'{} finished with result: {}, took: {:.2f} seconds'</span></span>.format( service.name, ip, time.time() - start) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> futures = [fetch_ip(service) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> SERVICES] done, pending = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait( futures, return_when=FIRST_COMPLETED) print(done.pop().result()) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> future <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pending: future.cancel() ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous()) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 2c-fetch-first-ip-address-response-no-warning-await.py Fetching IP from ipify Fetching IP from ip-api ip-api finished with result: 82.34.76.170, took: 0.08 seconds</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚·ãƒ³ãƒ—ãƒ«ã§æ­£ç¢ºãªçµè«–ã¯ã€ç§ãŒå¤§å¥½ããªã‚‚ã®ã§ã™ï¼ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      futureã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«è¿½åŠ ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ãªå ´åˆã¯ã€çŠ¶æ…‹ãŒå®Œäº†ã—ãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’æ¥ç¶šã§ãã¾ã™ã€‚ ã“ã‚Œã¯ã€ä¸€éƒ¨ã®çµæœã‚’ãã®å€¤ã§å†å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãƒ†ã‚¹ãƒˆã§å½¹ç«‹ã¡ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ä¾‹å¤–å‡¦ç† </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      asyncioã¯ã€ç®¡ç†ã•ã‚ŒãŸèª­ã¿å–ã‚Šå¯èƒ½ãªåŒæ™‚å®Ÿè¡Œã‚³ãƒ¼ãƒ‰ã®è¨˜è¿°ã«é–¢ã™ã‚‹ã‚‚ã®ã§ã€ä¾‹å¤–ã‚’å‡¦ç†ã™ã‚‹éš›ã«éå¸¸ã«é¡•è‘—ã§ã™ã€‚ ä¾‹ã«æˆ»ã£ã¦èª¬æ˜ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      IPå®šç¾©ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã™ã‚‹ã™ã¹ã¦ã®è¦æ±‚ãŒåŒã˜çµæœã‚’è¿”ã™ã“ã¨ã‚’ç¢ºèªã—ãŸã„ã¨ã—ã¾ã™ã€‚ ãŸã ã—ã€ãã®ã†ã¡ã®1ã¤ã¯ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚ã‚Šã€å¿œç­”ã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚  tryã‚’é©ç”¨ã™ã‚‹ã ã‘ã§ã™...ã„ã¤ã‚‚ã®å ´åˆã‚’é™¤ãã¾ã™ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> collections <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> namedtuple <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp Service = namedtuple(<span class="hljs-string"><span class="hljs-string">'Service'</span></span>, (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip_attr'</span></span>)) SERVICES = ( Service(<span class="hljs-string"><span class="hljs-string">'ipify'</span></span>, <span class="hljs-string"><span class="hljs-string">'https://api.ipify.org?format=json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'ip-api'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://ip-api.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'query'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'borken'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://no-way-this-is-going-to-work.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_ip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(service)</span></span></span><span class="hljs-function">:</span></span> start = time.time() print(<span class="hljs-string"><span class="hljs-string">'Fetching IP from {}'</span></span>.format(service.name)) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, service.url) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'{} is unresponsive'</span></span>.format(service.name) json_response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() ip = json_response[service.ip_attr] response.close() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'{} finished with result: {}, took: {:.2f} seconds'</span></span>.format( service.name, ip, time.time() - start) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> futures = [fetch_ip(service) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> SERVICES] done, _ = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait(futures) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> future <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> done: print(future.result()) ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous()) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 3a-fetch-ip-addresses-fail-await.py Fetching IP from ip-api Fetching IP from borken Fetching IP from ipify ip-api finished with result: 85.133.69.250, took: 0.75 seconds ipify finished with result: 85.133.69.250, took: 1.37 seconds borken is unresponsive</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚³ãƒ«ãƒ¼ãƒãƒ³ã®å®Ÿè¡Œä¸­ã«ç™ºç”Ÿã—ãŸä¾‹å¤–ã‚‚å‡¦ç†ã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> collections <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> namedtuple <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> traceback Service = namedtuple(<span class="hljs-string"><span class="hljs-string">'Service'</span></span>, (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip_attr'</span></span>)) SERVICES = ( Service(<span class="hljs-string"><span class="hljs-string">'ipify'</span></span>, <span class="hljs-string"><span class="hljs-string">'https://api.ipify.org?format=json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'ip-api'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://ip-api.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'this-is-not-an-attr'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'borken'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://no-way-this-is-going-to-work.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_ip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(service)</span></span></span><span class="hljs-function">:</span></span> start = time.time() print(<span class="hljs-string"><span class="hljs-string">'Fetching IP from {}'</span></span>.format(service.name)) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, service.url) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'{} is unresponsive'</span></span>.format(service.name) json_response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() ip = json_response[service.ip_attr] response.close() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'{} finished with result: {}, took: {:.2f} seconds'</span></span>.format( service.name, ip, time.time() - start) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> futures = [fetch_ip(service) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> SERVICES] done, _ = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait(futures) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> future <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> done: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: print(future.result()) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: print(<span class="hljs-string"><span class="hljs-string">"Unexpected error: {}"</span></span>.format(traceback.format_exc())) ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous()) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 3b-fetch-ip-addresses-future-exceptions-await.py Fetching IP from ipify Fetching IP from borken Fetching IP from ip-api ipify finished with result: 85.133.69.250, took: 0.91 seconds borken is unresponsive Unexpected error: Traceback (most recent call last): File â€œ3b-fetch-ip-addresses-future-exceptions.pyâ€, line 39, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> asynchronous <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(future.result()) File â€œ3b-fetch-ip-addresses-future-exceptions.pyâ€, line 26, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> fetch_ip ip = json_response[service.ip_attr] KeyError: <span class="hljs-string"><span class="hljs-string">'this-is-not-an-attr'</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å®Œäº†ã‚’å¾…ãŸãšã«ã‚¿ã‚¹ã‚¯ã‚’é–‹å§‹ã™ã‚‹ã®ã¯é–“é•ã„ã§ã‚ã‚‹ã‚ˆã†ã«ã€æœªçŸ¥ã®ä¾‹å¤–ã‚’å–å¾—ã™ã‚‹ã¨ã€å‡ºåŠ›ã«ãƒˆãƒ¬ãƒ¼ã‚¹ãŒæ®‹ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> collections <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> namedtuple <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp Service = namedtuple(<span class="hljs-string"><span class="hljs-string">'Service'</span></span>, (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip_attr'</span></span>)) SERVICES = ( Service(<span class="hljs-string"><span class="hljs-string">'ipify'</span></span>, <span class="hljs-string"><span class="hljs-string">'https://api.ipify.org?format=json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'ip-api'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://ip-api.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'this-is-not-an-attr'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'borken'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://no-way-this-is-going-to-work.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_ip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(service)</span></span></span><span class="hljs-function">:</span></span> start = time.time() print(<span class="hljs-string"><span class="hljs-string">'Fetching IP from {}'</span></span>.format(service.name)) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, service.url) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: print(<span class="hljs-string"><span class="hljs-string">'{} is unresponsive'</span></span>.format(service.name)) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: json_response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() ip = json_response[service.ip_attr] response.close() print(<span class="hljs-string"><span class="hljs-string">'{} finished with result: {}, took: {:.2f} seconds'</span></span>.format( service.name, ip, time.time() - start)) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> futures = [fetch_ip(service) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> SERVICES] <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait(futures) <span class="hljs-comment"><span class="hljs-comment"># intentionally ignore results ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous()) ioloop.close()</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python3 3c-fetch-ip-addresses-ignore-exceptions-await.py Fetching IP from ipify Fetching IP from borken Fetching IP from ip-api borken is unresponsive ipify finished with result: 85.133.69.250, took: 0.78 seconds Task exception was never retrieved future: &lt;Task finished coro=&lt;fetch_ip() <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>, defined at 3c-fetch-ip-addresses-ignore-exceptions.py:15&gt; exception=KeyError(<span class="hljs-string"><span class="hljs-string">'this-is-not-an-attr'</span></span>,)&gt; Traceback (most recent call last): File â€œ3c-fetch-ip-addresses-ignore-exceptions.pyâ€, line 25, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> fetch_ip ip = json_response[service.ip_attr] KeyError: <span class="hljs-string"><span class="hljs-string">'this-is-not-an-attr'</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å‡ºåŠ›ã¯ã€asyncioã‹ã‚‰ã®éé›£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é™¤ã„ã¦ã€å‰ã®ä¾‹ã¨åŒã˜ã«è¦‹ãˆã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã—ã‹ã—ã€IPã«é–¢ã™ã‚‹æƒ…å ±ãŒãã‚Œã»ã©é‡è¦ã§ãªã„å ´åˆã¯ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ ã“ã‚Œã¯ã€ã“ã®éƒ¨åˆ†ãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ãªã‚‹ã‚ˆã†ãªã‚ã‚‹ç¨®ã®è¤‡åˆçš„ãªå›ç­”ã‚’è£œå®Œã™ã‚‹ã‚‚ã®ã§ã™ã€‚ ã“ã®å ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å¾…ãŸã›ã¾ã›ã‚“ã€‚ ç†æƒ³çš„ã«ã¯ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®šã—ã¦IPã‚’è¨ˆç®—ã—ã€ãã®å¾Œã€ã“ã®æƒ…å ±ãŒãªãã¦ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç­”ãˆã‚’è¿”ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ç¹°ã‚Šè¿”ã—ã¾ã™ãŒã€ <b>å¾…æ©Ÿ</b>ã«ã¯é©åˆ‡ãªå¼•æ•°ãŒã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> aiohttp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> argparse <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> collections <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> namedtuple <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> concurrent.futures <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FIRST_COMPLETED Service = namedtuple(<span class="hljs-string"><span class="hljs-string">'Service'</span></span>, (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip_attr'</span></span>)) SERVICES = ( Service(<span class="hljs-string"><span class="hljs-string">'ipify'</span></span>, <span class="hljs-string"><span class="hljs-string">'https://api.ipify.org?format=json'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>), Service(<span class="hljs-string"><span class="hljs-string">'ip-api'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://ip-api.com/json'</span></span>, <span class="hljs-string"><span class="hljs-string">'query'</span></span>), ) DEFAULT_TIMEOUT = <span class="hljs-number"><span class="hljs-number">0.01</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fetch_ip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(service)</span></span></span><span class="hljs-function">:</span></span> start = time.time() print(<span class="hljs-string"><span class="hljs-string">'Fetching IP from {}'</span></span>.format(service.name)) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.sleep(random.randint(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) * <span class="hljs-number"><span class="hljs-number">0.1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> aiohttp.request(<span class="hljs-string"><span class="hljs-string">'GET'</span></span>, service.url) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'{} is unresponsive'</span></span>.format(service.name) json_response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.json() ip = json_response[service.ip_attr] response.close() print(<span class="hljs-string"><span class="hljs-string">'{} finished with result: {}, took: {:.2f} seconds'</span></span>.format( service.name, ip, time.time() - start)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ip <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">asynchronous</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(timeout)</span></span></span><span class="hljs-function">:</span></span> response = { <span class="hljs-string"><span class="hljs-string">"message"</span></span>: <span class="hljs-string"><span class="hljs-string">"Result from asynchronous."</span></span>, <span class="hljs-string"><span class="hljs-string">"ip"</span></span>: <span class="hljs-string"><span class="hljs-string">"not available"</span></span> } futures = [fetch_ip(service) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> SERVICES] done, pending = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> asyncio.wait( futures, timeout=timeout, return_when=FIRST_COMPLETED) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> future <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pending: future.cancel() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> future <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> done: response[<span class="hljs-string"><span class="hljs-string">"ip"</span></span>] = future.result() print(response) parser = argparse.ArgumentParser() parser.add_argument( <span class="hljs-string"><span class="hljs-string">'-t'</span></span>, <span class="hljs-string"><span class="hljs-string">'--timeout'</span></span>, help=<span class="hljs-string"><span class="hljs-string">'Timeout to use, defaults to {}'</span></span>.format(DEFAULT_TIMEOUT), default=DEFAULT_TIMEOUT, type=float) args = parser.parse_args() print(<span class="hljs-string"><span class="hljs-string">"Using a {} timeout"</span></span>.format(args.timeout)) ioloop = asyncio.get_event_loop() ioloop.run_until_complete(asynchronous(args.timeout)) ioloop.close()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã¾ãŸã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èµ·å‹•è¡Œã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¼•æ•°ã‚’è¿½åŠ ã—ã¦ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å‡¦ç†æ™‚é–“ãŒã‚ã‚‹å ´åˆã«ä½•ãŒèµ·ã“ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ ã¾ãŸã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã™ãã«çµ‚äº†ã™ã‚‹ã®ã‚’é˜²ããŸã‚ã«ã€ãƒ©ãƒ³ãƒ€ãƒ ãªé…å»¶ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚ãã—ã¦ã€ãã‚ŒãŒæ­£ç¢ºã«ã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ç†è§£ã™ã‚‹æ™‚ãŒæ¥ã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python 4a-timeout-with-wait-kwarg-await.py Using a 0.01 timeout Fetching IP from ipify Fetching IP from ip-api {<span class="hljs-string"><span class="hljs-string">'message'</span></span>: <span class="hljs-string"><span class="hljs-string">'Result from asynchronous.'</span></span>, <span class="hljs-string"><span class="hljs-string">'ip'</span></span>: <span class="hljs-string"><span class="hljs-string">'not available'</span></span>}</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ python 4a-timeout-with-wait-kwarg-await.py -t 5 Using a 5.0 timeout Fetching IP from ip-api Fetching IP from ipify ipify finished with result: 82.34.76.170, took: 1.24 seconds {<span class="hljs-string"><span class="hljs-string">'ip'</span></span>: <span class="hljs-string"><span class="hljs-string">'82.34.76.170'</span></span>, <span class="hljs-string"><span class="hljs-string">'message'</span></span>: <span class="hljs-string"><span class="hljs-string">'Result from asynchronous.'</span></span>}</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ãŠã‚ã‚Šã« </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Asyncioã¯ã€ç§ã®Pythonã¸ã®æ—¢ã«å¤§ããªæ„›ã‚’å¼·åŒ–ã—ã¾ã—ãŸã€‚ æ­£ç›´ã«è¨€ã†ã¨ã€Tornadoã§ã‚³ãƒ«ãƒ¼ãƒãƒ³ã«å‡ºä¼šã£ãŸã¨ãã€ç§ã¯ã‚³ãƒ«ãƒ¼ãƒãƒ³ã«æ‹ã‚’ã—ã¾ã—ãŸãŒã€asyncioã¯ç«¶äº‰åŠ›ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«ã‚³ãƒ«ãƒ¼ãƒãƒ³ã¨ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰æœ€é«˜ã®çµæœã‚’å¾—ã¾ã—ãŸã€‚ ãã—ã¦ã€ä¸»ãªI / Oã‚µã‚¤ã‚¯ãƒ«ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ç‰¹åˆ¥ãªåŠªåŠ›ãŒæ‰•ã‚ã‚Œã¾ã—ãŸã€‚ ãã®ãŸã‚ã€ <a href="http://tornadoweb.org/">Tornado</a>ã¾ãŸã¯<a href="https://www.twistedmatrix.com/">Twisted</a>ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€asyncioç”¨ã«è¨­è¨ˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å‰è¿°ã—ãŸã‚ˆã†ã«ã€ä¸»ãªå•é¡Œã¯ã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒéãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°å‹•ä½œã‚’ã¾ã ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã“ã¨ã§ã™ã€‚ ã¾ãŸã€ã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€å¤šãã®ä¸€èˆ¬çš„ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯åŒæœŸã‚¹ã‚¿ã‚¤ãƒ«ã§ã®ã¿å‹•ä½œã—ã€ç«¶äº‰åŠ›ã‚’ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã¾ã è‹¥ãã¦å®Ÿé¨“çš„ã§ã™ã€‚  <a href="http://asyncio.org/">ãŸã ã—ã€ãã®æ•°ã¯å¢—ãˆç¶šã‘ã¦ã„</a>ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã€asyncioã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã®ã™ã°ã‚‰ã—ã•ã‚’ãŠè¦‹ã›ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ä½•ã‚‰ã‹ã®ç†ç”±ã§python 2.7ã§å‹•ã‘ãªããªã£ãŸå ´åˆã€ã“ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã«ã‚ˆã£ã¦python 3ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ ç¢ºã‹ãªã“ã¨ã¯1ã¤ã§ã™ã€‚Pythonã®æœªæ¥ã¯å®Œå…¨ã«å¤‰ã‚ã‚Šã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">ç¿»è¨³è€…ã‹ã‚‰ï¼š</b> <div class="spoiler_text"> å…ƒã®è¨˜äº‹ã¯2016å¹´2æœˆ20æ—¥ã«å…¬é–‹ã•ã‚Œã¾ã—ãŸãŒã€ã“ã®é–“ã«å¤šãã®ã“ã¨ãŒèµ·ã“ã‚Šã¾ã—ãŸã€‚  Python 3.6ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã€æœ€é©åŒ–ã«åŠ ãˆã¦ã€asyncioãŒæ”¹å–„ã•ã‚Œã€APIãŒå®‰å®šçŠ¶æ…‹ã«ãªã‚Šã¾ã—ãŸã€‚  Postgresã€Redisã€Elasticsearchãªã©ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒéãƒ–ãƒ­ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚ æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã•ãˆSanicã§ã€Flaskã«ä¼¼ã¦ã„ã¾ã™ãŒã€éåŒæœŸãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™ã€‚ æœ€çµ‚çš„ã«ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã§ã•ãˆCythonã§æœ€é©åŒ–ãŠã‚ˆã³æ›¸ãæ›ãˆã‚‰ã‚Œã€2å€é«˜é€Ÿã«ãªã‚Šã¾ã—ãŸã€‚ ã—ãŸãŒã£ã¦ã€ã“ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚’ç„¡è¦–ã™ã‚‹ç†ç”±ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J337400/index.html">Aã‹ã‚‰Zã¾ã§ã®ITãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è¦ä»¶ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã€‚ãƒ‘ãƒ¼ãƒˆ5ã€‚ä¸»é¡Œåˆ†é‡ã®æœ¬è³ªã¨æˆ¦ç•¥ã«ã¤ã„ã¦å°‘ã—èª¬æ˜ã—ã¾ã™ã€‚</a></li>
<li><a href="../J337410/index.html">ã‚µãƒˆã‚·ãƒœãƒ </a></li>
<li><a href="../J337412/index.html">SMSãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../J337416/index.html">ãƒˆãƒ¼ã‚¯ãƒ³çµŒæ¸ˆå­¦ï¼šãªãœICOã¯ãã‚“ãªã«äººæ°—ãŒã‚ã‚‹ã®ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../J337418/index.html">RapidMinerã®æ©Ÿæ¢°å­¦ç¿’</a></li>
<li><a href="../J337428/index.html">Siege Mattersï¼šä¼æ¥­ãŒã‚¯ãƒ©ã‚¦ãƒ‰ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã«ä¿¡é ¼ã§ãã‚‹è¦å¡ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../J337430/index.html">ãƒãƒ«ãƒã‚¿ã‚¹ã‚¯Arduinï¼šç—›ã¿ã®ãªã„ã‚¿ã‚¤ãƒãƒ¼</a></li>
<li><a href="../J337436/index.html">Bitcoin Farm and Android Minerã‚¢ãƒ—ãƒª</a></li>
<li><a href="../J337438/index.html">ã€Œãƒ¡ãƒ¢ã®ã‚ˆã†ã«ï¼ã€ã¾ãŸã¯Accord.NET Frameworkã‚’ä½¿ç”¨ã—ãŸCï¼ƒã®æ©Ÿæ¢°å­¦ç¿’ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ï¼‰</a></li>
<li><a href="../J337440/index.html">èŸ»å¡šã®ãƒœãƒƒãƒˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
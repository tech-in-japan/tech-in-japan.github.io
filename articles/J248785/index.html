<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§œğŸ» ğŸ•  ğŸ›€ğŸ¼ Apple Metal Graphicsãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ï¼šã¯ã˜ã‚ã« ğŸï¸ ğŸ‘½ ğŸ’€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã‚“ã«ã¡ã¯ã€Habrï¼ ä»Šæ—¥ã®ç§ã®æŠ•ç¨¿ã¯ã€Apple Metal APIã§ã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åˆå¿ƒè€…å‘ã‘ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚ ç§ãŒã“ã®ãƒˆãƒ”ãƒƒã‚¯ã«å–ã‚Šçµ„ã¿å§‹ã‚ãŸã¨ãã€Appleã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ãã‚Œã‚‰ã®ä¾‹ã«åŠ ãˆã¦ã€ç‰¹åˆ¥ãªã‚‚ã®ã¯ä½•ã‚‚ãªã„ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚ ä»Šæ—¥ã¯ã€ç…§æ˜ä»˜ãã®3æ¬¡å…ƒã‚­ãƒ¥ãƒ¼ãƒ–ã‚’è¡¨ç¤ºã™ã‚‹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Apple Metal Graphicsãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ï¼šã¯ã˜ã‚ã«</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body"><img src="https://habrastorage.org/files/525/22b/fce/52522bfce5b143139d8d6b111c19a684.png" alt="ç”»åƒ" align="right"> ã“ã‚“ã«ã¡ã¯ã€Habrï¼ ä»Šæ—¥ã®ç§ã®æŠ•ç¨¿ã¯ã€Apple Metal APIã§ã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åˆå¿ƒè€…å‘ã‘ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚ ç§ãŒã“ã®ãƒˆãƒ”ãƒƒã‚¯ã«å–ã‚Šçµ„ã¿å§‹ã‚ãŸã¨ãã€Appleã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ãã‚Œã‚‰ã®ä¾‹ã«åŠ ãˆã¦ã€ç‰¹åˆ¥ãªã‚‚ã®ã¯ä½•ã‚‚ãªã„ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚ ä»Šæ—¥ã¯ã€ç…§æ˜ä»˜ãã®3æ¬¡å…ƒã‚­ãƒ¥ãƒ¼ãƒ–ã‚’è¡¨ç¤ºã™ã‚‹ç°¡å˜ãªMetalã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆæ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ æ¬¡ã«ã€ä¸»è¦ãªMetalæ©Ÿèƒ½ã®1ã¤ã‚’ä½¿ç”¨ã—ã¦ã€è¤‡æ•°ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æç”»ã—ã¾ã™ã€‚ çŒ«ã®ä¸‹ã§èˆˆå‘³ã‚’æŒã£ã¦ãã ã•ã„ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://github.com/rokuz/MetalDemo">ãƒ‡ãƒ¢</a>ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ãƒãƒ”ãƒ¼ã€Xcode 6ã€ãŠã‚ˆã³A7ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã‚’æ­è¼‰ã—ãŸãƒ‡ãƒã‚¤ã‚¹ï¼ˆiPad Air 2013ãŠã‚ˆã³iPhone 5Sä»¥é™ï¼‰ãŒå¿…è¦ã§ã™ã€‚ æ®‹å¿µãªãŒã‚‰ã€Metalã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§èµ·å‹•ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ æœ€å¾Œã®åˆ¶é™ã¯ã€iOSã®é–‹ç™ºè€…ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¸ã®æœ‰åŠ¹ãªã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ ã“ã‚Œã‚‰ã¯å˜ç´”ãªå¥½å¥‡å¿ƒpersonç››ãªäººã®ãŸã‚ã®å°ã•ãªè¦ä»¶ã§ã¯ãªã„ã“ã¨ã‚’ç†è§£ã—ã¦ãŠã‚Šã€ã‚‚ã¡ã‚ã‚“ã€ä¸Šè¨˜ã®ã„ãšã‚Œã‹ã‚’è³¼å…¥ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚ ãŸã ã—ã€å¿…è¦ãªã‚‚ã®ãŒã™ã¹ã¦æƒã†ã‚ˆã†ã«æ˜ŸãŒå½¢æˆã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã®åˆ†å²ç‚¹ã¨ã€Metalã§ã®ç‹¬è‡ªã®å®Ÿé¨“ã«ã¤ã„ã¦çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã•ã‚‰ã«ã€ã“ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’èª­ã‚€ã¨ãã¯ã€ãƒ‡ãƒ¢ã‚³ãƒ¼ãƒ‰ã‚’ä¸¦è¡Œã—ã¦ç¢ºèªã™ã‚‹ã“ã¨ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä½•ãŒèµ·ã“ã£ã¦ã„ã‚‹ã®ã‹ã‚’ç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> ã‚¨ãƒ³ãƒˆãƒªãƒ¼ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ç§ã¯<a href="https://developer.apple.com/metal/">å…¬å¼</a>æŠ•ç¨¿<a href="https://developer.apple.com/metal/">ã‚’</a>ç¿»è¨³æŠ•ç¨¿ã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ”¯æŒã—ã¦ã„ã¾ã›ã‚“ã®ã§ã€ç°¡å˜ãªè¨€è‘‰ã§Metalã®æ€§è³ªã«ã¤ã„ã¦è©±ã—ã¾ã—ã‚‡ã†ã€‚  Appleã¯ã€MetalãŒOpenGL ESã‚ˆã‚Šã‚‚ã‚¯ãƒ¼ãƒ«ãªç†ç”±ã«ã¤ã„ã¦å¤šãã®ã“ã¨ã‚’è©±ã—ã¾ã—ãŸï¼ˆ <a href="http://habrahabr.ru/post/226329/">ãƒãƒ–</a>ã«ã¤ã„ã¦ã¯å°‘ã—èª¬æ˜ãŒã‚ã‚Šã¾ã—ãŸï¼‰ã€‚ ã“ã‚Œã‚‰ã™ã¹ã¦ã‹ã‚‰ã€ç§ã¯2ã¤ã®é‡è¦ãªåˆ©ç‚¹ã ã‘ã‚’é¸ã³å‡ºã—ã¾ã™ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Metalã¯ã€GPUã®ã‚³ãƒãƒ³ãƒ‰ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ æ¤œè¨¼ã®é‡ã‚’å¤§å¹…ã«å‰Šæ¸›ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ãƒ¼ãƒ‰æ™‚ã¾ãŸã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«æ¤œè¨¼ã‚’è»¢é€ã—ã¾ã—ãŸã€‚ ãã®ãŸã‚ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸçŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç¾ã‚Œã¾ã—ãŸã€‚ ç‡ç›´ã«è¨€ã£ã¦ã€ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯æ–°ã—ã„ã‚‚ã®ã§ã¯ãªãã€Direct3D 10ã§çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¦‹ã¾ã—ãŸã€‚ã—ãŸãŒã£ã¦ã€Metal APIã§ã¯ã€ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ã»ã¼ã™ã¹ã¦ã®çŠ¶æ…‹ã‚’äº‹å‰æº–å‚™ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ãã¾ã™ã€‚ </li><li> ä¸¦åˆ—è¨ˆç®—ãŠã‚ˆã³ã‚³ãƒãƒ³ãƒ‰ãƒãƒƒãƒ•ã‚¡ã®å……å¡«ã®å¯èƒ½æ€§ã€‚ ã“ã“ã§ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€GPUã®ã‚³ãƒãƒ³ãƒ‰ã®ã‚­ãƒ¥ãƒ¼ã‚’åŸ‹ã‚ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºè€…ã«ã‚·ãƒ•ãƒˆã™ã‚‹ã“ã¨ã§ã™ã€‚ã‚·ãƒ¼ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹æ³•ã€ä¸¦è¡Œã—ã¦å®Ÿè¡Œã§ãã‚‹ã“ã¨ã€ã§ããªã„ã“ã¨ã‚’é–‹ç™ºè€…ã»ã©ã‚ˆãçŸ¥ã£ã¦ã„ã‚‹äººã¯ã„ãªã„ã‹ã‚‰ã§ã™ã€‚ åŒæ™‚ã«ã€è¤‡æ•°ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§Metal APIã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ã‚¹ãƒ¬ãƒƒãƒ‰ã®åŒæœŸãƒ—ãƒ­ã‚»ã‚¹ã§å‹•ã‘ãªããªã‚‹ã“ã¨ã‚’æã‚Œãªã„ã§ãã ã•ã„.APIã¯ã€é–‹ç™ºè€…ã®ç”Ÿæ´»ã‚’å¯èƒ½ãªé™ã‚Šç°¡ç´ åŒ–ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ï¼ˆã¾ãŸã¯ã€å°‘ãªãã¨ã‚‚ç¬é–“çš„ãªãƒ‘ãƒ‹ãƒƒã‚¯æ”»æ’ƒã‚’å¼•ãèµ·ã“ã•ãªã„ã‚ˆã†ã«ã—ã¾ã™ï¼‰ã€‚ </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Metalã§ã®ä½œæ¥­ã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€Xcode 6ã§ã€Œã‚²ãƒ¼ãƒ ã€ã‚¿ã‚¤ãƒ—ã®æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹æ³•ã¨ã—ã¦ã€ŒMetalã€ã‚’é¸æŠã™ã‚‹ã ã‘ã§ã™ã€‚  Xcodeã¯ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æç”»ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚ æ¨™æº–ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒç§ã«åˆã‚ãªã‹ã£ãŸã®ã§ã€ã“ã‚ŒãŒã¾ã•ã«ãƒ‡ãƒ¢ã®ä½œæˆã‚’é–‹å§‹ã—ãŸæ–¹æ³•ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> æ‰‹é †1.ç…§æ˜ä»˜ãã®ç«‹æ–¹ä½“ã‚’æãã¾ã™ã€‚ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®çµæœã¯ã€Pancakeãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¦ç…§æ˜ã•ã‚ŒãŸå˜è‰²ã®ç«‹æ–¹ä½“ã‚’è¡¨ç¤ºã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã‚Šã¾ã™ã€‚ ã¾ãŸã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ã‚¢ãƒ¼ã‚¯ãƒœãƒ¼ãƒ«ã‚«ãƒ¡ãƒ©ãŒã‚ã‚Šã€ <i>ã‚¹ãƒ¯ã‚¤ãƒ—</i>ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‘¨ã‚Šã‚’å›è»¢ã•ã›ã€ã‚ºãƒ¼ãƒ ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã§ã‚ºãƒ¼ãƒ ã‚¤ãƒ³/ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Appleã®æ¨™æº–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯ã€ã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ãŒã‚«ã‚¹ã‚¿ãƒ ViewControllerã«é›†ä¸­ã—ã¦ã„ã¾ã™ã€‚  <i>RenderView</i>ã¨<i>RenderViewContollerã®</i> 2ã¤ã®ã‚¯ãƒ©ã‚¹ã‚’å‰²ã‚Šå½“ã¦<i>ã¾ã—ãŸ</i> ã€‚ æœ€åˆã®ã‚¯ãƒ©ã‚¹ã¯<i>UIViewã®</i>å¾Œç¶™ã§ã‚ã‚Šã€Metalã¨Core Animationã¸ã®ãƒªãƒ³ã‚¯ã®åˆæœŸåŒ–ã‚’æ‹…å½“ã—ã¾ã™ã€‚  2ç•ªç›®ã®ã‚¯ãƒ©ã‚¹ã«ã¯ã€ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ãƒ‡ãƒ¢è‡ªä½“ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’æœ€å°åŒ–/æ‹¡å¼µã™ã‚‹çŠ¶æ³ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã®ä¸€å®šé‡ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚  <i>RenderModel</i>ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€ãã“ã«ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒ¢ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’é…ç½®ã™ã‚‹æ–¹ãŒé©åˆ‡ã§ã™ã€‚ ãŠãã‚‰ãã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®è¤‡é›‘ã•ãŒå¢—ã—ãŸã¨ãã«ãã†ã™ã‚‹ã§ã—ã‚‡ã†ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã“ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹è¨€èªã‚’è¨˜è¼‰ã™ã‚‹ã®ãŒé©åˆ‡ã§ã™ã€‚  Objective-C ++ã‚’é¸æŠã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç´”ç²‹ãªC ++ã§è¨˜è¿°ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã«å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚  Swiftã‚’ä½¿ç”¨ã™ã‚‹æ©Ÿä¼šã‚‚ã‚ã‚Šã¾ã™ï¼ˆã“ã‚Œã«é–¢ã™ã‚‹è‹±èªã®è‰¯ã„è¨˜äº‹ã¯<a href="http://www.raywenderlich.com/81399/ios-8-metal-tutorial-swift-moving-to-3d">ã“ã¡ã‚‰</a>ã§èª­ã‚€ã“ã¨ãŒã§ã<a href="http://www.raywenderlich.com/81399/ios-8-metal-tutorial-swift-moving-to-3d">ã¾ã™</a> ï¼‰ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  RenderViewã®å®Ÿè£… </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      MetalãŒCore Animationã€ã¤ã¾ã‚ŠiOSã§ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¨å¯†æ¥ã«é–¢é€£ã—ã¦ã„ã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ã‚‚ã€èª°ã‚‚é©šã‹ãªã„ã§ã—ã‚‡ã†ã€‚  iOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«Metalã‚’åŸ‹ã‚è¾¼ã‚€ãŸã‚ã«ã€Appleã¯<i>CAMetalLayer</i>ã¨ã„ã†ç‰¹åˆ¥ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚  <i>RenderView</i>ãŒä½¿ç”¨ã™ã‚‹ã®ã¯ã“ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚  RenderViewã¯æ¬¡ã®ã‚ˆã†ã«åˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="objectivec hljs">+ (Class)layerClass { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">CAMetalLayer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>]; } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)initCommon { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.opaque = <span class="hljs-literal"><span class="hljs-literal">YES</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.backgroundColor = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; _metalLayer = (<span class="hljs-built_in"><span class="hljs-built_in">CAMetalLayer</span></span> *)<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.layer; _device = <span class="hljs-built_in"><span class="hljs-built_in">MTLCreateSystemDefaultDevice</span></span>(); _metalLayer.device = _device; _metalLayer.pixelFormat = <span class="hljs-built_in"><span class="hljs-built_in">MTLPixelFormatBGRA8Unorm</span></span>; _metalLayer.framebufferOnly = <span class="hljs-literal"><span class="hljs-literal">YES</span></span>; _sampleCount = <span class="hljs-number"><span class="hljs-number">1</span></span>; _depthPixelFormat = <span class="hljs-built_in"><span class="hljs-built_in">MTLPixelFormatDepth32Float</span></span>; _stencilPixelFormat = <span class="hljs-built_in"><span class="hljs-built_in">MTLPixelFormatInvalid</span></span>; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ä»–ã®ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«APIã¨ã®å…±é€šç‚¹ã‚’ç°¡å˜ã«è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ«ãƒ¼ãƒˆAPIã‚¯ãƒ©ã‚¹ï¼ˆã“ã®å ´åˆã¯<i>MTLDevice</i> ï¼‰ã‚’ä½œæˆã—ã€ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼ã¨æ·±åº¦ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®å½¢å¼ã‚’é¸æŠã—ã€ãƒãƒ«ãƒã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã®ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’é¸æŠã—ã¾ã™ã€‚ ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼ã¨ãƒ‡ãƒ—ã‚¹ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®ç›´æ¥ãƒ†ã‚¯ã‚¹ãƒãƒ£ä½œæˆã¯ã€ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ ã“ã‚Œã¯ã€Metal Animationã¨Core Animationã®çµ„ã¿åˆã‚ã›ã®ç‰¹æ€§ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚  Core AnimationãŒãƒ‡ãƒã‚¤ã‚¹ã®ç”»é¢ä¸Šã§ã®æç”»ã‚’è¨±å¯ã™ã‚‹ã¨ã€ãƒ‡ãƒã‚¤ã‚¹ã®ç”»é¢ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‚¼ãƒ­ä»¥å¤–ã®<i>CAMetalDrawableã‚’</i>è¿”ã—ã¾ã™ã€‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€å°åŒ–ã™ã‚‹å ´åˆã€ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®<i>CAMetalDrawable</i>ã¯ã‚¼ãƒ­ï¼ˆhelloã€Direct3D 9ãŠã‚ˆã³<i>D3DERR_DEVICELOST</i> ï¼‰ã«ãªã‚‹ãŸã‚ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’åœæ­¢ã™ã‚‹ã‚ˆã†ã«æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ã•ã‚‰ã«ã€ãƒ‡ãƒã‚¤ã‚¹ã‚’ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆã‹ã‚‰ãƒ©ãƒ³ãƒ‰ã‚¹ã‚±ãƒ¼ãƒ—ã«ã€ã¾ãŸã¯ãã®é€†ã«åˆ‡ã‚Šæ›¿ãˆã‚‹å ´åˆã€ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼ã€ãƒ‡ãƒ—ã‚¹ãƒãƒƒãƒ•ã‚¡ãƒ¼ã€ãŠã‚ˆã³ã‚¹ãƒ†ãƒ³ã‚·ãƒ«ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’å†åˆæœŸåŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å„ãƒ•ãƒ¬ãƒ¼ãƒ ã§ã€ <i>MTLRenderPassDescriptor</i>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ<i>å†ç·¨æˆã•ã‚Œ</i>ã¾ã™ã€‚ ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ç¾åœ¨ã®<i>CAMetalDrawable</i>ã‹ã‚‰å–å¾—ã—ãŸãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ç›®çš„ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«<i>ãƒã‚¤ãƒ³ãƒ‰</i>ã—ã¾ã™ã€‚ ã¾ãŸã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å‰å¾Œã«è¿½åŠ ã§å®Ÿè¡Œã§ãã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šã•ã‚Œã¾ã™ã€‚ ãŸã¨ãˆã°ã€ <i>MTLStoreActionMultisampleResolve</i>ã¯ã€ãƒãƒ«ãƒã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚¯ã‚¹ãƒãƒ£ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ãŸå¾Œã€ã“ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’é€šå¸¸ã®å½¢å¼ã«å¤‰æ›ï¼ˆè§£æ±ºï¼‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨è¨€ã„ã¾ã™ã€‚  <i>MTLLoadActionClearã‚’</i>ä½¿ç”¨ã™ã‚‹ã¨ã€æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æç”»ã™ã‚‹å‰ã«ã€ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼/æ·±åº¦ãƒãƒƒãƒ•ã‚¡ãƒ¼/ã‚¹ãƒ†ãƒ³ã‚·ãƒ«ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ã‚¯ãƒªã‚¢ã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼ã€æ·±åº¦ãƒãƒƒãƒ•ã‚¡ãƒ¼ã€ãŠã‚ˆã³ã‚¹ãƒ†ãƒ³ã‚·ãƒ«ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ä½œæˆãŠã‚ˆã³å†åˆæœŸåŒ–ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã¯ã€catã®ä¸‹ã«ã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ä½œæˆãŠã‚ˆã³å†åˆæœŸåŒ–ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰</b> <div class="spoiler_text"><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setupRenderPassDescriptorForTexture:(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">MTLTexture</span></span>&gt;)texture { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_renderPassDescriptor == <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) _renderPassDescriptor = [<span class="hljs-built_in"><span class="hljs-built_in">MTLRenderPassDescriptor</span></span> renderPassDescriptor]; <span class="hljs-comment"><span class="hljs-comment">// init/update default render target MTLRenderPassColorAttachmentDescriptor* colorAttachment = _renderPassDescriptor.colorAttachments[0]; colorAttachment.texture = texture; colorAttachment.loadAction = MTLLoadActionClear; colorAttachment.clearColor = MTLClearColorMake(0.0f, 0.0f, 0.0f, 1.0f); if(_sampleCount &gt; 1) { BOOL doUpdate = (_msaaTexture.width != texture.width) || ( _msaaTexture.height != texture.height) || ( _msaaTexture.sampleCount != _sampleCount); if(!_msaaTexture || (_msaaTexture &amp;&amp; doUpdate)) { MTLTextureDescriptor* desc = [MTLTextureDescriptor texture2DDescriptorWithPixelFormat: MTLPixelFormatBGRA8Unorm width: texture.width height: texture.height mipmapped: NO]; desc.textureType = MTLTextureType2DMultisample; desc.sampleCount = _sampleCount; _msaaTexture = [_device newTextureWithDescriptor: desc]; _msaaTexture.label = @"Default MSAA render target"; } colorAttachment.texture = _msaaTexture; colorAttachment.resolveTexture = texture; colorAttachment.storeAction = MTLStoreActionMultisampleResolve; } else { colorAttachment.storeAction = MTLStoreActionStore; } // init/update default depth buffer if(_depthPixelFormat != MTLPixelFormatInvalid) { BOOL doUpdate = (_depthTexture.width != texture.width) || (_depthTexture.height != texture.height) || (_depthTexture.sampleCount != _sampleCount); if(!_depthTexture || doUpdate) { MTLTextureDescriptor* desc = [MTLTextureDescriptor texture2DDescriptorWithPixelFormat: _depthPixelFormat width: texture.width height: texture.height mipmapped: NO]; desc.textureType = (_sampleCount &gt; 1) ? MTLTextureType2DMultisample : MTLTextureType2D; desc.sampleCount = _sampleCount; _depthTexture = [_device newTextureWithDescriptor: desc]; _depthTexture.label = @"Default depth buffer"; MTLRenderPassDepthAttachmentDescriptor* depthAttachment = _renderPassDescriptor.depthAttachment; depthAttachment.texture = _depthTexture; depthAttachment.loadAction = MTLLoadActionClear; depthAttachment.storeAction = MTLStoreActionDontCare; depthAttachment.clearDepth = 1.0; } } // init/update default stencil buffer if(_stencilPixelFormat != MTLPixelFormatInvalid) { BOOL doUpdate = (_stencilTexture.width != texture.width) || (_stencilTexture.height != texture.height) || (_stencilTexture.sampleCount != _sampleCount); if (!_stencilTexture || doUpdate) { MTLTextureDescriptor* desc = [MTLTextureDescriptor texture2DDescriptorWithPixelFormat: _stencilPixelFormat width: texture.width height: texture.height mipmapped: NO]; desc.textureType = (_sampleCount &gt; 1) ? MTLTextureType2DMultisample : MTLTextureType2D; desc.sampleCount = _sampleCount; _stencilTexture = [_device newTextureWithDescriptor: desc]; _stencilTexture.label = @"Default stencil buffer"; MTLRenderPassStencilAttachmentDescriptor* stencilAttachment = _renderPassDescriptor.stencilAttachment; stencilAttachment.texture = _stencilTexture; stencilAttachment.loadAction = MTLLoadActionClear; stencilAttachment.storeAction = MTLStoreActionDontCare; stencilAttachment.clearStencil = 0; } } }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>RenderView</i>ã‚¯ãƒ©ã‚¹ã®<i>render</i>ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ <i>RenderViewControllerã®</i>ã™ã¹ã¦ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  RenderViewControllerã®å®Ÿè£… </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã®èª¬æ˜ã¯ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£éƒ¨åˆ†ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚  <i>RenderView</i>ã‹ã‚‰ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã«ã¯ã€ <i>CADisplayLink</i>ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã‚¿ã‚¤ãƒãƒ¼ãŒå¿…è¦ã§ã™ã€‚ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«åˆæœŸåŒ–ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)startTimer { _timer = [<span class="hljs-built_in"><span class="hljs-built_in">CADisplayLink</span></span> displayLinkWithTarget:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> selector:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(_renderloop)]; [_timer addToRunLoop:[<span class="hljs-built_in"><span class="hljs-built_in">NSRunLoop</span></span> mainRunLoop] forMode:<span class="hljs-built_in"><span class="hljs-built_in">NSDefaultRunLoopMode</span></span>]; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€å°åŒ–ã™ã‚‹ã¨ã‚¿ã‚¤ãƒãƒ¼ã‚’åœæ­¢ã—ã€å±•é–‹ã™ã‚‹ã¨å†é–‹ã™ã‚‹ã“ã¨ã«æ³¨æ„ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ ã“ã‚Œã‚’è¡Œã†ãŸã‚ã«ã€ <i>AppDelegate</i>ã‹ã‚‰<i>RenderViewContoller</i>ã«<i>applicationDidEnterBackground</i>ãŠã‚ˆã³<i>applicationWillEnterForeground</i>ã¸ã®å‘¼ã³å‡ºã—ã‚’è»¢é€ã—<i>ã¾ã—ãŸ</i> ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæœ€å°åŒ–ã•ã‚ŒãŸã¨ãã«ä½•ã‚‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã‚ˆã†ã¨ã›ãšã€ã“ã®ç†ç”±ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã•ã‚‰ã«ã€ç‰¹åˆ¥ãªã‚»ãƒãƒ•ã‚©ï¼ˆ <i>dispatch_semaphore_t _inflightSemaphore</i> ï¼‰ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€ã„ã‚ã‚†ã‚‹GPUãƒã‚¦ãƒ³ãƒ‰ã€ã¤ã¾ã‚Šã€ä¸­å¤®ãƒ—ãƒ­ã‚»ãƒƒã‚µãŒGPUãŒæ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å½¢æˆã™ã‚‹ã®ã‚’å¾…ã¤çŠ¶æ³ã‚’å›é¿ã§ãã¾ã™ã€‚  GPUã‚’å¾…æ©Ÿã—ã¦ã„ã‚‹é–“ã®ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚é–“ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ãŸã‚ã«ã€CPUãŒäº‹å‰ã«ã„ãã¤ã‹ã®ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆã“ã®å ´åˆã¯æœ€å¤§3ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰ã‚’æº–å‚™ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ ã‚»ãƒãƒ•ã‚©ã®ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€å¾Œã§èª¬æ˜ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>touchesBegan</i> ã€ <i>touchesMoved</i>ãŠã‚ˆã³<i>touchesEndedãƒ¡ã‚½ãƒƒãƒ‰</i>ã®å®Ÿè£…ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã¾ã™ã€‚ ç”»é¢ä¸Šã®1æœ¬ä»¥ä¸Šã®æŒ‡ã®å‹•ãã¯<i>ArcballCamera</i>ã‚¯ãƒ©ã‚¹ã«æ¸¡ã•ã‚Œã€ <i>ArcballCamera</i>ã‚¯ãƒ©ã‚¹ã¯ã“ã‚Œã‚‰ã®å‹•ãã‚’ã‚¿ãƒ¼ãƒ³ã¨ã‚«ãƒ¡ãƒ©ã®å‹•ãã«å¤‰æ›ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      catã®ä¸‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®å¿œç­”ã‚³ãƒ¼ãƒ‰ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å¿œç­”</b> <div class="spoiler_text"><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)touchesBegan:(<span class="hljs-built_in"><span class="hljs-built_in">NSSet</span></span> *)touches withEvent:(<span class="hljs-built_in"><span class="hljs-built_in">UIEvent</span></span> *)event { <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* touchesArray = [touches allObjects]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (touches.count == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!camera.isRotatingNow()) { <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span> pos = [touchesArray[<span class="hljs-number"><span class="hljs-number">0</span></span>] locationInView: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view]; camera.startRotation(pos.x, pos.y); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// here we put second finger simd::float2 lastPos = camera.getLastFingerPosition(); camera.stopRotation(); CGPoint pos = [touchesArray[0] locationInView: self.view]; float d = vector_distance(simd::float2 { (float)pos.x, (float)pos.y }, lastPos); camera.startZooming(d); } } else if (touches.count == 2) { CGPoint pos1 = [touchesArray[0] locationInView: self.view]; CGPoint pos2 = [touchesArray[1] locationInView: self.view]; float d = vector_distance(simd::float2 { (float)pos1.x, (float)pos1.y }, simd::float2 { (float)pos2.x, (float)pos2.y }); camera.startZooming(d); } } - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event { NSArray* touchesArray = [touches allObjects]; if (touches.count != 0 &amp;&amp; camera.isRotatingNow()) { CGPoint pos = [touchesArray[0] locationInView: self.view]; camera.updateRotation(pos.x, pos.y); } else if (touches.count == 2 &amp;&amp; camera.isZoomingNow()) { CGPoint pos1 = [touchesArray[0] locationInView: self.view]; CGPoint pos2 = [touchesArray[1] locationInView: self.view]; float d = vector_distance(simd::float2 { (float)pos1.x, (float)pos1.y }, simd::float2 { (float)pos2.x, (float)pos2.y }); camera.updateZooming(d); } } - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event { camera.stopRotation(); camera.stopZooming(); }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Arcball">ã“ã¡ã‚‰</a>ã§ã‚¢ãƒ¼ã‚¯ãƒœãƒ¼ãƒ«ã‚«ãƒ¡ãƒ©ã®å®Ÿè£…ã®ç†è«–ã«ã¤ã„ã¦èª­ã‚€ã“ã¨ãŒã§ã<a href="http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Arcball">ã¾ã™</a> ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     æœ€å¾Œã«ã€5ã¤ã®ä¸»è¦ãªãƒ¡ã‚½ãƒƒãƒ‰ã«å«ã¾ã‚Œã‚‹ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã®ãƒ­ã‚¸ãƒƒã‚¯ã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)configure:(RenderView*)renderView</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã“ã§ã¯ã€ãŸã¨ãˆã°ã€ãƒãƒ«ãƒã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã®ã‚µãƒ³ãƒ—ãƒ«æ•°ã€ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼ã€æ·±åº¦ãƒãƒƒãƒ•ã‚¡ãƒ¼ã€ã‚¹ãƒ†ãƒ³ã‚·ãƒ«ã®å½¢å¼ã‚’è¨­å®šã—ã¦ã€ãƒ“ãƒ¥ãƒ¼ã‚’æ§‹æˆã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setupMetal:(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">MTLDevice</span></span>&gt;)device</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ã€ã‚³ãƒãƒ³ãƒ‰ã‚­ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã€ãƒªã‚½ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ã—ã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã€çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æº–å‚™ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)update</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã“ã§ãƒ•ãƒ¬ãƒ¼ãƒ ãŒæ›´æ–°ã•ã‚Œã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã¨ãã®ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒè¨ˆç®—ã•ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)render:(RenderView*)renderView</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã“ã§ã¯ã€æ˜ã‚‰ã‹ã«ã€ãƒ•ãƒ¬ãƒ¼ãƒ è‡ªä½“ãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)resize:(RenderView*)renderView</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ç”»é¢ã®ã‚µã‚¤ã‚ºãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã€ãŸã¨ãˆã°ãƒ‡ãƒã‚¤ã‚¹ãŒå›è»¢ã—ãŸã¨ãã€é•·ã•ã¨å¹…ãŒå…¥ã‚Œæ›¿ã‚ã£ãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ ã“ã“ã§ã¯ã€ãŸã¨ãˆã°ã€å°„å½±è¡Œåˆ—ã‚’è¨ˆç®—ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Metalã§ãƒªã‚½ãƒ¼ã‚¹ã¨çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆæœŸåŒ–ã™ã‚‹ã¨ãã®æ©Ÿèƒ½ã¯ä½•ã§ã™ã‹ï¼Ÿ  Direct3D 11 APIã«æ…£ã‚Œã¦ã„ã‚‹ç§ã«ã¨ã£ã¦ã€æ·±åˆ»ãªã‚‚ã®ã¯1ã¤ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚  CPUã¯ã€GPUã¨ã®åŒæœŸã®å‰ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãŸã‚ã«æœ€å¤§3ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’é€ä¿¡ã§ãã‚‹ãŸã‚ã€å®šæ•°ã®ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚µã‚¤ã‚ºã¯é€šå¸¸ã®3å€ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚  3ã¤ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã®ãã‚Œãã‚Œã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚°ãƒ©ã‚¤ãƒ³ãƒ‰ã®å¯èƒ½æ€§ã‚’æ’é™¤ã™ã‚‹ãŸã‚ã«ã€ç‹¬è‡ªã®å®šæ•°ãƒãƒƒãƒ•ã‚¡ãƒ¼ã§æ©Ÿèƒ½ã—ã¾ã™ã€‚ å®Ÿéš›ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  uint8_t* bufferPointer = (uint8_t*)[_dynamicUniformBuffer contents] + (sizeof(uniforms_t) * _currentUniformBufferIndex); memcpy(bufferPointer, &amp;_uniform_buffer, sizeof(uniforms_t)); //  [renderEncoder setVertexBuffer:_dynamicUniformBuffer offset:(sizeof(uniforms_t) * _currentUniformBufferIndex) atIndex:1 ];</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãã‚Œã§ã‚‚ã€ãŠãã‚‰ãã€ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®çŠ¶æ…‹ãƒãƒ³ãƒ‰ãƒ«ã¨çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè‡ªä½“ã‚’å®šç¾©ã™ã‚‹ã‚¯ãƒ©ã‚¹<i>MTLRenderPipelineDescriptor</i>ã¨<i>MTLRenderPipelineStateã«</i>è¨€åŠã™ã‚‹ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚ ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€é ‚ç‚¹ãŠã‚ˆã³ãƒ”ã‚¯ã‚»ãƒ«ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã¸ã®ãƒªãƒ³ã‚¯ã€ãƒãƒ«ãƒã‚µãƒ³ãƒ—ãƒ«ã‚µãƒ³ãƒ—ãƒ«ã®æ•°ã€ãƒãƒƒã‚¯ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®å½¢å¼ã€æ·±åº¦ãƒãƒƒãƒ•ã‚¡ãƒ¼ãŒå«ã¾ã‚Œã¾ã™ã€‚ ã‚„ã‚ã¦ã€ã™ã§ã«ã©ã“ã‹ã§ã“ã‚Œã‚’èã„ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ ã™ã¹ã¦ã¯è¦‹ãŸç›®é€šã‚Šã§ã™ã€‚ ã“ã®çŠ¶æ…‹ã¯ã€éå¸¸ã«ç‰¹å®šã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§æŠ•ç„ã•ã‚Œã€ä»–ã®çŠ¶æ³ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚ ãã®ã‚ˆã†ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’äº‹å‰ã«ï¼ˆãŠã‚ˆã³æ¤œè¨¼å¾Œã«ï¼‰ä½œæˆã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã«ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®äº’æ›æ€§ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯çŠ¶æ…‹å…¨ä½“ã‚’å—ã‘å…¥ã‚Œã‚‹ã‹ã€å®Œå…¨ã«æ‹’å¦ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     é‡‘å±ã®åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setupMetal:(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">MTLDevice</span></span>&gt;)device { _commandQueue = [device newCommandQueue]; _defaultLibrary = [device newDefaultLibrary]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> loadAssets: device]; } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)loadAssets:(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">MTLDevice</span></span>&gt;)device { _dynamicUniformBuffer = [device newBufferWithLength:MAX_UNIFORM_BUFFER_SIZE options:<span class="hljs-number"><span class="hljs-number">0</span></span>]; _dynamicUniformBuffer.label = <span class="hljs-string"><span class="hljs-string">@"Uniform buffer"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">MTLFunction</span></span>&gt; fragmentProgram = [_defaultLibrary newFunctionWithName:<span class="hljs-string"><span class="hljs-string">@"psLighting"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">MTLFunction</span></span>&gt; vertexProgram = [_defaultLibrary newFunctionWithName:<span class="hljs-string"><span class="hljs-string">@"vsLighting"</span></span>]; _vertexBuffer = [device newBufferWithBytes:(Primitives::cube()) length:(Primitives::cubeSizeInBytes()) options:<span class="hljs-built_in"><span class="hljs-built_in">MTLResourceOptionCPUCacheModeDefault</span></span>]; _vertexBuffer.label = <span class="hljs-string"><span class="hljs-string">@"Cube vertex buffer"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// pipeline state MTLRenderPipelineDescriptor *pipelineStateDescriptor = [[MTLRenderPipelineDescriptor alloc] init]; pipelineStateDescriptor.label = @"Simple pipeline"; [pipelineStateDescriptor setSampleCount: ((RenderView*)self.view).sampleCount]; [pipelineStateDescriptor setVertexFunction:vertexProgram]; [pipelineStateDescriptor setFragmentFunction:fragmentProgram]; pipelineStateDescriptor.colorAttachments[0].pixelFormat = MTLPixelFormatBGRA8Unorm; pipelineStateDescriptor.depthAttachmentPixelFormat = MTLPixelFormatDepth32Float; NSError* error = NULL; _pipelineState = [device newRenderPipelineStateWithDescriptor:pipelineStateDescriptor error:&amp;error]; if (!_pipelineState) { NSLog(@"Failed to created pipeline state, error %@", error); } MTLDepthStencilDescriptor *depthStateDesc = [[MTLDepthStencilDescriptor alloc] init]; depthStateDesc.depthCompareFunction = MTLCompareFunctionLess; depthStateDesc.depthWriteEnabled = YES; _depthState = [device newDepthStencilStateWithDescriptor:depthStateDesc]; }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     æœ€å¾Œã«ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹æœ€ã‚‚èˆˆå‘³æ·±ã„ã‚³ãƒ¼ãƒ‰ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)render:(RenderView*)renderView { dispatch_semaphore_wait(_inflightSemaphore, DISPATCH_TIME_FOREVER); [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> update]; <span class="hljs-built_in"><span class="hljs-built_in">MTLRenderPassDescriptor</span></span>* renderPassDescriptor = renderView.renderPassDescriptor; <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">CAMetalDrawable</span></span>&gt; drawable = renderView.currentDrawable; <span class="hljs-comment"><span class="hljs-comment">// new command buffer id &lt;MTLCommandBuffer&gt; commandBuffer = [_commandQueue commandBuffer]; commandBuffer.label = @"Simple command buffer"; // simple render encoder id &lt;MTLRenderCommandEncoder&gt; renderEncoder = [commandBuffer renderCommandEncoderWithDescriptor: renderPassDescriptor]; renderEncoder.label = @"Simple render encoder"; [renderEncoder setDepthStencilState:_depthState]; [renderEncoder pushDebugGroup:@"Draw cube"]; [renderEncoder setRenderPipelineState:_pipelineState]; [renderEncoder setVertexBuffer:_vertexBuffer offset:0 atIndex:0 ]; [renderEncoder setVertexBuffer:_dynamicUniformBuffer offset:(sizeof(uniforms_t) * _currentUniformBufferIndex) atIndex:1 ]; [renderEncoder drawPrimitives:MTLPrimitiveTypeTriangle vertexStart:0 vertexCount:36 instanceCount:1]; [renderEncoder popDebugGroup]; [renderEncoder endEncoding]; __block dispatch_semaphore_t block_sema = _inflightSemaphore; [commandBuffer addCompletedHandler:^(id&lt;MTLCommandBuffer&gt; buffer) { dispatch_semaphore_signal(block_sema); }]; _currentUniformBufferIndex = (_currentUniformBufferIndex + 1) % MAX_INFLIGHT_BUFFERS; [commandBuffer presentDrawable:drawable]; [commandBuffer commit]; }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãƒ¡ã‚½ãƒƒãƒ‰ã®é–‹å§‹æ™‚ã«<i>dispatch_semaphore_wait</i>ãŒå‘¼ã³å‡ºã•ã‚Œã€GPUãŒç¾åœ¨ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã®ã„ãšã‚Œã‹ã§çµ‚äº†ã™ã‚‹ã¾ã§CPUã§ã®ãƒ•ãƒ¬ãƒ¼ãƒ è¨ˆç®—ã‚’åœæ­¢ã—ã¾ã™ã€‚ ã™ã§ã«è¿°ã¹ãŸã‚ˆã†ã«ã€ã“ã®ãƒ‡ãƒ¢ã§ã¯ã€GPUãŒãƒ“ã‚¸ãƒ¼çŠ¶æ…‹ã®ã¨ãã«CPUã¯æœ€å¤§3ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¨ˆç®—ã§ãã¾ã™ã€‚ ã‚»ãƒãƒ•ã‚©ã¯ã€ <i>commandBuffer</i>ã‚³ãƒãƒ³ãƒ‰<i>ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®</i> <i>addCompletedHandler</i>ãƒ¡ã‚½ãƒƒãƒ‰ã§è§£æ”¾ã•ã‚Œã¾ã™ã€‚ ã‚³ãƒãƒ³ãƒ‰ãƒãƒƒãƒ•ã‚¡ã¯ä¸€æ™‚çš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€å†åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ç‰¹å®šã®ãƒãƒƒãƒ•ã‚¡ã®å„ãƒ•ãƒ¬ãƒ¼ãƒ ã¯ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚³ãƒãƒ³ãƒ‰ã®ã„ã‚ã‚†ã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ï¼ˆã“ã®å ´åˆã€ <i>MTLRenderCommandEncoder</i>ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚ ãã‚Œã‚’ä½œæˆã™ã‚‹ã¨ãã€ <i>MTLRenderPassDescriptor</i>ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ<i>ä½¿ç”¨ã•</i>ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã¤ã„ã¦ã¯ã€å‰è¿°ã—ã¾ã—ãŸã€‚ ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã•ã¾ã–ã¾ãªç¨®é¡ã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆè¨­å®šçŠ¶æ…‹ã€é ‚ç‚¹ãƒãƒƒãƒ•ã‚¡ãƒ¼ã€ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–æç”»ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘¼ã³å‡ºã—ã€ã¤ã¾ã‚Šä»–ã®ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«APIã§ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ï¼‰ã‚’ãƒãƒƒãƒ•ã‚¡ãƒ¼ã«å…¥åŠ›ã§ãã¾ã™ã€‚ å……å¡«ãŒå®Œäº†<i>ã™ã‚‹</i>ã¨ã€ã‚³ãƒãƒ³ãƒ‰ãƒãƒƒãƒ•ã‚¡ã«å¯¾ã—ã¦<i>commit</i>ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚Œã€ã“ã®ãƒãƒƒãƒ•ã‚¡ãŒã‚­ãƒ¥ãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Blinnã«ã‚ˆã‚‹ç…§æ˜ã®åŸºæœ¬çš„ãªå®Ÿè£…ã§ã‚ã‚‹ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚³ãƒ¼ãƒ‰ã«ç•°å¸¸ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  Metalã®å ´åˆã€Appleã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ç‹¬è‡ªã®ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼è¨€èªã‚’è€ƒæ¡ˆã—ã¾ã—ãŸãŒã€ã“ã‚Œã¯HLSLã€GLSLã€Cgã¨å¤§å·®ã‚ã‚Šã¾ã›ã‚“ã€‚ ãƒªã‚¹ãƒˆã•ã‚ŒãŸè¨€èªã®1ã¤ã§å°‘ãªãã¨ã‚‚ä¸€åº¦ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ä½œæˆã—ãŸäººã¯ã€ã“ã®è¨€èªã®ä½¿ç”¨ã‚’ç°¡å˜ã«é–‹å§‹ã§ã<a href="https://developer.apple.com/library/ios/documentation/Metal/Reference/MetalShadingLanguageGuide/Introduction/Introduction.html">ã¾ã™</a> ã€‚æ®‹ã‚Šã«ã¤ã„ã¦ã¯ã€ <a href="https://developer.apple.com/library/ios/documentation/Metal/Reference/MetalShadingLanguageGuide/Introduction/Introduction.html">Appleã®è¨€èªã‚¬ã‚¤ãƒ‰</a>ã‚’ãŠå‹§ã‚ã—<a href="https://developer.apple.com/library/ios/documentation/Metal/Reference/MetalShadingLanguageGuide/Introduction/Introduction.html">ã¾ã™</a> ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚³ãƒ¼ãƒ‰</b> <div class="spoiler_text"><pre> <code class="hljs lua">#include &lt;metal_stdlib&gt; #include &lt;simd/simd.h&gt; using namespace metal; constant float3 lightDirection = float3(<span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-number"><span class="hljs-number">-0.7</span></span>, <span class="hljs-number"><span class="hljs-number">-1.0</span></span>); constant float3 ambientColor = float3(<span class="hljs-number"><span class="hljs-number">0.18</span></span>, <span class="hljs-number"><span class="hljs-number">0.24</span></span>, <span class="hljs-number"><span class="hljs-number">0.8</span></span>); constant float3 diffuseColor = float3(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, <span class="hljs-number"><span class="hljs-number">0.4</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>); constant float3 specularColor = float3(<span class="hljs-number"><span class="hljs-number">0.3</span></span>, <span class="hljs-number"><span class="hljs-number">0.3</span></span>, <span class="hljs-number"><span class="hljs-number">0.3</span></span>); constant float specularPower = <span class="hljs-number"><span class="hljs-number">30.0</span></span>; typedef struct { float4x4 modelViewProjection; float4x4 model; float3 viewPosition; } uniforms_t; typedef struct { packed_float3 position; packed_float3 normal; packed_float3 tangent; } vertex_t; typedef struct { float4 position <span class="hljs-string"><span class="hljs-string">[[position]]</span></span>; float3 tangent; float3 normal; float3 viewDirection; } ColorInOut; // Vertex shader <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vertex</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ColorInOut</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vsLighting</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(device vertex_t* vertex_array [[ buffer(0)</span></span></span></span> ]], constant uniforms_t&amp; uniforms <span class="hljs-string"><span class="hljs-string">[[ buffer(1) ]]</span></span>, unsigned int vid <span class="hljs-string"><span class="hljs-string">[[ vertex_id ]]</span></span>) { ColorInOut out; float4 in_position = float4(float3(vertex_array[vid].position), <span class="hljs-number"><span class="hljs-number">1.0</span></span>); out.position = uniforms.modelViewProjection * in_position; float4x4 m = uniforms.model; m[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] = m[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] = m[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">0.0</span></span>f; // suppress translation component out.normal = (m * float4(normalize(vertex_array[vid].normal), <span class="hljs-number"><span class="hljs-number">1.0</span></span>)).xyz; out.tangent = (m * float4(normalize(vertex_array[vid].tangent), <span class="hljs-number"><span class="hljs-number">1.0</span></span>)).xyz; float3 worldPos = (uniforms.model * in_position).xyz; out.viewDirection = normalize(worldPos - uniforms.viewPosition); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> out; } // Fragment shader <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fragment</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">half4</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">psLighting</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ColorInOut in [[stage_in]])</span></span></span></span> { float3 normalTS = float3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); float3 lightDir = normalize(lightDirection); float3x3 ts = float3x3(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>.tangent, cross(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>.normal, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>.tangent), <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>.normal); float3 normal = -normalize(ts * normalTS); float ndotl = fmax(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, dot(lightDir, normal)); float3 diffuse = diffuseColor * ndotl; float3 h = normalize(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>.viewDirection + lightDir); float3 specular = specularColor * <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span> (fmax(dot(normal, h), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), specularPower); float3 finalColor = saturate(ambientColor + diffuse + specular); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> half4(float4(finalColor, <span class="hljs-number"><span class="hljs-number">1.0</span></span>)); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãã®çµæœã€ãƒ‡ãƒã‚¤ã‚¹ã®ç”»é¢ã§æ¬¡ã‚’ç¢ºèªã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/1be/528/541/1be52854189247e591e904e73086a4fb.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã‚Œã§ã‚¬ã‚¤ãƒ‰ã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã¯çµ‚ã‚ã‚Šã§ã™ã€‚ ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚³ãƒ¼ãƒ‰ã¯ã€gitãƒªãƒã‚¸ãƒˆãƒªã®<i>tutorial_1_1</i>ã‚¿ã‚°ã®ä¸‹ã«ã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> ã‚¹ãƒ†ãƒƒãƒ—2.ã„ãã¤ã‹ã®ç«‹æ–¹ä½“ã‚’æãã¾ã™ã€‚ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã„ãã¤ã‹ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æç”»ã™ã‚‹ã«ã¯ã€å®šæ•°ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ä»¥å‰ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ï¼ˆworld-view-projectionãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã€worldãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã€ã‚«ãƒ¡ãƒ©ä½ç½®ï¼‰ã¯1ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯ã™ã¹ã¦ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ æ˜ã‚‰ã‹ã«ã€ã‚«ãƒ¡ãƒ©ã®ä½ç½®ã‚’ä¸€åº¦é€ä¿¡ã™ã‚‹ã ã‘ã§ååˆ†ã§ã™ã€‚ã“ã®ãŸã‚ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«1å›è¨ˆç®—ã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ç”¨ã«è¿½åŠ ã®å®šæ•°ãƒãƒƒãƒ•ã‚¡ãƒ¼ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ ãŸã ã—ã€1ã¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã«å¯¾ã—ã¦å€‹åˆ¥ã®ãƒãƒƒãƒ•ã‚¡ãƒ¼ã®ä½œæˆã‚’ã¾ã é–‹å§‹ã—ã¦ã„ã¾ã›ã‚“ã€‚æ¬¡å›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®æ•°ãŒå¢—ãˆãŸã¨ãã«è¡Œã„ã¾ã™ã€‚ ä»Šã™ãè‡ªåˆ†ã§è©¦ã—ã¦ã¿ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ ã—ãŸãŒã£ã¦ã€5ã¤ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã®å ´åˆã€GPUã¨åŒæœŸã™ã‚‹ã¾ã§CPUãŒè¨ˆç®—ã§ãã‚‹3ã¤ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«5ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚»ãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹æ³•ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs"> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">MTLRenderCommandEncoder</span></span>&gt; renderEncoder = [commandBuffer renderCommandEncoderWithDescriptor: renderPassDescriptor]; renderEncoder.label = <span class="hljs-string"><span class="hljs-string">@"Simple render encoder"</span></span>; [renderEncoder setDepthStencilState:_depthState]; [renderEncoder pushDebugGroup:<span class="hljs-string"><span class="hljs-string">@"Draw cubes"</span></span>]; [renderEncoder setRenderPipelineState:_pipelineState]; [renderEncoder setVertexBuffer:_vertexBuffer offset:<span class="hljs-number"><span class="hljs-number">0</span></span> atIndex:<span class="hljs-number"><span class="hljs-number">0</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; CUBE_COUNTS; i++) { [renderEncoder setVertexBuffer:_dynamicUniformBuffer offset:(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(_uniform_buffer) * _currentUniformBufferIndex + i * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(uniforms_t)) atIndex:<span class="hljs-number"><span class="hljs-number">1</span></span> ]; [renderEncoder drawPrimitives:<span class="hljs-built_in"><span class="hljs-built_in">MTLPrimitiveTypeTriangle</span></span> vertexStart:<span class="hljs-number"><span class="hljs-number">0</span></span> vertexCount:<span class="hljs-number"><span class="hljs-number">36</span></span> instanceCount:<span class="hljs-number"><span class="hljs-number">1</span></span>]; } [renderEncoder popDebugGroup]; [renderEncoder endEncoding];</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å®šæ•°ãƒãƒƒãƒ•ã‚¡ãƒ¼ï¼ˆ <i>sizeofï¼ˆ_uniform_bufferï¼‰* _currentUniformBufferIndex + i * sizeofï¼ˆuniforms_tï¼‰ï¼‰</i>ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆã®è¨ˆç®—ã«æ³¨æ„ã‚’å–šèµ·ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ å¤‰æ•°<i>_currentUniformBufferIndex</i>ã¯ã€ç¾åœ¨ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¯¾å¿œã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã‚’å®šç¾©ã—ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼<i>i</i>ã¯ç‰¹å®šã®ã‚­ãƒ¥ãƒ¼ãƒ–ã®ãƒ‡ãƒ¼ã‚¿ã®å ´æ‰€ã‚’æ±ºå®šã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãã®çµæœã€ãã®ã‚ˆã†ãªå†™çœŸãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="//habrastorage.org/files/56d/9e1/352/56d9e13523c54daa961d74beb67246df.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ <i>tutorial_1_2</i>ã‚¿ã‚°ã®ä¸‹ã®gitãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> ã‚¹ãƒ†ãƒƒãƒ—3.è¤‡æ•°ã®ãƒ•ãƒ­ãƒ¼ã§ã„ãã¤ã‹ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æç”»ã—ã¾ã™ã€‚ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OpenGL ESã§1ã¤ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’æç”»ã§ãã¾ã™ã€‚æ¬¡ã«ã€ã„ãã¤ã‹ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚³ãƒãƒ³ãƒ‰ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’åŸ‹ã‚ã‚‹ã“ã¨ã‚’ãƒ‡ãƒ¢ã«è¿½åŠ ã—ã¾ã™ã€‚ ã‚­ãƒ¥ãƒ¼ãƒ–ã®åŠåˆ†ã‚’1ã¤ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã€æ®‹ã‚Šã®åŠåˆ†ã‚’åˆ¥ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ ã‚‚ã¡ã‚ã‚“ã€ã“ã®ä¾‹ã¯ç´”ç²‹ã«æ•™è‚²çš„ãªã‚‚ã®ã§ã‚ã‚Šã€ã“ã®å ´åˆã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Šã¯å¾—ã‚‰ã‚Œã¾ã›ã‚“ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Metal APIã®ã‚³ãƒãƒ³ãƒ‰ãƒãƒƒãƒ•ã‚¡ã‚’ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã§åŸ‹ã‚ã‚‹ãŸã‚ã«ã€ç‰¹åˆ¥ãªã‚¯ãƒ©ã‚¹<i>MTLParallelRenderCommandEncoderãŒã‚ã‚Š</i>ã¾ã™ã€‚ ã“ã®ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ <i>MTLRenderCommandEncoder</i>ã‚¯ãƒ©ã‚¹ã®å¤šãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä»»æ„ã«ä½œæˆã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€å‰ã®æ‰‹é †ã§æ—¢ã«çŸ¥ã£ã¦ã„ã¾ã™ã€‚ ã“ã‚Œã‚‰ã®å„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€ãƒãƒƒãƒ•ã‚¡ã‚’åˆ¥ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã®ã‚³ãƒãƒ³ãƒ‰ã§åŸ‹ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>dispatch_async</i>ã‚’ä½¿ç”¨<i>ã—ã¦</i> ã€ã‚­ãƒ¥ãƒ¼ãƒ–ã®åŠåˆ†ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’åˆ¥ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§é–‹å§‹ã—ã€æ®‹ã‚Šã®åŠåˆ†ã‚’ãƒ¡ã‚¤ãƒ³ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ ãã®çµæœã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)render:(RenderView*)renderView { dispatch_semaphore_wait(_inflightSemaphore, DISPATCH_TIME_FOREVER); [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> update]; <span class="hljs-built_in"><span class="hljs-built_in">MTLRenderPassDescriptor</span></span>* renderPassDescriptor = renderView.renderPassDescriptor; <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">CAMetalDrawable</span></span>&gt; drawable = renderView.currentDrawable; <span class="hljs-comment"><span class="hljs-comment">// new command buffer id &lt;MTLCommandBuffer&gt; commandBuffer = [_commandQueue commandBuffer]; commandBuffer.label = @"Simple command buffer"; // parallel render encoder id &lt;MTLParallelRenderCommandEncoder&gt; parallelRCE = [commandBuffer parallelRenderCommandEncoderWithDescriptor:renderPassDescriptor]; parallelRCE.label = @"Parallel render encoder"; id &lt;MTLRenderCommandEncoder&gt; rCE1 = [parallelRCE renderCommandEncoder]; id &lt;MTLRenderCommandEncoder&gt; rCE2 = [parallelRCE renderCommandEncoder]; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^ { @autoreleasepool { [self encodeRenderCommands: rCE2 Comment: @"Draw cubes in additional thread" StartIndex: CUBE_COUNTS / 2 EndIndex: CUBE_COUNTS]; } dispatch_semaphore_signal(_renderThreadSemaphore); }); [self encodeRenderCommands: rCE1 Comment: @"Draw cubes" StartIndex: 0 EndIndex: CUBE_COUNTS / 2]; // wait additional thread and finish encoding dispatch_semaphore_wait(_renderThreadSemaphore, DISPATCH_TIME_FOREVER); [parallelRCE endEncoding]; __block dispatch_semaphore_t block_sema = _inflightSemaphore; [commandBuffer addCompletedHandler:^(id&lt;MTLCommandBuffer&gt; buffer) { dispatch_semaphore_signal(block_sema); }]; _currentUniformBufferIndex = (_currentUniformBufferIndex + 1) % MAX_INFLIGHT_BUFFERS; [commandBuffer presentDrawable:drawable]; [commandBuffer commit]; } - (void)encodeRenderCommands:(id &lt;MTLRenderCommandEncoder&gt;)renderEncoder Comment:(NSString*)comment StartIndex:(int)startIndex EndIndex:(int)endIndex { [renderEncoder setDepthStencilState:_depthState]; [renderEncoder pushDebugGroup:comment]; [renderEncoder setRenderPipelineState:_pipelineState]; [renderEncoder setVertexBuffer:_vertexBuffer offset:0 atIndex:0 ]; for (int i = startIndex; i &lt; endIndex; i++) { [renderEncoder setVertexBuffer:_dynamicUniformBuffer offset:(sizeof(_uniform_buffer) * _currentUniformBufferIndex + i * sizeof(uniforms_t)) atIndex:1 ]; [renderEncoder drawPrimitives:MTLPrimitiveTypeTriangle vertexStart:0 vertexCount:36 instanceCount:1]; } [renderEncoder popDebugGroup]; [renderEncoder endEncoding]; }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã¨è¿½åŠ ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’åŒæœŸã™ã‚‹ãŸã‚ã«ã€ <i>_renderThreadSemaphore</i>ã‚»ãƒãƒ•ã‚©ã‚’ä½¿ç”¨ã—<i>ã¾ã—ãŸ</i> ã€‚ã“ã‚Œã¯ã€ <i>MTLParallelRenderCommandEncoder</i>ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§<i>endEncoding</i>ã‚’å‘¼ã³å‡ºã™ç›´å‰ã«ã“ã‚Œã‚‰2ã¤ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’åŒæœŸã—ã¾ã™ã€‚  <i>MTLParallelRenderCommandEncoder</i>ã§ã¯ã€ <i>ç”Ÿæˆã™ã‚‹</i> <i>MTLRenderCommandEncoder</i>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§<i>endEncoding</i>ãŒå‘¼ã³å‡ºã•ã‚ŒãŸå¾Œã«ã€ <i>endEncoding</i>ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã“ã¨ãŒ<i>ä¿è¨¼ã•ã‚Œ</i>ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã™ã¹ã¦ãŒæ­£ã—ãè¡Œã‚ã‚ŒãŸå ´åˆã€ãƒ‡ãƒã‚¤ã‚¹ç”»é¢ã®çµæœã¯å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨åŒã˜ã«ãªã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ <i>tutorial_1_3</i>ã‚¿ã‚°ã®ä¸‹ã®gitãƒªãƒã‚¸ãƒˆãƒªã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> ãŠã‚ã‚Šã« </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ä»Šæ—¥ã¯ã€Apple Metal APIã‚’ä½¿ç”¨ã—ã¦ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹éš›ã®éå¸¸ã«åˆæœŸã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¦‹ã¾ã—ãŸã€‚ ã“ã®ãƒˆãƒ”ãƒƒã‚¯ã¨ã“ã®å½¢å¼ãŒã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã¨ã£ã¦èˆˆå‘³æ·±ã„ã‚‚ã®ã§ã‚ã‚‹å ´åˆã¯ã€ã•ã‚‰ã«ç¶šã‘ã¾ã™ã€‚ æ¬¡ã®ã‚·ãƒªãƒ¼ã‚ºã§ã¯ã€ã‚ˆã‚Šèˆˆå‘³æ·±ã„ãƒ¢ãƒ‡ãƒ«ã‚’æç”»ã™ã‚‹äºˆå®šã§ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€ãã‚Œã‚’ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ ãƒ¬ãƒƒã‚¹ãƒ³ã®ã€Œãƒãƒƒãƒ—ã€ã¨ã—ã¦ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ ã”æ„è¦‹ã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J24877/index.html">Rssåˆ†å¸ƒã‚¢ã‚¤ã‚³ãƒ³| ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ç¶™ç¶š</a></li>
<li><a href="../J248775/index.html">JITã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®å¹´é½¢ã€‚ ãƒ‘ãƒ¼ãƒˆI.å‰µä¸–è¨˜</a></li>
<li><a href="../J248777/index.html">ç‰¹è¨±æˆ¦äº‰ã€‚ ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰1.æ€ªäººã®è„…å¨</a></li>
<li><a href="../J248779/index.html">å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆï¼šVowpal Wabbit</a></li>
<li><a href="../J24878/index.html">Alisher UsmanovãŒProNewsãƒ“ãƒ‡ã‚ªãƒãƒ¼ã‚¿ãƒ«ã‚’é–‹å§‹</a></li>
<li><a href="../J248787/index.html">WRLãŠã‚ˆã³BindableAttribute</a></li>
<li><a href="../J248789/index.html">é–‹ç™ºè€…ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼šMicroBlinkã®PhotoMath</a></li>
<li><a href="../J24879/index.html">ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã¨ãƒã‚¦ã‚¹ã‚’ãã‚Œã„ã«ã™ã‚‹</a></li>
<li><a href="../J248793/index.html">ãƒ‡ãƒ¼ã‚¿åˆ†æã¨æ©Ÿæ¢°å­¦ç¿’ã«é–¢ã™ã‚‹æœ€ã‚‚èˆˆå‘³æ·±ã„è³‡æ–™ã®æ¦‚è¦32ï¼ˆ2015å¹´1æœˆ19ã€œ25æ—¥ï¼‰</a></li>
<li><a href="../J248797/index.html">è­˜åˆ¥å­ãŒè­˜åˆ¥å­ã§ã¯ãªã„å ´åˆã€ã¾ãŸã¯ãƒ¢ãƒ³ã‚´ãƒ«èªã®â€‹â€‹æ¯éŸ³åŒºåˆ‡ã‚Šæ”»æ’ƒ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
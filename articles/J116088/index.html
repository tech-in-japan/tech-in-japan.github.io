<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗒️ 🎖️ 🤵🏾 Unity 3dタンクチュートリアル：シャーシ（レッスン2.追跡済みシャーシ） 💫 🎅🏼 ⚜️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="レッスン1 << 
  
 
  
  
  
 
  
  エントリー  
  
 自宅で戦車を組み立てるレッスンを続けます。 前のレッスンでは、Unityで車両を運転する基本について学びました。このレッスンでは、このデモで確認できることを行います。 
  
 
  
 つまり、3Dエディタで追跡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Unity 3dタンクチュートリアル：シャーシ（レッスン2.追跡済みシャーシ）</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body">  <a href="http://habrahabr.ru/blogs/gdev/115557/">レッスン1 &lt;&lt;</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/fe/c9/fec96410ca04f4aa98107fee31581579.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> エントリー </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     自宅で戦車を組み立てるレッスンを続けます。 前のレッスンでは、Unityで車両を運転する基本について学びました。このレッスンでは、この<a href="https://dl.dropbox.com/u/23068733/TankDemo/index.xhtml">デモで</a>確認できることを行います。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     つまり、3Dエディタで追跡されたシャーシをより適切にモデル化して、適切に移動して地形のバンプに対応できるようにする方法について説明します。また、デモで見ることができる既製のモデルを提供し、その後、このすべてを実現し、もたらす方法を学習しますWheel Collidersで動きを設定します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、優先順位の問題の決定を進める前に、最初にそれらを策定する必要があります。前のレッスンから、車輪を回転させて不整地に対応させる方法をすでに知っていますが、問題は車輪（トラックローラー）に加えて、タンクが多くのキャタピラーを持っていることですトラックローラーが回転するのと同じ速度で移動する部品（トラック）ほど、キャタピラは車輪とともに不均一な地形に反応するはずです。 これをどうやってやるの？ 実装する前に、これをシミュレートする必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  1.モデリングテクニックの追跡 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     奇妙なことではありませんが、これらの方法はキャタピラーの移動方法と密接に関連していますが、当然、すべては、その移動を実装するエンジンが提供する可能性によっても異なります。  Unity 3dの場合、2つのシナリオがあります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> この例のように、多くの別個のオブジェクトからの毛虫をシミュレートします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （3ds max） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/f8/e0/f8e0b1311ee5da7943c95e7c28dc1167.jpg" alt="画像"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     後続のトラックの位置を取得して各トラックを移動し、現在のトラックの位置を次のトラックの位置に徐々に補間し、 <a href="http://unity3d.com/support/documentation/ScriptReference/Collider.html">Collider</a>クラスの<a href="http://unity3d.com/support/documentation/ScriptReference/Collider.Raycast.html">Raycast（）</a>メソッドを使用して地形の不規則性に基づいてトラックの変形を計算します。これにより、特定の方向に特定の長さのビームが投影され、戻りますコライダーと交差する場合はtrue。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この方法の利点：キャタピラーの詳細度が高く、キャタピラーの動きがリアルになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     欠点：実装の複雑さ、以降のトラック数に応じた計算能力への負荷 それぞれについてRaycast（）を計算する必要があります。それらが多すぎる場合、パフォーマンスの低下は避けられません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     正直なところ、私はこのメソッドを実装しようとしませんでした。  gamedev <a href="http://www.gamedev.ru/code/forum/%3Fid%3D74960">フォーラムに</a>登ると、2番目が見つかりました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li> キャタピラーを連続テープでモデル化します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （3ds max） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/43/6c/436c431bcfe15bf4f5a1f9acb3664a1d.jpg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、1つ以上のトラックの繰り返しテクスチャを適用します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ほら、すべてがここでよりシンプルになりました。キャタピラーのトラックの動きの錯覚は、テクスチャ座標を変更してテクスチャを動かすことで作成できます。 また、最初のレッスンからWheelColliderのホイールに取り付けられた<a href="http://unity3d.com/support/documentation/ScriptReference/WheelCollider.GetGroundHit.html">GetGroundHit（）</a>メソッドに基づいてホイールの位置を計算する方法をすでに知っているため、地形の不規則性に応じた変形は、トラックローラーが配置されているテープのそれらの場所で骨を結ぶことによって実行できますテープが取り付けられている骨の位置は難しくありません。 または、同じRaycastを使用することもできます（誰でも、WheelColliderサスペンションへのバインディングに満足しています）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この方法の利点：実装の容易さ、計算の負荷が少ないこと。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     短所：トラックの詳細は最初の方法に比べてそれほど高くありません（質問は相対的ですが、World of Tanks、Crysis、Battlefield：Bad Companyで同じことがどのように行われたかを確認してください）そしてそれは非常に現実的に見える）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そこで、2番目の方法を選択し、次のように変形できるようにキャタピラにボーンをアタッチします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （3ds max） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/5c/a9/5ca9974f95a2401a6164cf7832c7f537.jpg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/e0/05/e005e4154123f61bca218f109357288a.jpg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     スクリーンショットを見るとわかるように、車輪もキャタピラーと同じ骨に取り付けられています。 試してみて、ある種のプリミティブを作成し、それをボーンまたはいくつかにアタッチしてからUnityにエクスポートします（ <a href="http://unity3d.com/support/documentation/Manual/HOWTO-importObject.html">ここ</a>でさまざまな3Dモデリングパッケージからのエクスポートについて読むことができます。すべてをFBX形式にエクスポートして、結果のファイルをフォルダーにコピーすることをお勧めしますプロジェクトのアセット。その後、プロジェクトの[プロジェクト]タブでこのファイルの名前を確認し、さらに操作するためにシーンにドラッグするだけです。 その後、モデル自体を選択して、移動、回転、ストレッチを試みます。 わかった？ そうです、うまくいきません！ 事実、Unityでは、ボーン（ボーン）にアタッチされたスキンメッシュはその変換のスレーブになり、アタッチされたボーンで同じ操作を実行しようとすると成功します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、ホイールを回転させる必要があるため、ホイールを骨に固定する必要はありません。 それらを解くと、次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （3ds max） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/ab/07/ab07af62d19bb23c19871aa8572712c0.jpg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     基本的にはこれで、モデルの準備は完了しました。約束したとおり、 <a href="">モデル</a>と<a href="">トラックのテクスチャー</a>へのリンクを提供しました。 モデルはFBX形式であるため、この形式をサポートする3dエディターにインポートし（私の知る限り、すべての一般的なエディターがサポートします）、作成方法とボーンの接続方法を詳細に調べるか、すぐにUnityにインポートして既に確認できます実際には、次に実際に行うこと。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  2.モデルをインポートしてスクリプトを準備する </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、上で書いたように、モデルとテクスチャをプロジェクトのAssetsフォルダーにコピーするか、エクスプローラーからプロジェクトタブに直接ドラッグすることができます。主なことは、モデルとテクスチャが同じフォルダーにあるため、何らかの理由で、トラックにテクスチャが表示されない（モデルを自然にステージにドラッグする必要がある前に）、または別のフォルダーに投げたい場合は、トラックの1つを選択するだけです（Track_line_leftおよびTrack_line_rightと呼ばれます） ）、インスペクタで テクスチャ設定に移動し、選択ボタンを押してトラックテクスチャを選択します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/16/a1/16a11a7666dc54436ed84933605432c5.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     また、トラックの数を増やすために、画像のように、yのタイリングを2に設定します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     新しいC＃スクリプトを作成し（Assets-&gt; Create-&gt; C Sharp Script）、TankTrackControllerという名前を付けて開き、将来使用する必要がある変数を宣言します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections.Generic; //<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> TankTrackController : MonoBehaviour { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> GameObject wheelCollider; //<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> wheelRadius = <span class="hljs-number"><span class="hljs-number">0.15</span></span>f; //<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> suspensionOffset = <span class="hljs-number"><span class="hljs-number">0.05</span></span>f; //<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> trackTextureSpeed = <span class="hljs-number"><span class="hljs-number">2.5</span></span>f; //<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> GameObject leftTrack; //<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span>[] leftTrackUpperWheels; //<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span>[] leftTrackWheels; //<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span>[] leftTrackBones; //<span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> GameObject rightTrack; //<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span>[] rightTrackUpperWheels; //<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span>[] rightTrackWheels; //<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span>[] rightTrackBones; //<span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> WheelData { //<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span> wheelTransform; //<span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Transform</span></span> boneTransform; //<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> WheelCollider col; //<span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Vector3 wheelStartPos; //<span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Vector3 boneStartPos; //<span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> rotation = <span class="hljs-number"><span class="hljs-number">0.0</span></span>f; //<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Quaternion startWheelAngle; //<span class="hljs-number"><span class="hljs-number">17</span></span> } protected WheelData[] leftTrackWheelData; //<span class="hljs-number"><span class="hljs-number">18</span></span> protected WheelData[] rightTrackWheelData; //<span class="hljs-number"><span class="hljs-number">18</span></span> protected <span class="hljs-type"><span class="hljs-type">float</span></span> leftTrackTextureOffset = <span class="hljs-number"><span class="hljs-number">0.0</span></span>f; //<span class="hljs-number"><span class="hljs-number">19</span></span> protected <span class="hljs-type"><span class="hljs-type">float</span></span> rightTrackTextureOffset = <span class="hljs-number"><span class="hljs-number">0.0</span></span>f; //<span class="hljs-number"><span class="hljs-number">19</span></span> }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> 動的リストを使用するために必要な名前空間を解決します。それらは後で便利になります。 </li><li>  Wheel Colliderのプレハブが格納される変数を宣言します（前のレッスンの項目2を思い出してください）。 </li><li> ホイールの半径。 </li><li> 表面に接触していないときの開始位置に対するホイールのオフセット。 </li><li> キャタピラーの速度（実際には、テクスチャ座標の変位の速度）。 </li><li> 左右のトラック。 </li><li> ホイールコライダーが追加されない左右の上部ホイール。 </li><li>  Wheel Colliderを追加するホイール（前のレッスンとは異なり、Wheel Colliderの配列は宣言しませんでした。ホイールの位置を使用してスクリプトから直接ホイールに追加されるため、押す前にホイールを動かさないでください。 [再生]ボタンで、それらは互いに相対的に整列する必要があります。 </li><li> 左右の毛虫に付着した骨。 </li><li> 各ホイールについて必要な情報（UpperWheelsを除く）を保存するクラスを宣言します。 </li><li> 車輪の変形。 </li><li> キャタピラーに取り付けられた骨を変形させます。 </li><li>  WheelColliderホイール; </li><li> ホイールの開始位置。 </li><li> 骨の開始位置。 </li><li> ホイール回転角。 </li><li> ホイールの回転の初期角度。 </li><li> ここでわかるように、保護されたアクセス修飾子が使用されているため、データをクラス外で変更できないように、左右のホイールにデータを格納する配列を宣言します。 </li><li> そして最後に、トラック上のテクスチャ座標の現在のオフセットを格納する変数を宣言します。 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、メイン変数は宣言され、それらをモデルに関連付け、スクリプトを保存し、エディターに移動し、スクリプトをtankオブジェクトにドラッグします（もちろん名前を変更しない限り）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ご覧のように、tankオブジェクト自体に移動します。添付されているスクリプトに加えて、Animationオブジェクトがあります。そこから何でも安全に削除できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/7d/8c/7d8c9184a181d169f905d604be66d460.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、WheelColliderを使用してオブジェクトのプレハブを作成します（前のレッスンの項目2を思い出します）。これをtank_colliderと呼びます。次のパラメーターがあります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/a2/a1/a2a1a77450389cad5a76eb3073522089.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     オブジェクトをスクリプトにドラッグし始めます。最初にできることは、新しく作成したプレハブをスクリプト内のWheel Colliderフィールドにドラッグすることです。 次に、トラック（Track_line_leftおよびTrack_line_rightと呼ばれます）をLeft TrackおよびRight Trackフィールドにドラッグします。 次に、上部の車輪（Upper_wheel [number] _left、Upper_wheel [number] _right）を左トラックの上部ホイールと右トラックの上部ホイールの配列に配置します。 さて、ホイールとボーンの残りの部分（ホイールはrowheel_ [number] _rightとrowheel_ [number] _leftと呼ばれ、ボーンはSuspension_bone [number] _leftとSuspension_bone [number] _rightと呼ばれる）を理解できると思います。簡単にするために、特別に番号を付け、Chain_bone [number] _leftおよびChain_bone [number] _rightと呼ばれるボーンには触れないでください。キャタピラーの静的な部分はそれらに接続されています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最終的には、次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/bd/dc/bddc64b20358d4d6afdf226d67f66a0d.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、tankオブジェクトを選択し、次のパラメーターを使用してRigidbodyを追加します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/fa/cc/faccb11a6c28d989ff82b9f66461acb6.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、ハルの子オブジェクト（タンク本体）を見つけ、それにメッシュコライダーを追加し（コンポーネント-&gt;物理-&gt;メッシュコライダー）、凸ボックスをオンにします（このチェックボックスは、このメッシュコライダーがタンク本体に含まれるすべての三角形の衝突を計算しないことを意味しますが、最大255個の三角形を含む独自のメッシュを作成します） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  3.ホイールコライダーとホイールパラメーターを設定する </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そこで、変数を宣言して初期化し、先に進み、ホイールパラメーターをWheelData [] leftTrackWheelDataおよびWheelData [] rightTrackWheelData配列に保存することから始めます。 これをAwake（）関数内で行い、補助関数WheelData SetupWheels（）を宣言します。これは、すべての操作を行う前に、WheelData型の値を返す必要があります。 すべて次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs ruby">void Awake() { leftTrackWheelData = new WheelData[leftTrackWheels.Length]; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> rightTrackWheelData = new WheelData[rightTrackWheels.Length]; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(int i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;leftTrackWheels.Length;i++){ leftTrackWheelData[i] = SetupWheels(leftTrackWheels[i],leftTrackBones[i]); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">2</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(int i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;rightTrackWheels.Length;i++){ rightTrackWheelData[i] = SetupWheels(rightTrackWheels[i],rightTrackBones[i]); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">2</span></span> } Vector3 offset = transform.position; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">3</span></span> offset.z +=<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">01</span></span>f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">3</span></span> transform.position = offset; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">3</span></span> } WheelData SetupWheels(Transform wheel, Transform bone){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">2</span></span> WheelData result = new WheelData(); GameObject go = new GameObject(<span class="hljs-string"><span class="hljs-string">"Collider_"</span></span>+wheel.name); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">4</span></span> go.transform.parent = transform; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">5</span></span> go.transform.position = wheel.position; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">6</span></span> go.transform.localRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">0</span></span>,wheel.localRotation.y,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">7</span></span> WheelCollider col = (WheelCollider) go.AddComponent(typeof(WheelCollider));<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">8</span></span> WheelCollider colPref = wheelCollider.GetComponent&lt;WheelCollider&gt;();<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">9</span></span> col.mass = colPref.mass;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> col.center = colPref.center;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> col.radius = colPref.radius;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> col.suspensionDistance = colPref.suspensionDistance;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> col.suspensionSpring = colPref.suspensionSpring;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> col.forwardFriction = colPref.forwardFriction;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> col.sidewaysFriction = colPref.sidewaysFriction;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> result.wheelTransform = wheel; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">11</span></span> result.boneTransform = bone; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">11</span></span> result.col = col; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">11</span></span> result.wheelStartPos = wheel.transform.localPosition; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">11</span></span> result.boneStartPos = bone.transform.localPosition; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">11</span></span> result.startWheelAngle = wheel.transform.localRotation; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">12</span></span> }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> ホイールに関する情報を含む配列の次元を宣言します。 </li><li> これらの配列を埋めます。このため、上記で書いたように、最初の引数にTransformホイールを渡し、2番目の引数にTransformボーンを渡すSetupWheels（）関数を作成しました。 </li><li> 奇妙なことですが、私がプレイモードに入ったとき、コライダーは絶えず地下に落下しました。幸いなことに、これは単にタンクオブジェクトを少し前方に動かすことで処理されます。 </li><li> 名前がCollider_プレフィックスを持つホイールの名前で構成される新しい空のGameObjectを作成します。 </li><li> 新しく作成されたオブジェクトを、スクリプトがアタッチされているオブジェクトの子（この場合はtankオブジェクトの子）にします。 </li><li> 新しく作成したオブジェクトを、ホイールがある場所に移動します。 </li><li> 現在のホイールが回転する角度と同じ角度だけ、オブジェクトをY軸を中心にローカルに回転します。 </li><li>  Wheel Colliderコンポーネントを空のGOに追加します。 </li><li> プレハブからWheel Collider設定を取得します。 </li><li> プレハブから取得した設定を新しく作成したWheel Colliderに割り当てます（ご覧のとおり、各設定を個別に割り当てる必要がありました。この場合、col = colPrefと書くだけではコンパイラはこの設計をスキップしますが、Collider設定はデフォルトのままです）。 </li><li> 必要な残りの情報を割り当てます。 </li><li> 結果を返します。 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     安全に「再生」をクリックして、各ホイールに各コライダーを手動で追加した最初のレッスンではなく、ホイールコライダーが下のホイールに自動的に追加されるようにすることができます。このアプローチの利点について話すべきではないと思います。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  4.車輪とトラックを「復活」させる </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最初のレッスンから、車輪を回転させて地形の不規則性に対応する方法を既に知っている必要があります。ここでは同じ原理を使用しますが、乗用車の場合、前輪と後輪は異なる速度で回転できますが、タンクには別々のトラックローラーがありますキャタピラーは同じ速度で回転するため、車輪の特定の平均回転速度を見つける必要があります。 そして当然、キャタピラーのテクスチャの移動速度をこの速度にバインドする必要があります。 すべてについて詳しく説明しましょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs ruby">void FixedUpdate(){ UpdateWheels(); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> } public void UpdateWheels(){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> float delta = Time.fixedDeltaTime; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">2</span></span> float trackRpm = CalculateSmoothRpm(leftTrackWheelData); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">3</span></span> foreach (WheelData w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> leftTrackWheelData){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">4</span></span> w.wheelTransform.localPosition = CalculateWheelPosition(w.wheelTransform,w.col,w.wheelStartPos); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">5</span></span> w.boneTransform.localPosition = CalculateWheelPosition(w.boneTransform,w.col,w.boneStartPos); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">6</span></span> w.rotation = Mathf.Repeat(w.rotation + delta * trackRpm * <span class="hljs-number"><span class="hljs-number">360.0</span></span>f / <span class="hljs-number"><span class="hljs-number">60.0</span></span>f, <span class="hljs-number"><span class="hljs-number">360.0</span></span>f); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">7</span></span> w.wheelTransform.localRotation = Quaternion.Euler(w.rotation, w.startWheelAngle.y, w.startWheelAngle.z); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">8</span></span> } leftTrackTextureOffset = Mathf.Repeat(leftTrackTextureOffset + delta*trackRpm*trackTextureSpeed/<span class="hljs-number"><span class="hljs-number">60.0</span></span>f,<span class="hljs-number"><span class="hljs-number">1.0</span></span>f); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">9</span></span> leftTrack.renderer.material.SetTextureOffset(<span class="hljs-string"><span class="hljs-string">"_MainTex"</span></span>,new Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>,-leftTrackTextureOffset)); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> trackRpm = CalculateSmoothRpm(rightTrackWheelData); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">3</span></span> foreach (WheelData w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rightTrackWheelData){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">4</span></span> w.wheelTransform.localPosition = CalculateWheelPosition(w.wheelTransform,w.col,w.wheelStartPos); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">5</span></span> w.boneTransform.localPosition = CalculateWheelPosition(w.boneTransform,w.col,w.boneStartPos); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">6</span></span> w.rotation = Mathf.Repeat(w.rotation + delta * trackRpm * <span class="hljs-number"><span class="hljs-number">360.0</span></span>f / <span class="hljs-number"><span class="hljs-number">60.0</span></span>f, <span class="hljs-number"><span class="hljs-number">360.0</span></span>f); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">7</span></span> w.wheelTransform.localRotation = Quaternion.Euler(w.rotation, w.startWheelAngle.y, w.startWheelAngle.z); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">8</span></span> } rightTrackTextureOffset = Mathf.Repeat(rightTrackTextureOffset + delta*trackRpm*trackTextureSpeed/<span class="hljs-number"><span class="hljs-number">60.0</span></span>f,<span class="hljs-number"><span class="hljs-number">1.0</span></span>f); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">/9 rightTrack.renderer.material.SetTextureOffset("_MainTex",new Vector2(0,-rightTrackTextureOffset)); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/10 for(int i=0;i&lt;leftTrackUpperWheels.Length;i++){ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/11 leftTrackUpperWheels[i].localRotation = Quaternion.Euler(leftTrackWheelData[0].rotation, leftTrackWheelData[0].startWheelAngle.y, leftTrackWheelData[0].startWheelAngle.z); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/11 } for(int i=0;i&lt;rightTrackUpperWheels.Length;i++){ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/11 rightTrackUpperWheels[i].localRotation = Quaternion.Euler(rightTrackWheelData[0].rotation, rightTrackWheelData[0].startWheelAngle.y, rightTrackWheelData[0].startWheelAngle.z); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/11 } } private float CalculateSmoothRpm(WheelData[] w){ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/12 float rpm = 0.0f; List&lt;int&gt; grWheelsInd = new List&lt;int&gt;(); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/13 for(int i = 0;i&lt;w.Length;i++){ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/14 if(w[i].col.isGrounded){ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/14 grWheelsInd.Add(i); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/14 } } if(grWheelsInd.Count == 0){ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/15 foreach(WheelData wd in w){ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/15 rpm +=wd.col.rpm; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/15 } rpm /</span></span>= w.Length; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">15</span></span> }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(int i = <span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;grWheelsInd.Count;i++){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">16</span></span> rpm +=w[grWheelsInd[i]].col.rpm; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">16</span></span> } rpm /= grWheelsInd.Count; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">16</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rpm; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">17</span></span> } private Vector3 CalculateWheelPosition(Transform w,WheelCollider col,Vector3 startPos){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">18</span></span> WheelHit hit; Vector3 lp = w.localPosition; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (col.GetGroundHit(out hit)) { lp.y -= Vector3.Dot(w.position - hit.point, transform.up) - wheelRadius; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { lp.y = startPos.y - suspensionOffset; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lp; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  FixedUpdate（）関数内で関数UpdateWheels（）を呼び出し、ホイールの位置と回転角度を計算します。 </li><li> レッスン1を参照してください。 </li><li> 関数CalculateSmoothRpm（）は、車輪の平均速度を計算し（後で詳しく説明します）、車輪が同じ速度で回転するように、leftTrackWheelData []配列全体を渡し、次にrightTrackWheelData []配列を渡します。 </li><li> 左右の車輪にデータを含む配列のすべての要素に対して、次の操作を実行します。 </li><li>  Y軸に沿ったホイールのローカル位置を計算します。これは、CalculateWheelPosition（）関数（詳細）で役立ちます。この関数には、ホイールの変換、そのWheelCollider、および初期ローカル位置が渡されます。 </li><li> 同じ操作。今回は、キャタピラーのこの部分が取り付けられている骨のローカル位置を計算します。 </li><li> ホイールの回転角度を計算します（レッスン1を参照）が、今回はコライダーのrpmではなく、以前に計算された平均回転速度を使用します。 </li><li> 計算された回転角度をホイールのローカル回転角度に適用します（レッスン1を参照）。 </li><li> キャタピラーのテクスチャのオフセットを計算します。 残念ながら、ホイールを回転させてキャタピラーを同じ速度で動かすことができる普遍的な公式は見つかりませんでしたので、追加の変数trackTextureSpeed（上記を参照）を導入する必要がありましたが、これは後でホイールとキャタピラーが均一な速度で動くように手動で調整する必要があります </li><li> キャタピラーオフセットを、Y座標（新しいVector2（0、-leftTrackTextureOffset））、GO leftTrackおよびrightTrackで使用されるマテリアルのメインテクスチャ（ "_MainTex"）に適用します。 </li><li>  WheelColliderが取り付けられていない上部の車輪の回転を計算します。他の車輪から回転角を借りることができますが、すべて同じ速度で動きます。 </li><li> 最後に、CalculateSmoothRpm（）関数に到達しました。この関数は、WheelData型の配列を最初の引数として受け取り、元の名前はwです。 </li><li>  WheelCollider colが現在表面（地形）に接触している配列wの要素のインデックスを含む新しい動的リストを作成します。 </li><li> 配列を調べて、コライダーがサーフェスに触れる要素のインデックスを見つけます。 </li><li> リスト内の要素数がゼロの場合、つまり、どのコライダーも地面に触れていない場合、配列w内のすべてのrpmコライダーを合計し、結果の値を配列wの要素数で除算して、平均値を求めます。 </li><li> リストの要素が1つ以上ある場合、つまり1つ以上のコライダーが地面に触れている場合は、これらのコライダーのみの速度を合計し、リスト内の要素の数で除算します。 </li><li> 結果の値を返します。  （質問があります：地面に接触するコライダーを計算するためのこれらすべての操作と、すべてのホイールの平均回転速度を常に見つけることができない理由は何ですか？答えは宿題です。状況： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/4a/97/4a975a686a742d2eddd33bbd9b0db057.jpg" alt="画像"></li><li> 関数CalculateWheelPosition（）は、ホイール（またはボーン）の変換を最初の引数、ホイールColliderの2番目、およびホイール（またはボーン）の開始ローカル位置の3番目として受け取ります。 上で述べたように、この関数はホイール（またはボーン）のローカル位置を計算し、最初のレッスンでこのアルゴリズムを検討したため、まったく新しいものを運びません。 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これで、Playを安全にクリックして、車輪が動いていることを確認できますが、戦車はまだ運転方法を知らないので、平らでない場所に移動してください。 また、車輪が地下に移動したことは重要であることに注意してください。変数wheelRadiusもあり、トラックのある車輪が地面に位置するようにPlayモードを終了せずに値を調整します。変数trackTextureSpeedの値は、トラックの動きを同期します車輪の動きで。 私のデータ値は次のとおりです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/71/30/713089365b429272b620a92aeedd3fe5.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  5.乗ることを学ぶ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     おそらく、従来の自動車と区別される無限軌道車両の動きの最も重要な特徴は何ですか？ これは適切な転換点だと思います。 信じられない？  <a href="http://www.youtube.com/watch%3Fv%3D7iiN-VzJuug">ご覧ください</a> 。 普通の車に向きを変える機会があれば、金髪の人が駐車場を離れるのを見ることができるので、前の車に頻繁に衝突することはありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     それでは、どうやってタンクを所定の位置に回すことができますか？ 上記のビデオからわかるように、すべてがとてつもなく単純です。1つの毛虫が前方に移動し、他の毛虫が後方に移動するため、タンクはその軸の周りを回転します。 移動中のタンクの回転とほぼ同じ方法ですが、回転する側にあるキャタピラーは反対方向に移動せず、少し減速します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最も簡単なものから始めて、戦車にその場で電源を入れるように教え始めることを提案します。 ここではすべてが明らかであるように見えました。 そして、これを行うことができます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> rotateOnStandTorque = <span class="hljs-number"><span class="hljs-number">1500.0</span></span>f; //<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> rotateOnStandBrakeTorque = <span class="hljs-number"><span class="hljs-number">500.0</span></span>f; //<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> maxBrakeTorque = <span class="hljs-number"><span class="hljs-number">1000.0</span></span>f; //<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> FixedUpdate(){ <span class="hljs-type"><span class="hljs-type">float</span></span> accelerate = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-type"><span class="hljs-type">float</span></span> steer = <span class="hljs-number"><span class="hljs-number">0</span></span>; accelerate = <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span>.GetAxis("Vertical"); //<span class="hljs-number"><span class="hljs-number">4</span></span> steer = <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span>.GetAxis("Horizontal"); //<span class="hljs-number"><span class="hljs-number">4</span></span> UpdateWheels(accelerate,steer); //<span class="hljs-number"><span class="hljs-number">5</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> UpdateWheels(<span class="hljs-type"><span class="hljs-type">float</span></span> accel,<span class="hljs-type"><span class="hljs-type">float</span></span> steer){ //<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> delta = <span class="hljs-type"><span class="hljs-type">Time</span></span>.fixedDeltaTime; <span class="hljs-type"><span class="hljs-type">float</span></span> trackRpm = CalculateSmoothRpm(leftTrackWheelData); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (WheelData w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> leftTrackWheelData){ w.wheelTransform.localPosition = CalculateWheelPosition(w.wheelTransform,w.col,w.wheelStartPos); w.boneTransform.localPosition = CalculateWheelPosition(w.boneTransform,w.col,w.boneStartPos); w.rotation = Mathf.Repeat(w.rotation + delta * trackRpm * <span class="hljs-number"><span class="hljs-number">360.0</span></span>f / <span class="hljs-number"><span class="hljs-number">60.0</span></span>f, <span class="hljs-number"><span class="hljs-number">360.0</span></span>f); w.wheelTransform.localRotation = Quaternion.Euler(w.rotation, w.startWheelAngle.y, w.startWheelAngle.z); CalculateMotorForce(w.col,accel,steer); //<span class="hljs-number"><span class="hljs-number">6</span></span> } leftTrackTextureOffset = Mathf.Repeat(leftTrackTextureOffset + delta*trackRpm*trackTextureSpeed/<span class="hljs-number"><span class="hljs-number">60.0</span></span>f,<span class="hljs-number"><span class="hljs-number">1.0</span></span>f); leftTrack.renderer.material.SetTextureOffset("_MainTex",<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>,-leftTrackTextureOffset)); trackRpm = CalculateSmoothRpm(rightTrackWheelData); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (WheelData w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rightTrackWheelData){ w.wheelTransform.localPosition = CalculateWheelPosition(w.wheelTransform,w.col,w.wheelStartPos); w.boneTransform.localPosition = CalculateWheelPosition(w.boneTransform,w.col,w.boneStartPos); w.rotation = Mathf.Repeat(w.rotation + delta * trackRpm * <span class="hljs-number"><span class="hljs-number">360.0</span></span>f / <span class="hljs-number"><span class="hljs-number">60.0</span></span>f, <span class="hljs-number"><span class="hljs-number">360.0</span></span>f); w.wheelTransform.localRotation = Quaternion.Euler(w.rotation, w.startWheelAngle.y, w.startWheelAngle.z); CalculateMotorForce(w.col,accel,-steer); //<span class="hljs-number"><span class="hljs-number">6</span></span> } rightTrackTextureOffset = Mathf.Repeat(rightTrackTextureOffset + delta*trackRpm*trackTextureSpeed/<span class="hljs-number"><span class="hljs-number">60.0</span></span>f,<span class="hljs-number"><span class="hljs-number">1.0</span></span>f); rightTrack.renderer.material.SetTextureOffset("_MainTex",<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>,-rightTrackTextureOffset)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-type"><span class="hljs-type">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;leftTrackUpperWheels.Length;i++){ leftTrackUpperWheels[i].localRotation = Quaternion.Euler(leftTrackWheelData[<span class="hljs-number"><span class="hljs-number">0</span></span>].rotation, leftTrackWheelData[<span class="hljs-number"><span class="hljs-number">0</span></span>].startWheelAngle.y, leftTrackWheelData[<span class="hljs-number"><span class="hljs-number">0</span></span>].startWheelAngle.z); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-type"><span class="hljs-type">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;rightTrackUpperWheels.Length;i++){ rightTrackUpperWheels[i].localRotation = Quaternion.Euler(rightTrackWheelData[<span class="hljs-number"><span class="hljs-number">0</span></span>].rotation, rightTrackWheelData[<span class="hljs-number"><span class="hljs-number">0</span></span>].startWheelAngle.y, rightTrackWheelData[<span class="hljs-number"><span class="hljs-number">0</span></span>].startWheelAngle.z); } } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> CalculateMotorForce(WheelCollider col, <span class="hljs-type"><span class="hljs-type">float</span></span> accel, <span class="hljs-type"><span class="hljs-type">float</span></span> steer){ //<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(accel == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; steer == <span class="hljs-number"><span class="hljs-number">0</span></span>){ //<span class="hljs-number"><span class="hljs-number">7</span></span> col.brakeTorque = maxBrakeTorque; //<span class="hljs-number"><span class="hljs-number">7</span></span> }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(accel == <span class="hljs-number"><span class="hljs-number">0.0</span></span>f){ //<span class="hljs-number"><span class="hljs-number">8</span></span> col.brakeTorque = rotateOnStandBrakeTorque; //<span class="hljs-number"><span class="hljs-number">9</span></span> col.motorTorque = steer*rotateOnStandTorque; //<span class="hljs-number"><span class="hljs-number">10</span></span> } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> タンクが所定の位置にあるときにコライダーに伝達するトルク。 </li><li> タンクが所定の位置にあるときにコライダーに送信するブレーキモーメント。 </li><li> 最大制動トルク。 </li><li> レッスン1を参照してください。 </li><li>  UpdateWheels（）関数を変更して、仮想軸から値を取得できるようにします。 </li><li>  CalculateMotorForce（）関数を使用してコライダーのトルクと制動モーメントを制御します。コライダーと仮想軸をこの関数に渡します（leftTrackWheelDataには水平軸から正の値を渡し、rightTrackWheelDataには負の値を渡します。これにより、トラックを異なる方向に移動できます） ） </li><li> 移動キーが押されていない場合は、最大の制動トルクをコライダーに転送します（不均一な場所から転がらないようにします）。 </li><li> 進むボタンは押されていないが、横ボタンが押されている場合： </li><li> 制動モーメントをコライダーに転送します。 </li><li> 横軸から取得した値を掛けたトルクを送信します（このトルクは、タンクが移動するためにrotateOnStandBrakeTorqueの制動トルクよりも大きくなければなりません）。 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そのため、[再生]をクリックしてから、横向きのキー（AまたはD）をクリックします。 そして、私たちが見ているのは、私たちの戦車がその場で向きを変えようとする哀れな試みだけであり、力が足りないように感じます。 もちろん、変数rotateOnStandTorqueの値を増やすことはできますが、結果は非常に面白いものになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     実際には、トルクの問題ではなく、タンクを回すのに十分以上です。 ルーツに戻りましょう。つまり、設定がタンクのすべてのWheelColliderに継承されるプレハブtank_colliderに戻ります。 横摩擦フィールドに注意してください。前のレッスンでこの設定について言及しましたが、これはホイールの「横方向の」摩擦力であり、ドリフトを実装する場合に役立ちます。 現在、側面からコライダーに作用するこの非常に摩擦力は非常に大きく、ホイールトルクはそれを克服できないため、タンクは回転しません。 ここで、横方向摩擦内の剛性係数変数に注意してください。これが必要です。実際、これは横方向の摩擦力に乗じる数値であり、ゼロに設定して再生ボタンを押します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/habraeffect/a5/97/a5974c036cfe867294bf2fa74d6438b6.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     奇跡的に、私たちの戦車は夢中になり、最高速度で回転できるようになり、さらに横方向にドライブすることもできます。  Playモードを終了し、値を0.06に設定して、もう一度Playを押します。 さて、最後に、今や私たちの戦車はその軸の周りを回っており、かなり適切です。 プレイモードを終了し、Sideways Frictionの値を1に戻します。もちろん、プレハブから直接値を変更するのは良いことです。しかし、サイドフリクションを制御できない場合、タンクが実際のドリフトに入る可能性があるため、スクリプトからこれを行う方が良いです。 同時に、運転中に前進して曲がるように戦車に教えます。 関数CalculateMotorForce（）を変更し、さらにいくつかのグローバル変数を宣言します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs ruby">public float forwardTorque = <span class="hljs-number"><span class="hljs-number">500.0</span></span>f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">1</span></span> public float rotateOnMoveBrakeTorque = <span class="hljs-number"><span class="hljs-number">400.0</span></span>f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">2</span></span> public float minBrakeTorque = <span class="hljs-number"><span class="hljs-number">0</span></span>.0f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">3</span></span> public float minOnStayStiffness = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">06</span></span>f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">4</span></span> public float minOnMoveStiffness = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">05</span></span>f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">5</span></span> public float rotateOnMoveMultiply = <span class="hljs-number"><span class="hljs-number">2.0</span></span>f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">6</span></span> public void CalculateMotorForce(WheelCollider col, float accel, float steer){ WheelFrictionCurve fc = col.sidewaysFriction; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(accel == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; steer == <span class="hljs-number"><span class="hljs-number">0</span></span>){ col.brakeTorque = maxBrakeTorque; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(accel == <span class="hljs-number"><span class="hljs-number">0</span></span>.0f){ col.brakeTorque = rotateOnStandBrakeTorque; col.motorTorque = steer*rotateOnStandTorque; fc.stiffness = <span class="hljs-number"><span class="hljs-number">1.0</span></span>f + minOnStayStiffness - Mathf.Abs(steer); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">8</span></span> col.brakeTorque = minBrakeTorque; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">9</span></span> col.motorTorque = accel*forwardTorque; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(steer &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">11</span></span> col.brakeTorque = rotateOnMoveBrakeTorque; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">12</span></span> col.motorTorque = steer*forwardTorque*rotateOnMoveMultiply;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">13</span></span> fc.stiffness = <span class="hljs-number"><span class="hljs-number">1.0</span></span>f + minOnMoveStiffness - Mathf.Abs(steer); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">14</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(steer &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">15</span></span> col.motorTorque = steer*forwardTorque*rotateOnMoveMultiply;<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">16</span></span> fc.stiffness = <span class="hljs-number"><span class="hljs-number">1.0</span></span>f + minOnMoveStiffness - Mathf.Abs(steer); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">17</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(fc.stiffness &gt; <span class="hljs-number"><span class="hljs-number">1.0</span></span>f)fc.stiffness = <span class="hljs-number"><span class="hljs-number">1.0</span></span>f; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">18</span></span> col.sidewaysFriction = fc; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(col.rpm &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; accel &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">20</span></span> col.brakeTorque = maxBrakeTorque; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">21</span></span> }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(col.rpm &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; accel &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">22</span></span> col.brakeTorque = maxBrakeTorque; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">23</span></span> } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 移動時のトルク（前方、後方）。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 運転中のコーナリング時の制動トルク。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 最小制動トルク。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 所定の位置に回したときの最小横摩擦。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 運転中の旋回時の最小横摩擦。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 運転中に回すときのトルク乗数。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WheelFrictionCurve型のfc変数を宣言し、Wheel ColliderのSideways Frictionを格納します。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> モーションキーが押された場合、またはモーションキーとターンキーが同時にある場合： </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> コライダーに最小制動トルクを送信します。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 縦軸から得られた値に最大トルクを掛けます。 </font></font></li><li>         (                  ,   ,   ) : </li><li>     (   ,    ); </li><li>                 (               ,      ); </li><li>          fc. </li><li>         (                  ,   ,   ) : </li><li>        ,    . </li><li>          fc. </li><li>           ,  ,   . </li><li>   sidewaysFriction    fs (     col.sidewaysFriction.stiffnes = (float),   ). </li><li>    ,      : </li><li>     . </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ホイールが後方に回転し、キーを前方に押すと： </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> コメントはありません。 </font></font></li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さて、それですべてです。あなたの戦車は警戒態勢に入っています。敵をまだ撃つことはできませんが、敵を潰すことができます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論として、これは戦車の動きに対する普遍的なアルゴリズムとはほど遠い、それはまだ機能しており、それに取り組んでいると言います。たとえば、私たちの戦車が300 kmまで加速できないように最大速度制限を規定する必要があります。</font><font style="vertical-align: inherit;">1時間あたり。</font><font style="vertical-align: inherit;">上記のすべてを理解していれば、簡単に修正できると思います。</font><font style="vertical-align: inherit;">ご清聴ありがとうございました。次のレッスンがまもなく始まります。</font></font></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J116080/index.html">中国が電子通信の検閲を強化</a></li>
<li><a href="../J116082/index.html">Javaでの再帰防止とレイジーコンピューティング</a></li>
<li><a href="../J116083/index.html">DVFU ROVチーム2010</a></li>
<li><a href="../J116085/index.html">RGBランプ</a></li>
<li><a href="../J116087/index.html">ソートからSolaris用のパッケージをビルドする</a></li>
<li><a href="../J116090/index.html">マイク・タイソンがゲーム中毒者を治す</a></li>
<li><a href="../J116091/index.html">ジオロケーションサービスinmile.com</a></li>
<li><a href="../J116092/index.html">ベアバレエと人工知能</a></li>
<li><a href="../J116093/index.html">ハッカーによる攻撃を受けた欧州委員会のサーバー</a></li>
<li><a href="../J116095/index.html">Wysipsはソーラーパネルを備えたハイブリッドディスプレイを導入しました</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
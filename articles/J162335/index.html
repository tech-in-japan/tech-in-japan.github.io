<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👻 🤛 👔 iTunesアプリ内購入サーバー側 😆 ⌚️ 🙋🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="iTunesを介した支払いは、モバイルアプリケーションによって提供されるコンテンツの収益化における実際のリーダーです。 私が知っているアプリケーションの1つでは、それらからの収入はGoogle Playユーザーからの収入の3倍であり、後者のトラフィックは1.5倍です。 したがって、単一のGoogle...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>iTunesアプリ内購入サーバー側</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body">  iTunesを介した支払いは、モバイルアプリケーションによって提供されるコンテンツの収益化における実際のリーダーです。 私が知っているアプリケーションの1つでは、それらからの収入はGoogle Playユーザーからの収入の3倍であり、後者のトラフィックは1.5倍です。 したがって、単一のGoogle Playユーザーよりも単一のiTunesユーザーから最大5倍の金額を受け取ることができます。  iTunesの支払いをモバイルアプリケーションに統合するには、この議論で十分です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この記事では、サーバー側からのiTunes支払い（サブスクリプションを含む）の検証のいくつかの機能について説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/StoreKitGuide.pdf">開発者のガイド</a>に従って、2つの支払いトランザクション検証スキームが提案されています。シンプル、トランザクション確認はモバイルアプリケーションとApp Store間の対話の結果であり、複雑です。  2番目のケースでは、iTunes Connectサービスにアクセスすることにより、独自のサーバーから追加の検証手順が導入されます。  iTunes Connectを介した支払い取引の成功確認は、支払いを確認するのに十分であると見なされます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     単純な検証の欠点には、 <a href="http://www.appleinsider.ru/app-store/upd-otechestvennyj-xaker-nashel-sposob-obxoda-vnutriigrovyx-pokupok.html">信頼の浸食が</a>含ま<a href="http://www.appleinsider.ru/app-store/upd-otechestvennyj-xaker-nashel-sposob-obxoda-vnutriigrovyx-pokupok.html">れます</a> 。 複雑な利点には、サブスクリプションでの作業の利便性、世俗的な商品を請求し、サーバー側で製品のリストを保存する機能が含まれます。 最後の2つのポイントは、App Storeでアプリケーションの更新を1週間待つ必要がある場合に特に関連します。 または、不適格なクリスマスの前夜に魅力的な製品でユーザーを喜ばせることに突然決めた場合は、おそらく<a href="http://allthingsd.com/20121108/the-latest-long-apple-line-developers-waiting-for-app-approval/">数週間</a>です。 私はセキュリティについても話していません-次のチャートではすべてが明確です： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/d75/515/eed/d75515eed57c6ee4ef73fa9cec1fef1f.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、抽象的なアプリケーションの支払い要求を監視するシステムでは、非常に普通の日に見えるかもしれません。 青色は、支払い確認リクエストの総数を表します。 緑-実際にApp Storeを通過したリクエスト。 赤-悪意のあるリクエスト。 サーバーが支払いの確認を無視した場合、アプリケーションがどのような利益の損失を得るか想像するのは怖いです。 次の表に、グラフのデータの割合を示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th> リクエスト機能 </th><th>  <nobr>割合</nobr> </th></tr><tr><td> 未確認。 正しいものに似たデータで構成される偽の支払い。ただし、フィールドが存在しないか、番号が線として表示されるか、支払いを確認できない他の特徴的な機能があります。 </td><td>  0.7％ </td></tr><tr><td> 繰り返し。 支払いが確認されたが、しばらくしてから再度送信されたクライアントからのリクエスト </td><td>  1％ </td></tr><tr><td> クラッカーの支払い（ <b>iAP Cracker</b>など）。 彼らは自分で確認のために作成された検証の支払いを送信します。 </td><td>  9.3％ </td></tr><tr><td> 偽物。 他のアプリケーションのためにiTunesを介して確認された支払い </td><td>  79％ </td></tr><tr><td> 確認済み。 本当に公正な買い物。 その数は、アカウントを介した購入数と収束します </td><td>  10％ </td></tr></tbody></table>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     実際、ほとんどの悪意のあるリクエストは、検証サービスへのアクセスにトラフィックを費やすことなく、独自に判断できます。 支払いiTunesは、いわゆる  <b>レシピ</b> 。 レシピは、支払い取引データ用のbase64でエンコードされたJSONオブジェクトです。  App Storeサービスを介した支払いまたはサブスクリプションを確認するには、クライアントアプリケーションによって報告されたレシピを転送する必要があります。 それに応じて、処方箋のステータスと支払いの詳細を受け取ります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     正しいレシピを検討してください（以降、正しいレシピのデータはわずかに変更されます）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">$ php -r <span class="hljs-string"><span class="hljs-string">"var_dump(base64_decode('Re4LRece1PT='));"</span></span> string(2453) <span class="hljs-string"><span class="hljs-string">"{ "</span></span>signature<span class="hljs-string"><span class="hljs-string">" = "</span></span>8iN4rY5iGNaTUrE==<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-info<span class="hljs-string"><span class="hljs-string">" = "</span></span>PuRCh45e1nf0RM4tIoN==<span class="hljs-string"><span class="hljs-string">"; "</span></span>pod<span class="hljs-string"><span class="hljs-string">" = "</span></span>22<span class="hljs-string"><span class="hljs-string">"; "</span></span>signing-status<span class="hljs-string"><span class="hljs-string">" = "</span></span>0<span class="hljs-string"><span class="hljs-string">"; }"</span></span> $ php -r <span class="hljs-string"><span class="hljs-string">"var_dump(base64_decode('PuRCh45e1nf0RM4tIoN=='));"</span></span> string(784) <span class="hljs-string"><span class="hljs-string">"{ "</span></span>original-purchase-date-pst<span class="hljs-string"><span class="hljs-string">" = "</span></span>2013-02-18 10:05:51 America/Los_Angeles<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-date-ms<span class="hljs-string"><span class="hljs-string">" = "</span></span>1361210751012<span class="hljs-string"><span class="hljs-string">"; "</span></span>unique-identifier<span class="hljs-string"><span class="hljs-string">" = "</span></span>aun1que1dent1f1er<span class="hljs-string"><span class="hljs-string">"; "</span></span>original-transaction-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>1234567890<span class="hljs-string"><span class="hljs-string">"; "</span></span>bvrs<span class="hljs-string"><span class="hljs-string">" = "</span></span>220<span class="hljs-string"><span class="hljs-string">"; "</span></span>app-item-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>123<span class="hljs-string"><span class="hljs-string">"; "</span></span>transaction-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>1234567890<span class="hljs-string"><span class="hljs-string">"; "</span></span>quantity<span class="hljs-string"><span class="hljs-string">" = "</span></span>1<span class="hljs-string"><span class="hljs-string">"; "</span></span>original-purchase-date-ms<span class="hljs-string"><span class="hljs-string">" = "</span></span>1361210751012<span class="hljs-string"><span class="hljs-string">"; "</span></span>unique-vendor-identifier<span class="hljs-string"><span class="hljs-string">" = "</span></span>VEND0R-1DENT1F1ER<span class="hljs-string"><span class="hljs-string">"; "</span></span>item-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>456<span class="hljs-string"><span class="hljs-string">"; "</span></span>version-external-identifier<span class="hljs-string"><span class="hljs-string">" = "</span></span>789<span class="hljs-string"><span class="hljs-string">"; "</span></span>product-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>com.example.application.product.1<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-date<span class="hljs-string"><span class="hljs-string">" = "</span></span>2013-02-18 18:05:51 Etc/GMT<span class="hljs-string"><span class="hljs-string">"; "</span></span>original-purchase-date<span class="hljs-string"><span class="hljs-string">" = "</span></span>2013-02-18 18:05:51 Etc/GMT<span class="hljs-string"><span class="hljs-string">"; "</span></span>bid<span class="hljs-string"><span class="hljs-string">" = "</span></span>com.example.application<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-date-pst<span class="hljs-string"><span class="hljs-string">" = "</span></span>2013-02-18 10:05:51 America/Los_Angeles<span class="hljs-string"><span class="hljs-string">"; }"</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     レシピは、購入データ、署名、およびサービスフィールドのペアで構成されます。 署名はバイナリで、base64でエンコードされています。 購入データもエンコードされ、多くのフィールドを持つJSONオブジェクトです。  2つのフィールドが最も興味深いと考えています<b>。product-id-</b>購入した製品の識別子と<b>bid-</b>アプリケーションの識別子です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     悪意のあるクエリセレクター-偽のクエリ-このようなもの： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ php -r <span class="hljs-string"><span class="hljs-string">"var_dump(base64_decode('CHuZH0iRECE1pt=='));"</span></span> string(2281) <span class="hljs-string"><span class="hljs-string">"{ "</span></span>signature<span class="hljs-string"><span class="hljs-string">" = "</span></span>8iN4rY5iGNaTUrE==<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-info<span class="hljs-string"><span class="hljs-string">" = "</span></span>4n0THeRPuRCh45e1nf0RM4tIoN==<span class="hljs-string"><span class="hljs-string">"; "</span></span>pod<span class="hljs-string"><span class="hljs-string">" = "</span></span>17<span class="hljs-string"><span class="hljs-string">"; "</span></span>signing-status<span class="hljs-string"><span class="hljs-string">" = "</span></span>0<span class="hljs-string"><span class="hljs-string">"; }"</span></span> $ php -r <span class="hljs-string"><span class="hljs-string">"var_dump(base64_decode('4n0THeRPuRCh45e1nf0RM4tIoN=='));"</span></span> string(656) <span class="hljs-string"><span class="hljs-string">"{ "</span></span>original-purchase-date-pst<span class="hljs-string"><span class="hljs-string">" = "</span></span>2012-07-12 05:54:35 America/Los_Angeles<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-date-ms<span class="hljs-string"><span class="hljs-string">" = "</span></span>1342097675882<span class="hljs-string"><span class="hljs-string">"; "</span></span>original-transaction-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>170000029449420<span class="hljs-string"><span class="hljs-string">"; "</span></span>bvrs<span class="hljs-string"><span class="hljs-string">" = "</span></span>1.4<span class="hljs-string"><span class="hljs-string">"; "</span></span>app-item-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>450542233<span class="hljs-string"><span class="hljs-string">"; "</span></span>transaction-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>170000029449420<span class="hljs-string"><span class="hljs-string">"; "</span></span>quantity<span class="hljs-string"><span class="hljs-string">" = "</span></span>1<span class="hljs-string"><span class="hljs-string">"; "</span></span>original-purchase-date-ms<span class="hljs-string"><span class="hljs-string">" = "</span></span>1342097675882<span class="hljs-string"><span class="hljs-string">"; "</span></span>item-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>534185042<span class="hljs-string"><span class="hljs-string">"; "</span></span>version-external-identifier<span class="hljs-string"><span class="hljs-string">" = "</span></span>9051236<span class="hljs-string"><span class="hljs-string">"; "</span></span>product-id<span class="hljs-string"><span class="hljs-string">" = "</span></span>com.zeptolab.ctrbonus.superpower1<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-date<span class="hljs-string"><span class="hljs-string">" = "</span></span>2012-07-12 12:54:35 Etc/GMT<span class="hljs-string"><span class="hljs-string">"; "</span></span>original-purchase-date<span class="hljs-string"><span class="hljs-string">" = "</span></span>2012-07-12 12:54:35 Etc/GMT<span class="hljs-string"><span class="hljs-string">"; "</span></span>bid<span class="hljs-string"><span class="hljs-string">" = "</span></span>com.zeptolab.ctrexperiments<span class="hljs-string"><span class="hljs-string">"; "</span></span>purchase-date-pst<span class="hljs-string"><span class="hljs-string">" = "</span></span>2012-07-12 05:54:35 America/Los_Angeles<span class="hljs-string"><span class="hljs-string">"; }"</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     かなりまともなレシピ。 アプリケーションからではありません。  iTunes Connectに連絡すると、この支払いの確認が届きます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ wget <span class="hljs-string"><span class="hljs-string">'https://buy.itunes.apple.com/verifyReceipt'</span></span> -q --post-data=<span class="hljs-string"><span class="hljs-string">'{"receipt-data":"CHuZH0iRECE1pt=="}'</span></span> -O - {<span class="hljs-string"><span class="hljs-string">"receipt"</span></span>:{<span class="hljs-string"><span class="hljs-string">"original_purchase_date_pst"</span></span>:<span class="hljs-string"><span class="hljs-string">"2012-07-12 05:54:35 America/Los_Angeles"</span></span>, <span class="hljs-string"><span class="hljs-string">"purchase_date_ms"</span></span>:<span class="hljs-string"><span class="hljs-string">"1342097675882"</span></span>, <span class="hljs-string"><span class="hljs-string">"original_transaction_id"</span></span>:<span class="hljs-string"><span class="hljs-string">"170000029449420"</span></span>, <span class="hljs-string"><span class="hljs-string">"original_purchase_date_ms"</span></span>:<span class="hljs-string"><span class="hljs-string">"1342097675882"</span></span>, <span class="hljs-string"><span class="hljs-string">"app_item_id"</span></span>:<span class="hljs-string"><span class="hljs-string">"450542233"</span></span>, <span class="hljs-string"><span class="hljs-string">"transaction_id"</span></span>:<span class="hljs-string"><span class="hljs-string">"170000029449420"</span></span>, <span class="hljs-string"><span class="hljs-string">"quantity"</span></span>:<span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"bvrs"</span></span>:<span class="hljs-string"><span class="hljs-string">"1.4"</span></span>, <span class="hljs-string"><span class="hljs-string">"version_external_identifier"</span></span>:<span class="hljs-string"><span class="hljs-string">"9051236"</span></span>, <span class="hljs-string"><span class="hljs-string">"bid"</span></span>:<span class="hljs-string"><span class="hljs-string">"com.zeptolab.ctrexperiments"</span></span>, <span class="hljs-string"><span class="hljs-string">"product_id"</span></span>:<span class="hljs-string"><span class="hljs-string">"com.zeptolab.ctrbonus.superpower1"</span></span>, <span class="hljs-string"><span class="hljs-string">"purchase_date"</span></span>:<span class="hljs-string"><span class="hljs-string">"2012-07-12 12:54:35 Etc/GMT"</span></span>, <span class="hljs-string"><span class="hljs-string">"purchase_date_pst"</span></span>:<span class="hljs-string"><span class="hljs-string">"2012-07-12 05:54:35 America/Los_Angeles"</span></span>, <span class="hljs-string"><span class="hljs-string">"original_purchase_d</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     原則として、彼らはチェックできませんでした。 クライアントアプリケーションからレシピを受け取った段階でも、 <b>product-id</b>と<b>bid</b>をアプリケーションの許容可能なものと比較することで、iTunesへのトラフィックの80％を節約できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     クラッカーによって作成されるレシピは非常に原始的です： <code>Y29tLnVydXMuaWFwLjk2NjU3Mjkw</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     。 復号化、 <code>com.urus.iap.96657290</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    を取得し<code>com.urus.iap.96657290</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     。 明らかに、ここではレシピの構造についても言及していません-署名も購入データもありません。 このようなレシピは安全に拒否できます。 このようなレシピのiTunesはエラー<a href="http://developer.apple.com/library/ios/">21002</a>を返します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     クラッカーによって作成されたレシピを受け取った場合、自分でレシピを検証することも、iTunesサービスを使用してレシピを検証することもできれば、重複は自分の側でしか見つかりません。 利益が発生したすべてのトランザクション識別子を保存し、過去の識別子の中にそのような識別子がすでにあるかどうかをチェックするだけで十分です。  <a href="http://developer.apple.com/library/ios/">ドキュメントに</a>よると<a href="http://developer.apple.com/library/ios/">、</a>すべてのトランザクション識別子は支払いを一意に識別します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     サンプル内の最小の悪は、未確認のレシピです。 以下に例を示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="bash hljs">$ php -r <span class="hljs-string"><span class="hljs-string">"var_dump(base64_decode('P0dDe1NyRECE1pt=='));"</span></span> string(613) <span class="hljs-string"><span class="hljs-string">"{"</span></span>signing-status<span class="hljs-string"><span class="hljs-string">"="</span></span>0<span class="hljs-string"><span class="hljs-string">";"</span></span>purchase-info<span class="hljs-string"><span class="hljs-string">"="</span></span>P0dDe1N0e1NF0==<span class="hljs-string"><span class="hljs-string">";"</span></span>pid<span class="hljs-string"><span class="hljs-string">"="</span></span>143<span class="hljs-string"><span class="hljs-string">";"</span></span>signature<span class="hljs-string"><span class="hljs-string">"="</span></span>1POdP1sD4jEe5t=<span class="hljs-string"><span class="hljs-string">";}"</span></span> $ php -r <span class="hljs-string"><span class="hljs-string">"var_dump(base64_decode('P0dDe1N0e1NF0=='));"</span></span> string(388) <span class="hljs-string"><span class="hljs-string">"{"</span></span>unique-identifier<span class="hljs-string"><span class="hljs-string">"="</span></span>an0theru1que1dent1f1er<span class="hljs-string"><span class="hljs-string">";"</span></span>purchase-date<span class="hljs-string"><span class="hljs-string">"="</span></span>2012-02-18 19:23:27 Etc/GMT<span class="hljs-string"><span class="hljs-string">";"</span></span>original-transaction-id<span class="hljs-string"><span class="hljs-string">"="</span></span>0123456789<span class="hljs-string"><span class="hljs-string">";"</span></span>quantity<span class="hljs-string"><span class="hljs-string">"="</span></span>1<span class="hljs-string"><span class="hljs-string">";"</span></span>original-purchase-date<span class="hljs-string"><span class="hljs-string">"="</span></span>2012-02-18 19:23:27 Etc/GMT<span class="hljs-string"><span class="hljs-string">";"</span></span>bvrs<span class="hljs-string"><span class="hljs-string">"="</span></span>123<span class="hljs-string"><span class="hljs-string">";"</span></span>product-id<span class="hljs-string"><span class="hljs-string">"="</span></span>com.example.application.product.1<span class="hljs-string"><span class="hljs-string">";"</span></span>item-id<span class="hljs-string"><span class="hljs-string">"="</span></span>456<span class="hljs-string"><span class="hljs-string">";"</span></span>transaction-id<span class="hljs-string"><span class="hljs-string">"="</span></span>0123456789<span class="hljs-string"><span class="hljs-string">";"</span></span>bid<span class="hljs-string"><span class="hljs-string">"="</span></span>com.example.application<span class="hljs-string"><span class="hljs-string">";}"</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この場合、適切なレシピと比較して、スペースを節約しますが、これはレシピを拒否する理由ではありません-結局、それはクライアントアプリケーションによってコンパイルおよびエンコードされます。 そして、レシピは正しいように見えます。正しい製品とアプリケーションの識別子、もっともらしい支払いデータ、署名があります。  iTunesにリクエストを送信する必要があります（このようなリクエストは、総数のわずか0.7％、有用なリクエストの数の7％であることが望ましいです）。  iTunesはコード21002で応答します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次の図は、独自のサーバー側のクライアントアプリケーションから受信したレシピを検証するアルゴリズムを示しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/storage2/b39/b0f/3d0/b39b0f3d025c5fd1b008e3c16d635204.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      iTunesで直接確認するには、小さくて便利な<a href="https://github.com/alxmsl/AppStoreClient">ライブラリ</a>を使用することをお勧めし<a href="https://github.com/alxmsl/AppStoreClient">ます</a> 。 このライブラリを使用すると、 <a href="http://developer.apple.com/library/ios/">更新されたサブスクリプションも</a>確認できます。 同じ検証要求を使用して、クライアントの初期化時にシークレットパスワードを指定して、サブスクリプション情報を要求できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="php hljs">$AppStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \AppStore\Client\AppStoreClient(); $AppStore-&gt;setPassword(<span class="hljs-string"><span class="hljs-string">'secret shared password'</span></span>) -&gt;setSandbox((bool) mt_rand(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)); $Status = $AppStore-&gt;verifyReceipt(<span class="hljs-string"><span class="hljs-string">'5t4TUs=='</span></span>);</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      iTunesは次の形式で応答データを返します 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs vbscript">object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableStatus)#<span class="hljs-number"><span class="hljs-number">7</span></span> (<span class="hljs-number"><span class="hljs-number">4</span></span>) { [<span class="hljs-string"><span class="hljs-string">"latestReceipt"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableStatus"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3460</span></span>) <span class="hljs-string"><span class="hljs-string">"5t4TUs=="</span></span> [<span class="hljs-string"><span class="hljs-string">"LatestReceiptInfo"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableStatus"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableReceipt)#<span class="hljs-number"><span class="hljs-number">8</span></span> (<span class="hljs-number"><span class="hljs-number">11</span></span>) { [<span class="hljs-string"><span class="hljs-string">"expiresDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableReceipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">13</span></span>) <span class="hljs-string"><span class="hljs-string">"1363547483000"</span></span> [<span class="hljs-string"><span class="hljs-string">"quantity"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) [<span class="hljs-string"><span class="hljs-string">"productId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">35</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application.product.2"</span></span> [<span class="hljs-string"><span class="hljs-string">"transactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"0987654321"</span></span> [<span class="hljs-string"><span class="hljs-string">"purchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-02-18 20:11:23 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalTransactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"9078563412"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalPurchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-01-18 20:11:25 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"appItemId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-string"><span class="hljs-string">"456"</span></span> [<span class="hljs-string"><span class="hljs-string">"versionExternalIdentifier"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span> [<span class="hljs-string"><span class="hljs-string">"bid"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">19</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application"</span></span> [<span class="hljs-string"><span class="hljs-string">"bvrs"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"123"</span></span> } [<span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Status"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) [<span class="hljs-string"><span class="hljs-string">"Receipt"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Status"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableReceipt)#<span class="hljs-number"><span class="hljs-number">9</span></span> (<span class="hljs-number"><span class="hljs-number">11</span></span>) { [<span class="hljs-string"><span class="hljs-string">"expiresDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableReceipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">13</span></span>) <span class="hljs-string"><span class="hljs-string">"1363547483000"</span></span> [<span class="hljs-string"><span class="hljs-string">"quantity"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) [<span class="hljs-string"><span class="hljs-string">"productId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">35</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application.product.2"</span></span> [<span class="hljs-string"><span class="hljs-string">"transactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"0987654321"</span></span> [<span class="hljs-string"><span class="hljs-string">"purchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-02-18 20:11:23 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalTransactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"9078563412"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalPurchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-01-18 20:11:25 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"appItemId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-string"><span class="hljs-string">"456"</span></span> [<span class="hljs-string"><span class="hljs-string">"versionExternalIdentifier"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span> [<span class="hljs-string"><span class="hljs-string">"bid"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">19</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application"</span></span> [<span class="hljs-string"><span class="hljs-string">"bvrs"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"123"</span></span> } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://habrahabr.ru/post/160911/">Google Playサブスクリプション</a>とは異なり、iTunesは支払い期間ごとに新しいサブスクリプションレシピを作成します。 次の請求期間の開始の約1日前に、iTunesはユーザーのアカウントからお金を引き出そうとしますが、新しい請求期間の開始の48時間前に更新料金が引き落とされるという苦情を見ました。 試行がまだ実行されておらず、まだ成功していない場合、上記の例のように、 <b>latest_receiptに</b>表示されるデータは元のレシピのデータと一致します。 サブスクリプションが正常に更新されると、自動購入のデータが<b>latest_receipt_info</b>フィールドに表示され、エンコードされたレシピが<b>latest_receipt</b>フィールドに<b>表示され</b>ます 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs vbscript">object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableStatus)#<span class="hljs-number"><span class="hljs-number">7</span></span> (<span class="hljs-number"><span class="hljs-number">4</span></span>) { [<span class="hljs-string"><span class="hljs-string">"latestReceipt"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableStatus"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3460</span></span>) <span class="hljs-string"><span class="hljs-string">"ReNEW481E5t4TUs=="</span></span> [<span class="hljs-string"><span class="hljs-string">"LatestReceiptInfo"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableStatus"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableReceipt)#<span class="hljs-number"><span class="hljs-number">8</span></span> (<span class="hljs-number"><span class="hljs-number">11</span></span>) { [<span class="hljs-string"><span class="hljs-string">"expiresDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableReceipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">13</span></span>) <span class="hljs-string"><span class="hljs-string">"1363547483000"</span></span> [<span class="hljs-string"><span class="hljs-string">"quantity"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) [<span class="hljs-string"><span class="hljs-string">"productId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">35</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application.product.2"</span></span> [<span class="hljs-string"><span class="hljs-string">"transactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"0987654321"</span></span> [<span class="hljs-string"><span class="hljs-string">"purchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-02-18 20:11:23 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalTransactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"9078563412"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalPurchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-01-18 20:11:25 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"appItemId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-string"><span class="hljs-string">"456"</span></span> [<span class="hljs-string"><span class="hljs-string">"versionExternalIdentifier"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span> [<span class="hljs-string"><span class="hljs-string">"bid"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">19</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application"</span></span> [<span class="hljs-string"><span class="hljs-string">"bvrs"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"123"</span></span> } [<span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Status"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) [<span class="hljs-string"><span class="hljs-string">"Receipt"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Status"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableReceipt)#<span class="hljs-number"><span class="hljs-number">9</span></span> (<span class="hljs-number"><span class="hljs-number">11</span></span>) { [<span class="hljs-string"><span class="hljs-string">"expiresDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableReceipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">13</span></span>) <span class="hljs-string"><span class="hljs-string">"1361131883894"</span></span> [<span class="hljs-string"><span class="hljs-string">"quantity"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) [<span class="hljs-string"><span class="hljs-string">"productId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">35</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application.product.2"</span></span> [<span class="hljs-string"><span class="hljs-string">"transactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"0987654312"</span></span> [<span class="hljs-string"><span class="hljs-string">"purchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-01-18 20:11:23 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalTransactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"9078563412"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalPurchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-01-18 20:11:25 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"appItemId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-string"><span class="hljs-string">"456"</span></span> [<span class="hljs-string"><span class="hljs-string">"versionExternalIdentifier"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span> [<span class="hljs-string"><span class="hljs-string">"bid"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">19</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application"</span></span> [<span class="hljs-string"><span class="hljs-string">"bvrs"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"123"</span></span> } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     サブスクリプションを更新できなかった場合、応答ステータスが返されます<b>21006</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="php hljs">$AppStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \AppStore\Client\AppStoreClient(); $AppStore-&gt;setPassword(<span class="hljs-string"><span class="hljs-string">'secret shared password'</span></span>) -&gt;setSandbox((bool) mt_rand(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $Status = $AppStore-&gt;verifyReceipt(<span class="hljs-string"><span class="hljs-string">'ExP1ReD5t4TUs=='</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\AppStore\Client\Response\ExpiredSubscriptionException $ex) { var_dump($ex-&gt;getStatus()); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs vbscript">object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableStatus)#<span class="hljs-number"><span class="hljs-number">7</span></span> (<span class="hljs-number"><span class="hljs-number">4</span></span>) { [<span class="hljs-string"><span class="hljs-string">"latestReceipt"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableStatus"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span> [<span class="hljs-string"><span class="hljs-string">"LatestReceiptInfo"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableStatus"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> [<span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Status"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">21006</span></span>) [<span class="hljs-string"><span class="hljs-string">"Receipt"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Status"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; object(AppStore\Client\<span class="hljs-built_in"><span class="hljs-built_in">Response</span></span>\RenewableReceipt)#<span class="hljs-number"><span class="hljs-number">8</span></span> (<span class="hljs-number"><span class="hljs-number">11</span></span>) { [<span class="hljs-string"><span class="hljs-string">"expiresDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\RenewableReceipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">13</span></span>) <span class="hljs-string"><span class="hljs-string">"1361208738953"</span></span> [<span class="hljs-string"><span class="hljs-string">"quantity"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) [<span class="hljs-string"><span class="hljs-string">"productId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">35</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application.product.2"</span></span> [<span class="hljs-string"><span class="hljs-string">"transactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"2143658709"</span></span> [<span class="hljs-string"><span class="hljs-string">"purchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-01-18 17:32:18 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalTransactionId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-string"><span class="hljs-string">"2143658709"</span></span> [<span class="hljs-string"><span class="hljs-string">"originalPurchaseDate"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">27</span></span>) <span class="hljs-string"><span class="hljs-string">"2013-01-18 17:32:19 Etc/GMT"</span></span> [<span class="hljs-string"><span class="hljs-string">"appItemId"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-string"><span class="hljs-string">"456"</span></span> [<span class="hljs-string"><span class="hljs-string">"versionExternalIdentifier"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-string"><span class="hljs-string">""</span></span> [<span class="hljs-string"><span class="hljs-string">"bid"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">19</span></span>) <span class="hljs-string"><span class="hljs-string">"com.example.application"</span></span> [<span class="hljs-string"><span class="hljs-string">"bvrs"</span></span>:<span class="hljs-string"><span class="hljs-string">"AppStore\Client\Response\Receipt"</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>]=&gt; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"123"</span></span> } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次のサーバー側のiTunesサブスクリプション処理スキームを提案します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/storage2/60c/072/591/60c07259122c4021aa1d5833aa7a3a77.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     説明： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 購入-クライアント側でサブスクリプションを購入する </li><li>  verify-上記で提案したアルゴリズムによるサーバー側のサブスクリプションデータの検証 </li><li> キュー-確認済みのサブスクリプションデータキュー </li><li> 定期的な検証-サブスクリプションの定期的な検証。 サブスクリプションが更新された場合、後続のチェックのために更新されたレシピをキューに書き戻します </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     私のデータによると、iTunesサブスクリプションの約60％が更新されています。  Google Playサブスクリプションの場合、この値は約40％です。 そして、サブスクリプションの更新が不可能なケースの大部分は、ユーザーアカウントの資金不足のケースです。 </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J162323/index.html">フィクションのライブラリの分析に基づいて頻度辞書を作成する</a></li>
<li><a href="../J162325/index.html">保持、またはユーザーがゲームに戻るのはなぜですか？</a></li>
<li><a href="../J162329/index.html">VB.NETでのMySQLの接続と操作</a></li>
<li><a href="../J16233/index.html">500万ドルでRBCに販売されたRUPAY支払いシステム</a></li>
<li><a href="../J162333/index.html">AR Drone-他のクアドロコプターの通信を傍受するクアドロコプター</a></li>
<li><a href="../J162337/index.html">トレンドウォッチング：2013年の10の主要なトレンド。 パート2</a></li>
<li><a href="../J162339/index.html">zshとbash：選択するもの</a></li>
<li><a href="../J16234/index.html">ログイン名とパスワードを入力してください</a></li>
<li><a href="../J162341/index.html">異なるタイムゾーンで時間を操作する機能</a></li>
<li><a href="../J162345/index.html">AWS Insight：EC2の予約-仕組み</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽 ✅ 🛌🏼 Flume-データストリームを管理します。 パート2 🎽 🛐 📿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、Habr！ Apache Flumeシリーズの記事を続けます。 前のパートでは、このツールを表面的に調べ、構成および実行する方法を見つけました。 今回は、Flumeの主要なコンポーネントについて説明しますが、実際のデータを操作するのは怖くありません。 
  
 
  
  
  
  
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Flume-データストリームを管理します。 パート2</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dca/blog/281933/"> こんにちは、Habr！  <a href="https://flume.apache.org/">Apache Flume</a>シリーズの記事を続けます。  <a href="https://habrahabr.ru/company/dca/blog/280386/">前のパートで</a>は<a href="https://habrahabr.ru/company/dca/blog/280386/">、</a>このツールを表面的に調べ、構成および実行する方法を見つけました。 今回は、Flumeの主要なコンポーネントについて説明しますが、実際のデータを操作するのは怖くありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/5d2/3e9/fbc/5d23e9fbc8d54dd1a9ad28de7f3f409a.jpg"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ファイルチャンネル </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     前回の記事では、メモリーチャンネルについて説明しました。 明らかに、メモリを使用してデータを保存するチャネルは信頼できません。 ノードを再起動すると、チャネルに保存されているすべてのデータが失われます。 これにより、メモリチャネルが役に立たなくなることはありません。その速度のために使用が非常に正当化される場合があります。 ただし、真に信頼できる輸送システムには、より堅牢なソリューションが必要です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このソリューションは、ファイルチャネル-ファイルチャネルです。 このチャンネルがデータをファイルに保存していると推測するのは簡単です。 同時に、チャネルはランダムアクセスを使用してファイルを操作するため、イベントのシーケンスを維持しながらイベントを追加および収集できます。 高速ナビゲーションのために、チャネルはラベル（チェックポイント）のシステムを使用し、WALメカニズムが実装されています。 これはすべて、一般に、チャネルの「内部」に隠されており、次のパラメーターを使用して構成されます（太字-必須パラメーター）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th width="100"> パラメータ </th><th> 説明 </th><th width="120"> デフォルトで </th></tr><tr><td><pre> タイプ </pre></td><td> チャネル実装、 <i>ファイルを</i>指定<i>する</i>必要があります </td><td>  - </td></tr><tr><td><pre>  checkpointDir </pre></td><td> タグ付きのファイルを保存するためのフォルダー。 指定しない場合、チャネルはFlumeホームフォルダーを使用します。 </td><td><pre>  $ HOME / ... </pre></td></tr><tr><td><pre>  useDualCheckpoints </pre></td><td> タグ付きのバックアップフォルダを作成します。 </td><td><pre> 偽 </pre></td></tr><tr><td><pre>  backupCheckpointDir </pre></td><td> ラベル付きファイルのバックアップ用のフォルダー<i>。useDualCheckpoints= trueの</i>場合はもちろん指定する必要があります（もちろん、このバックアップは元のディスク（たとえば、別のディスク）から遠ざける必要があります）。 </td><td><pre>  - </pre></td></tr><tr><td><pre>  dataDirs </pre></td><td> データファイルが配置されるコンマで区切られたフォルダーのリスト。 パフォーマンスを向上させるには、異なるドライブに複数のフォルダーを指定することをお勧めします。 フォルダーが指定されていない場合、チャネルはFlumeホームフォルダーも使用します。 </td><td><pre>  $ HOME / ... </pre></td></tr><tr><td><pre> 能力 </pre></td><td> チャネル容量。イベントの数を示します。 </td><td><pre>  1,000,000 </pre></td></tr><tr><td><pre>  transactionCapacity </pre></td><td>  1つのトランザクションのイベントの最大数。 トランスポートシステム全体のパフォーマンスが依存する非常に重要なパラメーター。 詳細については、以下に説明します。 </td><td><pre>  10,000 </pre></td></tr><tr><td><pre>  checkpointInterval </pre></td><td> 新しいタグの作成間隔（ミリ秒単位）。 タグは再起動時に重要な役割を果たし、チャネル状態を復元しながらデータファイルのセクションを「ジャンプオーバー」できます。 その結果、チャネルはデータファイル全体を再読み取りしないため、チャネルが「詰まっている」場合の起動が大幅に高速化されます。 </td><td><pre>  30000 </pre></td></tr><tr><td><pre>  checkpointOnClose </pre></td><td> チャンネルを閉じるときにラベルを記録します。 トレーリングラベルを使用すると、再起動時にチャネルをできるだけ早く回復できますが、チャネルが閉じられると作成に時間がかかります（実際にはほとんどありません）。 </td><td><pre> 本当 </pre></td></tr><tr><td><pre> キープアライブ </pre></td><td> チャネルへの追加操作のタイムアウト（秒単位）。 つまり、チャネルが詰まっている場合、トランザクションはしばらく待ってから「チャンスを与えます」。 また、チャネルに空きスペースがない場合、トランザクションはロールバックされます。 </td><td>  3 </td></tr><tr><td><pre>  maxFileSize </pre></td><td> チャネルファイルの最大サイズ（バイト単位）。 このパラメーターの値は、チャネルが「バイト」できるスペースを決定するものではありません。1つのデータファイルのサイズを設定し、チャネルはこれらのファイルのいくつかを作成できます。 </td><td>  2146435071（2GB） </td></tr><tr><td><pre>  minimumRequiredSpace </pre></td><td> ディスクの空き領域がこのパラメーターで指定されているよりも少ない場合、チャネルは新しいイベントを受信しません。 データフォルダーが複数のディスクにある場合、Flumeは </td><td>  524288000（500MB） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </td></tr></tbody></table>  <a href="https://flume.apache.org/FlumeUserGuide.html">残りの設定</a>は、チャネルファイルのデータ暗号化とリカバリプロセス（リプレイ）に関連しています。 ここで、ファイルチャネルを操作する際に考慮すべき事項についていくつか説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>Flumeがデータをフォルダーに書き込む権限を持っていることを確認してください</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     または、より正確には、Flumeに代わって起動されるユーザーは、 <i>チェックポイント</i>と<i>データの</i>フォルダーへの書き込み権限を持ってい<i>ます</i> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>SSDはチャネルを大幅に高速化します</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     以下のグラフは、ファイルチャネルを使用して500イベントのパケットをFlumeノードに送信するのにかかった時間を示しています。 ノードの1つはSSDを使用してチャネルデータを保存し、もう1つはSATAを使用します。 違いは大きい。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/d0d/32a/7e4/d0d32a7e4990413fbe85ac69af675445.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     単純な分割を実行すると、SSD上のファイルチャネルを持つFlumeノードは、1秒あたり最大500 / 0.025 = 20,000イベントをダイジェストできます（参照用に、この例のメッセージサイズは約1KBであり、チャネルはストレージに1つのディスクのみを使用します）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>チャネル容量は、変化に非常に敏感</b>です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     突然チャンネルの容量を変更することに決めた場合、不愉快な驚きを感じるかもしれません-データを復元するためにチャンネルがリプレイを開始します。 これは、チェックポイントファイルを使用してさらにナビゲーション/データを操作する代わりに、チャネルがすべてのデータファイルを完全に実行することを意味します。 チャネルに大量のデータがある場合、プロセスにはかなりの時間がかかる可能性があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>チャネルの異常停止は、データ損失につながる可能性があります</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これは、Flumeプロセスを強制終了（またはハードリセット）した場合に発生する可能性があります。 または、発生しない場合があります。 私の記憶では、これは私たちに一度だけ起こりました-データファイルは「破損」し、チャンネルデータを含むすべてのファイルを手動で削除する必要がありました（残念ながら、チャンネルは詰まらず、損失は回避されました）。 したがって、チャネルはまだ100％の信頼性を提供しません-誰かが「スイッチを引っ張る」可能性が常にあり、修復不可能なことが起こります。 さて、これが発生し、チャンネルが開始を拒否した場合、あなたの行動は次のようになるでしょう： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> チェックポイントを削除してみてください—この場合、チャネルはデータファイルからのみ回復を試みます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li> 前の段落が役に立たず、チャネルが「チャネルからデータを読み取れません、チャネルが閉じられます」というスタイルで何かを書き込む場合、データファイルは破損しています。 ここでは、すべてのデータフォルダーの完全なクリーニングのみが役立ちます。 ああ。 </li></ol></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      File-Channelの代わりとして、Flumeはさらにいくつかのチャネルを提供します。特に、データベースをバッファとして使用する<a href="https://flume.apache.org/FlumeUserGuide.html">JDBC-channel</a>と<a href="https://flume.apache.org/FlumeUserGuide.html">Kafka-channelを提供し</a>ます。 もちろん、このようなチャネルを使用するには、データベースとKafkaを別々にデプロイする必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Avro SourceおよびAvro Sink </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Avroは<a href="https://avro.apache.org/docs/current/">データシリアル化ツールの</a> 1つであり、そのおかげでソースとストックに名前が付けられました。 これらのコンポーネントのネットワークは、Nettyを使用して実装されます。 前の記事で説明したNetcat Sourceと比較して、Avro Sourceには次の利点があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> イベントでヘッダーを使用できます（つまり、データとともにサポート情報を送信します）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li> 複数のクライアントから同時に情報を受信できます。  Netcatは通常のソケットで実行され、一連の着信接続を受け入れます。つまり、一度に1つのクライアントしか処理できません。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     それでは、Avro Sourceが提供する設定を見てみましょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><td width="100">  <b>パラメータ</b> </td><td>  <b>説明</b> </td><td width="120">  <b>デフォルトで</b> </td></tr><tr><td><pre> タイプ </pre></td><td> ソース実装、 <i>avroを</i>指定する必要があります。 </td><td>  - </td></tr><tr><td><pre> チャンネル </pre></td><td> ソースがイベントを送信するチャネル（スペースで区切られます）。 </td><td>  - </td></tr><tr><td><pre> 縛る </pre></td><td> ソースを修正するホスト/ IP。 </td><td>  - </td></tr><tr><td><pre> 港 </pre></td><td> ソースがクライアントからの接続を受け入れるポート。 </td><td>  - </td></tr><tr><td><pre> スレッド </pre></td><td> 着信イベント（I / Oワーカー）を処理するスレッドの数。 値を選択するときは、このソースにイベントを送信する潜在的な顧客の数をガイドする必要があります。 少なくとも2つのスレッドを設定する必要があります。そうしないと、ソースが1つしかない場合でも、ソースが単に「ハング」する可能性があります。 必要なスレッド数が不明な場合は、構成でこのパラメーターを指定しないでください。 </td><td> 限定されない </td></tr><tr><td><pre> 圧縮タイプ </pre></td><td>データ圧縮、ここにはいくつかのオプションがあります<i>-none</i>または<i>deflate</i> 。 クライアントがデータを圧縮形式で送信する場合にのみ指定する必要があります。 圧縮によりトラフィックを大幅に節約でき、一度に送信するイベントが多いほど、大幅に節約できます。 </td><td><pre> なし </pre></td></tr></tbody></table> 他のソースと同様に、Avro Sourceに次を指定できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  <b><i>selector.type</i></b>は、前の記事で言及したチャンネルセレクターです。 いくつかのルールに従って、複数のチャネルでイベントを分割または複製できます。 セレクターについては、以下で詳しく説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  <b><i>インターセプター</i></b> -スペースで区切られたインターセプターのリスト。 イベントがチャネルに入る前にインターセプターが起動します。 これらは、何らかの方法でイベントを変更するために使用されます（たとえば、ヘッダーを追加したり、イベントの内容を変更したりする）。 それらについても以下で説明します。 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     また、このソースには、Nettyフィルターと<a href="https://flume.apache.org/FlumeUserGuide.html">データ暗号化設定が用意されてい</a>ます。 このコードを使用して、このソースにイベントを送信できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Avro SourceのプリミティブJavaクライアント</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.HashMap; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Map; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.flume.Event; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.flume.EventDeliveryException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.flume.api.RpcClient; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.flume.api.RpcClientFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.flume.event.EventBuilder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.flume.event.SimpleEvent; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FlumeSender</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> EventDeliveryException </span></span>{ RpcClient avroClient = RpcClientFactory.getDefaultInstance(<span class="hljs-string"><span class="hljs-string">"127.0.0.1"</span></span>, <span class="hljs-number"><span class="hljs-number">50001</span></span>); Map&lt;String, String&gt; headers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); headers.put(<span class="hljs-string"><span class="hljs-string">"type"</span></span>, <span class="hljs-string"><span class="hljs-string">"common"</span></span>); Event event = EventBuilder.withBody(<span class="hljs-string"><span class="hljs-string">" "</span></span>.getBytes(), headers); avroClient.append(event); avroClient.close(); } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、Avro-drainの構成を検討します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th width="100"> パラメータ </th><th> 説明 </th><th width="120"> デフォルトで </th></tr><tr><td><pre> タイプ </pre></td><td> 流出の実装は<i>avro</i>で示される必要があります。 </td><td>  - </td></tr><tr><td><pre> チャンネル </pre></td><td> 株式がイベントを描画するチャンネル。 </td><td>  - </td></tr><tr><td><pre> ホスト名 </pre></td><td> 株式がイベントを送信するホスト/ IP。 </td><td>  - </td></tr><tr><td><pre> 港 </pre></td><td> 指定されたマシン（ <i>hostname</i> ）がクライアントの接続を待機しているポート。 </td><td>  - </td></tr><tr><td><pre> バッチサイズ </pre></td><td>  <b><font color="red">非常に重要な</font></b>パラメーター：1回の要求でクライアントに送信されるイベントの「パケット」のサイズ。 同時に、同じ値を使用してチャネルを空にします。 つまり、これは、1つのトランザクションでチャネルから読み取られたイベントの数でもあります。 </td><td><pre>  100 </pre></td></tr><tr><td><pre> 接続タイムアウト </pre></td><td> 接続タイムアウト（ハンドシェイク）、ミリ秒単位。 </td><td><pre>  20000 </pre></td></tr><tr><td><pre> リクエストタイムアウト </pre></td><td> 要求のタイムアウト（イベントのパケットの送信）（ミリ秒単位）。 </td><td><pre>  20000 </pre></td></tr><tr><td><pre> リセット接続間隔 </pre></td><td>  「ホスト変更」の間隔。 バランサーがサービスを提供するいくつかのホストは、指定された<i>ホスト名の</i>後ろに隠れている場合があることが理解されています。 このパラメーターは、指定された時間間隔で強制的にランオフをマシン間で切り替えます。 ランオフの作成者が考える便利さは、新しいマシンがバランサーの責任ゾーンに追加された場合、Flumeノードを再起動する必要がないことです。ランオフ自体は別の「宛先」があることを認識します。 デフォルトでは、ストックはホストの変更を実行しません。 </td><td><pre>  -1 </pre></td></tr><tr><td><pre>  maxIoWorkers </pre></td><td>  Avro Sourceのアナログ<i>スレッド</i> 。 </td><td><pre>  2 * PROC_CORES </pre></td></tr><tr><td><pre> 圧縮タイプ </pre></td><td>  Avro Sourceと同じです。 違いは、シンクがデータを圧縮するのに対して、ソースは逆にアンパックすることです。 したがって、Avro SinkがAvro Sourceにイベントを送信する場合、両方の圧縮タイプは同じである必要があります。 </td><td><pre> なし </pre></td></tr><tr><td><pre> 圧縮レベル </pre></td><td>  <i>compression-type = deflateの</i>場合のみ圧縮レベル（0-圧縮しない、9-最大圧縮）。 </td><td><pre>  6 </pre></td></tr></tbody></table> 次に、これらのコンポーネントを構成する際に考慮すべき重要事項について説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <font color="red"><b>バッチサイズを慎重に選択します</b></font> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     私が言ったように、これは非常に重要なパラメーターであり、その選択が不適切であると、人生を著しく損なう可能性があります。 まず、バッチサイズはトランザクショントランザクション容量（transactionCapacity）以下でなければなりません。 これは明示的にAvro Sinkに適用され、暗黙的にAvro Sourceに適用されます。 例を考えてみましょう： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/4ed/817/8e6/4ed8178e6c7d417db1b18227ae9a3ad5.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ここで、TCはtransactionCapacity、BSはバッチサイズです。 通常の動作の条件は、BS &lt;= TC1およびBS &lt;= TC2です。 つまり、在庫が機能するチャネルのトランザクション容量だけでなく、受信Avro Sourceが動作するチャネルのトランザクション容量も考慮する必要があります。 そうしないと、シンクはチャンネルを空にできず、ソースはチャンネルにイベントを追加できません。 そのような場合、Flumeはエラーメッセージをログに集中的にアップロードし始めます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <font color="#999999"><i><b>練習からのケース</b> 。</i></font>  <font color="#999999"><i>ドレインの1つでは、バッチサイズ= 10000に設定し、受信ノードではチャネルにTC = 5000を設定しました。</i></font>  <font color="#999999"><i>データ量は少ないものの、在庫は一度に10,000件のイベントを一度にチャネルから引き出しなかったため、多くのイベントがチャネルに蓄積できませんでした。</i></font>  <font color="#999999"><i>しかし、しばらくすると、データ量が増加し、問題が発生し始めました。</i></font>  <font color="#999999"><i>受信ノードは、データの大きなパケットを拒否し始めました。</i></font>  <font color="#999999"><i>エラーが時間内に通知され、パラメータが変更され、チャネルに蓄積されたデータがいたずらなストリームによって宛先に到達しました。</i></font> </blockquote></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>大きなバンドルでイベントを送信します</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     トランザクションは、リソースの点で非常に高価な操作です。 トランザクションの削減-パフォーマンスの向上。 繰り返しますが、多数のイベントを送信するときの圧縮は、はるかに効率的に機能します。 したがって、バッチサイズに加えて、チャネルのtransactionCapacityを増やす必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>ノードのnetty依存関係をオーバーライドします</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Flumeが古い<b>netty 3.6.2 Final</b>をプルアップしている間に、 <b>netty</b>バージョン<b>3.10.5 Final</b>を使用しています。 古いバージョンの問題は小さなバグです。そのため、Avro Sink / Avro Sourceは定期的に相互に接続できません。 これにより、データ転送中に数分間、ダウンタイムが定期的に発生します（その後、すべてが正常に戻ります）。 データをできるだけ早く到着させる必要がある場合、そのような「交通渋滞」が問題になる可能性があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/a7a/b1c/9ce/a7ab1c9cec3c4a91a231fa356f4f0b45.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      JavaでFlumeを起動する場合、Mavenで依存関係をオーバーライドできます。  Clouderaを使用して<a href="https://dpaynedudhe.wordpress.com/2015/06/16/installing-flume-on-ubuntu/">、</a>または<a href="https://dpaynedudhe.wordpress.com/2015/06/16/installing-flume-on-ubuntu/">サービス</a>としてFlumeを構成する場合、Netty依存関係を手動で変更する必要があります。 それらは次のフォルダーにあります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Cloudera- <i>/ opt / cloudera / parcels / CDH-$ {バージョン} / lib / flume-ng / lib</i> ; </li><li> サービス（スタンドアローン）- <i>$ FLUME_HOME / lib</i> </li></ul></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ファイルロールシンク </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そこで、Avro Source / Sinkとファイルチャネルに基づいてトランスポートノードを構成する方法を見つけました。 現在、トランスポートネットワークを閉じるコンポーネント（つまり、Flumeの担当エリアからのデータを表示するコンポーネント）を処理する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/671/365/221/6713652217eb4ee78c584099e2a6ed9f.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     考慮すべき最初のドレインは、File-Roll Sinkです。 私はこれが怠け者のドレインだと言うでしょう。 最小限の設定をサポートし、1つのことしかできません-ファイルへのイベントの書き込み。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th width="100"> パラメータ </th><th> 説明 </th><th width="120"> デフォルトで </th></tr><tr><td><pre> タイプ </pre></td><td> ドレインの実装、 <i>file_rollを</i>指定する必要があります。 </td><td>  - </td></tr><tr><td><pre> チャンネル </pre></td><td> 株式がイベントを描画するチャンネル。 </td><td>  - </td></tr><tr><td><pre> ディレクトリ </pre></td><td> ファイルが保存されるフォルダー。 </td><td>  - </td></tr><tr><td><pre>  rollInterval </pre></td><td> 新しいファイルの作成間隔（0-1つのファイルにすべてを書き込む）、秒単位。 </td><td><pre>  30 </pre></td></tr><tr><td><pre> シリアライザー </pre></td><td> イベントのシリアル化。  TEXT、HEADER_AND_TEXT、AVRO_EVENT、または<i>EventSerializer.Builder</i>インターフェイスを実装する独自のクラスを指定できます。 </td><td><pre> テキスト </pre></td></tr><tr><td><pre> バッチサイズ </pre></td><td>  Avro Sinkと同様に、チャネルからトランザクションごとに取得されるイベントのパケットのサイズ。 </td><td><pre>  100 </pre></td></tr></tbody></table>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     怠け者のドレインと考えるのはなぜですか？ 絶対に何も設定できないからです。 圧縮も、ファイル名（作成のタイムスタンプが名前として使用されます）も、サブフォルダーによるグループ化もありません-何もありません。 ファイルサイズも制限できません。 この在庫は、おそらく「説明する時間がない-緊急にデータの受信を開始する必要がある」場合にのみ適しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <font color="#999999"><i><b>ご注意</b></i></font>  <font color="#999999"><i>ファイルにデータを書き込む必要があるため、ファイルドレインを使用するよりもファイルドレインを実装する方が望ましいという結論に達しました。</i></font>  <font color="#999999"><i>Flumeのすべてのソースが公開されていることを考えると、作成するのは難しくありませんでした。</i></font>  <font color="#999999"><i>2日目に、マイナーなバグが修正されました。ストックは1年以上適切に機能しており、データをフォルダに分解してきちんとしたアーカイブにしています。</i></font>  <font color="#999999"><i>サイクルの3番目の部分の後に、この株式をGitHubに投稿します。</i></font> </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  HDFSシンク </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この株はすでにより深刻です-それは多くの設定をサポートしています。  File-Roll Sinkが同様の方法で作成されていないことは少し驚きです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th width="100"> パラメータ </th><th> 説明 </th><th width="120"> デフォルトで </th></tr><tr><td><pre> タイプ </pre></td><td> ドレイン、 <i>hdfs</i>の実装を示す必要があります。 </td><td>  - </td></tr><tr><td><pre> チャンネル </pre></td><td> 株式がイベントを描画するチャンネル。 </td><td>  - </td></tr><tr><td><pre>  hdfs.path </pre></td><td> ファイルが書き込まれるフォルダー。 このフォルダーに正しいアクセス許可が設定されていることを確認してください。  Clouderaを使用してフローを構成すると、ユーザー<i>flume</i>に代わってデータが書き込まれます。 </td><td>  - </td></tr><tr><td><pre>  hdfs.filePrefix </pre></td><td> ファイル名のプレフィックス。  File-Rollの場合のベースファイル名は、作成時のタイムスタンプです。 したがって、 <i>my-data</i>を指定すると、最終的なファイル名は<i>my-data1476318264182になり</i>ます。 </td><td><pre>  Flumedata </pre></td></tr><tr><td><pre>  hdfs.fileSuffix </pre></td><td> ファイル名の接尾辞。 ファイル名の最後に追加されます。  <i>.gz</i>などの拡張子を指定するために使用できます。 </td><td>  - </td></tr><tr><td><pre>  hdfs.inUsePrefix </pre></td><td>  filePrefixに似ていますが、データがまだ書き込まれている一時ファイル用です。 </td><td>  - </td></tr><tr><td><pre>  hdfs.inUseSuffix </pre></td><td>  fileSuffixに似ていますが、一時ファイル用です。 本質的に一時的な拡張。 </td><td><pre>  .tmp </pre></td></tr><tr><td><pre>  hdfs.rollInterval </pre></td><td> 新しいファイルを作成する期間（秒単位）。 この基準でファイルを閉じる必要がない場合は、0を設定します。 </td><td><pre>  30 </pre></td></tr><tr><td><pre>  hdfs.rollSize </pre></td><td> ボリュームでファイルを閉じるトリガーはバイト単位で示されます。 この基準が適切でない場合も0を設定します。 </td><td><pre>  1024 </pre></td></tr><tr><td><pre>  hdfs.rollCount </pre></td><td> イベントの数でファイルを閉じるトリガー。  0を指定することもできます。 </td><td><pre>  10 </pre></td></tr><tr><td><pre>  hdfs.idleTimeout </pre></td><td> アクティビティがないためにファイルを閉じるトリガー（秒単位）。 つまり、しばらくの間ファイルに何も書き込まれないと、ファイルは閉じます。 このトリガーはデフォルトで無効になっています。 </td><td><pre>  0 </pre></td></tr><tr><td><pre>  hdfs.batchSize </pre></td><td> 他の排水管と同じです。 ドレインのドキュメントには、これがHDFSにリセットされる前にファイルに書き込まれるイベントの数であると書かれていますが。 選択する際には、チャネルのトランザクション量にも注目します。 </td><td><pre>  100 </pre></td></tr><tr><td><pre>  hdfs.fileType </pre></td><td> ファイルタイプ<i>-SequenceFile</i> （キーと値のペアを持つHadoopファイル、原則として、「タイムスタンプ」ヘッダーからのタイムスタンプまたは現在の時刻がキーとして使用されます）、 <i>DataStream</i> （テキストデータ、実際には、File- Roll Sink）または<i>CompressedStream</i> （DataStreamに似ていますが、圧縮あり）。 </td><td><pre>  SequenceFile </pre></td></tr><tr><td><pre>  hdfs.writeFormat </pre></td><td> 記録形式は<i>Text</i>または<i>Writable</i>です。  <i>SequenceFile</i>のみ。 違いは、テキスト（ <i>TextWritable</i> ）またはバイト（ <i>BytesWritable</i> ）のいずれかが値として書き込まれることです。 </td><td><pre>  5000 </pre></td></tr><tr><td><pre> シリアライザー </pre></td><td>  File-Roll Sinkに似た<i>DataStream</i>および<i>CompressedStreamの</i>構成可能。 </td><td><pre> テキスト </pre></td></tr><tr><td><pre>  hdfs.codeC </pre></td><td>  <i>CompressedStream</i>ファイルタイプを使用している場合、このパラメーターを指定する必要があります。 そのような圧縮オプションが提供されています： <i>gzip、bzip2、lzo、lzop、snappy</i> 。 </td><td>  - </td></tr><tr><td><pre>  hdfs.maxOpenFiles </pre></td><td> 同時に開くことができるファイルの最大数。 このしきい値を超えると、最も古いファイルが閉じられます。 </td><td><pre>  5000 </pre></td></tr><tr><td><pre>  hdfs.minBlockReplicas </pre></td><td>  <b><font color="red">重要なパラメータ</font></b> 。  HDFSブロックごとのレプリカの最小数。 指定されていない場合、起動時にクラスパスで指定されたHadoop構成（つまり、クラスター設定）から取得されます。 正直なところ、このパラメーターに関連するFlumeの動作の理由を説明することはできません。 一番下の行は、このパラメーターの値が1と異なる場合、ストックは他のトリガーを見ずにファイルを閉じ始め、記録的な時間で多くの小さなファイルを生成することです。 </td><td>  - </td></tr><tr><td><pre>  hdfs.maxOpenFiles </pre></td><td> 同時に開くことができるファイルの最大数。 このしきい値を超えると、最も古いファイルが閉じられます。 </td><td><pre>  5000 </pre></td></tr><tr><td><pre>  hdfs.callTimeout </pre></td><td>  HDFSへのアクセスのタイムアウト（ファイルのオープン/クローズ、データのリセット）、ミリ秒単位。 </td><td><pre>  10,000 </pre></td></tr><tr><td><pre>  hdfs.closeTries </pre></td><td> ファイルを閉じようとする回数（最初に機能しなかった場合）。  0-最後まで試行します。 </td><td><pre>  0 </pre></td></tr><tr><td><pre>  hdfs.retryInterval </pre></td><td> 失敗した場合にファイルを閉じようとする頻度（秒単位）。 </td><td><pre>  180 </pre></td></tr><tr><td><pre>  hdfs.threadsPoolSize </pre></td><td>  HDFSでIO操作を実行するスレッドの数。 多くのファイルにパッケージ化されたイベントの「寄せ集め」がある場合、この数を増やすことをお勧めします。 </td><td><pre>  10 </pre></td></tr><tr><td><pre>  hdfs.rollTimerPoolSize </pre></td><td> 前のプールとは異なり、このスレッドプールはスケジュールされたタスクを実行します（ファイルを閉じます）。 さらに、 <i>rollInterval</i>と<i>retryIntervalの</i> 2つのパラメーターに基づいて機能します。 つまり このプールは、トリガーによるスケジュールされたシャットダウンと、ファイルを閉じるための定期的な繰り返し試行の両方を実行します。  1つのスレッドで十分です。 </td><td><pre>  1 </pre></td></tr><tr><td><pre>  hdfs.useLocalTimeStamp </pre></td><td>  HDFSストックでは、生成されたファイルの名前に日付要素を使用します（たとえば、 <i>hdfs.path = / logs /％Y-％m-％d</i>により、ファイルを日<i>ごと</i>にグループ化できます）。 日付を使用すると、どこかから受信する必要があることが示唆されます。 このパラメーターには2つのオプションがあります。イベントが処理された時間を使用する（ <i>true</i> ）か、イベントで指定された時間を使用する（つまり、「タイムスタンプ」ヘッダーで使用する（false））。 タイムスタンプイベントを使用する場合は、メッセージにこのヘッダーがあることを確認してください。 そうしないと、HDFSに記録されません。 </td><td><pre> 偽 </pre></td></tr><tr><td><pre>  hdfs.round </pre></td><td> タイムスタンプを値に丸めます。 </td><td><pre> 偽 </pre></td></tr><tr><td><pre>  hdfs.roundValue </pre></td><td> タイムスタンプを丸める方法。 </td><td><pre>  1 </pre></td></tr><tr><td><pre>  hdfs.roundUnit </pre></td><td> 丸める単位（ <i>second</i> 、 <i>minutes</i>または<i>hour</i> ）。 </td><td><pre> 第二 </pre></td></tr></tbody></table>  HDFS-drainの設定の膨大なリストを以下に示します。 このストックを使用すると、ほとんど好きなようにデータをファイルに切り分けることができます。特に、日付要素を使用できるというのは素晴らしいことです。 この株の公式文書<a href="https://flume.apache.org/FlumeUserGuide.html">は同じページにあります</a> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      HDFSドレイン構成の興味深い機能に気づいたかもしれません-HDFSのアドレスを示すパラメーターはありません。 ドレインの作成者は、このドレインをHDFSと同じマシンで使用することを提案しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、このドレインを設定するときに考慮すべきことは何ですか。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>大きなバッチサイズとtransactionCapacityを使用し</b>ます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     一般に、ここでのすべては他のドレインに似ています-トランザクションはリソースの点で非常に高価なので、大量に注ぐ方が良いです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>ファイルの命名にマクロを乱用しないでください</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ファイル/フォルダー内の日付要素またはヘッダーのプレースホルダー名を使用することは、確かに便利なツールです。 しかし、それほど高速ではありません。 作成者が日付の置換をより最適化できるように思えます-ソースを見ると、これらの行をフォーマットするために実行される操作の数に驚くでしょう。 このようなフォルダー構造をセットアップすることにしたと仮定します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><pre>  hdfs.path = / logs /％{dir}
 hdfs.filePrefix =％{src} /％Y-％m-％d /％Y-％m-％d-％H-％M-％S.％{host}。％{src} </pre></blockquote> ここで、dirとsrcは、それぞれイベントヘッダーの値です。 キー。 結果のファイルは<i>/logs/web/my-source/2016-04-15/2016-04-15-12-00-00.my-host.my-source.gzの</i>ようになります。 私のコンピューターでは、100万のイベントに対してこの名前を生成するのに<b>20秒</b>近くかかります！ つまり  10,000イベントの場合、約200ミリ秒かかります。 結論：毎秒10,000イベントの記録速度を主張している場合、ファイル名の生成に20％の時間を費やす準備をしてください。 これはひどいです。 これは、クライアント側でファイル名を生成する責任を負うことで解決できます。 はい、これのためにいくつかのコードを書く必要がありますが、これらにフロー設定を変更することは可能です： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><pre>  hdfs.path = / logs
 hdfs.filePrefix =％{ファイル名} </pre></blockquote> 生成されたファイル名を<i>file-name</i>ヘッダーに渡すと、リソースと時間を節約できます。 このようなヘッダーによるファイルパスの形成には20秒かかりませんが、100万イベントに対して500〜600ミリ秒かかります。 つまり、ほぼ40倍高速です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>イベントを組み合わせます</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ドレーンのパフォーマンスを大幅に向上させるもう1つの小さなハック。 イベントを1行ずつファイルに書き込む場合、クライアント側でそれらを結合できます。 たとえば、サービスは同じファイルに送信する必要のあるログを生成します。 それでは、\ nを区切り文字として使用して、複数の行を1つにまとめてみませんか？  HDFSまたはファイルシステムへのデータの書き込み自体は、データに関するこのすべての「デジタルの官僚主義」よりもはるかに短い時間で済みます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/7df/e41/f31/7dfe41f31e434f0e99ab3aa17b6e118b.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     少なくとも5対1の比率でイベントを組み合わせると、生産性が大幅に向上します。 当然、ここで注意する必要があります。クライアントのイベントが一度に1つずつ生成される場合、イベントを結合するためにバッファを埋めるのに時間がかかる場合があります。 この間ずっと、イベントはメモリに保存され、グループの形成が結合するのを待ちます。 そのため、データを失う可能性が高くなります。 要約： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> 少量のデータの場合、クライアントが一度に1つずつイベントをFlumeに送信することをお勧めします。イベントを失う可能性は低くなります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li> 大量のデータの場合、イベント集約を使用することをお勧めします。 イベントが集中的に生成される場合、5〜10個のイベントのバッファが十分にすばやくダイヤルされます。 この場合、排水のパフォーマンスが大幅に向上します。 </li></ol></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>HDFSクラスター上の複数のマシンにドレインをデプロイします</b> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Clouderaを介してFlumeを構成する場合、クラスターの各ノードで個別のFlumeノードを実行することができます。 そして、この機会は使用するほうが良いです-このようにして、すべてのクラスターマシン間で負荷が分散されるためです。 ただし、同じ構成（つまり、すべてのマシンで同じ構成ファイル）を使用する場合は、ファイル名の競合が発生しないようにしてください。 これを行うには、ヘッダーにホスト名を追加するイベントフックを使用します。 したがって、ファイル名テンプレートでこのヘッダーを指定するだけで済みます（以下を参照）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <font color="#999999"><i><b>ご注意</b></i></font>  <font color="#999999"><i>実際、このような決定を下す際には、検討する価値があります。結局のところ、各株式は同種のデータをファイルに書き込みます。</i></font>  <font color="#999999"><i>その結果、HDFSで多数の小さなファイルを取得できます。</i></font>  <font color="#999999"><i>決定のバランスを取る必要があります-データ量が少ない場合は、HDFSでの記録用にFlumeノードを1つに制限できます。</i></font>  <font color="#999999"><i>これは、いわゆる<a href="https://flume.apache.org/FlumeUserGuide.html">データ統合</a>と呼ばれ<a href="https://flume.apache.org/FlumeUserGuide.html">ます</a> 。複数のソースからのデータが最終的に同じ在庫になる場合です。</i></font>  <font color="#999999"><i>ただし、データが流れている場合、1つのノードでは不十分な場合があります。</i></font>  <font color="#999999"><i>このシリーズの次の記事では、トランスポートネットワーク全体の設計について詳しく説明します。</i></font> </blockquote></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> イベントインターセプター </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     私はこれらの不思議なインターセプターについて何度も言及しましたが、おそらく今がそれが何であるかについて話す時です。 インターセプターは、ソースでイベントを受信して​​からチャネルに送信するまでのフェーズで機能するイベントハンドラーです。 インターセプターは、イベントを変換、変更、またはフィルターできます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Flume <a href="https://flume.apache.org/FlumeUserGuide.html">はデフォルト</a>で<a href="https://flume.apache.org/FlumeUserGuide.html">多くのインターセプターを提供します</a> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 静的ヘッダー（定数、タイムスタンプ、ホスト名）を追加します。 </li><li> ヘッダーにランダムなUUIDを生成します。 </li><li> イベント（正規表現）の本体から値を抽出し、ヘッダーとして使用します。 </li><li> イベントの内容を変更します（再び正規表現を使用）。 </li><li> コンテンツに基づいてイベントをフィルタリングします。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">さまざまなインターセプターの構成例</b> <div class="spoiler_text"><pre> <code class="apache hljs"><span class="hljs-comment"><span class="hljs-comment"># ============================ Avro-   ============================ # #    Vvro- my-agent.sources.avro-source.type = avro my-agent.sources.avro-source.bind = 0.0.0.0 my-agent.sources.avro-source.port = 50001 my-agent.sources.avro-source.channels = my-agent-channel #    ,    (   ) my-agent.sources.avro-source.interceptors = ts directory host replace group-replace filter extractor # ------------------------------------------------------------------------------ # #        . #    "dir",   — "test-folder". my-agent.sources.avro-source.interceptors.directory.type = static my-agent.sources.avro-source.interceptors.directory.key = dir my-agent.sources.avro-source.interceptors.directory.value = test-folder #      —   (  — false) my-agent.sources.avro-source.interceptors.directory.preserveExisting = true # ------------------------------------------------------------------------------ # #     "timestamp"       ,   my-agent.sources.avro-source.interceptors.ts.type = timestamp my-agent.sources.avro-source.interceptors.ts.preserveExisting = true # ------------------------------------------------------------------------------ # #      /IP   my-agent.sources.avro-source.interceptors.host.type = host my-agent.sources.avro-source.interceptors.host.useIP = true #   ( directory.key) my-agent.sources.avro-source.interceptors.host.hostHeader = host my-agent.sources.avro-source.interceptors.host.preserveExisting = true # ------------------------------------------------------------------------------ # #        ;    my-agent.sources.avro-source.interceptors.replace.type = search_replace my-agent.sources.avro-source.interceptors.replace.searchPattern = \t my-agent.sources.avro-source.interceptors.replace.replaceString = ; #    byte[],     (  — UTF-8) my-agent.sources.avro-source.interceptors.replace.charset = UTF-8 # ------------------------------------------------------------------------------ # #  ""   my-agent.sources.avro-source.interceptors.group-replace.type = search_replace # ,      2014-01-20        20/01/2014 #     .  ""   4  ()    , #        my-agent.sources.avro-source.interceptors.group-replace.searchPattern = (\\d{4})-(\\d{2})-(\\d{2})(.*) my-agent.sources.avro-source.interceptors.group-replace.replaceString = $3/$2/$1$4 # ------------------------------------------------------------------------------ # # -,      my-agent.sources.avro-source.interceptors.filter.type = regex_filter my-agent.sources.avro-source.interceptors.filter.regex = error$ #  true —   ,      , #    —  ,      my-agent.sources.avro-source.interceptors.filter.excludeEvents = true # ------------------------------------------------------------------------------ # # ,          my-agent.sources.avro-source.interceptors.extractor.type = regex_extractor # ,    : "2016-04-15;WARINING;- " my-agent.sources.avro-source.interceptors.extractor.regex = (\\d{4}-\\d{2}-\\d{2});(.*); #   —        , #   .     # (\\d{4}-\\d{2}-\\d{2}) -&gt; $1 -&gt; ts # (.*) -&gt; $2 -&gt; loglevel my-agent.sources.avro-source.interceptors.extractor.serializers = ts loglevel #      ,     TS my-agent.sources.avro-source.interceptors.extractor.serializers.ts.type = org.apache.flume.interceptor.RegexExtractorInterceptorMillisSerializer my-agent.sources.avro-source.interceptors.extractor.serializers.ts.name = timestamp my-agent.sources.avro-source.interceptors.extractor.serializers.ts.pattern = yyyy-MM-dd #     as is my-agent.sources.avro-source.interceptors.extractor.serializers.loglevel.name = level</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準のインターセプターの中には、残念ながらヘッダーフィルターが見つかりませんでした。</font><font style="vertical-align: inherit;">ただし、必要に応じて、このようなインターセプターを自分で作成できます。</font><font style="vertical-align: inherit;">Flumeトランスポートを完全に構成するには、別のタイプのFlumeコンポーネントであるセレクターを検討する必要があります。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> チャンネルセレクター </font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"></font><a href="https://flume.apache.org/FlumeUserGuide.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのイベントをどのチャネルに送信するか</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を理解するには、チャネルにセレクタが必要</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">合計2種類のセレクターがあります。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複製</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -セレクタ。これにより、ソースは関連するすべてのチャネルでイベントを複製します。</font><font style="vertical-align: inherit;">Flumeをデフォルトで使用するのは彼です。</font><font style="vertical-align: inherit;">同時に、このセレクタを使用すると、「オプションの」チャネルを選択できます。</font><font style="vertical-align: inherit;">メインのものとは異なり、ソースはそのようなチャネルへの失敗したイベントの追加を無視します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重化</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -いくつかのルールに従ってチャネル間でイベントを分配するセレクター。</font><font style="vertical-align: inherit;">標準の多重化セレクターの実装により、ヘッダー値に基づいてチャネル間でイベントを配信できます。</font></font></li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重化セレクターの構成例</font></font></b> <div class="spoiler_text"><pre> <code class="apache hljs"><span class="hljs-comment"><span class="hljs-comment"># ============================ Avro-   ============================ # my-source.sources.avro-source.type = avro my-source.sources.avro-source.port = 50002 my-source.sources.avro-source.bind = 127.0.0.1 my-source.sources.avro-source.channels = hdfs-channel file-roll-channel null-channel #   — multiplexing,    # ,       ""  ""  , #         HDFS,   —    my-source.sources.avro-source.selector.type = multiplexing #   ,      my-source.sources.avro-source.selector.header = type #  type = important,      HDFS,     my-source.sources.avro-source.selector.mapping.important = hdfs-channel file-roll-channel #  type = common,      my-source.sources.avro-source.selector.mapping.common = file-roll-channel #   type     - ,     # ( ,     memchannel  null-sink) my-source.sources.avro-source.selector.mapping.default = hdfs-null-channel</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <b><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セレクターはインターセプターの後のイベントを処理します。</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、イベントでインターセプターのいくつかの操作（たとえば、さまざまなヘッダーの抽出）を実行し、これらの操作の結果をセレクターで既に使用できることを意味します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> おわりに </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事は予想外に大規模であることが判明したため、このシリーズの記事の次のパートで、約束されたサイトの監視を検討することにしました。</font><font style="vertical-align: inherit;">結論として、HDFSで機能するFlume構成の1つを示したいと思います。</font><font style="vertical-align: inherit;">これは、ノードあたり毎秒最大約2000イベントまでの少量のデータの配信と編成に適しています。</font><font style="vertical-align: inherit;">このノードには、イベントにロールヘッダー（「15m」または「60m」）、dir、およびsrcが必要です。これらを使用して、2レベルのフォルダー階層が取得されます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDFSのFlume構成</font></font></b> <div class="spoiler_text"><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">flume</span></span>-hdfs.sources = hdfs-source flume-hdfs.channels = hdfs-15m-channel hdfs-60m-channel hdfs-null-channel flume-hdfs.sinks = hdfs-15m-sink hdfs-60m-sink # =========== Avro-,      host ============ # flume-hdfs.sources.hdfs-source.type = avro flume-hdfs.sources.hdfs-source.port = 50002 flume-hdfs.sources.hdfs-source.bind = 0.0.0.0 flume-hdfs.sources.hdfs-source.interceptors = hostname flume-hdfs.sources.hdfs-source.interceptors.hostname.type = host flume-hdfs.sources.hdfs-source.interceptors.hostname.hostHeader = host flume-hdfs.sources.hdfs-source.channels = hdfs-null-channel hdfs-15m-channel flume-hdfs.sources.hdfs-source.selector.type = multiplexing flume-hdfs.sources.hdfs-source.selector.header = roll flume-hdfs.sources.hdfs-source.selector.mapping.15m = hdfs-15m-channel flume-hdfs.sources.hdfs-source.selector.mapping.60m = hdfs-60m-channel flume-hdfs.sources.hdfs-source.selector.mapping.default = hdfs-null-channel # ============================  , 15  ============================ # flume-hdfs.channels.hdfs-15m-channel.type = file flume-hdfs.channels.hdfs-15m-channel.maxFileSize = 1073741824 flume-hdfs.channels.hdfs-15m-channel.capacity = 10000000 flume-hdfs.channels.hdfs-15m-channel.transactionCapacity = 10000 flume-hdfs.channels.hdfs-15m-channel.dataDirs = /flume/flume-hdfs/hdfs-60m-channel/data1,/flume/flume-hdfs/hdfs-60m-channel/data2 flume-hdfs.channels.hdfs-15m-channel.checkpointDir = /flume/flume-hdfs/hdfs-15m-channel/checkpoint # ============================  , 60  ============================ # flume-hdfs.channels.hdfs-60m-channel.type = file flume-hdfs.channels.hdfs-60m-channel.maxFileSize = 1073741824 flume-hdfs.channels.hdfs-60m-channel.capacity = 10000000 flume-hdfs.channels.hdfs-60m-channel.transactionCapacity = 10000 flume-hdfs.channels.hdfs-60m-channel.dataDirs =/flume/flume-hdfs/hdfs-60m-channel/data1,/flume/flume-hdfs/hdfs-60m-channel/data2 flume-hdfs.channels.hdfs-60m-channel.checkpointDir = /flume/flume-hdfs/hdfs-60m-channel/checkpoint # ===========   ,   15  (5 . ) =========== # flume-hdfs.sinks.hdfs-15m-sink.type = hdfs flume-hdfs.sinks.hdfs-15m-sink.channel = hdfs-15m-channel flume-hdfs.sinks.hdfs-15m-sink.hdfs.filePrefix = <span class="hljs-variable"><span class="hljs-variable">%{src}</span></span>/%Y-%m-%d/%Y-%m-%d-%H-%M-%S.<span class="hljs-variable"><span class="hljs-variable">%{src}</span></span>.<span class="hljs-variable"><span class="hljs-variable">%{host}</span></span>.log flume-hdfs.sinks.hdfs-15m-sink.hdfs.path = /logs/<span class="hljs-variable"><span class="hljs-variable">%{dir}</span></span> flume-hdfs.sinks.hdfs-15m-sink.hdfs.fileSuffix = .gz flume-hdfs.sinks.hdfs-15m-sink.hdfs.writeFormat = Text flume-hdfs.sinks.hdfs-15m-sink.hdfs.codeC = gzip flume-hdfs.sinks.hdfs-15m-sink.hdfs.fileType = CompressedStream flume-hdfs.sinks.hdfs-15m-sink.hdfs.minBlockReplicas = 1 flume-hdfs.sinks.hdfs-15m-sink.hdfs.rollInterval = 0 flume-hdfs.sinks.hdfs-15m-sink.hdfs.rollSize = 0 flume-hdfs.sinks.hdfs-15m-sink.hdfs.rollCount = 0 flume-hdfs.sinks.hdfs-15m-sink.hdfs.idleTimeout = 300 flume-hdfs.sinks.hdfs-15m-sink.hdfs.round = true flume-hdfs.sinks.hdfs-15m-sink.hdfs.roundValue = 15 flume-hdfs.sinks.hdfs-15m-sink.hdfs.roundUnit = minute flume-hdfs.sinks.hdfs-15m-sink.hdfs.threadsPoolSize = 8 flume-hdfs.sinks.hdfs-15m-sink.hdfs.batchSize = 10000 # ===========   ,   60  (20 . ) =========== # flume-hdfs.sinks.hdfs-60m-sink.type = hdfs flume-hdfs.sinks.hdfs-60m-sink.channel = hdfs-60m-channel flume-hdfs.sinks.hdfs-60m-sink.hdfs.filePrefix = <span class="hljs-variable"><span class="hljs-variable">%{src}</span></span>/%Y-%m-%d/%Y-%m-%d-%H-%M-%S.<span class="hljs-variable"><span class="hljs-variable">%{src}</span></span>.<span class="hljs-variable"><span class="hljs-variable">%{host}</span></span>.log flume-hdfs.sinks.hdfs-60m-sink.hdfs.path = /logs/<span class="hljs-variable"><span class="hljs-variable">%{dir}</span></span> flume-hdfs.sinks.hdfs-60m-sink.hdfs.fileSuffix = .gz flume-hdfs.sinks.hdfs-60m-sink.hdfs.writeFormat = Text flume-hdfs.sinks.hdfs-60m-sink.hdfs.codeC = gzip flume-hdfs.sinks.hdfs-60m-sink.hdfs.fileType = CompressedStream flume-hdfs.sinks.hdfs-60m-sink.hdfs.minBlockReplicas = 1 flume-hdfs.sinks.hdfs-60m-sink.hdfs.rollInterval = 0 flume-hdfs.sinks.hdfs-60m-sink.hdfs.rollSize = 0 flume-hdfs.sinks.hdfs-60m-sink.hdfs.rollCount = 0 flume-hdfs.sinks.hdfs-60m-sink.hdfs.idleTimeout = 1200 flume-hdfs.sinks.hdfs-60m-sink.hdfs.round = true flume-hdfs.sinks.hdfs-60m-sink.hdfs.roundValue = 60 flume-hdfs.sinks.hdfs-60m-sink.hdfs.roundUnit = minute flume-hdfs.sinks.hdfs-60m-sink.hdfs.threadsPoolSize = 8 flume-hdfs.sinks.hdfs-60m-sink.hdfs.batchSize = 10000 # ================ NULL- +     =============== # flume-hdfs.channels.hdfs-null-channel.type = memory flume-hdfs.channels.hdfs-null-channel.capacity = 30000 flume-hdfs.channels.hdfs-null-channel.transactionCapacity = 10000 flume-hdfs.channels.hdfs-null-channel.byteCapacityBufferPercentage = 20 flume-hdfs.sinks.hdfs-null-sink.channel = hdfs-null-channel flume-hdfs.sinks.hdfs-null-sink.type = null</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> サイクルの次の最終記事では、以下を検討します。 </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Flumeに基づいた本格的なデータトランスポートを構築するプロセス。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 独自のコンポーネントを開発する例。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> この記事には含まれていなかった、約束されたノード監視。 </font></font></li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J281917/index.html">Ubuntu Scope Showdown 2016に参加したストーリー</a></li>
<li><a href="../J281919/index.html">Osliki.Net-ソーシャル配信</a></li>
<li><a href="../J281925/index.html">Bitrixは知識を与える-すべての資料#FailOverConf</a></li>
<li><a href="../J281929/index.html">ダイナミックRAMのパフォーマンスと、それを増やす方法のとんでもないアイデア</a></li>
<li><a href="../J281931/index.html">Electron、SASS、TypeScript、Pug（Jade）、Polymer、およびWindowsアプリケーションを作成するためのフライングサイクリング</a></li>
<li><a href="../J281935/index.html">4月20日午前10時から午後6時（MCK）Microsoft MVPおよびMicrosoft従業員によるWindows Server、Windows 10、およびクラウドに関するQ＆A</a></li>
<li><a href="../J281937/index.html">エンタープライズファイルリソース権利管理標準</a></li>
<li><a href="../J28194/index.html">アルカイダ：ハイテクと情報戦争</a></li>
<li><a href="../J281941/index.html">35種類の便利な仮想化ツール</a></li>
<li><a href="../J281943/index.html">サーバー上の開いているポートを見つけるための7つのオンラインスキャナー</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
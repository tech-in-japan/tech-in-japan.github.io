<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⤵️ 👨‍👨‍👦‍👦 ⚗️ メモリ管理：内部を見る 🗄️ 🕗 📝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="良い一日！ 
  
 New Medioの CTOであるJonathan Bartlettによる記事の翻訳に注目したいと思います。 この記事は2004年11月16日にibm.comで公開され、メモリー管理手法に焦点を当てています。 この記事の時代は（ITの基準によると）非常に高いですが、その情報は基...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>メモリ管理：内部を見る</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/270009/"><img src="https://habrastorage.org/files/478/186/863/47818686316a411db1b0fee443e6dbdd.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     良い一日！ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>New Medioの</i> CTOである<i>Jonathan Bartlett</i>による記事の翻訳に注目したいと思います。 この記事は2004年11月16日に<a href="http://www.ibm.com/">ibm.com</a>で公開され、メモリー管理手法に焦点を当てています。 この記事の時代は（ITの基準によると）非常に高いですが、その情報は基本的なものであり、メモリ割り当てへのアプローチ、その長所と短所について説明しています。 このすべてには、素材のより良い同化のために、「自作」の実装が伴います。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>著者からの要約</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>動的メモリ割り当ての決定、トレードオフ、実装</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Linux開発者が利用できるメモリ管理方法のアイデアを入手してください。 これらのメソッドはC言語に限定されず、他のプログラミング言語でも使用されます。 この記事では、手動アプローチ（ <i>手動</i> ）、参照カウント（ <i>参照カウント</i> ）またはプール（ <i>プーリング</i> ）を使用した<i>半</i>手動（ <i>半</i> <i>手動</i> ）、および<i>ガベージコレクション</i>を使用した自動の例を使用して、メモリ管理の実行方法について詳しく説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>メモリー管理が必要な理由</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     メモリ管理は、プログラミングの最も基本的な分野の1つです。 多くのスクリプト言語では、メモリ管理について心配する必要はありませんが、これによりこのメカニズムの重要性が低下することはありません。  <i>メモリマネージャの</i>機能とその作業の複雑さに関する知識は、効果的なプログラミングの鍵となります。  C / C ++などのほとんどのシステム言語では、開発者は自分で使用するメモリを監視する必要があります。 この記事では、手動、半自動、および自動のメモリ管理方法について説明しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     メモリ管理が大きな問題ではなかった時代がありました。 例として、Apple IIのアセンブラーでの開発時間を思い出すことができます。 基本的に、プログラムはOSとは別にではなく、OSとともに起動されました。 システムと開発者の両方が任意のメモリを使用できます。 メモリの合計量を計算する必要はありませんでした。 すべてのコンピューターで同じでした。 そのため、メモリ要件はかなり静的でした。メモリを選択して使用する必要がありました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     それにもかかわらず、そのような単純なコンピューターであっても、特にプログラムの特定の部分に必要なメモリー量がわからない場合は、問題をつかむことができます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     メモリに関連する制限がある場合、次のようなタスクを処理するアプローチが必要です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 十分なメモリがあるかどうかを判断します。 </li><li> 利用可能なメモリからセクションを取得します。 </li><li> セクションをプールに戻し、プログラムの他の部分または他のプログラムで使用できるようにします。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （ <i>翻訳者のメモ</i> ：後で参照するために、このリストを<i>メモリ要件</i>として指定しましょう） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     メモリを検索/割り当て/解放するライブラリは、アロケータと呼ばれます。 プログラムの複雑さが増すと、メモリ管理の複雑さが増し、そのようなプログラムでのアロケーターの役割が増します。 さまざまなメモリ管理方法を見て、それらの長所と短所、およびそれらが最も効果的な状況を考えてみましょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>アロケーター（Cスタイル）</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>C</i>言語は、メモリ要件のタスクを処理する2つの関数をサポートしています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <i><b>malloc</b></i> ：指定されたバイト数を選択し、それらへのポインターを返します。 十分なメモリがない場合、NULLへのポインタ（ <i>null pointer</i> ）を返します。 </li><li>  <i><b>free</b></i> ： <i>malloc</i>を使用して割り当てられたメモリ内の領域への入力ポインタを受け入れ、それをプログラムまたはオペレーティングシステムで後で使用するために返します（実際、一部の<i>malloc</i>は、OSでなくプログラムのみで使用するためにメモリを返します）。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>物理メモリと仮想メモリ</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     プログラム内で割り当てがどのように発生するかを理解するには、OSがプログラムにメモリを割り当てる方法を把握する必要があります。  （ <i>翻訳者のメモ</i> ：プログラムは特定のOSで実行されるため、特定のプログラムに割り当てるメモリ量を決定するのは彼女です）実行中の各プロセスは、コンピューターの物理メモリ全体にアクセスできると見なします。 多くのプロセスが同時に動作し、各プロセスがすべてのメモリにアクセスできないことは明らかです。 しかし、プロセスが仮想メモリ（ <i>仮想メモリ</i> ）を使用するとどうなりますか。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     例として、プログラムがメモリの629番目のセクションにアクセスするとします。 仮想メモリシステム（ <i>仮想メモリシステム</i> ）は、データが629番地のRAMに保存されることを保証しません。実際、RAMであるとは限りません。RAMがいっぱいになった場合、データはディスクに転送されます。 つまり ワースへ。 メモリには、物理​​デバイスに対応するアドレスを格納できます。  OSはWirth対応テーブルを保存します。 物理<i>アドレス（仮想アドレスから物理アドレス</i> ） <i>へのアドレス。</i>これにより、コンピュータはその<i>アドレスでの要求</i> （ <i>アドレス要求</i> ）に正しく応答でき<i>ます</i> 。  RAMに物理アドレスが格納されている場合、OSはプロセスを一時的に中断し、データをDISKに（RAMから）アップロードし、プロセスがDISKから機能するために必要なデータをロードし、プロセスを再起動します。 したがって、各プロセスは、それ自体が動作できる独自のアドレス空間を受け取り、それに割り当てられたOSよりも多くのメモリを受け取ることができます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      32ビットアプリケーション（ <i>x86</i>アーキテクチャ）では、各プロセスは4ギガバイトのメモリで動作できます。 現時点では、ほとんどのユーザーはそのようなボリュームを所有していません。  <i><a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25B4%25D0%25BA%25D0%25B0%25D1%2587%25D0%25BA%25D0%25B0_%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2586">スワップを使用する</a></i>場合でも、プロセスごとに4 GB未満である必要があります。 したがって、プロセスがメモリにアンロードされると、特定のスペースが割り当てられます。 このメモリの終わりは、 <i>システムブレーク</i>と呼ばれ<i>ます</i> 。 この境界を超えると、割り当てられていないメモリ、つまり ディスクまたはRAMへの投影なし。 したがって、プロセスのメモリが（ブート時に割り当てられたものから）なくなると、OSからより大きなメモリを要求する必要があります。  （ <i>マッピング</i> （英語の<i>マッピング</i>から-リフレクション、プロジェクション）は、1対1の対応-つまり、実際のデータが既に格納されている仮想アドレス（ディスク上のアドレス）に異なるアドレスが格納されていることを意味する数学用語です） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      UNIXベースのオペレーティングシステムには、追加のメモリレイアウトのための2つのシステムコールがあります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <i><b>brk</b></i> ：brk（）は非常にシンプルなシステムコールです。  <i>システムブレーク</i>は、プロセスに割り当てられたメモリの極端な境界です。  <i>brk（）は、</i>単にこの境界を前後に移動して、割り当てられたメモリの量を増減します。  （ <i>トランスレータに注意してください</i> ：同じMS Wordのスケールスケールを想像して<i>ください</i> 。 <i>システムブレーク</i>はスライダーが取ることができる最大値であり、スライダー自体は<i>現在のブレークです</i> ） </li><li>  <i><b>mmap</b></i> ：mmap（）（または「メモリマップ」）は<i>brk（）に</i>似ていますが、より柔軟なツールです。 まず、プロセスの最後だけでなく、アドレス空間内の任意の場所にメモリをマークできます。 第二に、メモリ（仮想）を物理またはスワップ（ <i>swap</i> ）へのプロジェクションとしてマークするだけでなく、メモリを特定のファイルにバインドできるため、読み取りと書き込みがファイルで直接動作します。  <i>mmap（）の</i> <i>対極</i>は<i>munmap（）</i>です。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ご覧のとおり、プロセスメモリを拡張するには、 <i>brk（）</i>または<i>mmap（）の</i>単純な呼び出しを使用できます。 さらにテキストでは<i>brk（）</i>が使用されます 最もシンプルで一般的なツールです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>シンプルなアロケーターの実装</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Cプログラムを書いたのであれば、おそらく<i>malloc（）</i>や<i>free（）</i>などの<i>関数を</i>使用したでしょう。 確かにあなたはそれらの実装についても考えていませんでした。 このセクションでは、これらの関数の簡単な実装を示し、それらがメモリ割り当てにどのように関与するかを説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     たとえば、この<a href="http://www.ibm.com/developerworks/linux/library/l-memory/sidefile.html">リスト</a>が必要です。 それをコピーして<u>malloc.c</u>というファイルに貼り付けます。 少し後で分析します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2つの簡単な機能に関連付けられているほとんどのオペレーティングシステムでメモリを割り当てます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  void * <i>malloc</i> （long numbytes）：メモリ内の<u>numbytes</u>バイトを<u>割り当て、最初の</u>バイトへのポインターを返します。 </li><li>  void <i>free</i> （void * firstbyte）： <u>firstbyte</u> - <i>malloc（）</i>を使用して取得したポインターと、解放に必要なメモリー。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     アロケーターを初期化<i>するmalloc_init</i>関数を<i>宣言し</i>ます。 これは、アロケータを初期化済みとしてマークし、メモリ内の最後の有効なアドレスを見つけて（つまり、割り当てに使用できる）、このメモリの先頭にポインタを設定するという3つのことを意味します。 これを行うには、3つのグローバル変数を宣言します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト1： <i>アロケーターのグローバル変数</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> has_initialized = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *managed_memory_start; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *last_valid_address;</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     上記のように、ラベル付きメモリの「エッジ」（最後の有効なアドレス）にはいくつかの名前があり<i>ます-System break</i>または<i>Current break</i>です。 ほとんどのUnixライクシステムでは、 <i>sbrk（0）</i>関数を使用して<i>現在のシステムブレーク</i>を見つけます。  <i>sbrkは、</i> <i>現在のブレーク</i>を（引数で渡された）nバイトだけプッシュします。その後、 <i>現在のブレーク</i>は新しい値を取ります。  <i>sbrk（0）</i>を呼び出すと、単に<i>現在のシステムが</i>返され<i>ます</i> 。  <i>現在のブレーク</i>を探して変数を初期化する<i>malloc</i>のコードを記述します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト2： <i>アロケーターの初期化</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Include the sbrk function */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unistd.h&gt; void malloc_init() { /*  (  )    */ last_valid_address = sbrk(0); /*     ,      *     last_valid_address */ managed_memory_start = last_valid_address; /*  ,    */ has_initialized = 1; }</span></span></span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     適切に管理するには、割り当てられたメモリと解放されたメモリを監視する必要があります。 メモリの一部に対して<i>free（）</i>を呼び出した後、メモリを「未使用」としてマークする必要があります。 これは、 <i>malloc（）が</i>呼び出されたときに空きメモリを見つけるために必要です。 したがって、 <i>malloc（）</i>が返すメモリの各部分の先頭は次の構造になります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト3： <i>メモリ制御ブロックの構造</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mem_control_block</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> is_available; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> size; };</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この構造体へのポインターを返す（ <i>malloc</i>関数を呼び出す）と、この構造体が干渉すると推測できます。  （ <i>翻訳者のコメント</i> ：ポインタがこの構造の先頭に設定されている場合、このメモリに書き込むと、割り当てられたメモリ量に関する情報が失われます）すべてが非常に簡単に解決されます-非表示にする必要があります、つまり、ポインタをメモリに戻す、この構造のすぐ後ろにあります。 つまり 実際、情報を格納していない領域へのポインタを返し、データを「書き込む」ことができます。 ポインターが渡される<i>free（）</i>呼び出しが行われると、特定のバイト数（具体的には<i>sizeof</i> （mem_control_block））を巻き戻して、この構造のデータをさらに検索するために使用します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     まず、メモリの解放について説明しましょう。なぜなら、 このプロセスは強調表示よりも簡単です。 メモリを解放するために必要なのは、パラメータとして渡されたポインタを<i>free（）</i>関数に取り、 <i>sizeof</i> （struct mem_control_block）バイトに戻し、メモリを空きとしてマークすることです。 コードは次のとおりです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト4： <i>メモリを解放する</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">free</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *firstbyte)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mem_control_block</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mcb</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/*          * mem_control_block */</span></span> mcb = firstbyte - <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(struct mem_control_block); <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> mcb-&gt;is_available = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*  ! */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ご覧のとおり、この例では、リリースは一定の時間で行われます。 実装は非常に簡単です。 選択では、もう少し難しくなります。 一般的な用語でアルゴリズムを検討してください。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト5： <i>アロケーターアルゴリズムの擬似コード</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span>      ,   . <span class="hljs-number"><span class="hljs-number">2.</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(struct mem_control_block)    ; <span class="hljs-number"><span class="hljs-number">3.</span></span>   managed_memory_start. <span class="hljs-number"><span class="hljs-number">4.</span></span>      last_valid address? <span class="hljs-number"><span class="hljs-number">5.</span></span>  : A.                  . <span class="hljs-number"><span class="hljs-number">6.</span></span>  : A.    ?( mem_control_block-&gt;is_available == <span class="hljs-number"><span class="hljs-number">1</span></span>)? B.  : I) -    (mem_control_block-&gt;is_available &gt;=  )? II)  : a.     (mem_control_block-&gt;is_available = <span class="hljs-number"><span class="hljs-number">0</span></span>) b.    mem_control_block    III)   : a.   <span class="hljs-string"><span class="hljs-string">"size"</span></span>   b.    <span class="hljs-number"><span class="hljs-number">4</span></span> C.  : I)   <span class="hljs-string"><span class="hljs-string">"size"</span></span>   II)    <span class="hljs-number"><span class="hljs-number">4</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     全体のポイントは、無料のサイトを見つけるためのメモリからの一種の「ウォーク」です。 コードを見てください： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト6： <i>ワークフローの実装</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">malloc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numbytes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *current_location; <span class="hljs-comment"><span class="hljs-comment">/*      * memory_control_block */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mem_control_block</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">current_location_mcb</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/*       .       0 */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *memory_location; <span class="hljs-comment"><span class="hljs-comment">/* ,      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(! has_initialized) { malloc_init(); } <span class="hljs-comment"><span class="hljs-comment">/*     memory * control block,    malloc  *   .       */</span></span> numbytes = numbytes + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(struct mem_control_block); <span class="hljs-comment"><span class="hljs-comment">/*  memory_location 0      */</span></span> memory_location = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*      ()  */</span></span> current_location = managed_memory_start; <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(current_location != last_valid_address) { <span class="hljs-comment"><span class="hljs-comment">/*   current_location  current_location_mcb *  .  current_location_mcb *     ,  * current_location    t */</span></span> current_location_mcb = (struct mem_control_block *)current_location; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(current_location_mcb-&gt;is_available) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(current_location_mcb-&gt;size &gt;= numbytes) { <span class="hljs-comment"><span class="hljs-comment">/* !    ... */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   ,    -     */</span></span> current_location_mcb-&gt;is_available = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> memory_location = current_location; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">/*    ,         ,   */</span></span> current_location = current_location + current_location_mcb-&gt;size; } <span class="hljs-comment"><span class="hljs-comment">/*        ,       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(! memory_location) { <span class="hljs-comment"><span class="hljs-comment">/* Move the program break numbytes further */</span></span> sbrk(numbytes); <span class="hljs-comment"><span class="hljs-comment">/*  , last_valid_address   */</span></span> memory_location = last_valid_address; <span class="hljs-comment"><span class="hljs-comment">/*   last valid address  * numbytes  */</span></span> last_valid_address = last_valid_address + numbytes; <span class="hljs-comment"><span class="hljs-comment">/*   mem_control_block */</span></span> current_location_mcb = memory_location; current_location_mcb-&gt;is_available = <span class="hljs-number"><span class="hljs-number">0</span></span>; current_location_mcb-&gt;size = numbytes; } <span class="hljs-comment"><span class="hljs-comment">/*     (   ). *   memory_location     * mem_control_block */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*     mem_control_block */</span></span> memory_location = memory_location + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(struct mem_control_block); <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> memory_location; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これがメモリマネージャです。 次に、プログラムで使用するためにアセンブルする必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>mallocに似た</i>アロケーターを構築するには、次のコマンドを入力する必要があります（ <i>realloc（）</i>などの関数には触れませんでしたが、 <i>malloc（）</i>および<i>free（）</i>が最も重要です）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト7： <i>コンパイル</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs">gcc -shared -fpic <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>.c -o <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>.so</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     出力で、 <u>malloc.so</u>ファイルを取得します。これはライブラリであり、コードが含まれています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unixシステムでは、システムの代わりにアロケーターを使用できます。 これは次のように行われます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>コードリスト8： <i>標準mallocの置き換え</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs">LD_PRELOAD=/path/to/<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>.so <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> LD_PRELOAD</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      LD_PRELOADは<i>環境変数です</i> 。 このライブラリがアプリケーションによってロードされる前に、ライブラリに含まれる文字を決定するために、動的リンカーによって使用されます。 これは、動的ライブラリでのシンボルの重要性を強調しています。 したがって、現在のセッションの一部として作成されるアプリケーションは、先ほど作成した<i>malloc（）</i>を使用します。 一部のアプリケーションは<i>malloc（）を</i>使用しませんが、これはルールではなく例外です。  <i>realloc（）の</i>ようにアロケーターを使用している人や、malloc（）の内部動作についてまったく知らない人は、陥りやすいでしょう。  <a href="https://ru.wikipedia.org/wiki/Almquist_shell">Ash</a>シェル（ashはこのようなシステムのUNIXコマンドシェルです）は、 <i>malloc</i>アロケーターでうまく機能します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>malloc（）が使用さ</i>れていることを確認したい場合は、関数の先頭に<i>write（）</i>呼び出しを追加できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     機能面では、メモリマネージャ（ <i>メモリマネージャ</i> ）には多くの要望が残されていますが、作業を示す例としては素晴らしいものです。 その欠点のうち、次の点に注意する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> なぜなら  <i>System break</i> （グローバル変数）で動作し、他のアロケーターや<i>mmap</i>と共存できません。 </li><li> ディストリビューションでは、最悪の場合、アロケーターはプロセスメモリ全体を処理する必要があります。プロセスメモリには、ディスクに保存されているデータのアドレスも含まれる場合があります。 これにより、OSはディスクから仮想へのデータの移動に時間を費やすことになります。 メモリおよびその逆。 </li><li> 最適<i>なメモリ不足</i>エラー処理はありません。 </li><li>  <i>realloc（）</i>など、他の多くの関数の実装はありません。 </li><li> なぜなら  <i>sbrk（）</i>は、要求したよりも多くのメモリを割り当てることがあります。これにより、ヒープの最後でメモリリークが発生します。 </li><li>  is_availableは4バイトを使用しますが、実際には1ビットのみが必要です。 </li><li>  <i><i>ア</i></i>ロケーターには<i><i>スレッドセーフ</i></i>がありません<i>。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     大きなブロックにマージできません。  （翻訳者のメモ：32バイトを要求するとします。メモリには16バイトの空きブロックが連続して2つあります。アロケータはこれを考慮しません。）; </li><li> 潜在的にメモリの断片化につながる非自明なアルゴリズムを使用します。 </li><li> もちろん、他の問題もあります。 しかし、これはほんの一例です！ </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>他の<i>malloc</i>実装</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     長所と短所の両方を持つ他の多くの<i>malloc（）</i>実装があります。 アロケーターを設計する際に考慮すべき多くの基準があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> メモリ<i>割り当て速度</i> （ <i>割り当て速度</i> ）; </li><li>  <i>割り当て解除速度</i> </li><li> マルチスレッド環境での動作。 </li><li> メモリ不足の動作。 </li><li> キャッシュの場所。 </li><li> 追加のメモリコストを考慮します。 </li><li> 仮想メモリでの動作。 </li><li> 大小のオブジェクト。 </li><li> リアルタイムで安定した作業。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     たとえば、アロケータの場合、プラスはメモリのクイックリリースであり、マイナスは遅い割り当てです。 また、Wirthを操作するためのプリミティブアルゴリズムが原因です。 メモリ、それは大きなオブジェクトに最適です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     アロケーターには多くの種類があります。 それらのいくつかを次に示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>Doug Lea malloc</b> ：は、オリジナルの<i>Doug Lea</i>アロケーター、 <i>GNU libc</i>アロケーター、 <i>ptmalloc</i>を含むアロケーターのサブセットです。  <i>Deug Lea</i>アロケーターは、アロケーターと同様の構造を持っていますが、検索を高速化するための武器庫にインデックスがあり、いくつかの未使用ブロックを1つの大きなブロックに結合できます。 キャッシュのサポートもあり、最近解放されたメモリを再利用するプロセスを高速化します。  <i>ptmalloc</i>は、マルチスレッドをサポートするために拡張された<i>Deug Lea</i>と同じ<i>です</i> 。  <i>Doug Leaのmallocの</i>説明は、記事の最後にある参照リストにあります。 </li><li>  <b>BSD malloc</b> ： <i>BSD Malloc</i>は、バージョン4.2以降に<a href="https://ru.wikipedia.org/wiki/BSD">BSDで</a>配布されてきた実装であり、メモリ内の既知のサイズのプールからオブジェクトを割り当てるアロケーターとして<a href="https://www.freebsd.org/ru/">FreeBSDに</a>含まれています。 彼はオブジェクトに関連するクラスのサイズ-2のべき乗から定数を自由に使用できます。 したがって、オブジェクトのメモリを要求すると、サイズが適切な任意のクラスのメモリが単純に割り当てられます。 これにより、簡単な実装が提供されますが、メモリのオーバーヘッドが発生する可能性があります。 説明は記事の最後にもあります。 </li><li>  <b>Hoard</b> ： <i>Hoard</i>は、マルチスレッド環境ですばやく動作するように作成されました。 したがって、メモリの割り当てを待機しているプロセスを操作するのに役立つロックを操作するために投獄され、メモリを常に使用するマルチスレッドプロセスを大幅に高速化できます。 参照リストの説明。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これらは、多くのアロケーターの中で最も有名です。 アプリケーションで特別なメモリ割り当てが必要な場合は、要件に基づいて機能する自作（カスタム）アロケータを作成できます。 とにかく、アロケーターの概念に慣れていない場合、自己記述の実装は利益をもたらすよりも多くの頭痛の種を作成します。 サブジェクト領域の詳細については、次の本を読むことをお勧めします。 <a href="http://www.ozon.ru/context/detail/id/1335648/">ドナルドクヌース：プログラミングアート1：基本アルゴリズム</a> -セクション2.5：動的メモリ割り当て。 もちろん素材は時代遅れであり、Wirthでの作業はそこでは影響を受けません。 環境メモリですが、アルゴリズムのベースは変更されていません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      C ++では、 <i>new（）</i>演算子のオーバーロード演算子を使用して、クラスまたはテンプレートにアロケーターを実装できます。  Andrei Alexandrescuは著書<a href="http://www.ozon.ru/context/detail/id/3829080/">Modern C ++ Programming</a>で小さなアロケーターオブジェクトについて説明しています（第4章：小さなオブジェクトをメモリに配置する）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b><i>malloc（）</i>を使用した配布の欠点</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     メモリマネージャに欠陥があるだけでなく、他の実装にも存在します。  <i>malloc（）で</i>管理すること<i>は、</i>データを長期間保存し、簡単にアクセスできるプログラムにとって<i>は</i>非常に危険なことです。 動的に割り当てられたメモリへの多くの参照があるため、いつ解放する必要があるかを見つけるのは困難です。 変数の有効期間（またはメモリの一部を操作する時間）が関数のスコープ（ローカル変数）によって制限されている場合、マネージャは通常簡単に仕事をしますが、プログラム全体でメモリが使用されるグローバル変数の場合、タスクは大幅になります難しい。 また、多くのAPIは完全には記述されておらず、プログラム自体または呼び出された関数で、誰がメモリを管理する責任があるのか​​が明確になりません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このような問題のため、多くのプログラムは独自のルールに従ってメモリを操作します。 場合によっては、コンピューティングコンポーネントよりもメモリの割り当てと解放に多くの操作（ <i>約Translator</i> ：テキスト内の「より多くのコード」）が費やされることを示すことがあります。 したがって、メモリを管理する別の方法を検討します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>メモリ管理への半自動アプローチ</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <hr>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>参照<i>カウント</i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>参照カウント</i>は、追加のコードを必要とするメモリを操作する半自動の方法であり、メモリが使用されなくなった時期を追跡できません。  <i>参照カウント</i>がこれを行います。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     作業のメカニズムは次のとおりです。動的に割り当てられたメモリごとに、それへの参照の数を格納するフィールドがあります。 このメモリを参照する変数がプログラムに表示されると、カウンターがインクリメントされます。 そしてその逆-このメモリを参照する変数が減少すると、カウンターが減少します。 カウンターをデクリメントすると、チェックが発生します。リンクの数が0の場合、メモリは解放されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このメモリを参照する各リンクは、単にカウンタを増減します。 これにより、使用中のメモリクリーニング状況が回避されます。 いずれにせよ、このタイプの（「カウントされた」）構造で作業している場合、リンクのカウントを担当する関数を使用することを忘れないでください。 また、組み込み関数とサードパーティライブラリは、 <i>参照カウントを使用し</i>たり、独自の動作メカニズムを使用できない場合があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このメカニズムを実装するには、2つの機能で十分です。  1つ目は参照カウンタを増やし、2つ目は減少してゼロに達するとメモリを解放します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     たとえば、リンクカウント関数は次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>リスト9. <i>参照カウントの</i>仕組み</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* /  */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      - Reference counter */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">refcountedstruct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> refcount; } <span class="hljs-comment"><span class="hljs-comment">/*   (  ),  *       refcountedstruct */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">REF</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">refcountedstruct</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rstruct</span></span></span><span class="hljs-class">;</span></span> rstruct = (struct refcountedstruct *) data; rstruct-&gt;refcount++; } <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UNREF</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">refcountedstruct</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rstruct</span></span></span><span class="hljs-class">;</span></span> rstruct = (struct refcountedstruct *) data; rstruct-&gt;refcount--; <span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rstruct-&gt;refcount == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(rstruct); } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>REF</i>と<i>UNREF</i>はより複雑になる可能性があります-それはすべてあなたが追求する目標に依存します。 たとえば、マルチスレッドアプリケーションにロックを追加することができます。 次に、 <i>refcountedstructに</i> 、メモリを解放する関数へのポインタを追加する必要があります（オブジェクト指向言語のデストラクタなど-これは、構造体にポインタが含まれている場合に必要です） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>REF</i>および<i>UNREF</i>を使用する場合は、ポインターを割り当てるときに次の規則に従う必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  UNREF-割り当ての前に呼び出されます </li><li>  REF-割り当て後に呼び出されます </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     再<i>カウントされた</i>構造を受け入れる関数の場合、次の規則が使用されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  REF-関数の開始時に呼び出されます </li><li>  UNREF-関数の終わりに呼び出されます </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     別の小さな例を次に示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* EXAMPLES OF USAGE */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*    refcounted */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mydata</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> refcount; <span class="hljs-comment"><span class="hljs-comment">/*   refcountedstruct */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> datafield1; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> datafield2; <span class="hljs-comment"><span class="hljs-comment">/*  ,    */</span></span> }; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dosomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct mydata *data)</span></span></span><span class="hljs-function"> </span></span>{ REF(data); <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> UNREF(data); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mydata</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">globalvar1</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/*     ,    * refcount ..    .  */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">storesomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct mydata *data)</span></span></span><span class="hljs-function"> </span></span>{ REF(data); <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> globalvar1 = data; REF(data); <span class="hljs-comment"><span class="hljs-comment">/* ref     */</span></span> UNREF(data); <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     なぜなら  <i>参照カウントは</i>非常に簡単なメカニズムであるため、多くの開発者はサードパーティのライブラリを避けて自分で実装します。 ただし、それらの実装は、メモリの割り当てと解放専用の<i>malloc</i>や<i>free</i>などのアロケーターに基づいています。  <i>参照カウント</i>は、 <a href="https://ru.wikipedia.org/wiki/Perl">Perl</a>などの高レベル言語でも使用されます。 これらの義務は言語自体に割り当てられているため、もちろん拡張したい場合を除き、何も心配する必要はありません。 もちろん、リンクカウントは作業の速度をわずかに低下させますが、開発に少しのセキュリティとシンプルさを追加します。 主な利点を考慮してください。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 簡単な実装。 </li><li> 使用するだけです。 </li><li> オブジェクト参照は構造の一部であり、良好な<i>キャッシュ局所性</i>を提供します。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     欠点もあります： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> リンクカウント機能を呼び出すことを忘れないでください。 </li><li> オブジェクトがリング構造の一部である場合、メモリを解放できません。 </li><li> インデックスの割り当て時の速度の低下。 </li><li> 例外を処理するときは、特に注意する必要があります（ <i>try</i>または<i>setjmp（）</i> / <i>longjmp（）</i> ）。 </li><li> リンクを使用する場合、追加のメモリが必要です。 </li><li>  <i>参照カウンター</i>は構造体の最初の場所にあり、ほとんどのマシンにすばやくアクセスできます。 </li><li> マルチスレッド環境で作業する場合、実行が遅くなり、複雑さが増します。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      C ++は、 <i>参照カウントと</i>同じくらい苦労してポインタを操作する<i>スマートポインタを使用して</i> 、エラーの可能性を減らすことができ<i>ます</i> 。<font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートポインターを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行していないレガシコードの所有者</font><font style="vertical-align: inherit;">（たとえば、</font><font style="vertical-align: inherit;">Cライブラリ</font><font style="vertical-align: inherit;">での</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンケージ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）の場合、このコードをさらに使用するとひどい混乱につながり、スマートポインターによって制御されるコードに比べてコードが複雑で混乱します。したがって、通常はC ++プロジェクトでのみ使用されます。スマートポインターを使用する場合は、</font></font><a href="http://www.ozon.ru/context/detail/id/3829080/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modern C ++ Programming</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Andrei Alexandreksu著）</font><font style="vertical-align: inherit;">の「スマートポインター」の章を読むだけで済みます</font><font style="vertical-align: inherit;">。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリプール</font></font></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリプール</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、半自動メモリ管理の別の方法です。特定のステージ/フラグメント（</font><i><font style="vertical-align: inherit;">ステージを</font></i><font style="vertical-align: inherit;">通過するプログラムのプロセスを自動化します</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）実行。プログラムの各段階で、プログラムに必要なスペースの量がわかっています。たとえば、接続に大量のメモリが割り当てられるサーバープロセス</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">その最大</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">寿命</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は接続の</font><i><font style="vertical-align: inherit;">寿命</font></i><font style="vertical-align: inherit;">と一致します。同じ</font></font><a href="https://ru.wikipedia.org/wiki/Apache"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各接続は個別の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステージ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であり、独自の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリプールがあります</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。フラグメントが実行されると、メモリは即座に解放されます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「プール」管理モデルでは、各メモリ割り当ては、メモリが割り当てられる特定のプールを参照します。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（コメント翻訳者</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：char型のローカル変数が5つある関数を想像してください。つまりこの機能を実行する場合、5バイトのメモリが必要になることが事前にわかっています。つまりこの関数の本体は、</font><font style="vertical-align: inherit;">実行中にプログラムが通過</font><font style="vertical-align: inherit;">する</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">段階に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">似ており、その</font><font style="vertical-align: inherit;">下に5バイトの固定サイズのメモリをすぐに割り当てることができます。これにより、変数が関数に表示されるため、メモリの検索と「カット」にかかる時間が節約され、常に十分なメモリがあることが保証されます。各</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プールに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は独自の有効期間があります。 Apacheでは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プール</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーの時間、接続期間、要求処理時間などに等しいライフタイムがあります。したがって、接続のサイズを超えないメモリを必要とする一連の機能がある場合、接続プールから単純に割り当てられ、作業が完了すると、自動的にリリースされます。さらに、一部の実装</font><font style="vertical-align: inherit;">では、プールがクリアされる前にいくつかのアクションを実行するために呼び出される</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クリーンアップ関数</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（OOPのデストラクタのようなもの）を登録できます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムでプールを使用するには、単に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obstack</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GNU</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -libc）または</font></font><a href="http:"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Protable Runtime</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Apache）</font><font style="vertical-align: inherit;">実装を使用でき</font><font style="vertical-align: inherit;">ます。</font><i><font style="vertical-align: inherit;">obstack</font></i><font style="vertical-align: inherit;">の利点</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、すべてのLinuxディストリビューションにデフォルトで付属しているものです。また、</font></font><a href="https://ru.wikipedia.org/wiki/Apache_Portable_Runtime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Portable Runtime</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は多くのプラットフォームで使用する機会です。実装の詳細については、記事の最後にリンクがあります。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次の「工夫された」例は、obstackの使用法を示しています。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リスト11. </font><i><font style="vertical-align: inherit;">obstack</font></i><font style="vertical-align: inherit;">を使用した例</font></font><i><font style="vertical-align: inherit;"></font></i></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;obstack.h&gt; #include &lt;stdlib.h&gt; /*   obstack  */ /*  obstack  (xmalloc *    malloc,    ,      (..   ) */ #define obstack_chunk_alloc xmalloc #define obstack_chunk_free free /* Pools */ /* Only permanent allocations should go in this pool */ struct obstack *global_pool; /*  pool   (per-connection) */ struct obstack *connection_pool; /*     (per-request) */ struct obstack *request_pool; void allocation_failed() { exit(1); } int main() { /*   */ global_pool = (struct obstack *) xmalloc (sizeof (struct obstack)); obstack_init(global_pool); connection_pool = (struct obstack *) xmalloc (sizeof (struct obstack)); obstack_init(connection_pool); request_pool = (struct obstack *) xmalloc (sizeof (struct obstack)); obstack_init(request_pool); /*    */ obstack_alloc_failed_handler = &amp;allocation_failed; /*   */ while(1) { wait_for_connection(); /*     */ while(more_requests_available()) { /*   */ handle_request(); /*       (request pool) */ obstack_free(request_pool, NULL); } /*    -    */ obstack_free(connection_pool, NULL); } } int handle_request() { /*  ,        (request pool) */ int bytes_i_need = 400; void *data1 = obstack_alloc(request_pool, bytes_i_need); /*     */ /*   */ return 0; }</span></span></span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原則として、各</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステージが完了すると</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obstackの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリーが解放され</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、実行プロセス中に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステージ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">割り当てられているよりも多くのメモリが必要な場合</font><font style="vertical-align: inherit;">、接続またはグローバル変数のライフタイムに匹敵する</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obstack</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライフタイムが増加する可能性があることに</font><i><font style="vertical-align: inherit;">注意</font></i><font style="vertical-align: inherit;">して</font><i><font style="vertical-align: inherit;">ください</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">場合</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obstack_free（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータを指定して呼び出し</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その後、すべてがリリースされます</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obstackを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">他のパラメーターを使用した呼び出しはまれです。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プールを使用する利点：</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> アプリケーションでのシンプルなメモリ管理。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリの割り当てと解放は高速です。なぜなら、</font><font style="vertical-align: inherit;">すべてはプール内で発生します。</font><font style="vertical-align: inherit;">割り当ては</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O（1）で</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行われ</font><font style="vertical-align: inherit;">、ほぼ同時に解放されます（実際には</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O（n）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですが、プールの分割は非常に重要であり</font><font style="vertical-align: inherit;">、ほとんどの場合</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O（1）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">つながり</font><font style="vertical-align: inherit;">ます）。</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> エラーハンドラーをプールに設定できます。これにより、メモリが使い果たされた場合にプログラムが落ちないようになります。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 使いやすい標準的な実装があります。 </font></font></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 欠点の中で、次の点に注意することができます。 </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムで使用されている、の実装は、別々の段階（に分けることができる</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">段階</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 多くの場合、サードパーティのライブラリでは動作しません。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムの構造が変更されると、メモリプールも変更される可能性があり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ管理システム</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><i><font style="vertical-align: inherit;">メモリ管理システム</font></i><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">の再構築が必要になり</font><font style="vertical-align: inherit;">ます。</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリを割り当てるプールを覚えておく必要があります。</font><font style="vertical-align: inherit;">間違えた場合、検出が困難になります。</font></font></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガベージコレクタ（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガベージコレクション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガベージコレクションは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -完全に自動検出し、メモリから未使用のオブジェクトを除去することです。</font><font style="vertical-align: inherit;">メモリが特定のしきい値を下回ると引き継ぎます。</font><font style="vertical-align: inherit;">彼はプログラムを運営し、「基本的な」データ、に渡す通常、最初のもの-スタック（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">積み重ね</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、グローバル変数（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グローバル変数アン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）とレジスタ（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レジスタ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）コレクターは、プログラムでのこのデータの使用を追跡しようとしています。このデータへのリンクが見つかった場合、それらにアクセスしません。そうでない場合、メモリは消去され、再利用できます。より効率的なメモリ管理のために、多くのコレクターは構造へのポインタの一種の「ベース」を自由に使用できるため、正しく動作するには言語の一部である必要があります。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コレクターのタイプ</font></font></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> <b> ( <i>Coping</i> )</b> :               .        “”  ,   “” .  ,       “”,     .      ,      .     <i>garbage collector</i>     . </li><li> <b> ( <i>Mark and sweep</i> )</b> :     .      ,   “”   “” ,    1  ,   ,        . </li><li> <b> ( <i>Incremental</i> )</b> :           .      ,        (   ).              . </li><li> <b> ( <i>Conservative</i> )</b> :         .    ,     .         ,     .     ,    ,     . ( <i>. </i> :       <i>int</i>    .      ,      .)            .    ,      . </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保守党sboschik </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハンス・ベーム</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハンス・ベームによっては</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）以来、コレクターの中で最も人気の一つです無料で、保守的で増分的です。</font><u><font style="vertical-align: inherit;">-enable-redirect-malloc</font></u><font style="vertical-align: inherit;">フラグを使用してアプリケーションを構築する場合</font><font style="vertical-align: inherit;">、システムアロケータの</font><font style="vertical-align: inherit;">代わりとして（独自のAPIの代わりに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">malloc</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">free</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して）非常によく使用できます</font><font style="vertical-align: inherit;">。実際に、それは英語で（トリックスと同じである。</font><i><font style="vertical-align: inherit;">トリック</font></i></font><u><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-トリック、トリック）アロケーターで使用したLD_PRELOADを使用します。この場合のみ、コレクターをほとんどすべてのプログラムにリンクするのに役立ちます。</font><font style="vertical-align: inherit;">プログラムでメモリリークが発生していると思われる場合は、このコレクタを使用して、消費されるメモリの量を減らすことができます。</font><font style="vertical-align: inherit;">多くの人々は、Mozilaが最初に登場した時代にこの手法を使用しました。その後、メモリリークで深刻な病気になりました。</font><font style="vertical-align: inherit;">コレクターは、WindowsとLinuxの両方で機能します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コレクターの利点：</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 二重解放やオブジェクトの存続期間について心配する必要はありません。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 一部のコレクターのAPIは、アロケーターで一般的に使用されているものと同じです。 </font></font></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     短所： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ほとんどのコレクターは、メモリが解放されたことを通知しません。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ほとんどの場合、コレクターは他のメモリ管理技術よりも遅くなります。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> コレクターの誤動作によって引き起こされる問題はデバッグが困難です。 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ポインターをNULLに設定するのを忘れると、必然的にリークが発生します。 </font></font></li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>まとめ</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは妥協の世界です：パフォーマンス、使いやすさ、実装のしやすさ、マルチスレッドとの互換性。</font><font style="vertical-align: inherit;">多くのメモリ管理テンプレートがあります-プロジェクトの要件を確実に満たすものもあります。</font><font style="vertical-align: inherit;">各テンプレートには長所と短所があります。</font><font style="vertical-align: inherit;">標準的な方法はほとんどのプログラムに適していますが、プロジェクトに固有の要件がある場合は、代替方法の知識が役立ちます。</font><font style="vertical-align: inherit;">結論として、この記事で説明したメモリ管理方法の比較表を紹介します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表1：メモリ割り当てのアプローチの比較</font></font></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> アプローチ </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 割り当て速度 </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> リリース速度 </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> キャッシュの局所性 </font></font></th><th>    </th><th> 適用性 </th><th>    real time </th><th>  <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B8%25D0%25BC%25D0%25BC%25D0%25B5%25D1%2582%25D1%2580%25D0%25B8%25D1%2587%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BC%25D1%2583%25D0%25BB%25D1%258C%25D1%2582%25D0%25B8%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">SMP</a>   </th></tr></tbody><tbody><tr><td> Custom allocator </td><td>    </td><td>    </td><td>    </td><td>   </td><td>   </td><td>    </td><td>    </td></tr><tr><td> Simple allocator </td><td>     </td><td>   </td><td>  </td><td>  </td><td>  </td><td> いや </td><td> いや </td></tr><tr><td> GNU <i>malloc</i> </td><td>  </td><td>  </td><td>  </td><td>  </td><td>  </td><td> いや </td><td>  </td></tr><tr><td> Hoard </td><td>  </td><td>  </td><td>  </td><td>  </td><td>  </td><td> いや </td><td> はい </td></tr><tr><td> Reference counting </td><td> - </td><td> - </td><td>  </td><td>  </td><td>  </td><td>  (   <i>malloc</i> ) </td><td>    </td></tr><tr><td> Pooling </td><td>  </td><td>   </td><td>  </td><td>  </td><td>  </td><td>  (   <i>malloc</i> ) </td><td>    </td></tr><tr><td> Garbage collection </td><td>  (   ) </td><td>  </td><td>  </td><td>  </td><td>  </td><td> いや </td><td>   </td></tr><tr><td> Incremental garbage collection </td><td>  </td><td>  </td><td>  </td><td>  </td><td>  </td><td> いや </td><td>   </td></tr><tr><td> Incremental conservative garbage collection </td><td>  </td><td>  </td><td>  </td><td>  </td><td>  </td><td> いや </td><td>   </td></tr></tbody></table>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler"> <b class="spoiler_title"> :</b> <div class="spoiler_text"><ul><li> <a href="http://www.gnu.org/software/libc/manual/html_node/Obstacks.html%3Fcm_mc_uid%3D47720967572814418047517%26amp%3Bcm_mc_sid_50200000%3D1446569732"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GNU C Libraryマニュアルのobstacksセクションには、obstacks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のプログラミングインターフェイスが記載されています。</font></font></li><li> <a href="http://apr.apache.org/docs/apr/group__apr__pools.html%3Fcm_mc_uid%3D47720967572814418047517%26amp%3Bcm_mc_sid_50200000%3D1446569732"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Portable Runtimeのドキュメントで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、プールされたアロケーターへのインターフェイスについて説明しています。</font></font></li><li> <a href="http://gee.cs.oswego.edu/dl/html/malloc.html%3Fcm_mc_uid%3D47720967572814418047517%26amp%3Bcm_mc_sid_50200000%3D1446569732"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doug LeaのMalloc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、より一般的なメモリアロケーターの1つです。</font></font></li><li> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSD Malloc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ほとんどのBSDベースのシステムで使用されています。</font></font></li><li> <a href="http://www.malloc.de/en/%3Fcm_mc_uid%3D47720967572814418047517%26amp%3Bcm_mc_sid_50200000%3D1446569732">ptmalloc</a> is derived from Doug Lea's malloc and is used in GLIBC. </li><li> <a href="">GNU Memory-Mapped Malloc (part of GDB)</a> is a <code>malloc</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     implementation that is based on <i>mmap()</i> . </li><li> <a href="http://www.gnu.org/software/libc/">GNU Obstacks</a> (part of GNU Libc) is the most widely installed pooled allocator, since it's on every glibc-based system. </li><li> <a href="http://apr.apache.org/">Apache's pooled allocator (in the Apache Portable Runtime)</a> is the most widely used pooled allocator. </li><li> <a href="">NetBSD</a> also has its own pooled allocator. </li><li> <a href="http://sourceforge.net/projects/loki-lib/">The Loki C++ Library</a> has a number of generic patterns implemented for C++, including smart pointers and a custom small-object allocator. </li><li> The <a href="http://www.hpl.hp.com/personal/Hans_Boehm/gc/">Hahns Boehm Conservative Garbage Collector</a> is the most popular open source garbage collector, which can be used in regular C/C++ programs. </li><li> <a href="http://docs.freebsd.org/44doc/papers/newvm.html">A New Virtual Memory Implementation for Berkeley UNIX</a> by Marshall Kirk McKusick and Michael J. Karels discusses BSD's VM system. </li><li> <a href="http://www.skynet.ie/~mel/projects/vm/">Mel Gorman's Linux VM Documentation</a> discusses the Linux VM system. </li><li> <a href="http://docs.freebsd.org/44doc/papers/malloc.html">Malloc in Modern Virtual Memory Environments</a> by Poul-Henning Kamp talks about BSD's <i>malloc</i> and how it interacts with BSD virtual memory. </li><li> <a href="http://docs.freebsd.org/44doc/papers/kernmalloc.html">Design of a General Purpose Memory Allocator for the 4.3BSD UNIX Kernel</a> by Marshall Kirk McKusick and Michael J. Karels discusses kernel-level allocators. </li><li> <a href="http://gee.cs.oswego.edu/dl/html/malloc.html">A Memory Allocator</a> by Doug Lea gives an overview of the design and implementation of allocators, including design choices and tradeoffs. </li><li> <a href="http://www.cs.utexas.edu/ftp/pub/techreports/tr02-52.pdf">Memory Management for High-Performance Applications</a> by Emery D. Berger talks about custom memory management and how it affects high-performance applications. </li><li> <a href="">Some Storage Management Techniques for Container Classes</a> by Doug Lea describes writing custom allocators for C++ classes. </li><li> <a href="">The Measured Cost of Garbage Collection</a> by Benjamin Zorn presents hard data on garbage allocation and performance. </li><li> <a href="">Memory Allocation Myths and Half-Truths</a> by Hans-Juergen Boehm presents the myths surrounding garbage collection. </li><li> <a href="">Space Efficient Conservative Garbage Collection</a> by Hans-Juergen Boehm is a paper describing his garbage collector for C/C++. </li><li> <a href="http://www.memorymanagement.org/">The Memory Management Reference</a> contains numerous references and links to papers on memory management. </li><li> <a href="http://www.cs.utexas.edu/users/oops/papers.html">OOPS Group Papers on Memory Management and Memory Hierarchies</a> is a great set of technical papers on the subject. </li><li> <a href="http://www.cantrip.org/wave12.html">Memory Management in C++</a> discusses writing custom allocators for C++. </li><li> <a href="http://www.conman.org/projects/essays/memmgr.html">Programming Alternatives: Memory Management</a> discusses several choices programmers have for memory management. </li><li> <a href="http://www.cs.ukc.ac.uk/people/staff/rej/gcbib/gcbibG.html">Richard Jones's Garbage Collection Bibliography</a> has links to any paper you ever wanted about garbage collection. </li><li> <a href="http://www.amazon.com/exec/obidos/ASIN/0471049980/freeeducation-20/"><em>C++ Pointers and Dynamic Memory Management</em></a> by Michael Daconta covers numerous techniques on memory management. </li><li> <a href="http://www.amazon.com/exec/obidos/ASIN/0521520436"><em>Memory as a Programming Concept in C and C++</em></a> by Frantisek Franek discusses techniques and tools for developing effective memory use and gives the role of memory-related errors the prominence it deserves in computer programming. </li><li> <a href="http://www.amazon.com/exec/obidos/ASIN/0471941484"><i>Garbage Collection: Algorithms for Automatic Dynamic Memory Management</i></a> by Richard Jones and Rafael Lins describes the most common algorithms for garbage collection in use. </li><li> Section 2.5, «Dynamic Storage Allocation» from <a href="http://www.amazon.com/exec/obidos/ASIN/0201896834"><i>Fundamental Algorithms</i></a> , Volume 1 of <i>The Art of Computer Programming</i> by Donald Knuth describes several techniques for implementing basic allocators. </li><li> Section 2.3.5, «Lists and Garbage Collection» from <a href="http://www.amazon.com/exec/obidos/ASIN/0201896834"><i>Fundamental Algorithms</i></a> , volume 1 of <i>The Art of Computer Programming</i> by Donald Knuth discusses garbage collection algorithms for lists. </li><li> Chapter 4, «Small Object Allocation» from <a href="http://www.amazon.com/exec/obidos/ASIN/0201704315"><i>Modern C++ Design</i></a> by Andrei Alexandrescu describes a high-speed small-object allocator that is quite a bit more efficient than the C++ standard allocator. </li><li> Chapter 7, «Smart Pointers» from <a href="http://www.amazon.com/exec/obidos/ASIN/0201704315"><i>Modern C++ Design</i></a> by Andrei Alexandrescu describes the implementation of smart pointers in C++. </li><li> Jonathan's Chapter 8, «Intermediate Memory Topics» from <a href="http://www.amazon.com/exec/obidos/ASIN/0975283847/freeeducation-20/"><i>Programming from the Ground Up</i></a> contains an assembly-language version of the simple allocator used in this article. </li><li> <a href="http://www.ibm.com/developerworks/linux/library/wa-memmng/">Self-manage data buffer memory</a> (developerWorks, January 2004) outlines a pseudo-C implementation of a self-managing, abstract data buffer for managing memory. </li><li> <a href="http://www.ibm.com/developerworks/eserver/articles/framework.html">A framework for the user defined malloc replacement feature</a> (developerWorks, February 2002) shows how to take advantage of a facility in AIX that lets you replace the memory subsystem with one of your own design. </li><li> <a href="http://www.ibm.com/developerworks/linux/library/l-debug/index.html">Mastering Linux debugging techniques</a> (developerWorks, August 2002) describes debugging methods you can use in four different scenarios: segmentation faults, memory overruns, memory leaks, and hangs. </li><li> In <a href="http://www.ibm.com/developerworks/java/library/j-leaks/index.html">Handling memory leaks in Java programs</a> (developerWorks, February 2001), learn what causes Java memory leaks and when they should be of concern. </li><li> In the <a href="http://www.ibm.com/developerworks/linux/">developerWorks Linux zone</a> , find more resources for Linux developers, and scan our <a href="http://www.ibm.com/developerworks/linux/library/l-top-10.html">most popular articles and tutorials</a> . </li><li> See all <a href="http://www.ibm.com/developerworks/views/linux/libraryview.jsp%3Ftopic_by%3DAll%2Btopics%2Band%2Brelated%2Bproducts%26amp%3Bsort_order%3Ddesc%26amp%3Blcl_sort_order%3Ddesc%26amp%3Bsearch_by%3Dlinux%2Btip%253A%26amp%3Bsearch_flag%3Dtrue%26amp%3Btype_by%3DAll%2BTypes%26amp%3Bshow_abstract%3Dtrue%26amp%3Bstart_no%3D1%26amp%3Bsort_by%3DDate%26amp%3Bend_no%3D100%26amp%3Bshow_all%3Dfalse">Linux tips</a> and <a href="http://www.ibm.com/developerworks/views/linux/libraryview.jsp%3Ftopic_by%3DAll%2Btopics%2Band%2Brelated%2Bproducts%26amp%3Bsort_order%3Ddesc%26amp%3Blcl_sort_order%3Ddesc%26amp%3Bsearch_by%3D%26amp%3Bsearch_flag%3D%26amp%3Btype_by%3DTutorials%26amp%3Bshow_abstract%3Dtrue%26amp%3Bsort_by%3DDate%26amp%3Bend_no%3D100%26amp%3Bshow_all%3Dfalse">Linux tutorials</a> on developerWorks. </li><li> Stay current with <a href="http://www.ibm.com/developerworks/offers/techbriefings/">developerWorks technical events and Webcasts</a> . </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J269991/index.html">信号分析のためのフーリエ変換の実用化。 初心者向けイントロ</a></li>
<li><a href="../J269997/index.html">2015年10月31日-Windows用EOLアプリケーションKerio Control 7（投稿＃3-無料のウェビナー（2015年11月13日）</a></li>
<li><a href="../J269999/index.html">仮想マシンに対する暴動</a></li>
<li><a href="../J270001/index.html">良いコードを実行する：良いコードの8つのルール</a></li>
<li><a href="../J270005/index.html">Service Locatorはカプセル化を解除します</a></li>
<li><a href="../J27001/index.html">YandexFoto-これまで気付かなかった関数</a></li>
<li><a href="../J270011/index.html">Web開発とITの世界からの興味深い資料のダイジェスト、先週第183号（2015年10月26日-11月1日）</a></li>
<li><a href="../J270017/index.html">Michael Stonebreaker-岐路に立つHadoop</a></li>
<li><a href="../J270019/index.html">Vivaldi Beta 1.0ブラウザリリース</a></li>
<li><a href="../J27002/index.html">誰がウラルの責任を負いますか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
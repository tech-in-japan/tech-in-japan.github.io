<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏽 🈚️ 🆒 スケーリングは簡単です。 パート2-キャッシュ 🚸 👩‍🎓 🐦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前のパートでは、スケーラブルなポータルを構築するための基本的なアーキテクチャの原則について説明しました。 今日は、適切に構築されたポータルの最適化についてお話します。 そのため、最初のタイプの最適化はローカルキャッシュです。 
  
 
  
  
  
 
  
  パート2 キャッシング  
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>スケーリングは簡単です。 パート2-キャッシュ</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body">  <a href="http://habrahabr.ru/post/209202/">前のパートで</a>は<a href="http://habrahabr.ru/post/209202/">、</a>スケーラブルなポータルを構築するための基本的なアーキテクチャの原則について説明しました。 今日は、適切に構築されたポータルの最適化についてお話します。 そのため、最初のタイプの最適化はローカルキャッシュです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> パート2 キャッシング </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://habrahabr.ru/post/209202/">前のパート</a>で述べたように、私たちは主にB2Cポータルについて話しています。 これらのポータルには、書き込み要求よりも読み取り要求の優位性という共通の特性があります。 そして、多くの場合、10倍以上の有病率。 キャッシュがそのような有望なツールのように見える理由は明らかです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     キャッシュは興味深い、ほぼ無限のトピックです。 したがって、レベル1およびレベル2のキャッシュ、分散キャッシュなどについては詳しく説明せずに、最初の最適化のために、簡単に概要を説明します。オブジェクトの読み取りをキャッシュする必要があるため、書き込みキャッシュ（書き込みキャッシュ）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ローカルキャッシュを開始するとき、通常はクエリまたはオブジェクトキャッシュ（呼び出しまたはオブジェクトのキャッシュ）を選択できます。 クエリキャッシュ（またはメソッドキャッシュ）は、「外部」で使用できるキャッシュです。メソッド呼び出し（クエリ）の結果を記録し、同じクエリが同じ答えを引き起こすと仮定します。 同じクエリを複数回繰り返す場合、2回目以降は、複雑で時間のかかる処理をスキップして、前の結果を単純に返すことができます。 このようなキャッシュの利点は、アーキテクチャやドメインに依存しないことです。つまり、ユーティリティ（アスペクトなど）として完成品にあまり変更せずに統合します。 この利点とは対照的に、これらには多くの欠点があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 同じオブジェクトを読み取るためのいくつかのメソッドを持つ豊富なインターフェイスがある場合、それらは無効です。 その理由は、オブジェクト自体ではなく、オブジェクトへのパスをキャッシュするためです。 </li><li> そのサイズは、可能なオブジェクト（結果）の数に依存しませんが、可能なクエリの数に依存するため、通常は代替よりも重いです。 それらのサイズと必要なメモリ量を計画するのは困難です。 </li><li> 彼らはいです。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     オブジェクトキャッシュとは状況が異なります。統合するのは難しくなりますが、はるかに効率的です。 オブジェクトのキャッシュの理想的な実装は、オブジェクト形式でこのサービスによって管理されるすべてのオブジェクトを含むコレクション（リストまたは多くは要件によって異なります）です。 理想的には、サービスは、外部の永続性（データベースなど）に頼ることなく、キャッシュを使用してすべての要求に応答できる必要があります。 残念ながら、このような100％のキャッシュ可能性はめったに達成できませんが、適用できる場合は常に費用対効果が高くなります。  100％キャッシュの最良の例は、ユーザーアカウントです。 通常は小さく（ID、メール、名前、登録時間などで構成されます）、アプリケーションのさまざまな場所で常に必要です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> ないものをキャッシュする </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     キャッシュのもう1つの有用な形式は、いわゆるゼロキャッシュまたはネガティブキャッシュです。 ほとんどの場合、アプリケーション操作中にオブジェクトキャッシュがいっぱいになるため、いわゆる「コールドスタート」とデータベース内の新しいオブジェクトの作成が可能ですが、同じサービスの複数のインスタンスが同時に存在します。 その結果、アプリケーションへの呼び出しはキャッシュを「突破」してベースに到達する可能性があります。 このような「侵入」が絶えず発生する場合、基地の過負荷につながる可能性があります。 そうすると、そのような難しさで構築されたすべてのキャッシュは、すべての有効性と保護機能を失います。 このような過負荷に対処するため、ポーリングに失敗したオブジェクトを記憶するネガティブキャッシュがあり、それにより、次の要求でサービスに早期に処理を停止する機会を与えます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> 変更内容をキャッシュする </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     キャッシュのもう1つのサブカテゴリはExpiryCachesです。 それらは、オブジェクトまたはそのパーツが一定期間その状態を変更しないという仮定に基づいています。 このようなオブジェクトの典型的な例は、オンラインデートサイトのユーザープロファイルです。 ユーザーAがプロファイルを編集している場合、ユーザーAのプロファイルを表示しているユーザーBの場合、5、30、60秒後にこれらの変更が表示されるかどうかは関係ありません（特にこれらのユーザーが連絡しない場合）。 したがって、ユーザーにとって重要ではないが、マシンの観点から長い間、ユーザーAのプロファイルの状態を修正し、修正済みのバージョンで作業することができます。 これにより、同じ結果を返す可能性が高い（たとえば、メッセージの検索や返信よりもプロファイルの変更頻度がはるかに低いため）多数の要求の処理が防止され、リソースが節約されます。 この節約を支払うことは、私たちができるよりも少し遅れてあなたのプロフィールに更新を表示するリスクです。 この手法は、クライアント側（Webサーバー）で特に人気があり、ネットワークトラフィック（データベースまたはサービスへ）とそれに応じて時間を節約するために使用されます。 ただし、これは有効期限キャッシュの使用が推奨される唯一の例ではありません。 別のユースケースは、リクエストを処理する過程で、同じオブジェクトが何度もリクエストされることを想定していますが、変数内にその値を保存することが不可能または非実用的であるため、コード内で互いに離れている場所からです。 このような中間キャッシュを実装するための一般的な技術は、ThreadLocal（Java）です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ExpiryCacheは、リソースの交換（トレードオフ）に過ぎません。アプリケーションのパフォーマンスのために、変更の表示速度を犠牲にします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     一般的に、アプリケーション（特にポータル）のスケーリングは、リソースの交換であり、CPU上のRAM、ネットワークトラフィック、またはIOなど、十分ではないリソースに対しては多くのリソースがあります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     キャッシングは、単一のコンポーネントまたはサービスを最適化するための優れた方法ですが、そのような最適化の可能性は限られています。 ある時点で、1つのインスタンスが処理できる限界に達したことを認める必要があり、アーキテクチャのコンポーネントをスケーリングする（つまり、それらの複数のコピーを実行する）必要があります。 これについて-第<a href="http://habrahabr.ru/post/209758/">三部</a> 。 </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J209336/index.html">主なものは信頼です</a></li>
<li><a href="../J20934/index.html">nginx DDOSとDOSの戦い</a></li>
<li><a href="../J209342/index.html">ロールプレイングゲームの技術。 パート1.技術と魔法</a></li>
<li><a href="../J20935/index.html">MetaSDRAM：低コストDRAMへの道？</a></li>
<li><a href="../J209350/index.html">TJHolowaychukによるコンポーネント</a></li>
<li><a href="../J209354/index.html">コンポーネント。 例</a></li>
<li><a href="../J209356/index.html">プロセス自体を再起動せずに、更新されたresolv.confの新しいDNSサーバーアドレスをプロセスに強制的に使用させる方法</a></li>
<li><a href="../J20936/index.html">空気より軽い-Lenovoの新しいラップトップ</a></li>
<li><a href="../J209362/index.html">2014年の14のWebデザインおよびWeb開発ツール</a></li>
<li><a href="../J209364/index.html">Tronsmart T1000-大画面で画像をブロードキャストするための「軽量」メディアプレーヤー</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
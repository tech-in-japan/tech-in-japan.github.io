<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”‰ ğŸ‘— ğŸ•ºğŸ½ ç´”ç²‹ãªCã®LISPã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ ğŸ¤˜ğŸ¼ ğŸ†˜ ğŸ’’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç§ã¯ãã®ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨æœ‰åŠ¹æ€§ã®ãŸã‚ã«CãŒå¤§å¥½ãã§ã™ã€‚ ãŸã ã—ã€æŸ”è»Ÿã§æ‹¡å¼µå¯èƒ½ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚ å‰ä¾‹ã®ãªã„æŸ”è»Ÿæ€§ã¨æ‹¡å¼µæ€§ã‚’å‚™ãˆãŸåˆ¥ã®ã‚·ãƒ³ãƒ—ãƒ«ãªè¨€èªãŒã‚ã‚Šã¾ã™ãŒã€ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ãŒCã«è² ã‘ã¦ã„ã¾ã™ã€‚ ç§ã¯LISPã‚’æ„å‘³ã—ã¾ã™ã€‚ ã©ã¡ã‚‰ã®è¨€èªã‚‚ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ä½¿ç”¨ã•ã‚Œã€é•·ã„è¼ã‹ã—ã„æ­´å²ãŒã‚ã‚Šã¾ã™ã€‚ 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>ç´”ç²‹ãªCã®LISPã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body"> ç§ã¯ãã®ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨æœ‰åŠ¹æ€§ã®ãŸã‚ã«CãŒå¤§å¥½ãã§ã™ã€‚ ãŸã ã—ã€æŸ”è»Ÿã§æ‹¡å¼µå¯èƒ½ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚ å‰ä¾‹ã®ãªã„æŸ”è»Ÿæ€§ã¨æ‹¡å¼µæ€§ã‚’å‚™ãˆãŸåˆ¥ã®ã‚·ãƒ³ãƒ—ãƒ«ãªè¨€èªãŒã‚ã‚Šã¾ã™ãŒã€ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ãŒCã«è² ã‘ã¦ã„ã¾ã™ã€‚ ç§ã¯LISPã‚’æ„å‘³ã—ã¾ã™ã€‚ ã©ã¡ã‚‰ã®è¨€èªã‚‚ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ä½¿ç”¨ã•ã‚Œã€é•·ã„è¼ã‹ã—ã„æ­´å²ãŒã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‹ãªã‚Šé•·ã„é–“ã€ç§ã¯ã“ã‚Œã‚‰ã®ä¸¡æ–¹ã®è¨€èªã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’çµ±åˆã™ã‚‹ã‚¢ã‚¤ãƒ‡ã‚¢ã«ã¤ã„ã¦è€ƒãˆã¦ãã¾ã—ãŸã€‚ ãã®æœ¬è³ªã¯ã€Cã¨åŒã˜ã‚¿ã‚¹ã‚¯ã‚’è§£æ±ºã™ã‚‹LISPã«åŸºã¥ããƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®å®Ÿè£…ã«ã‚ã‚Šã¾ã™ï¼šæ©Ÿå™¨ï¼ˆãƒ¡ãƒ¢ãƒªã¸ã®ä½ãƒ¬ãƒ™ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ã‚’å«ã‚€ï¼‰ã®é«˜åº¦ãªåˆ¶å¾¡ã‚’æä¾›ã—ã¾ã™ã€‚ å®Ÿéš›ã«ã¯ã€ãƒã‚¤ãƒŠãƒªã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹LISPãƒã‚¯ãƒ­ã®ã‚·ã‚¹ãƒ†ãƒ ã«ãªã‚Šã¾ã™ã€‚ ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å‰å‡¦ç†ã™ã‚‹LISPæ©Ÿèƒ½ã¯ã€Cãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã¾ãŸã¯C ++ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨æ¯”è¼ƒã—ã¦ã€è¨€èªã®å…ƒã®ã‚·ãƒ³ãƒ—ãƒ«ã•ã‚’ç¶­æŒã—ãªãŒã‚‰ã€å‰ä¾‹ã®ãªã„æŸ”è»Ÿæ€§ã‚’æä¾›ã™ã‚‹ã‚ˆã†ã§ã™ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€ãã®ã‚ˆã†ãªDSLã«åŸºã¥ã„ã¦ã€é–‹ç™ºã®é€Ÿåº¦ã¨å®¹æ˜“ã•ã‚’å‘ä¸Šã•ã›ã‚‹æ–°ã—ã„æ‹¡å¼µæ©Ÿèƒ½ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ ç‰¹ã«ã€LISPã‚·ã‚¹ãƒ†ãƒ è‡ªä½“ã‚’ã“ã®è¨€èªã§å®Ÿè£…ã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã€æœ€çµ‚çš„ã«ã¯ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ãŒå¿…è¦ã§ã™ã€‚ ã—ãŸãŒã£ã¦ã€å®Ÿéš›ã®ç ”ç©¶ã¯ã€ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ã®å®Ÿè£…ï¼ˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ—ãƒ­ã‚»ãƒƒã‚µã®å‘½ä»¤ã®ã‚µãƒ–ã‚»ãƒƒãƒˆç”¨ï¼‰ã‹ã‚‰å§‹ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ç‰¹å®šã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã€ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ä¾å­˜ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ã“ã¨ã«èˆˆå‘³ãŒã‚ã‚Šã¾ã—ãŸã€‚ ã—ãŸãŒã£ã¦ã€ç§ã¯æœ€åˆã‹ã‚‰å³èˆˆLISPæ–¹è¨€ã®æœ€ã‚‚å˜ç´”ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‚’Cã§å®Ÿè£…ã—ã€x86ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ã®ã‚µãƒ–ã‚»ãƒƒãƒˆã§ä¾¿åˆ©ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã§ãã‚‹ãƒã‚¯ãƒ­æ‹¡å¼µã‚·ã‚¹ãƒ†ãƒ ã‚‚ä½œæˆã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ ç§ã®åŠªåŠ›ã®é ‚ç‚¹ã¯ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¢ãƒ¼ãƒ‰ã§ã€ŒHello worldï¼ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ãƒ–ãƒ¼ãƒˆã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ç¾åœ¨ã€ä½œæ¥­ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ï¼ˆint.cãƒ•ã‚¡ã‚¤ãƒ«ã€ç´„900è¡Œã®Cã‚³ãƒ¼ãƒ‰ï¼‰ã€ãŠã‚ˆã³ä¸€é€£ã®åŸºæœ¬é–¢æ•°ã¨ãƒã‚¯ãƒ­ï¼ˆlib.lãƒ•ã‚¡ã‚¤ãƒ«ã€ç´„100è¡Œã®LISPã‚³ãƒ¼ãƒ‰ï¼‰ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚  LISPã‚³ãƒ¼ãƒ‰å®Ÿè¡Œã®åŸå‰‡ã ã‘ã§ãªãã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã®å®Ÿè£…ã®è©³ç´°ã‚’æ°—ã«ã™ã‚‹äººã¯ã€catã«ãŠé¡˜ã„ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      LISPã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®åŸºæœ¬å˜ä½ã¯ãƒ‰ãƒƒãƒˆãƒšã‚¢ã§ã™ã€‚ å¤å…¸çš„ãªMcCarthy Lispã§ã¯ã€ãƒã‚¤ãƒ³ãƒˆãƒšã‚¢ã¨ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ã¿ãŒ2ã¤ã®ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã®ã‚»ãƒƒãƒˆã¯å°‘ãªãã¨ã‚‚æ•°å­—ã§æ‹¡å¼µã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ã•ã‚‰ã«ã€æ–‡å­—åˆ—ã¨é…åˆ—ã‚‚åŸºæœ¬å‹ã«è¿½åŠ ã•ã‚Œã¾ã™ï¼ˆå‰è€…ã¯å¾Œè€…ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ï¼‰ã€‚ å˜ç´”åŒ–ã‚’è¿½æ±‚ã™ã‚‹ä¸­ã§ã€æ–‡å­—åˆ—ã‚’æ•°å­—ã®ãƒªã‚¹ãƒˆã¨è¦‹ãªã—ãŸã„èª˜æƒ‘ãŒã‚ã‚Šã¾ã™ãŒã€ç§ã¯ã“ã®è€ƒãˆã‚’ç¾å®Ÿä¸–ç•Œã®æ€¥æ¿€ã«åˆ¶é™ã™ã‚‹è¨€èªã¨ã—ã¦æ„å›³çš„ã«æ”¾æ£„ã—ã¾ã—ãŸã€‚  doubleã‚’æ•°å€¤ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã—ãŸãŒã£ã¦ã€æ¬¡ã®åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å‹ãŒã‚ã‚Šã¾ã™ã€‚ãƒã‚¤ãƒ³ãƒˆãƒšã‚¢ã€æ–‡å­—ã€æ•°å­—ã€æ–‡å­—åˆ—ï¼ˆãƒ‘ã‚¹ã‚«ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä»»æ„ã®ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã›ãšã«ä¿å­˜ã§ãã‚‹ãŸã‚ã§ã™ï¼‰ã€‚ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã¯ãªãã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã§ä½œæ¥­ã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã®ã‚»ãƒƒãƒˆï¼ˆé–¢æ•°ã¨ãƒã‚¯ãƒ­ã¯é€šå¸¸ã®så¼ã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ï¼‰ã«åˆ¶é™ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸãŒã€å®Ÿè£…ã®ä¾¿å®œä¸Šã€é–¢æ•°ã€ãƒã‚¯ãƒ­ã€çµ„ã¿è¾¼ã¿é–¢æ•°ã€çµ„ã¿è¾¼ã¿ãƒã‚¯ãƒ­ã®4ã¤ã®è¿½åŠ å‹ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ ã—ãŸãŒã£ã¦ã€s-expressionã«ã¯æ¬¡ã®æ§‹é€ ãŒã‚ã‚Šã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l_env</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_expr</span></span></span><span class="hljs-class"> *(*</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">built_in</span></span></span><span class="hljs-class">) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_expr</span></span></span><span class="hljs-class">*, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l_env</span></span></span><span class="hljs-class">*, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">file_pos</span></span></span><span class="hljs-class">*);</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_expr</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> { DOTTED_PAIR, STRING, SYMBOL, NUMBER, FUNCTION, MACRO, BUILT_IN_FUNCTION, BUILT_IN_MACRO } type; <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_expr</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">first</span></span></span><span class="hljs-class">, *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rest</span></span></span><span class="hljs-class">;</span></span> } pair; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *ptr; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size; } <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_expr</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">expr</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l_env</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">env</span></span></span><span class="hljs-class">;</span></span> } function; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *symbol; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> number; built_in built_in; } u; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l_env</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *symbol; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_expr</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">expr</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l_env</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">next</span></span></span><span class="hljs-class">;</span></span> };</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®æ§‹é€ ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ã¨ç”Ÿç”£æ€§ã‚’ç¯€ç´„ã™ã‚‹ã¨ã„ã†ç‚¹ã§ã¯æœ€é©ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€åŠ¹æœçš„ãªå®Ÿè£…ã‚’æ§‹ç¯‰ã™ã‚‹ã¨ã„ã†ç›®æ¨™ã¯è¨­å®šã—ã¦ã„ã¾ã›ã‚“ã€‚ ã¾ãšç¬¬ä¸€ã«ã€ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨ç°¡æ½”ã•ãŒé‡è¦ã§ã—ãŸã€‚ ç§ã‚‚ãƒ¡ãƒ¢ãƒªç®¡ç†ã‚’æ”¾æ£„ã—ãªã‘ã‚Œã°ãªã‚‰ãªã‹ã£ãŸï¼šã™ã¹ã¦ã®ãƒ¡ãƒ¢ãƒªã¯ãƒªãƒªãƒ¼ã‚¹ãªã—ã§å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚ å®Ÿéš›ã€ç§ã®å®Ÿéš›çš„ãªã‚¿ã‚¹ã‚¯ã§ã¯ã€ã“ã®è§£æ±ºç­–ã¯å—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã¯é•·æ™‚é–“å‹•ä½œã—ã¾ã›ã‚“ã€‚ãã®ã‚¿ã‚¹ã‚¯ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒŠãƒªå½¢å¼ã«å¤‰æ›ã™ã‚‹ã“ã¨ã ã‘ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã‚ã‹ã‚‹ã‚ˆã†ã«ã€é–¢æ•°ï¼ˆãŠã‚ˆã³ãƒã‚¯ãƒ­ï¼‰ã¯l_envæ§‹é€ ä½“ã‚’å‚ç…§ã—ã¾ã™ã€‚ ã“ã‚Œã¯ã€èªå½™ç’°å¢ƒã®åŸºæœ¬è¦ç´ ã§ã‚ã‚Šã€ãƒªã‚¹ãƒˆã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚ ã‚‚ã¡ã‚ã‚“ã€ã“ã‚Œã¯æ–‡å­—ã¸ã®é †æ¬¡ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¼´ã†ãŸã‚ã€éåŠ¹ç‡çš„ã§ã™ã€‚ ã—ã‹ã—ã€ã“ã‚Œã¯ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã§ä¾¿åˆ©ãªæ§‹é€ ã§ã™ã€‚ã“ã‚Œã‚‰ã¯ãƒªã‚¹ãƒˆã®å…ˆé ­ã«è¿½åŠ ã•ã‚Œã€ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦æœ«å°¾ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚ ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¯ã€ã“ã®ãƒªã‚¹ãƒˆã®å‰éƒ¨ã‚’å˜ã«ç„¡è¦–ã™ã‚‹ã ã‘ã§ã€éå¸¸ã«ç°¡å˜ã«å‰Šé™¤ã§ãã¾ã™ï¼ˆé–¢æ•°ã‚’çµ‚äº†ã™ã‚‹ã¨ãã€ã¾ãŸã¯letãƒ–ãƒ­ãƒƒã‚¯ã‹ã‚‰ï¼‰ã€‚ é–¢æ•°ã®å­—å¥ç’°å¢ƒã«ã‚ˆã‚Šã€ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ä¸Šè¨˜ã®så¼ã®æ§‹é€ ã«åŸºã¥ã„ã¦ã€è¨ˆç®—ç”¨ã®é–¢æ•°ã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">struct s_expr *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eval_s_expr</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct s_expr *expr, struct l_env *env, struct file_pos *pos)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_expr</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">first</span></span></span><span class="hljs-class">, *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">expr</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l_env</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">benv</span></span></span><span class="hljs-class">;</span></span> trace_put(<span class="hljs-string"><span class="hljs-string">"%s -&gt; ..."</span></span>, in, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, env); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (expr) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (expr-&gt;type == SYMBOL) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (find_symbol(expr-&gt;u.symbol, &amp;env)) expr = env-&gt;expr; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> error(UNBOUND_SYMBOL_MSG, pos, expr-&gt;u.symbol); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (expr-&gt;type == DOTTED_PAIR) { first = eval_s_expr(expr-&gt;u.pair.first, env, pos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!first || first-&gt;type == DOTTED_PAIR || first-&gt;type == SYMBOL || first-&gt;type == STRING || first-&gt;type == NUMBER) error(NON_FUNC_MACRO_MSG, pos, s_expr_string(first, env)); expr = first-&gt;type == FUNCTION || first-&gt;type == BUILT_IN_FUNCTION ? map_eval(expr-&gt;u.pair.rest, env, pos) : expr-&gt;u.pair.rest; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (first-&gt;type == FUNCTION || first-&gt;type == MACRO) { assert(first-&gt;u.function.expr-&gt;type == DOTTED_PAIR); benv = apply_args(first-&gt;u.function.expr-&gt;u.pair.first, expr, first-&gt;u.function.env, pos); expr = eval_list(first-&gt;u.function.expr-&gt;u.pair.rest, benv, pos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (first-&gt;type == MACRO) { trace_put(<span class="hljs-string"><span class="hljs-string">"%s ~&gt; %s"</span></span>, in, expr, env); expr = eval_s_expr(expr, env, pos); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> expr = first-&gt;u.built_in(expr, env, pos); } trace_put(<span class="hljs-string"><span class="hljs-string">"%s -&gt; %s"</span></span>, in, expr, env); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> expr; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     è¨ˆç®—ã•ã‚ŒãŸå¼ãŒã‚·ãƒ³ãƒœãƒ«ã®å ´åˆã€ç¾åœ¨ã®å­—å¥ç’°å¢ƒï¼ˆfind_symbolï¼‰ã§ãã®å€¤ã‚’æ¤œç´¢ã™ã‚‹ã ã‘ã§ã™ã€‚ é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆï¼šæœ€åˆã«ã€ç¾åœ¨ã®å­—å¥ç’°å¢ƒï¼ˆmap_evalï¼‰ã‚’ä½¿ç”¨ã—ã¦å®Ÿéš›ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è¨ˆç®—ã—ã€æ¬¡ã«é–¢æ•°è‡ªä½“ã®å­—å¥ç’°å¢ƒã«æ—¢ã«ã‚ã‚‹ä»®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ï¼ˆapply_argsï¼‰ã®ã‚·ãƒ³ãƒœãƒ«ã«ãã‚Œã‚‰ã‚’ãƒã‚¤ãƒ³ãƒ‰ã—ã¾ã™ã€‚ æ¬¡ã«ã€çµæœã®å­—å¥ç’°å¢ƒã«åŸºã¥ã„ã¦æœ¬ä½“ã®è¦ç´ ã‚’é †ç•ªã«è¨ˆç®—ã—ã€æœ€å¾Œã®å¼ï¼ˆeval_listï¼‰ã®å€¤ã‚’è¿”ã—ã¾ã™ã€‚ ãƒã‚¯ãƒ­ã‚’å‘¼ã³å‡ºã™ã«ã¯ã€è¨ˆç®—é †åºãŒå¤šå°‘ç•°ãªã‚Šã¾ã™ã€‚ å®Ÿéš›ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯è¨ˆç®—ã•ã‚Œã¾ã›ã‚“ãŒã€å¤‰æ›´ãªã—ã§é€ä¿¡ã•ã‚Œã¾ã™ã€‚ ã•ã‚‰ã«ã€çµæœã®ãƒã‚¯ãƒ­å¼ï¼ˆãƒã‚¯ãƒ­ç½®æ›ï¼‰ã¯è¿½åŠ ã®è¨ˆç®—ã®å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚ æ•°å€¤ã€æ–‡å­—åˆ—ã€é–¢æ•°ã€ãƒã‚¯ãƒ­ã¯ãã‚Œè‡ªä½“ã§è¨ˆç®—ã•ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">int.cãƒ•ã‚¡ã‚¤ãƒ«ã®å…¨æ–‡</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;assert.h&gt; #include &lt;ctype.h&gt; #include &lt;float.h&gt; #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; #define LINE_COMMENT_CHAR ';' #define BLOCK_COMMENT_CHAR1 ';' #define BLOCK_COMMENT_CHAR2 '|' #define LIST_OPEN_BRACE_CHAR '(' #define LIST_CLOSE_BRACE_CHAR ')' #define LIST_DOT_CHAR '.' #define STRING_DELIMITER_CHAR '"' #define STRING_ESCAPE_CHAR '\\' #define NUMBER_PREFIX_CHAR '$' #define NUMBER_FORMAT_HEX_CHAR 'h' #define NUMBER_FORMAT_OCT_CHAR 'o' #define NIL_SYMBOL_STR "_" #define TRUE_SYMBOL_STR "t" #define TRACE_SYMBOL_STR "trace" #define CAR_SYMBOL_STR "@" #define CDR_SYMBOL_STR "%" #define CONS_SYMBOL_STR "^" #define IF_SYMBOL_STR "?" #define LAMBDA_SYMBOL_STR "!" #define MACRO_SYMBOL_STR "#" #define SETQ_SYMBOL_STR "=" #define QUOTE_SYMBOL_STR "'" #define PLUS_SYMBOL_STR "+" #define GREATER_SYMBOL_STR "&gt;" #define FUNCTION_STR_FORMAT "&lt;!%s&gt;" #define MACRO_STR_FORMAT "&lt;#%s&gt;" #define OUT_OF_MEMORY_MSG "out of memory" #define UNEXPECTED_EOF_MSG "unexpected end of file" #define BAD_SYNTAX_MSG "bad syntax" #define NON_FUNC_MACRO_MSG "expression %s is neither a function nor a macro" #define NON_NONEMPTY_LIST_MSG "expression %s is not a nonempty list" #define NON_LIST_MSG "expression %s is not a proper list" #define UNBOUND_SYMBOL_MSG "unbound symbol %s" #define BAD_FORMAL_ARGS_MSG "bad formal arguments %s" #define BAD_ACTUAL_ARGS_MSG "bad actual arguments %s" #define STRING_OVERFLOW_MSG "string size overflow" #define NUMBER_LENGTH_MAX 32 #define SYMBOL_LENGTH_MAX 32 #define STRING_LENGTH_MAX 256 #define S_EXPR_LENGTH_MAX 1024 struct file_pos { char *filename; int line, chr; }; struct l_env; typedef struct s_expr *(*built_in) (struct s_expr*, struct l_env*, struct file_pos*); struct s_expr { enum { DOTTED_PAIR, STRING, SYMBOL, NUMBER, FUNCTION, MACRO, BUILT_IN_FUNCTION, BUILT_IN_MACRO } type; union { struct { struct s_expr *first, *rest; } pair; struct { char *ptr; size_t size; } string; struct { struct s_expr *expr; struct l_env *env; } function; char *symbol; double number; built_in built_in; } u; }; void error(char *message, struct file_pos *pos, char *expr) { if (pos) printf("Error at %s:%d:%d: ", pos-&gt;filename, pos-&gt;line, pos-&gt;chr); else printf("Error: "); if (expr) printf(message, expr); else printf("%s", message); puts(""); exit(1); } void *alloc_mem(size_t size) { void *ptr = malloc(size); if (!ptr) error(OUT_OF_MEMORY_MSG, NULL, NULL); return ptr; } struct s_expr *true_ () { static struct s_expr *expr = NULL; if (!expr) { expr = alloc_mem(sizeof(*expr)); expr-&gt;type = SYMBOL; expr-&gt;u.symbol = TRUE_SYMBOL_STR; } return expr; } int get_char(FILE *file, struct file_pos *pos) { int chr = getc(file); if (chr == '\n') pos-&gt;line++, pos-&gt;chr = 1; else if (chr != EOF) pos-&gt;chr++; return chr; } int next_char(FILE *file) { int chr = getc(file); ungetc(chr, file); return chr; } int get_significant_char (FILE *file, struct file_pos *pos) { enum { NO_COMMENT, LINE_COMMENT, BLOCK_COMMENT } state = NO_COMMENT; int chr; while (1) { chr = get_char(file, pos); if (state == NO_COMMENT) { if (chr == BLOCK_COMMENT_CHAR1 &amp;&amp; next_char(file) == BLOCK_COMMENT_CHAR2) { get_char(file, pos); state = BLOCK_COMMENT; continue; } if (chr == LINE_COMMENT_CHAR) state = LINE_COMMENT; else if (chr != ' ' &amp;&amp; chr != '\t' &amp;&amp; chr != '\r' &amp;&amp; chr != '\n') return chr; } else if (state == BLOCK_COMMENT) { if (chr == BLOCK_COMMENT_CHAR2 &amp;&amp; next_char(file) == BLOCK_COMMENT_CHAR1) { get_char(file, pos); state = NO_COMMENT; } else if (chr == EOF) error(UNEXPECTED_EOF_MSG, pos, NULL); } else if (state == LINE_COMMENT) { if (chr == '\n') state = NO_COMMENT; else if (chr == EOF) return EOF; } } } struct s_expr *parse_s_expr (FILE*, struct file_pos*); struct s_expr *parse_list (FILE *file, struct file_pos *pos) { struct s_expr *expr, *rest; int chr; chr = get_significant_char(file, pos); if (chr == LIST_CLOSE_BRACE_CHAR) return NULL; ungetc(chr, file); pos-&gt;chr--; expr = alloc_mem(sizeof(*expr)); expr-&gt;type = DOTTED_PAIR; expr-&gt;u.pair.first = parse_s_expr(file, pos); rest = expr; while (1) { chr = get_significant_char(file, pos); if (chr == LIST_DOT_CHAR) { rest-&gt;u.pair.rest = parse_s_expr(file, pos); if (get_significant_char(file, pos) != LIST_CLOSE_BRACE_CHAR) error(BAD_SYNTAX_MSG, pos, NULL); break; } else if (chr == LIST_CLOSE_BRACE_CHAR) { rest-&gt;u.pair.rest = NULL; break; } else if (chr == EOF) error(UNEXPECTED_EOF_MSG, pos, NULL); else { ungetc(chr, file); pos-&gt;chr--; rest-&gt;u.pair.rest = alloc_mem(sizeof(*expr)); rest-&gt;u.pair.rest-&gt;type = DOTTED_PAIR; rest-&gt;u.pair.rest-&gt;u.pair.first = parse_s_expr(file, pos); rest = rest-&gt;u.pair.rest; } } return expr; } void read_escape_seq (FILE *file, struct file_pos *pos, char *buf) { /* TODO: add support for escape sequences */ } struct s_expr *parse_string (FILE *file, struct file_pos *pos) { char buf[STRING_LENGTH_MAX]; struct s_expr *expr; int chr, i = 0; while (i &lt; STRING_LENGTH_MAX) { chr = get_char(file, pos); if (chr == STRING_ESCAPE_CHAR) read_escape_seq(file, pos, buf); else if (chr == STRING_DELIMITER_CHAR) break; else if (chr == EOF) error(UNEXPECTED_EOF_MSG, pos, NULL); else buf[i++] = chr; } expr = alloc_mem(sizeof(*expr)); expr-&gt;type = STRING; expr-&gt;u.string.ptr = i ? alloc_mem(i) : NULL; memcpy(expr-&gt;u.string.ptr, buf, i); expr-&gt;u.string.size = i; return expr; } void read_double (FILE *file, struct file_pos *pos, char *buf) { int chr, i = 0, point = -1; chr = next_char(file); if (chr == '+' || chr == '-') { get_char(file, pos); buf[i++] = chr; } while (i &lt; NUMBER_LENGTH_MAX &amp;&amp; isdigit(next_char(file))) buf[i++] = get_char(file, pos); if (i &lt; NUMBER_LENGTH_MAX &amp;&amp; next_char(file) == '.') buf[point = i++] = get_char(file, pos); while (i &lt; NUMBER_LENGTH_MAX &amp;&amp; isdigit(next_char(file))) buf[i++] = get_char(file, pos); chr = next_char(file); if (i &lt; NUMBER_LENGTH_MAX &amp;&amp; (chr == 'e' || chr == 'E') &amp;&amp; i &gt; point + 1) { get_char(file, pos); buf[i++] = chr; chr = next_char(file); if (i &lt; NUMBER_LENGTH_MAX &amp;&amp; (chr == '+' || chr == '-')) { get_char(file, pos); buf[i++] = chr; } while (i &lt; NUMBER_LENGTH_MAX &amp;&amp; isdigit(next_char(file))) buf[i++] = get_char(file, pos); } if (i &amp;&amp; i &lt; NUMBER_LENGTH_MAX) buf[i] = 0; else error(BAD_SYNTAX_MSG, pos, NULL); } void read_int (FILE *file, struct file_pos *pos, int base, char *buf) { int chr, i = 0; assert(base == 8 || base == 16); for (; i &lt; NUMBER_LENGTH_MAX; get_char(file, pos)) { chr = next_char(file); if ((base == 16 &amp;&amp; isxdigit(chr)) || (chr &gt;= '0' &amp;&amp; chr &lt;= '7')) buf[i++] = chr; else break; } if (i &amp;&amp; i &lt; NUMBER_LENGTH_MAX) buf[i] = 0; else error(BAD_SYNTAX_MSG, pos, NULL); } struct s_expr *parse_number (FILE *file, struct file_pos *pos) { char buf[NUMBER_LENGTH_MAX + 1]; struct s_expr *expr; int inum; expr = alloc_mem(sizeof(*expr)); expr-&gt;type = NUMBER; switch (next_char(file)) { case NUMBER_FORMAT_HEX_CHAR: get_char(file, pos); read_int(file, pos, 16, buf); sscanf(buf, "%x", &amp;inum); expr-&gt;u.number = inum; break; case NUMBER_FORMAT_OCT_CHAR: get_char(file, pos); read_int(file, pos, 8, buf); sscanf(buf, "%o", &amp;inum); expr-&gt;u.number = inum; break; default: read_double(file, pos, buf); sscanf(buf, "%lf", &amp;expr-&gt;u.number); break; } return expr; } struct s_expr *parse_symbol (FILE *file, struct file_pos *pos) { char buf[NUMBER_LENGTH_MAX + 1]; struct s_expr *expr; int chr, chr2, i = 0; for (; i &lt; NUMBER_LENGTH_MAX; get_char(file, pos)) { chr = next_char(file); if (chr == BLOCK_COMMENT_CHAR1) { get_char(file, pos); chr2 = next_char(file); ungetc(chr2, file); pos-&gt;chr--; if (chr2 == BLOCK_COMMENT_CHAR2) break; } if (chr &gt;= '!' &amp;&amp; chr &lt;= '~' &amp;&amp; chr != LINE_COMMENT_CHAR &amp;&amp; chr != LIST_OPEN_BRACE_CHAR &amp;&amp; chr != LIST_CLOSE_BRACE_CHAR &amp;&amp; chr != LIST_DOT_CHAR &amp;&amp; chr != STRING_DELIMITER_CHAR &amp;&amp; chr != NUMBER_PREFIX_CHAR) buf[i++] = chr; else break; } if (i &amp;&amp; i &lt; SYMBOL_LENGTH_MAX) buf[i] = 0; else error(BAD_SYNTAX_MSG, pos, NULL); if(!strcmp(buf, NIL_SYMBOL_STR)) return NULL; if(!strcmp(buf, TRUE_SYMBOL_STR)) return true_(); expr = alloc_mem(sizeof(*expr)); expr-&gt;type = SYMBOL; expr-&gt;u.symbol = alloc_mem(i + 1); strcpy(expr-&gt;u.symbol, buf); return expr; } struct s_expr *parse_s_expr (FILE *file, struct file_pos *pos) { struct s_expr *expr; int chr; chr = get_significant_char(file, pos); switch (chr) { case EOF: return NULL; case LIST_OPEN_BRACE_CHAR: expr = parse_list(file, pos); break; case STRING_DELIMITER_CHAR: expr = parse_string(file, pos); break; case NUMBER_PREFIX_CHAR: expr = parse_number(file, pos); break; default: ungetc(chr, file); pos-&gt;chr--; expr = parse_symbol(file, pos); break; } return expr; } struct l_env { char *symbol; struct s_expr *expr; struct l_env *next; }; static int do_trace = 0; char *s_expr_string (struct s_expr*, struct l_env*); void trace_put (char *format, struct s_expr *expr1, struct s_expr *expr2, struct l_env *env) { if (do_trace) { printf("Trace: "); printf(format, s_expr_string(expr1, env), s_expr_string(expr2, env)); puts(""); } } struct l_env *add_symbol (char *symbol, struct s_expr *expr, struct l_env *env, int append) { struct l_env *new_env; new_env = alloc_mem(sizeof(*new_env)); new_env-&gt;symbol = symbol, new_env-&gt;expr = expr; if (append) env-&gt;next = new_env, new_env-&gt;next = NULL; else new_env-&gt;next = env; return new_env; } struct l_env * add_built_in (int macro, char *symbol, built_in bi, struct l_env *env) { struct s_expr *expr = alloc_mem(sizeof(*expr)); expr-&gt;type = macro ? BUILT_IN_MACRO : BUILT_IN_FUNCTION; expr-&gt;u.built_in = bi; return add_symbol(symbol, expr, env, 0); } int find_symbol (char *symbol, struct l_env **env) { struct l_env *next = *env; for (; next; *env = next, next = next-&gt;next) if (!strcmp(symbol, next-&gt;symbol)) { *env = next; return 1; } return 0; } char *str_cat (char *dest, size_t dest_size, char *src) { if (strlen(src) &gt; dest_size - 1 - strlen(dest)) error(STRING_OVERFLOW_MSG, NULL, NULL); return strcat(dest, src); } char *list_string (struct s_expr *list, struct l_env *env) { char buf[S_EXPR_LENGTH_MAX + 1] = { LIST_OPEN_BRACE_CHAR, 0 }; char psep[] = { ' ', LIST_DOT_CHAR, ' ', 0 }; char cbrc[] = { LIST_CLOSE_BRACE_CHAR, 0 }; for (; list &amp;&amp; list-&gt;type == DOTTED_PAIR; list = list-&gt;u.pair.rest) { if (buf[1]) str_cat(buf, S_EXPR_LENGTH_MAX + 1, " "); str_cat(buf, S_EXPR_LENGTH_MAX + 1, s_expr_string(list-&gt;u.pair.first, env)); } if (list) str_cat(str_cat(buf, S_EXPR_LENGTH_MAX + 1, psep), S_EXPR_LENGTH_MAX + 1, s_expr_string(list, env)); str_cat(buf, S_EXPR_LENGTH_MAX + 1, cbrc); return strcpy(alloc_mem(strlen(buf) + 1), buf); } char *string_string (char *ptr, size_t size) { char *str = alloc_mem(size + 3); str[0] = str[size + 1] = '"'; memcpy(str + 1, ptr, size); str[size + 2] = 0; return str; } char *number_string (double number) { char *str = alloc_mem(NUMBER_LENGTH_MAX + 2); str[0] = NUMBER_PREFIX_CHAR; sprintf(str + 1, "%g", number); return str; } char *function_string (struct s_expr *expr, int macro, struct l_env *env) { char *str; for (; env; env = env-&gt;next) if (env-&gt;expr == expr) break; str = alloc_mem((macro ? sizeof(MACRO_STR_FORMAT) : sizeof(FUNCTION_STR_FORMAT)) + (env ? strlen(env-&gt;symbol) : 0) - 1); sprintf(str, macro ? MACRO_STR_FORMAT : FUNCTION_STR_FORMAT, env ? env-&gt;symbol : ""); return str; } char *s_expr_string (struct s_expr *expr, struct l_env *env) { if (!expr) return NIL_SYMBOL_STR; switch (expr-&gt;type) { case DOTTED_PAIR: return list_string(expr, env); case STRING: return string_string(expr-&gt;u.string.ptr, expr-&gt;u.string.size); case SYMBOL: return expr-&gt;u.symbol; case NUMBER: return number_string(expr-&gt;u.number); case FUNCTION: case BUILT_IN_FUNCTION: return function_string(expr, 0, env); case MACRO: case BUILT_IN_MACRO: return function_string(expr, 1, env); default: assert(0); return NULL; } } int proper_listp (struct s_expr *expr) { while (expr &amp;&amp; expr-&gt;type == DOTTED_PAIR) expr = expr-&gt;u.pair.rest; return expr == NULL; } struct s_expr *search_symbol(struct s_expr *list, char *symbol) { for (; list &amp;&amp; list-&gt;type == DOTTED_PAIR; list = list-&gt;u.pair.rest) { assert(list-&gt;u.pair.first-&gt;type == SYMBOL); if (!strcmp(list-&gt;u.pair.first-&gt;u.symbol, symbol)) return list; } return NULL; } void check_fargs (struct s_expr *fargs, struct l_env *env, struct file_pos *pos) { struct s_expr *rest = fargs; if (rest &amp;&amp; rest-&gt;type == DOTTED_PAIR &amp;&amp; !rest-&gt;u.pair.first &amp;&amp; rest-&gt;u.pair.rest-&gt;type == SYMBOL) return; for (; rest &amp;&amp; rest-&gt;type == DOTTED_PAIR; rest = rest-&gt;u.pair.rest) if (!rest-&gt;u.pair.first || rest-&gt;u.pair.first-&gt;type != SYMBOL || search_symbol(fargs, rest-&gt;u.pair.first-&gt;u.symbol) != rest) error(BAD_FORMAL_ARGS_MSG, pos, s_expr_string(fargs, env)); if (rest &amp;&amp; (rest-&gt;type != SYMBOL || search_symbol(fargs, rest-&gt;u.symbol))) error(BAD_FORMAL_ARGS_MSG, pos, s_expr_string(fargs, env)); } void check_aargs (struct s_expr *args, int count, int va, struct l_env *env, struct file_pos *pos) { struct s_expr *rest = args; for (; count &amp;&amp; rest &amp;&amp; rest-&gt;type == DOTTED_PAIR; count--) rest = rest-&gt;u.pair.rest; if (count || (!va &amp;&amp; rest) || !proper_listp(rest)) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(args, env)); } struct s_expr *eval_list (struct s_expr*, struct l_env*, struct file_pos*); struct s_expr *eval_s_expr (struct s_expr*, struct l_env*, struct file_pos*); #define ARG1(args) args-&gt;u.pair.first #define ARG2(args) args-&gt;u.pair.rest-&gt;u.pair.first #define ARG3(args) args-&gt;u.pair.rest-&gt;u.pair.rest-&gt;u.pair.first struct s_expr *trace (struct s_expr *args, struct l_env *env, struct file_pos *pos) { struct s_expr *expr; do_trace = 1; expr = eval_list(args, env, pos); do_trace = 0; return expr; } struct s_expr *quote (struct s_expr *args, struct l_env *env, struct file_pos *pos) { check_aargs(args, 1, 0, env, pos); return ARG1(args); } struct s_expr *car (struct s_expr *args, struct l_env *env, struct file_pos *pos) { check_aargs(args, 1, 0, env, pos); if (ARG1(args) &amp;&amp; ARG1(args)-&gt;type != DOTTED_PAIR) error(NON_LIST_MSG, pos, s_expr_string(ARG1(args), env)); return ARG1(args) ? ARG1(args)-&gt;u.pair.first : NULL; } struct s_expr *cdr (struct s_expr *args, struct l_env *env, struct file_pos *pos) { check_aargs(args, 1, 0, env, pos); if (ARG1(args) &amp;&amp; ARG1(args)-&gt;type != DOTTED_PAIR) error(NON_LIST_MSG, pos, s_expr_string(ARG1(args), env)); return ARG1(args) ? ARG1(args)-&gt;u.pair.rest : NULL; } struct s_expr *cons (struct s_expr *args, struct l_env *env, struct file_pos *pos) { struct s_expr *expr; check_aargs(args, 2, 0, env, pos); expr = alloc_mem(sizeof(*expr)); expr-&gt;type = DOTTED_PAIR; expr-&gt;u.pair.first = ARG1(args); expr-&gt;u.pair.rest = ARG2(args); return expr; } struct s_expr *if_ (struct s_expr *args, struct l_env *env, struct file_pos *pos) { check_aargs(args, 3, 0, env, pos); return eval_s_expr(ARG1(args), env, pos) ? eval_s_expr(ARG2(args), env, pos) : eval_s_expr(ARG3(args), env, pos); } struct s_expr *function (struct s_expr *args, struct l_env *env, struct file_pos *pos, int macro) { struct s_expr *expr; check_aargs(args, 1, 1, env, pos); check_fargs(ARG1(args), env, pos); expr = alloc_mem(sizeof(*expr)); expr-&gt;type = macro ? MACRO : FUNCTION; expr-&gt;u.function.expr = args; expr-&gt;u.function.env = env; return expr; } struct s_expr *lambda (struct s_expr *args, struct l_env *env, struct file_pos *pos) { return function(args, env, pos, 0); } struct s_expr *macro (struct s_expr *args, struct l_env *env, struct file_pos *pos) { return function(args, env, pos, 1); } struct s_expr *setq (struct s_expr *args, struct l_env *env, struct file_pos *pos) { struct s_expr *rest = args, *expr = NULL; struct l_env *senv; while (rest &amp;&amp; rest-&gt;type == DOTTED_PAIR) { if (ARG1(rest) &amp;&amp; ARG1(rest)-&gt;type == SYMBOL &amp;&amp; rest-&gt;u.pair.rest &amp;&amp; rest-&gt;u.pair.rest-&gt;type == DOTTED_PAIR) { expr = eval_s_expr(ARG2(rest), env, pos), senv = env; if (find_symbol(ARG1(rest)-&gt;u.symbol, &amp;senv)) { trace_put("%s =&gt; %s [assign]", expr, ARG1(rest), env); senv-&gt;expr = expr; } else { trace_put("%s =&gt; %s [global]", expr, ARG1(rest), env); add_symbol(ARG1(rest)-&gt;u.symbol, expr, senv, 1); } } else error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(args, env)); rest = rest-&gt;u.pair.rest-&gt;u.pair.rest; } if (rest) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(args, env)); return expr; } struct s_expr *plus (struct s_expr *args, struct l_env *env, struct file_pos *pos) { struct s_expr *rest = args; double sum = 0; while (rest &amp;&amp; rest-&gt;type == DOTTED_PAIR &amp;&amp; ARG1(rest)-&gt;type == NUMBER) sum += ARG1(rest)-&gt;u.number, rest = rest-&gt;u.pair.rest; if (rest) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(args, env)); rest = alloc_mem(sizeof(*rest)); rest-&gt;type = NUMBER; rest-&gt;u.number = sum; return rest; } struct s_expr *greater (struct s_expr *args, struct l_env *env, struct file_pos *pos) { struct s_expr *rest = args, *num; double prev = DBL_MAX; while (rest &amp;&amp; rest-&gt;type == DOTTED_PAIR) { num = eval_s_expr(ARG1(rest), env, pos); if (!num || num-&gt;type != NUMBER) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(args, env)); if (prev - num-&gt;u.number &lt; DBL_EPSILON) return NULL; prev = num-&gt;u.number, rest = rest-&gt;u.pair.rest; } if (rest) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(args, env)); return true_(); } struct l_env *create_env () { struct l_env *env = NULL; env = add_built_in(1, TRACE_SYMBOL_STR, trace, env); env = add_built_in(1, QUOTE_SYMBOL_STR, quote, env); env = add_built_in(0, CAR_SYMBOL_STR, car, env); env = add_built_in(0, CDR_SYMBOL_STR, cdr, env); env = add_built_in(0, CONS_SYMBOL_STR, cons, env); env = add_built_in(1, IF_SYMBOL_STR, if_, env); env = add_built_in(1, LAMBDA_SYMBOL_STR, lambda, env); env = add_built_in(1, MACRO_SYMBOL_STR, macro, env); env = add_built_in(1, SETQ_SYMBOL_STR, setq, env); env = add_built_in(0, PLUS_SYMBOL_STR, plus, env); env = add_built_in(1, GREATER_SYMBOL_STR, greater, env); return env; } struct s_expr *map_eval (struct s_expr *list, struct l_env *env, struct file_pos *pos) { struct s_expr *expr = NULL, *rest; while (list) { if (list-&gt;type != DOTTED_PAIR) error(NON_LIST_MSG, pos, s_expr_string(list, env)); if (expr) { rest-&gt;u.pair.rest = alloc_mem(sizeof(*expr)); rest = rest-&gt;u.pair.rest; } else expr = rest = alloc_mem(sizeof(*expr)); rest-&gt;type = DOTTED_PAIR; rest-&gt;u.pair.first = eval_s_expr(list-&gt;u.pair.first, env, pos); list = list-&gt;u.pair.rest; } if (expr) rest-&gt;u.pair.rest = NULL; return expr; } struct l_env *apply_args (struct s_expr *fargs, struct s_expr *aargs, struct l_env *env, struct file_pos *pos) { struct s_expr *rest = aargs; if (!fargs || fargs-&gt;u.pair.first) while (fargs &amp;&amp; fargs-&gt;type == DOTTED_PAIR) { if (!rest || rest-&gt;type != DOTTED_PAIR) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(aargs, env)); assert(fargs-&gt;u.pair.first-&gt;type == SYMBOL); trace_put("%s =&gt; %s [local]", rest-&gt;u.pair.first, fargs-&gt;u.pair.first, env); env = add_symbol(fargs-&gt;u.pair.first-&gt;u.symbol, rest-&gt;u.pair.first, env, 0); fargs = fargs-&gt;u.pair.rest, rest = rest-&gt;u.pair.rest; } else fargs = fargs-&gt;u.pair.rest; if (fargs) { assert(fargs-&gt;type == SYMBOL); if (rest &amp;&amp; !proper_listp(rest)) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(aargs, env)); trace_put("%s =&gt; %s [local]", rest, fargs, env); env = add_symbol(fargs-&gt;u.symbol, rest, env, 0); } else if (rest) error(BAD_ACTUAL_ARGS_MSG, pos, s_expr_string(aargs, env)); return env; } struct s_expr *eval_list (struct s_expr *list, struct l_env *env, struct file_pos *pos) { struct s_expr *expr = NULL, *rest = list; for (; rest &amp;&amp; rest-&gt;type == DOTTED_PAIR; rest = rest-&gt;u.pair.rest) expr = eval_s_expr(rest-&gt;u.pair.first, env, pos); if (rest) error(NON_LIST_MSG, pos, s_expr_string(list, env)); return expr; } struct s_expr *eval_s_expr (struct s_expr *expr, struct l_env *env, struct file_pos *pos) { struct s_expr *first, *in = expr; struct l_env *benv; trace_put("%s -&gt; ...", in, NULL, env); if (expr) if (expr-&gt;type == SYMBOL) if (find_symbol(expr-&gt;u.symbol, &amp;env)) expr = env-&gt;expr; else error(UNBOUND_SYMBOL_MSG, pos, expr-&gt;u.symbol); else if (expr-&gt;type == DOTTED_PAIR) { first = eval_s_expr(expr-&gt;u.pair.first, env, pos); if (!first || first-&gt;type == DOTTED_PAIR || first-&gt;type == SYMBOL || first-&gt;type == STRING || first-&gt;type == NUMBER) error(NON_FUNC_MACRO_MSG, pos, s_expr_string(first, env)); expr = first-&gt;type == FUNCTION || first-&gt;type == BUILT_IN_FUNCTION ? map_eval(expr-&gt;u.pair.rest, env, pos) : expr-&gt;u.pair.rest; if (first-&gt;type == FUNCTION || first-&gt;type == MACRO) { assert(first-&gt;u.function.expr-&gt;type == DOTTED_PAIR); benv = apply_args(first-&gt;u.function.expr-&gt;u.pair.first, expr, first-&gt;u.function.env, pos); expr = eval_list(first-&gt;u.function.expr-&gt;u.pair.rest, benv, pos); if (first-&gt;type == MACRO) { trace_put("%s ~&gt; %s", in, expr, env); expr = eval_s_expr(expr, env, pos); } } else expr = first-&gt;u.built_in(expr, env, pos); } trace_put("%s -&gt; %s", in, expr, env); return expr; } struct s_expr *eval_file (char *filename, struct l_env *env) { struct file_pos pos, prev_pos; struct s_expr *expr; FILE *file; int chr; file = fopen(filename, "r"); if (!file) { printf("Failed to open file '%s'\n", filename); exit(1); } pos.filename = filename, pos.line = pos.chr = 1; expr = NULL; while (1) { chr = get_significant_char(file, &amp;pos); if (chr == EOF) break; ungetc(chr, file); pos.chr--, prev_pos = pos; expr = eval_s_expr(parse_s_expr(file, &amp;pos), env, &amp;prev_pos); } fclose(file); return expr; } int main (int argc, char *argv[]) { struct l_env *env; if (argc != 2) { puts("Usage: int source"); exit(1); } env = create_env(); puts(s_expr_string(eval_file(argv[1], env), env)); return 0; }</span></span></span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     åŸºæœ¬ãŠã‚ˆã³ã‚«ã‚¹ã‚¿ãƒ ã®é–¢æ•°ã¨ãƒã‚¯ãƒ­ã®ã‚ˆã‚Šç°¡æ½”ãªåå‰ã‚’ç´¹ä»‹ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ å¤å…¸çš„ãªLISPï¼ˆç‰¹ã«Common Lispï¼‰ã§ã¯ã€åŸºæœ¬çš„ãªãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã®å†—é•·æ€§ãŒå°‘ã—æ°—ã«ãªã‚Šã¾ã™ã€‚ ä¸€æ–¹ã§ã€ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’è¤‡é›‘ã«ã—ãŸãã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å¼•ç”¨ç¬¦ã¨ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆã®æ§‹æ–‡ã¯ãƒ–ãƒ©ã‚±ãƒƒãƒˆè¡¨è¨˜ã®ã¿ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚ ä¸€æ–¹ã€å½¼ã¯ã€ç°¡æ½”ã•ã®ãŸã‚ã«ç‰¹æ®Šæ–‡å­—ã‚’åºƒãä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€éåº¦ã®ãƒ–ãƒ©ã‚±ãƒƒãƒˆã‚’è£œãŠã†ã¨ã—ã¾ã—ãŸã€‚ ã“ã‚Œã¯éå¸¸ã«ç‰©è­°ã‚’é†¸ã™æ±ºå®šã§ã‚ã‚‹ã‚ˆã†ã«æ€ã‚ã‚Œã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ç§ã¯é€£æƒ³ã‚·ãƒªãƒ¼ã‚ºã«å¾“ã£ã¦åå‰ã‚’é¸æŠã—ã‚ˆã†ã¨ã—ã¾ã—ãŸï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>_</b> - <b>nilã‚’</b>ç½®ãæ›ãˆã¾ã™ </li><li>  <b>ï¼</b>  - <b>ãƒ©ãƒ ãƒ€ã‚’</b>ç½®ãæ›ãˆã¾ã™ </li><li>  <b>ï¼ƒ</b> -åŒæ§˜ã«<b>ï¼</b> ã—ã‹ã—ã€åå‰ã®ãªã„ãƒã‚¯ãƒ­ã‚’å®£è¨€ã—ã¾ã™ </li><li>  <b>ï¼Ÿ</b>  -ifã‚’å¿…é ˆã®3ç•ªç›®ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§ç½®ãæ›ãˆã¾ã™ </li><li>  <b>^</b> - <b>çŸ­æ‰€ã‚’</b>ç½®ãæ›ãˆã‚‹ </li><li>  <b>@</b> - <b>è»Šã‚’</b>äº¤æ› </li><li>  <b>ï¼…</b> <b>-cdrã‚’</b>ç½®ãæ›ãˆã¾ã™ </li><li>  <b>=</b> <b>-setqã‚’</b>ç½®ãæ›ãˆã¾ã™ </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã—ãŸãŒã£ã¦ã€æ´¾ç”Ÿé–¢æ•°ãŠã‚ˆã³ãƒã‚¯ãƒ­ã®åå‰ã¯ã€åŸºæœ¬çš„ãªåå‰ã‹ã‚‰å¤§éƒ¨åˆ†ãŒæ´¾ç”Ÿã—ã¦ã„ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>!!</b>  <b>-defunã‚’</b>ç½®ãæ›ãˆ<b>ã¾ã™</b> </li><li>  <b>##</b> - <b>defmacroã‚’</b>ç½®æ› </li><li>  <b>^^</b> - <b>ãƒªã‚¹ãƒˆã‚’</b>ç½®æ› </li><li>  <b>@ï¼…</b> - <b>cadrã‚’</b>ç½®æ› </li><li>  <b>%%</b> - <b>cddrã‚’</b>ç½®ãæ›ãˆ<b>ã¾ã™</b> </li><li>  <b>ï¼š</b> -1ã¤ã®å¤‰æ•°ã®<b>let</b>ã‚’ç½®ãæ›ãˆã¾ã™ </li><li>  <b>::</b> - <b>let</b>ã‚’å†—é•·ãªæ‹¬å¼§ãªã—ã§ç½®ãæ›ãˆã¾ã™ </li><li>  <b>ï¼†</b> -ç½®æ›<b>ãŠã‚ˆã³</b> </li><li>  <b>|</b>  -äº¤æ›<b>ã¾ãŸã¯</b> </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     æ¬¡ã«ã€æ´¾ç”Ÿçš„ãªå®šç¾©ã‚’æ¤œè¨ã—ã¾ã™ã€‚ æœ€åˆã«ã€åŸºæœ¬çš„ãªç•¥èªã‚’å®šç¾©ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">=</span></span> @% (! (<span class="hljs-name"><span class="hljs-name">list</span></span>) (@ (% list)))) <span class="hljs-comment"><span class="hljs-comment">; cadr (= %% (! (list) (% (% list)))) ; cddr (= ^^ (! (_ . elts) elts)) ; list (= ## (# (name fargs . body) ; defmacro (^^ = name (^ # (^ fargs body))))) (## !! (name fargs . body) ; defun (^^ = name (^ ! (^ fargs body))))</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     æ­£å¼ãªå¼•æ•°ã®ãƒªã‚¹ãƒˆã®ãƒ‰ãƒƒãƒˆè¡¨è¨˜ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ ãƒ‰ãƒƒãƒˆã®å¾Œã®è¨˜å·ã¯ã€æ®‹ã‚Šã®å®Ÿéš›ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™ã€‚ ã™ã¹ã¦ã®å¼•æ•°ãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å ´åˆã¯ã€ç‰¹åˆ¥ãªè¡¨è¨˜æ³•ï¼ˆ_ã€‚Rest-argsï¼‰ã§è¨˜è¿°ã•ã‚Œã¾ã™ã€‚ æ¬¡ã«ã€ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒãƒƒãƒ—ã¨2ã¤ã®ãƒšã‚¢ãƒªã‚¹ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="lisp hljs">(!! map (<span class="hljs-name"><span class="hljs-name">func</span></span> list) (? list (^ (<span class="hljs-name"><span class="hljs-name">func</span></span> (@ list)) (<span class="hljs-name"><span class="hljs-name">map</span></span> func (% list))) _)) (!! pairs1 (<span class="hljs-name"><span class="hljs-name">list</span></span>) <span class="hljs-comment"><span class="hljs-comment">; (abcd) -&gt; ((ab) (bc) (cd)) (? (% list) (^ (^^ (@ list) (@% list)) (pairs1 (% list))) _)) (!! pairs2 (list) ; (abcd) -&gt; ((ab) (cd)) (? list (^ (^^ (@ list) (@% list)) (pairs2 (%% list))) _))</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2ã¤ã®letã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">##</span></span> : (<span class="hljs-name"><span class="hljs-name">name</span></span> value . body) <span class="hljs-comment"><span class="hljs-comment">; simplified let (^^ (^ ! (^ (^^ name) body)) value)) (## :: (vars . body) ; let without redundant braces (= vars (pairs2 vars)) (^ (^ ! (^ (map @ vars) body)) (map @% vars)))</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å¤å…¸çš„ãªé€†ç•³ã¿è¾¼ã¿ã¨å·¦ç•³ã¿è¾¼ã¿ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="lisp hljs">(!! reverse (<span class="hljs-name"><span class="hljs-name">list</span></span>) (: reverse+ _ (!! reverse+ (<span class="hljs-name"><span class="hljs-name">list</span></span> rlist) (? list (<span class="hljs-name"><span class="hljs-name">reverse+</span></span> (% list) (^ (@ list) rlist)) rlist)) (<span class="hljs-name"><span class="hljs-name">reverse+</span></span> list _))) (!! fold (<span class="hljs-name"><span class="hljs-name">list</span></span> func last) <span class="hljs-comment"><span class="hljs-comment">; (fold (' (ab)) fl) &lt;=&gt; (fa (fbl)) (? list (func (@ list) (fold (% list) func last)) last))</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ifãƒ™ãƒ¼ã‚¹ã®è«–ç†æ¼”ç®—å­ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">=</span></span> <span class="hljs-literal"><span class="hljs-literal">t</span></span> (' <span class="hljs-literal"><span class="hljs-literal">t</span></span>)) <span class="hljs-comment"><span class="hljs-comment">; true constant (!! ~ (bool) (? bool _ t)) ; not (## &amp; (_ . bools) ; and (: and (! (bool1 bool2) (^^ ? bool1 (^^ ? bool2 t _) _)) (fold bools and t))) (## | (_ . bools) ; or (: or (! (bool1 bool2) (^^ ? bool1 t (^^ ? bool2 t _))) (fold bools or _)))</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãã—ã¦æœ€å¾Œã«ã€çµ„ã¿è¾¼ã¿&gt;ï¼ˆã‚ˆã‚Šå¤§ãã„ï¼‰ã«åŸºã¥ãæ¯”è¼ƒæ¼”ç®—å­ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="lisp hljs">(: defcmp (! (<span class="hljs-name"><span class="hljs-name">cmp</span></span>) (<span class="hljs-name"><span class="hljs-name">#</span></span> (<span class="hljs-name"><span class="hljs-name">_</span></span> . nums) (: cmp+ (! (<span class="hljs-name"><span class="hljs-name">pair</span></span> bool) (^^ &amp; (<span class="hljs-name"><span class="hljs-name">cmp</span></span> (@ pair) (@% pair)) bool)) (<span class="hljs-name"><span class="hljs-name">fold</span></span> (<span class="hljs-name"><span class="hljs-name">pairs1</span></span> nums) cmp+ <span class="hljs-literal"><span class="hljs-literal">t</span></span>)))) (<span class="hljs-name"><span class="hljs-name">=</span></span> == (<span class="hljs-name"><span class="hljs-name">defcmp</span></span> (! (<span class="hljs-name"><span class="hljs-name">num1</span></span> num2) (^^ &amp; (^^ ~ (^^ &gt; num1 num2)) (^^ ~ (^^ &gt; num2 num1)))))) (<span class="hljs-name"><span class="hljs-name">=</span></span> &gt;= (<span class="hljs-name"><span class="hljs-name">defcmp</span></span> (! (<span class="hljs-name"><span class="hljs-name">num1</span></span> num2) (^^ ~ (^^ &gt; num2 num1)))))) (<span class="hljs-name"><span class="hljs-name">##</span></span> &lt; (<span class="hljs-name"><span class="hljs-name">_</span></span> . nums) (^ &gt; (<span class="hljs-name"><span class="hljs-name">reverse</span></span> nums))) (<span class="hljs-name"><span class="hljs-name">##</span></span> &lt;= (<span class="hljs-name"><span class="hljs-name">_</span></span> . nums) (^ &gt;= (<span class="hljs-name"><span class="hljs-name">reverse</span></span> nums)))</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     å®šç¾©ã®æœ€å¾Œã®ãƒ–ãƒ­ãƒƒã‚¯ã¯æ˜ç¤ºçš„ã«ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">å®Œå…¨ãªlib.lãƒ†ã‚¹ãƒˆ</b> <div class="spoiler_text"><pre> <code class="lisp hljs"><span class="hljs-comment"><span class="hljs-comment">;| Formal argument list notation: ([{arg1 [arg2 [arg3 ...]] | _} [. args]]) Number notation: ${double | ooctal | hhex} ; $4 $-2.2e3 $o376 $h7EF Built-in symbols: _ ; nil Built-in functions: @ (list) ; car % (list) ; cdr ^ (first rest) ; cons + (_ . nums) Built-in macros: trace (_ . body) ' (expr) ? (cond texpr fexpr) ; if with mandatory fexpr ! (args . body) ; lambda # (args . body) ; creates anonymous macro &gt; (_ . nums) |; (= @% (! (list) (@ (% list)))) ; cadr (= %% (! (list) (% (% list)))) ; cddr (= ^^ (! (_ . elts) elts)) ; list (= ## (# (name fargs . body) ; defmacro (^^ = name (^ # (^ fargs body))))) (## !! (name fargs . body) ; defun (^^ = name (^ ! (^ fargs body)))) (!! map (func list) (? list (^ (func (@ list)) (map func (% list))) _)) (!! pairs1 (list) ; (abcd) -&gt; ((ab) (bc) (cd)) (? (% list) (^ (^^ (@ list) (@% list)) (pairs1 (% list))) _)) (!! pairs2 (list) ; (abcd) -&gt; ((ab) (cd)) (? list (^ (^^ (@ list) (@% list)) (pairs2 (%% list))) _)) (## : (name value . body) ; simplified let (^^ (^ ! (^ (^^ name) body)) value)) (## :: (vars . body) ; let without redundant braces (= vars (pairs2 vars)) (^ (^ ! (^ (map @ vars) body)) (map @% vars))) (!! reverse (list) (: reverse+ _ (!! reverse+ (list rlist) (? list (reverse+ (% list) (^ (@ list) rlist)) rlist)) (reverse+ list _))) (!! fold (list func last) ; (fold (' (ab)) fl) &lt;=&gt; (fa (fbl)) (? list (func (@ list) (fold (% list) func last)) last)) (= t (' t)) ; true constant (!! ~ (bool) (? bool _ t)) ; not (## &amp; (_ . bools) ; and (: and (! (bool1 bool2) (^^ ? bool1 (^^ ? bool2 t _) _)) (fold bools and t))) (## | (_ . bools) ; or (: or (! (bool1 bool2) (^^ ? bool1 t (^^ ? bool2 t _))) (fold bools or _))) (: defcmp (! (cmp) (# (_ . nums) (: cmp+ (! (pair bool) (^^ &amp; (cmp (@ pair) (@% pair)) bool)) (fold (pairs1 nums) cmp+ t)))) (= == (defcmp (! (num1 num2) (^^ &amp; (^^ ~ (^^ &gt; num1 num2)) (^^ ~ (^^ &gt; num2 num1)))))) (= &gt;= (defcmp (! (num1 num2) (^^ ~ (^^ &gt; num2 num1)))))) (## &lt; (_ . nums) (^ &gt; (reverse nums))) (## &lt;= (_ . nums) (^ &gt;= (reverse nums)))</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã¨ã»ã¨ã‚“ã©ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã¯ã€DSLã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹æº–å‚™ãŒã§ãã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">è©¦ã—ã¦ã¿ã¾ã™...</font></font></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J150800/index.html">Microsoft Projectã®äºˆå®š</a></li>
<li><a href="../J150801/index.html">ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦å°‘ã—ã€‚ ãƒ‘ãƒ¼ãƒˆ1.æ‚ªã®åŒæœŸã‹ã©ã†ã‹</a></li>
<li><a href="../J150802/index.html">Redditã®ä½œæˆæ™‚ã«å­¦ã‚“ã 7ã¤ã®æ•™è¨“</a></li>
<li><a href="../J150803/index.html">JSON-RPC 2.0ãŠã‚ˆã³PHP</a></li>
<li><a href="../J150804/index.html">ç ”ç©¶è€…ã¯ã€Pirate Bayã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ€ãƒ¼ã®å ´æ‰€ã‚’æ˜ã‚‰ã‹ã«ã—ã¾ã—ãŸ</a></li>
<li><a href="../J150806/index.html">ãƒ•ã‚¡ãƒ¼ã®Yii</a></li>
<li><a href="../J150807/index.html">ãƒ¢ã‚¹ã‚¯ãƒ¯ã®å¤§æ°—è³ªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ </a></li>
<li><a href="../J150808/index.html">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©•ä¾¡ã«åŸºã¥ã„ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸¦ã¹æ›¿ãˆã«ã¤ã„ã¦ï¼šãƒ‘ãƒ¼ãƒˆ2</a></li>
<li><a href="../J150809/index.html">é€šå¸¸ã®PCä¸Šã®4G LTEãƒ™ãƒ¼ã‚¹ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</a></li>
<li><a href="../J15081/index.html">3Dã€Œãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã€</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
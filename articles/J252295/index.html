<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◀️ ✔️ 👨🏼‍🚀 MySQL接続プールとそれを並列化に使用する方法 👩🏿‍🍳 🖨️ 👩‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私が最近出会った興味深いトピックをすべての読者と共有したいのですが、それが気に入りました。 このトピックの開発は私を喜ばせ、貯金箱に少しの経験を追加しました。 ほとんどの場合、またはそうではないかもしれませんが、データベース接続のプールに出くわしました。 この興味深いオプションを読んだ後、記事を書い...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>MySQL接続プールとそれを並列化に使用する方法</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body">  <i>私が最近出会った興味深いトピックをすべての読者と共有したいのですが、それが気に入りました。</i>  <i>このトピックの開発は私を喜ばせ、貯金箱に少しの経験を追加しました。</i>  <i>ほとんどの場合、またはそうではないかもしれませんが、データベース接続のプールに出くわしました。</i>  <i>この興味深いオプションを読んだ後、記事を書いてそれをあなたと共有したいと思いました。</i>  <i>おそらくこの記事は少し長くなると思いますが、誰かがこの投稿を読むことに興味を持ち、このトピックに興味があると思います。</i>  <i>誰かがこの記事の経験をプロジェクトで使用しているのかもしれませんが、いずれにしても、それを書いてあなたに伝えるのは面白いでしょう。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     フリーランスに従事。 どういうわけか、私の友人が自動車学校の所有者と一緒に私を連れてきて、そこで彼らは私のチケットのコレクションを形成するプログラムを作成するように私に頼みました。 彼のSDAチケットブックのようなもの。 すべての質問はMySQL DBMSの3つのテーブルに保存されます。1つの質問のコレクション、これらの質問の別の主題、および質問に対する最後の回答です。 その結果、800問の質問（回答あり）があります。 フォーメーションの最初のバージョンは、内部に質問が順次形成される従来の方法でした。 マルチスレッドプログラムの実行のトピックに非常に興味があるので、完全に機能するメソッドを作成した後、すべてをより便利にすると同時に、サンプリング速度を追加することにしました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     まず、SDAチケットのバージョンを作成するために、問題のトピックを考慮する必要があります。 また、トピックは12個のみです。 最初の8つのトピックは40の質問で構成され、残りの120は質問です。各トピックにはチケットの特定の番号があり、最初の8つのトピックはチケットの1つの質問に対応します。 生成された質問のバージョンを保存するために、辞書辞書が使用されます。各辞書には、特定のトピックに関する質問のリストが保存されます。 さらに、質問の順序は常に異なっている必要があります。  0から40までの数字のシーケンスを繰り返しなしで生成するメソッドが必要です。そのため、チケットとそれに応じた質問を選択することになります。 これらすべてを念頭に置いて、すべての質問を生成するための次のアルゴリズムを取得します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 持っているすべてのトピックを取得します。 </li><li> トピックから、各トピックの質問番号のリストを作成します。 </li><li> 乱数を生成します; </li><li> 質問のリストと乱数のシーケンスに基づいて、選択を行い、主題に関する質問のリストを作成します。 </li><li> 辞書に各リストを入力します。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最初の2つのステップの実装と操作はロジックに依存し、私の意見では、サンプリングの要求に応じて1回実行できます。  3番目のステップは、質問をどれだけ異ならせたいか、各トピックの前に新世代を行うか、すべてのトピックに対して1回行うかによって異なります。 私は一度だけ生成することを選択しましたが、私の意見ではこれで十分です。  4番目のステップは最も頻繁に機能し、この場所ではサンプリング時に最も時間がかかるはずです。 最後のステップは簡単で、スキップしてください。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  DB接続 </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     データベースへの接続を検討してください。 これを行うには、接続文字列ConnectionおよびDataReaderを格納する抽象クラスを使用します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SqlBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> String Connect; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> MySqlConnection SqlConnection; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> MySqlDataReader SqlDataReader; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SqlBase</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Connect = String.Format(<span class="hljs-string"><span class="hljs-string">"Database={0};Data Source={1};User ID={2};Password={3};CharSet=utf8"</span></span>, Settings.Default.Database, Settings.Default.DataSource, Settings.Default.UserId, Settings.Default.Password); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SqlBase</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SqlConnection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Connect); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SqlConnection.Open(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(ex.Message, ex); } } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     抽象クラスが好きなのは、便利な作業ロジックを自分で作成して隠すことができ、派生物が他の詳細に完全に集中し、他の詳細を心配せずに、基本クラスに責任を割り当てることができるからです。 この場合、派生クラスのインスタンスを作成すると、データベースを操作するために必要な条件が自動的に取得され、クラス自体のロジックを実装して質問のサンプルを作成することができます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> sealed <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SqlPerceptionQuestions : SqlBase { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span>&lt;Int32, List&lt;Question&gt;&gt; GetQuestion() { Generation(); GetTheme(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Request(); } private <span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span>&lt;Int32, List&lt;Question&gt;&gt; Request() { var _collectionDictionary = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span>&lt;Int32, List&lt;Question&gt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-type"><span class="hljs-type">int</span></span> ctr = <span class="hljs-number"><span class="hljs-number">0</span></span>; ctr &lt; <span class="hljs-number"><span class="hljs-number">12</span></span>; ctr++) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (var _questions = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> SqlQuestions()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ctr &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) { _collectionDictionary[ctr] = _questions.GetQuestionSmall((Int16)ctr); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _collectionDictionary[ctr] = _questions.GetQuestionGreat((Int16)ctr); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _collectionDictionary; } private async <span class="hljs-type"><span class="hljs-type">void</span></span> GetTheme() { //  } //       <span class="hljs-number"><span class="hljs-number">40</span></span>  private List&lt;Question&gt; GetQuestionSmall(Int16 numTheme) { var _listQuestions = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;Question&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Int16 numCard = <span class="hljs-number"><span class="hljs-number">0</span></span>; numCard &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; numCard++) { _listQuestions.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(GetQuestion(numCard, numTheme)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _listQuestions; } //       <span class="hljs-number"><span class="hljs-number">120</span></span>  private List&lt;Question&gt; GetQuestionGreat(Int16 numTheme) { var _listQuestions = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;Question&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Int16 numQuestion = <span class="hljs-number"><span class="hljs-number">0</span></span>; numQuestion &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; numQuestion++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> numCard = <span class="hljs-number"><span class="hljs-number">0</span></span>; numCard &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; numCard++) { _listQuestions.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(GetQuestion(numQuestion, numTheme, numQuestion)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _listQuestions; } //          private Question GetQuestion(Int16 numCard, Int16 numTheme, Int16 numQuestion = <span class="hljs-number"><span class="hljs-number">0</span></span>) { //  } //    private List&lt;String&gt; GetResponse(Int32 questions_id) { //  } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これは最もシンプルで最も同期したバージョンで、約2秒と200〜400ミリ秒で動作します。これにより、この間ずっとユーザーインターフェイスがブロックされます。 非常に最初の実装がかなりの時間（約6秒）働いたため、これは良い動作バージョンです。 改善後、約2秒しか出ませんでした。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 非同期サンプリングバージョンの作成 </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     すべてが正常であり、すべてがすでに機能していますが、本来あるべき状態ですか？ 結局のところ、コンソールアプリケーションではなく、同期メソッド（ブロッキング）があります。 正しく完全に機能するプログラムが必要です。これは0.5秒でもブロックされませんが、どのような負荷でも適切に機能します。 これを行うには、まず、GetQuestion（）メソッドを書き換えます。  TAP（Task-based Asynchronous Pattern）パターンに従って非同期にしましょう。 誰が気にかけているか、インターネットで読んでいるか、私が本当に好きなかなり良い本を持っています-このトピックが非常によく説明されているAlex DavisによるC＃5.0の非同期プログラミング、または<a href="http://habrahabr.ru/post/162353/">ここを見てください</a> 。 書き換えると、次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs javascript">public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;Dictionary&lt;Int32, List&lt;Question&gt;&gt;&gt; GetQuestionAsync() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Factory.StartNew(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { Generation(); GetTheme(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Request(); }, TaskCreationOptions.LongRunning); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このメソッドで最も興味深いものを考えてみましょう：Task.Factory.StartNew（）。 バージョン.NET 4.5以降では、Task.Run（）のバージョンを使用できます。これは、作成時のパラメーターが少ない単純な宣言によって以前のものとは異なります。 本質的に、Task.Run（）はTask.Factory.StartNew（）よりも便利なシェルであり、非同期タスクの単純な作成に非常に適していますが、同時に制御の柔軟性がやや劣ります。 どのストリームが計算を実行するか、またはどのように計画されるかをより正確に制御する必要がある場合は、Task.Factory.StartNew（）を使用します。 興味があれば、 <a href="http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx">こちらをチェック</a> この場合、TaskCreationOptions.LongRunningなどのパラメーターも指定したため、このオプションを使用しました。このパラメーターは、このタスクを長時間としてマークし、このワークアイテムが長期間実行され、他のワークアイテムをブロックする可能性があることを意味します。 このフラグは、過剰なサブスクリプションが予想されるTaskSchedulerの情報も提供します。これにより、使用可能なハードウェアスレッドの数よりも多くのスレッドを作成できます。 このパラメーターを使用すると、グローバルおよびローカルキューを含むThreadPoolを完全に回避できます。  <a href="https://msdn.microsoft.com/ru-ru/library/dd997402(v%3Dvs.110).aspx">「タスクスケジューラ」の</a>詳細をご覧ください。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、データ収集生成の非同期実行は既に取得されており、メインストリームはブロックされません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> サンプルの並列化 </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     その後、並列化に進みます。これにより、データサンプリングの速度が向上します。 ただし、このためには、メインクラスを少しやり直し、基本クラスを変更し、ループの並列動作を確保するために別のクラスを追加して、異なるスレッドのデータ競合、クリティカルセクション、変数の問題を回避する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最初に、 <i>SqlPerceptionQuestions</i>クラスに新しいネストされたクラス<i>SqlQuestionsを</i>作成します。 質問と回答を取得するメソッドを転送し、SqlBaseから派生させます。外部クラスでは、それらを取得するためにメソッドを残し、一度だけ呼び出して、一連の数字を形成します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>SqlQuestions</i>クラス<i>コード</i> ： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cs"> <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SqlQuestions</span></span> : <span class="hljs-title"><span class="hljs-title">SqlBase</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> List&lt;Question&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetQuestionSmall</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Int16 numTheme</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _listQuestions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Question&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Int16 numCard = <span class="hljs-number"><span class="hljs-number">0</span></span>; numCard &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; numCard++) { _listQuestions.Add(GetQuestion(numCard, numTheme)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _listQuestions; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> List&lt;Question&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetQuestionGreat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Int16 numTheme</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _listQuestions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Question&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Int16 numQuestion = <span class="hljs-number"><span class="hljs-number">0</span></span>; numQuestion &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; numQuestion++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numCard = <span class="hljs-number"><span class="hljs-number">0</span></span>; numCard &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; numCard++) { _listQuestions.Add(GetQuestion(numQuestion, numTheme, numQuestion)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _listQuestions; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Question </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetQuestion</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Int16 numCard, Int16 numTheme, Int16 numQuestion = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  } private List&lt;String&gt; GetResponse(Int32 questions_id) { //  } }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ループを並列化するには、Parallel.For（）を使用します。 これは、データのロードを複数のストリームに整理するための非常に便利な方法です。 ただし、これには、1つのConnectionで1つのDataReaderを処理できるため、少なくとも複数のデータベース接続を作成する必要があるという事実も伴います。  .Request（）メソッドを書き換えます： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Dictionary&lt;Int32, <span class="hljs-keyword"><span class="hljs-keyword">List</span></span>&lt;Question&gt;&gt; Request() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _collectionDictionary = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;Int32, <span class="hljs-keyword"><span class="hljs-keyword">List</span></span>&lt;Question&gt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _po = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ParallelOptions { MaxDegreeOfParallelism = Environment.ProcessorCount }; Parallel.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, _po, ctr =&gt; { using (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _questions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SqlQuestions()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ctr &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) { _collectionDictionary[ctr] = _questions.GetQuestionSmall((Int16)ctr); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _collectionDictionary[ctr] = _questions.GetQuestionGreat((Int16)ctr); } } }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _collectionDictionary; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして、接続を開いた後、それを閉じる必要があります。 さらに、これはすべてサイクルで行われます。 これをすべて実装するために、個別の派生クラス<i>SqlQuestions</i>を作成することにしました。 接続を閉じるには、.Dispose（）を呼び出します。この中で、閉じるときに行う必要があることを書き留めます。 これを行うには、最初に基本クラスで.Dispose（）メソッドを宣言します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Dispose(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); GC.SuppressFinalize(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Boolean disposing</span></span></span><span class="hljs-function">)</span></span>;</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして、派生クラスで異なる方法で実装します。 なぜそう まず、データベース接続を作成して閉じた場合はどうなりますか？ 接続を開いてから閉じると、しばらくの間（約3分間）MySQL接続プールに配置されます。新しい接続を開くと、接続はプールから取得されます。つまり、再オープンのための時間とリソースは使用されません。 新しいメソッドを起動して、データベース接続を開くのにかかる時間を確認しましょう。このため、接続が開かれているコードの基本クラスStopwatchに挿入し、出力にあるものを確認します。 コード： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SqlBase</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Stopwatch st = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stopwatch(); st.Start(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SqlConnection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Connect); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SqlConnection.Open(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (MySqlException ex) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(ex.Message, ex); } st.Stop(); Debug.WriteLine(<span class="hljs-string"><span class="hljs-string">"    : "</span></span> + st.Elapsed.Seconds.ToString() + <span class="hljs-string"><span class="hljs-string">"  "</span></span> + st.Elapsed.Milliseconds.ToString() + <span class="hljs-string"><span class="hljs-string">" "</span></span>); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">開館時間</b> <div class="spoiler_text"><img src="http://s49.radikal.ru/i125/1503/6d/bac9791c778f.jpg" alt="画像"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最初の接続は最も長く、 <i>SqlPerceptionQuestions</i>クラスの接続を開きます。これは、メソッドの全期間にわたって開かれます。 後続の接続は、 <i>SqlQuestions</i>クラスをインスタンス化するときにループ内で開かれた接続です。 私のコンピューターのプロセッサーの数を考慮に入れると、最大4サイクルで4つの接続が開かれます。 合計で5つの接続が最初に開かれ、サイクルではそれらが開いたり閉じたりします。 したがって、最初の5つの接続を開くには時間が必要です。その後、サイクル内で古い接続が閉じられ、新しい接続が開かれると、接続はプール内にあり、必要になるたびに単純に発行されるため、時間とリソースはかかりません。 このため、クラスのクリーンアップはわずかに異なる方法で実装されます。  <i>SqlPerceptionQuestions</i>クラス<i>では、</i>メソッドは次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> disposing</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.disposed) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SqlDataReader != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { SqlDataReader.Close(); SqlDataReader.Dispose(); } SqlConnection.Close(); SqlConnection.Dispose(); MySqlConnection.ClearAllPools(); } disposed = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>SqlQuestions</i>クラス<i>で</i>も、MySqlConnection.ClearAllPools（）;の行を除きます。 結局のところ、このままにしておくと、次のような状況になります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">開館時間</b> <div class="spoiler_text"><img src="http://s49.radikal.ru/i125/1503/3b/8ccd7c57215d.jpg" alt="画像"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ご覧のように、スレッドプールを絶えずクリーニングすることにより、接続が常に開かれ、その後の結果が生じます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  MySql接続プール </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この瞬間をより詳しく考えてみましょう。  Connector / Net MySqlは、接続プーリングをサポートして、使用率の高いアプリケーションデータベースのパフォーマンスとスケーラビリティを向上させます。 この機能はデフォルトで有効になっています。 接続文字列オプションを使用して、無効にするか、特性を変更できます。 接続文字列は、接続プールに関するオプションをサポートしています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th>  <nobr>オプション名</nobr> </th><th>  <nobr>価値による</nobr> <nobr>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </nobr>  <nobr>デフォルト</nobr> </th><th> 詳細 </th></tr><tr><td> キャッシュサーバーのプロパティ、CacheServerProperties </td><td> オフ </td><td> プールからの接続が返されるたびに、いくつかのシステム変数（SHOW VARIABLES）のパラメーターを更新するかどうかを決定します。 このオプションを有効にすると、接続プールコンテキストへの接続が高速化されます。 アプリケーションには、他の接続によって行われた構成の変更は通知されません。 このオプションは、バージョンConnector / Net 6.3以降に追加されました。 </td></tr><tr><td> 接続ライフタイム、ConnectionLifeTime </td><td>  0 </td><td> 接続がプールに返されると、その作成時間が現在の時間と比較され、ConnectionLifeTime値を超えると、この接続は破棄されます。 これは、運用サーバーとオンラインサーバーの間で負荷を分散するクラスター構成で役立ちます。 値がゼロ（0）の場合、プール内の接続は可能な限り最大の時間待機します。 </td></tr><tr><td> 接続リセット、ConnectionReset </td><td> 偽 </td><td>  trueの場合、プールから取得されたときの接続状態がリセットされます。 デフォルト値を使用すると、サーバーが接続を取得するための追加の処理サイクルを回避できますが、接続ステータスはリセットされません。 </td></tr><tr><td> 最大プールサイズ、最大プールサイズ、MaximumPoolsize、maxpoolsize </td><td>  100 </td><td> プール内に存在できる接続の最大数。 </td></tr><tr><td> 最小プールサイズ、最小プールサイズ、MinimumPoolSize、minpoolsize </td><td>  0 </td><td> プールに入れられる化合物の最小数。 </td></tr><tr><td> プーリング </td><td> 本当 </td><td>  trueの場合、MySqlConnectionオブジェクトはプールから取得され、必要に応じて作成され、対応するプールに追加されます。 定義されている値は、true、false、yes、およびnoです。 </td></tr></tbody></table>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これらのパラメーターを使用して、必要に応じてプールを管理できます。 例： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 接続リセットは接続コンテキストをリセットし、デフォルトで使用されていない場合、プールから接続を受信する時間が少し長くなります。 </li><li> 最小プールサイズを使用すると、接続数が最小プールサイズの値以下の場合、必要に応じて、無期限に存在するプール内の接続数を設定できます。 </li><li>  （このプログラムの例のように）スレッドのプールを絶えずクリアすると、プーリングを無効にしても同じ結果が得られます </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     デフォルトでは、MySQL Connector / Net 6.2以降、3分ごとに実行され、3分以上スタンバイ（使用されていない）であるプールから接続を削除するバックグラウンドジョブがあります。 プールをクリアすると、クライアント側とサーバー側の両方でリソースが解放されます。 これは、クライアント側では各接続がソケットを使用し、サーバー側では各接続がソケットとストリームを使用するためです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 並列呼び出しスタック </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     興味を引くために、たとえば.GetQuestion（）メソッドにブレークポイントを置いて、並列呼び出しスタックを見ると、次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">並列スタック</b> <div class="spoiler_text"><img src="http://s019.radikal.ru/i601/1503/1b/2288a568bfab.jpg" alt="画像"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     スクリーンショットからわかるように、中断されているスレッドの1つにあり、コールスタックから、このメソッドが質問の小さなコレクションをロードするメソッドから呼び出されたと判断します（40）。 その左側にはさらに3つのスレッドがあり、そのうち2つはコレクションに質問を追加するための行でこの時点で停止します。このスレッドは、小さな質問のコレクションも処理します。 そして最後のスレッド4は処理に従事しており、この時点で質問に対する回答を受け取ります。大規模なコレクション（120）からの質問に対してのみです。 これらの4つのスレッドはすべて並列ループで作成され、残りのループ反復スレッドとほぼ同時に動作します。 これらのスレッドは、プログラム内のスレッドの合計数に含まれ、そのうち8つは残りの4つがプログラムの他のタスクを解決します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 最後の仕上げ-例外処理 </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして最後に、プログラムが機能するためには、例外処理が必要です。 突然、フィールドまたは他のパラメータがデータベースから変更されたか、プログラム自体で予期しないエラーが発生しました。  GetQuestionAsync（）メソッドを書き換えます： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs javascript">public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;Dictionary&lt;Int32, List&lt;Question&gt;&gt;&gt; GetQuestionAsync() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Factory.StartNew(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Generation(); GetTheme(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Request(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (AggregateException ex) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AggregateException(ex.Message, ex.InnerExceptions); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AggregateException(ex.Message, ex.InnerException); } }, TaskCreationOptions.LongRunning); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      AggregateException例外処理は、例外が発生した場合、Parallel.Forループがこのタイプのエラーを発生させるという事実に関連しているため、処理して呼び出し元に渡す必要があります。 並列ループがこの種のエラーを生成するのは論理的です。 この瞬間をより詳細に考えてみましょう。このため、.GetQuestion（）のSqlクエリを変更し、データベーステーブルに存在しないパラメーターの1つを故意に誤って示しました。 取得するもの： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">エラー</b> <div class="spoiler_text"><img src="http://s020.radikal.ru/i704/1503/5d/cedafcbfd175.png" alt="画像"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     さらに、デバッグを続行すると、合計でこの例外が4回発生しますが、これは非常に論理的です。  1つの理由に関連しているにもかかわらず、4つすべてを処理するには、何らかの方法でそれらを配置する必要があります。AggregateExceptionが適しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     例外処理は、.GetTheme（）メソッドで例外が発生した場合、例外が1つあり、それもキャッチする必要があるという事実に関連しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     呼び出しコードは次のとおりです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Button_Click</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { Stopwatch st = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stopwatch(); st.Start(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { SqlQuest = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SqlPerceptionQuestions(); collectionQuest = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> SqlQuest.GetQuestionAsync(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (AggregateException ex) { ex.ShowError(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(Exception ex) { ex.ShowError(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SqlQuest != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) SqlQuest.Dispose(); } st.Stop(); Debug.WriteLine(<span class="hljs-string"><span class="hljs-string">"  : "</span></span> + st.Elapsed.Seconds.ToString() + <span class="hljs-string"><span class="hljs-string">"  "</span></span> + st.Elapsed.Milliseconds.ToString() + <span class="hljs-string"><span class="hljs-string">" "</span></span>); Debugger.Break(); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 最後に... </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     一般に、並列バージョンのサイクルを書いたときに、データベース接続の頻繁なオープンとクローズがどれほど大きな影響を与えるかについて考えました。 フォーラムにアクセスして賢い人に尋ねると、接続プールについて学びました。 それから彼は彼自身に尋ねました、それを作成する必要があるか、それは暗黙的に作成されますか？ 私は少し実験してMySQLのドキュメントを読みました。その結果、このことは非常に成功しているという結論に達しました、接続プールです！ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">変更後のすべてのコード</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">//  <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> abstract <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SqlBase : IDisposable { protected static readonly String <span class="hljs-keyword"><span class="hljs-keyword">Connect</span></span>; protected readonly MySqlConnection SqlConnection; protected MySqlDataReader SqlDataReader; protected <span class="hljs-type"><span class="hljs-type">Boolean</span></span> disposed; static SqlBase() { <span class="hljs-keyword"><span class="hljs-keyword">Connect</span></span> = String.Format("Database={0};Data Source={1};User ID={2};Password={3};CharSet=utf8;CacheServerProperties=true", Settings.<span class="hljs-keyword"><span class="hljs-keyword">Default</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Database</span></span>, Settings.<span class="hljs-keyword"><span class="hljs-keyword">Default</span></span>.DataSource, Settings.<span class="hljs-keyword"><span class="hljs-keyword">Default</span></span>.UserId, Settings.<span class="hljs-keyword"><span class="hljs-keyword">Default</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span>); } protected SqlBase() { Stopwatch st = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Stopwatch(); st.<span class="hljs-keyword"><span class="hljs-keyword">Start</span></span>(); try { this.SqlConnection = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MySqlConnection(<span class="hljs-keyword"><span class="hljs-keyword">Connect</span></span>); this.SqlConnection.<span class="hljs-keyword"><span class="hljs-keyword">Open</span></span>(); } catch (<span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span> ex) { throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(ex.Message, ex); } st.Stop(); <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span>.WriteLine("    : " + st.Elapsed.Seconds.ToString() + "  " + st.Elapsed.Milliseconds.ToString() + " "); } ~SqlBase() { Dispose(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> Dispose() { Dispose(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); GC.SuppressFinalize(this); } protected abstract <span class="hljs-type"><span class="hljs-type">void</span></span> Dispose(<span class="hljs-type"><span class="hljs-type">Boolean</span></span> disposing); } //     <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> sealed <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SqlPerceptionQuestions : SqlBase { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> async Task&lt;<span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span>&lt;Int32, List&lt;Question&gt;&gt;&gt; GetQuestionAsync() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> await Task.Factory.StartNew(() =&gt; { try { Generation(); GetTheme(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Request(); } catch (AggregateException ex) { throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> AggregateException(ex.Message, ex.InnerExceptions); } catch (<span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span> ex) { throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> AggregateException(ex.Message, ex.InnerException); } }, TaskCreationOptions.LongRunning); } private <span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span>&lt;Int32, List&lt;Question&gt;&gt; Request() { var _collectionDictionary = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span>&lt;Int32, List&lt;Question&gt;&gt;(); var _po = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ParallelOptions { MaxDegreeOfParallelism = Environment.ProcessorCount }; Parallel.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, _po, ctr =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (var _questions = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> SqlQuestions()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ctr &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) { _collectionDictionary[ctr] = _questions.GetQuestionSmall((Int16)ctr); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _collectionDictionary[ctr] = _questions.GetQuestionGreat((Int16)ctr); } } }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _collectionDictionary; } private <span class="hljs-type"><span class="hljs-type">void</span></span> GetTheme() { } private <span class="hljs-type"><span class="hljs-type">void</span></span> Generation() { } protected override <span class="hljs-type"><span class="hljs-type">void</span></span> Dispose(<span class="hljs-type"><span class="hljs-type">bool</span></span> disposing) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!this.disposed) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SqlDataReader != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { SqlDataReader.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>(); SqlDataReader.Dispose(); } SqlConnection.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>(); SqlConnection.Dispose(); MySqlConnection.ClearAllPools(); } disposed = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } //        <span class="hljs-type"><span class="hljs-type">internal</span></span> sealed <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SqlQuestions : SqlBase { <span class="hljs-type"><span class="hljs-type">internal</span></span> List&lt;Question&gt; GetQuestionSmall(Int16 numTheme) { var _listQuestions = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;Question&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Int16 numCard = <span class="hljs-number"><span class="hljs-number">0</span></span>; numCard &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; numCard++) { _listQuestions.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(GetQuestion(numCard, numTheme)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _listQuestions; } <span class="hljs-type"><span class="hljs-type">internal</span></span> List&lt;Question&gt; GetQuestionGreat(Int16 numTheme) { var _listQuestions = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;Question&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Int16 numQuestion = <span class="hljs-number"><span class="hljs-number">0</span></span>; numQuestion &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; numQuestion++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> numCard = <span class="hljs-number"><span class="hljs-number">0</span></span>; numCard &lt; <span class="hljs-number"><span class="hljs-number">40</span></span>; numCard++) { _listQuestions.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(GetQuestion(numQuestion, numTheme, numQuestion)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _listQuestions; } private Question GetQuestion(Int16 numCard, Int16 numTheme, Int16 numQuestion = <span class="hljs-number"><span class="hljs-number">0</span></span>) { } private List&lt;String&gt; GetResponse(Int32 questions_id) { } protected override <span class="hljs-type"><span class="hljs-type">void</span></span> Dispose(<span class="hljs-type"><span class="hljs-type">bool</span></span> disposing) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!this.disposed) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SqlDataReader != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { SqlDataReader.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>(); SqlDataReader.Dispose(); } SqlConnection.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>(); SqlConnection.Dispose(); } disposed = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J252285/index.html">情報クリップまたは革新的な手術室になり得るもの</a></li>
<li><a href="../J252289/index.html">Kotan用のKrita Linuxビルド</a></li>
<li><a href="../J25229/index.html">Eye-Fiカード</a></li>
<li><a href="../J252291/index.html">フロントエンドアプリケーション用にJavaScriptまたは別の自転車を使いこなす</a></li>
<li><a href="../J252293/index.html">サイトの稼働時間を顧客に示す</a></li>
<li><a href="../J252297/index.html">プロジェクトでタイプミスを検索する</a></li>
<li><a href="../J252299/index.html">Anatomy Workshop .Net、Roslyn、CoreCLR、CoreFX、逆コンパイル、ハッキング</a></li>
<li><a href="../J2523/index.html">ヴェネツィアのプロジェクトはJoostに改名しました</a></li>
<li><a href="../J25230/index.html">なぜ人々は選挙への関心を失うのか</a></li>
<li><a href="../J252303/index.html">SibSUTIS CTF 2015：学生コンテストの実施方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯХ╣я╕П ЁЯО╝ ЁЯзХЁЯП╝ OTP рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЧреИрд░-рдЕрд╡рд░реБрджреНрдз рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдмрдирд╛рдирд╛ ЁЯЕ░я╕П ЁЯСЛЁЯП╗ ЁЯС┤ЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐  
  
 рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рдореИрдиреБрдЕрд▓ рдХреЗ рдкрд╛рдардХ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА gen_server рдФрд░ gen_fsm рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░, TCP рд╕реЙрдХреЗрдЯ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЗ рд╕рд╛рде gen_tcp рдореЙрдбреНрдпреВрд▓, рд╕рдХреНрд░рд┐рдп рдФ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>OTP рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЧреИрд░-рдЕрд╡рд░реБрджреНрдз рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдмрдирд╛рдирд╛</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/111268/"><h4>  рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рдореИрдиреБрдЕрд▓ рдХреЗ рдкрд╛рдардХ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <i>gen_server</i> рдФрд░ <i>gen_fsm рдХреЗ</i> рд╡реНрдпрд╡рд╣рд╛рд░, TCP рд╕реЙрдХреЗрдЯ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЗ рд╕рд╛рде <i>gen_tcp</i> рдореЙрдбреНрдпреВрд▓, рд╕рдХреНрд░рд┐рдп рдФрд░ рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╕реЙрдХреЗрдЯ рдореЛрдб рдФрд░ "OTP рд╕реБрдкрд░рд╡рд╛рдЗрдЬрд░" рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдУрдЯреАрдкреА рдордЬрдмреВрдд рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдЙрдкрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рднрд╛рдЧ рдореЗрдВ, рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдкреВрд░рд╛ рдХрд░рдХреЗ рдкреВрд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ <i>gen_server</i> рдФрд░ <i>gen_fsm</i> , рдЬреЛ рдУрдЯреАрдкреА рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЗ рдПрдХ рдкрджрд╛рдиреБрдХреНрд░рдо рджреНрд╡рд╛рд░рд╛ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдХрдИ рдкреНрд░рд╕рд┐рджреНрдз рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╣реИрдВред  рд╣рдо рдЬрд┐рд╕ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ, рдЙрд╕рдореЗрдВ рдПрдХ рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЬреБрдбрд╝реЗ рдЧреНрд░рд╛рд╣рдХ рдХреЗ рд▓рд┐рдП рдПрдХ рдирдИ FSM рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИред  рдпрджреНрдпрдкрд┐ <i>gen_tcp</i> рдореЙрдбреНрдпреВрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ OTP рдореЗрдВ TCP рдХрдиреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рд╣реИ, рд▓реЗрдХрд┐рди OTP рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдЧреИрд░-рдЕрд╡рд░реБрджреНрдз рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорд╛рдирдХ рд╡реНрдпрд╡рд╣рд╛рд░ рдирд╣реАрдВ рд╣реИред  рдПрдХ рдиреЙрди-рдмреНрд▓реЙрдХрд┐рдВрдЧ рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛, рд╣рдорд╛рд░рд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдФрд░ FSM рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХрд┐рд╕реА рднреА рдЕрд╡рд░реЛрдзрдХ рдХреЙрд▓ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢реЛрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░рд┐рд╡рд░реНрддрди, рдкреБрдирд░рд╛рд░рдВрдн, рдЖрджрд┐) рдХреЗ рд▓рд┐рдП рдмрд┐рдирд╛ рдЯрд╛рдЗрдордЖрдЙрдЯ рдХреЗ рдЬрд╡рд╛рдм рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ Erlang рд╕рдВрджрд░реНрдн рдореЗрдВ рд▓реЙрдХ рдХрд░рдиреЗ рдХрд╛ рдЕрд░реНрде рд╣реИ, Erlang рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд▓реЙрдХ рдХрд░рдирд╛, рди рдХрд┐ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рдХреНрд░рд┐рдпрд╛ред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЗрд╕ рдЧрд╛рдЗрдб рдореЗрдВ, рд╣рдо рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ рдХрд┐ <i>gen_server</i> рдФрд░ <i>gen_fsm</i> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЧреИрд░-рдЕрд╡рд░реБрджреНрдз рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ <i>рдЬрд╛рдП</i> , рдЬреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдУрдЯреАрдкреА рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХрд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдПрдХ рдкрд╛рдардХ рдЬреЛ рдУрдЯреАрдкреА рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдирд╣реАрдВ рд╣реИ, рдЙрд╕реЗ рд╕рд▓рд╛рд╣ рджреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдмреНрд▓реЙрдХрд┐рдВрдЧ рдХреЙрд▓ <i>gen_tcp: connect / 3</i> рдФрд░ <i>gen_tcp: acceept / 1</i> рдХрд╛ рдЙрдкрдпреЛрдЧ рдУрдЯреАрдкреА рдХреЗ рдмрд┐рдирд╛ рдХрд┐рдП <i>рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ</i> рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рд╕рд░реНрд╡рд░ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреЛ рдЖрд░реНрдорд╕реНрдЯреНрд░рд╛рдВрдЧ рдХреЗ рдЧрд╛рдЗрдб рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рд╕рд░реНрд╡рд░ рд╕рдВрд░рдЪрдирд╛ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдХреЗ рдбрд┐рдЬрд╝рд╛рдЗрди рдореЗрдВ <i>tcp_server_app</i> рдореБрдЦреНрдп рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ <i>рдкреНрд░рдХреНрд░рд┐рдпрд╛</i> рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рд░рдгрдиреАрддрд┐ <i>one_for_one</i> рдФрд░ рджреЛ рдмрдЪреНрдЪреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкрд╣рд▓рд╛ <i>рдЬреАрди_рд╕рд░реНрд╡рд░ рдХреЗ</i> рд░реВрдк рдореЗрдВ рд▓рд╛рдЧреВ рдПрдХ рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИ, рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╕реВрдЪрдирд╛рдУрдВ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдЧрд╛ред  рджреВрд╕рд░рд╛ рдПрдХ рдФрд░ <i>tcp_client_sup</i> рдПрдкреНрд▓рд┐рдХреЗрд╢рди <i>рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ</i> рд╣реИ рдФрд░ <i>рдХреНрд▓рд╛рдЗрдВрдЯ SAS</i> рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП FSM рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдФрд░ рдорд╛рдирдХ рдПрд╕рдПрдПрд╕рдПрд▓ рддреНрд░реБрдЯрд┐ рд░рд┐рдкреЛрд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╢рдЯрдбрд╛рдЙрди рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЗрд╕ рд╕рд╛рдордЧреНрд░реА рдХреА рд╕рд╛рджрдЧреА рдХреЗ рд▓рд┐рдП, рдХреНрд▓рд╛рдЗрдВрдЯ рдЕрдиреБрд░реЛрдз рд╣реИрдВрдбрд▓рд░ (tcp_echo_fsm) рдПрдХ "рдЗрдХреЛ" рд╕рд░реНрд╡рд░ рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛ рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдЕрдиреБрд░реЛрдз рд╡рд╛рдкрд╕ рдХрд░реЗрдЧрд╛ред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рдЖрд╡реЗрджрди рд╡реНрдпрд╡рд╣рд╛рд░ рдФрд░ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЕрдкрдирд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ "рд╕реБрдкрд░рд╡рд╛рдЗрдЬрд╝рд░" рдФрд░ "рдПрдкреНрд▓рд┐рдХреЗрд╢рди" рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдореЙрдбреНрдпреВрд▓ рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛ред  рдпрджреНрдпрдкрд┐ рдкрд░рдВрдкрд░рд╛рдЧрдд рд░реВрдк рд╕реЗ рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрдирдХреА рд╕рдВрдХреНрд╖рд┐рдкреНрддрддрд╛ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рд╣рдо рдЙрдиреНрд╣реЗрдВ рдПрдХ рдореЗрдВ рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдмреЛрдирд╕ рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рдо <i>get_app_env</i> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдХреИрд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП, рд╕рд╛рде рд╣реА рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рдПрдореБрд▓реЗрдЯрд░ рдХреА рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдкреИрд░рд╛рдореАрдЯрд░ред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдкрджрд╛рдиреБрдХреНрд░рдо рдХреЗ рджреЛ рд╕реНрддрд░реЛрдВ рдХреЗ рд▓рд┐рдП <i>init / 1</i> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рджреЛ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЪреВрдВрдХрд┐ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреБрдирд░рд╛рд░рдВрдн рд░рдгрдиреАрддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЙрдиреНрд╣реЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕реНрддрд░реЛрдВ рдкрд░ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЖрд╡реЗрджрди рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, <i>tcp_server_app: start / 2</i> рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди <i>рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдХреЛ</i> рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ <i>: start_link / 2</i> рдлрд╝рдВрдХреНрд╢рди, рдЬреЛ <i>tcp_server_app: init ([рдкреЛрд░реНрдЯ, рдореЙрдбреНрдпреВрд▓])</i> рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдореБрдЦреНрдп рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдмрдирд╛рддрд╛ рд╣реИред  рдпрд╣ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ <i>tcp_listener</i> рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ <i>tcp_client_sup</i> рдЪрд╛рдЗрд▓реНрдб рд╕реБрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддрд╛ рд╣реИред  <i>Init</i> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <i>рдореЙрдбреНрдпреВрд▓</i> рддрд░реНрдХ FSM рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рд╣реИрдВрдбрд▓рд░ рдХрд╛ рдирд╛рдо рд╣реИ (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, <i>tcp_echo_fsm</i> )ред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ (tcp_server_app.erl): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs julia">-<span class="hljs-keyword"><span class="hljs-keyword">module</span></span>(tcp_server_app). -author('saleyn<span class="hljs-meta"><span class="hljs-meta">@gmail</span></span>.com'). -behaviour(application). %% Internal API -<span class="hljs-keyword"><span class="hljs-keyword">export</span></span>([start_client/<span class="hljs-number"><span class="hljs-number">0</span></span>]). %% Application and Supervisor callbacks -<span class="hljs-keyword"><span class="hljs-keyword">export</span></span>([start/<span class="hljs-number"><span class="hljs-number">2</span></span>, stop/<span class="hljs-number"><span class="hljs-number">1</span></span>, init/<span class="hljs-number"><span class="hljs-number">1</span></span>]). -define(MAX_RESTART, <span class="hljs-number"><span class="hljs-number">5</span></span>). -define(MAX_TIME, <span class="hljs-number"><span class="hljs-number">60</span></span>). -define(DEF_PORT, <span class="hljs-number"><span class="hljs-number">2222</span></span>). %% A startup <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> spawning new client connection handling FSM. %% To be called by the TCP listener process. start_client() -&gt; supervisor:start_child(tcp_client_sup, []). %%---------------------------------------------------------------------- %% Application behaviour callbacks %%---------------------------------------------------------------------- start(_Type, _Args) -&gt; ListenPort = get_app_env(listen_port, ?DEF_PORT), supervisor:start_link({<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, ?MODULE}, ?MODULE, [ListenPort, tcp_echo_fsm]). stop(_S) -&gt; ok. %%---------------------------------------------------------------------- %% Supervisor behaviour callbacks %%---------------------------------------------------------------------- init([Port, <span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]) -&gt; {ok, {_SupFlags = {one_for_one, ?MAX_RESTART, ?MAX_TIME}, [ % TCP Listener { tcp_server_sup, % Id = internal id {tcp_listener,start_link,[Port,<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]}, % StartFun = {M, F, A} permanent, % Restart = permanent | transient | temporary <span class="hljs-number"><span class="hljs-number">2000</span></span>, % Shutdown = brutal_kill | int() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> | infinity worker, % <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span> = worker | supervisor [tcp_listener] % Modules = [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>] | dynamic }, % Client instance supervisor { tcp_client_sup, {supervisor,start_link,[{<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, tcp_client_sup}, ?MODULE, [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]]}, permanent, % Restart = permanent | transient | temporary infinity, % Shutdown = brutal_kill | int() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> | infinity supervisor, % <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span> = worker | supervisor [] % Modules = [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>] | dynamic } ] } }; init([<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>]) -&gt; {ok, {_SupFlags = {simple_one_for_one, ?MAX_RESTART, ?MAX_TIME}, [ % TCP Client { undefined, % Id = internal id {<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>,start_link,[]}, % StartFun = {M, F, A} temporary, % Restart = permanent | transient | temporary <span class="hljs-number"><span class="hljs-number">2000</span></span>, % Shutdown = brutal_kill | int() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> | infinity worker, % <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span> = worker | supervisor [] % Modules = [<span class="hljs-built_in"><span class="hljs-built_in">Module</span></span>] | dynamic } ] } }. %%---------------------------------------------------------------------- %% Internal functions %%---------------------------------------------------------------------- get_app_env(Opt, Default) -&gt; case application:get_env(application:get_application(), Opt) of {ok, <span class="hljs-built_in"><span class="hljs-built_in">Val</span></span>} -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Val</span></span>; _ -&gt; case init:get_argument(Opt) of [[<span class="hljs-built_in"><span class="hljs-built_in">Val</span></span> | _]] -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Val</span></span>; error -&gt; Default <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Gen_tcp</i> рдореЙрдбреНрдпреВрд▓ рдХреА рдХрдорд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ рдЕрд╡рд░реБрджреНрдз рдХрдиреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Prim_inet</i> рдореЙрдбреНрдпреВрд▓ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдиреЗ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рддрдереНрдп рджрд┐рдЦрд╛рдпрд╛ рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдХрдорд╛рдВрдб рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдкреНрд░рд▓реЗрдЦрд┐рдд рдирд╣реАрдВ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдУрдЯреАрдкреА рдЯреАрдо рдХрднреА рднреА рдЗрд╕реЗ рдмрджрд▓ рд╕рдХрддреА рд╣реИ, рд╣рдо рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░реЗрдВрдЧреЗред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ <i>gen_server рдХреЗ</i> рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХреА <i>рдЬрд╛рддреА рд╣реИ</i> ред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЯреАрд╕реАрдкреА рд╢реНрд░реЛрддрд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ (tcp_listener.erl): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs scala">-module(tcp_listener). -author(<span class="hljs-symbol"><span class="hljs-symbol">'saleyn</span></span><span class="hljs-meta"><span class="hljs-meta">@gmail</span></span>.com'). -behaviour(gen_server). %% <span class="hljs-type"><span class="hljs-type">External</span></span> <span class="hljs-type"><span class="hljs-type">API</span></span> -export([start_link/<span class="hljs-number"><span class="hljs-number">2</span></span>]). %% gen_server callbacks -export([init/<span class="hljs-number"><span class="hljs-number">1</span></span>, handle_call/<span class="hljs-number"><span class="hljs-number">3</span></span>, handle_cast/<span class="hljs-number"><span class="hljs-number">2</span></span>, handle_info/<span class="hljs-number"><span class="hljs-number">2</span></span>, terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>, code_change/<span class="hljs-number"><span class="hljs-number">3</span></span>]). -record(state, { listener, % <span class="hljs-type"><span class="hljs-type">Listening</span></span> socket acceptor, % <span class="hljs-type"><span class="hljs-type">Asynchronous</span></span> acceptor<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> internal reference module % <span class="hljs-type"><span class="hljs-type">FSM</span></span> handling module }). %%-------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Port</span></span>::integer(), <span class="hljs-type"><span class="hljs-type">Module</span></span>) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">Pid</span></span>} | {error, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} % %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Called</span></span> by a supervisor to start the listening process. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %%---------------------------------------------------------------------- start_link(<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Module</span></span>) when is_integer(<span class="hljs-type"><span class="hljs-type">Port</span></span>), is_atom(<span class="hljs-type"><span class="hljs-type">Module</span></span>) -&gt; gen_server:start_link({local, ?<span class="hljs-type"><span class="hljs-type">MODULE</span></span>}, ?<span class="hljs-type"><span class="hljs-type">MODULE</span></span>, [<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Module</span></span>], []). %%%------------------------------------------------------------------------ %%% <span class="hljs-type"><span class="hljs-type">Callback</span></span> functions from gen_server %%%------------------------------------------------------------------------ %%---------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Port</span></span>::integer()) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {ok, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% ignore | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} %% %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Called</span></span> by gen_server framework at process startup. %% <span class="hljs-type"><span class="hljs-type">Create</span></span> listening socket. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %%---------------------------------------------------------------------- init([<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Module</span></span>]) -&gt; process_flag(trap_exit, <span class="hljs-literal"><span class="hljs-literal">true</span></span>), <span class="hljs-type"><span class="hljs-type">Opts</span></span> = [binary, {packet, <span class="hljs-number"><span class="hljs-number">2</span></span>}, {reuseaddr, <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {keepalive, <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {backlog, <span class="hljs-number"><span class="hljs-number">30</span></span>}, {active, <span class="hljs-literal"><span class="hljs-literal">false</span></span>}], <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> gen_tcp:listen(<span class="hljs-type"><span class="hljs-type">Port</span></span>, <span class="hljs-type"><span class="hljs-type">Opts</span></span>) of {ok, <span class="hljs-type"><span class="hljs-type">Listen_socket</span></span>} -&gt; %%<span class="hljs-type"><span class="hljs-type">Create</span></span> first accepting process {ok, <span class="hljs-type"><span class="hljs-type">Ref</span></span>} = prim_inet:async_accept(<span class="hljs-type"><span class="hljs-type">Listen_socket</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>), {ok, #state{listener = <span class="hljs-type"><span class="hljs-type">Listen_socket</span></span>, acceptor = <span class="hljs-type"><span class="hljs-type">Ref</span></span>, module = <span class="hljs-type"><span class="hljs-type">Module</span></span>}}; {error, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} -&gt; {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} end. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Request</span></span>, <span class="hljs-type"><span class="hljs-type">From</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {reply, <span class="hljs-type"><span class="hljs-type">Reply</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {reply, <span class="hljs-type"><span class="hljs-type">Reply</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">Reply</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> synchronous server calls. <span class="hljs-type"><span class="hljs-type">If</span></span> `{stop, ...}' tuple %% is returned, the server is stopped and `terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>' is called. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- handle_call(<span class="hljs-type"><span class="hljs-type">Request</span></span>, _From, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {stop, {unknown_call, <span class="hljs-type"><span class="hljs-type">Request</span></span>}, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Msg</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt;{noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> asyncrous server calls. <span class="hljs-type"><span class="hljs-type">If</span></span> `{stop, ...}' tuple %% is returned, the server is stopped and `terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>' is called. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- handle_cast(_Msg, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Msg</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt;{noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>} | %% {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Timeout</span></span>} | %% {stop, <span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> messages sent directly to server<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> mailbox. %% <span class="hljs-type"><span class="hljs-type">If</span></span> `{stop, ...}' tuple is returned, the server is stopped and %% `terminate/<span class="hljs-number"><span class="hljs-number">2</span></span>' is called. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- handle_info({inet_async, <span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">Ref</span></span>, {ok, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>}}, #state{listener=<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, acceptor=<span class="hljs-type"><span class="hljs-type">Ref</span></span>, module=<span class="hljs-type"><span class="hljs-type">Module</span></span>} = <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> set_sockopt(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>) of ok -&gt; ok; {error, <span class="hljs-type"><span class="hljs-type">Reason</span></span>} -&gt; exit({set_sockopt, <span class="hljs-type"><span class="hljs-type">Reason</span></span>}) end, %% <span class="hljs-type"><span class="hljs-type">New</span></span> client connected - spawn a <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> process using the simple_one_for_one %% supervisor. {ok, <span class="hljs-type"><span class="hljs-type">Pid</span></span>} = tcp_server_app:start_client(), gen_tcp:controlling_process(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>, <span class="hljs-type"><span class="hljs-type">Pid</span></span>), %% <span class="hljs-type"><span class="hljs-type">Instruct</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">FSM</span></span> that it owns the socket. <span class="hljs-type"><span class="hljs-type">Module</span></span>:set_socket(<span class="hljs-type"><span class="hljs-type">Pid</span></span>, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>), %% <span class="hljs-type"><span class="hljs-type">Signal</span></span> the network driver that we are ready to accept another connection <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> prim_inet:async_accept(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>) of {ok, <span class="hljs-type"><span class="hljs-type">NewRef</span></span>} -&gt; ok; {error, <span class="hljs-type"><span class="hljs-type">NewRef</span></span>} -&gt; exit({async_accept, inet:format_error(<span class="hljs-type"><span class="hljs-type">NewRef</span></span>)}) end, {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>#state{acceptor=<span class="hljs-type"><span class="hljs-type">NewRef</span></span>}} <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> exit:<span class="hljs-type"><span class="hljs-type">Why</span></span> -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"Error in async accept: ~p.\n"</span></span>, [<span class="hljs-type"><span class="hljs-type">Why</span></span>]), {stop, <span class="hljs-type"><span class="hljs-type">Why</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>} end; handle_info({inet_async, <span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">Ref</span></span>, <span class="hljs-type"><span class="hljs-type">Error</span></span>}, #state{listener=<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, acceptor=<span class="hljs-type"><span class="hljs-type">Ref</span></span>} = <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"Error in socket acceptor: ~p.\n"</span></span>, [<span class="hljs-type"><span class="hljs-type">Error</span></span>]), {stop, <span class="hljs-type"><span class="hljs-type">Error</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>}; handle_info(_Info, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; {noreply, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">Reason</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; any %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Callback</span></span> executed on server shutdown. <span class="hljs-type"><span class="hljs-type">It</span></span> is only invoked <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> %% `process_flag(trap_exit, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)' is set by the server process. %% <span class="hljs-type"><span class="hljs-type">The</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value is ignored. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- terminate(_Reason, <span class="hljs-type"><span class="hljs-type">State</span></span>) -&gt; gen_tcp:close(<span class="hljs-type"><span class="hljs-type">State</span></span>#state.listener), ok. %%------------------------------------------------------------------------- %% <span class="hljs-meta"><span class="hljs-meta">@spec</span></span> (<span class="hljs-type"><span class="hljs-type">OldVsn</span></span>, <span class="hljs-type"><span class="hljs-type">State</span></span>, <span class="hljs-type"><span class="hljs-type">Extra</span></span>) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">NewState</span></span>} %% <span class="hljs-meta"><span class="hljs-meta">@doc</span></span> <span class="hljs-type"><span class="hljs-type">Convert</span></span> process state when code is changed. %% <span class="hljs-meta"><span class="hljs-meta">@end</span></span> %% <span class="hljs-meta"><span class="hljs-meta">@private</span></span> %%------------------------------------------------------------------------- code_change(_OldVsn, <span class="hljs-type"><span class="hljs-type">State</span></span>, _Extra) -&gt; {ok, <span class="hljs-type"><span class="hljs-type">State</span></span>}. %%%------------------------------------------------------------------------ %%% <span class="hljs-type"><span class="hljs-type">Internal</span></span> functions %%%------------------------------------------------------------------------ %% <span class="hljs-type"><span class="hljs-type">Taken</span></span> from prim_inet. <span class="hljs-type"><span class="hljs-type">We</span></span> are merely copying some socket options from the %% listening socket to the <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> client socket. set_sockopt(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, <span class="hljs-type"><span class="hljs-type">CliSocket</span></span>) -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> = inet_db:register_socket(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>, inet_tcp), <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> prim_inet:getopts(<span class="hljs-type"><span class="hljs-type">ListSock</span></span>, [active, nodelay, keepalive, delay_send, priority, tos]) of {ok, <span class="hljs-type"><span class="hljs-type">Opts</span></span>} -&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> prim_inet:setopts(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>, <span class="hljs-type"><span class="hljs-type">Opts</span></span>) of ok -&gt; ok; <span class="hljs-type"><span class="hljs-type">Error</span></span> -&gt; gen_tcp:close(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>), <span class="hljs-type"><span class="hljs-type">Error</span></span> end; <span class="hljs-type"><span class="hljs-type">Error</span></span> -&gt; gen_tcp:close(<span class="hljs-type"><span class="hljs-type">CliSocket</span></span>), <span class="hljs-type"><span class="hljs-type">Error</span></span> end.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЗрд╕ рдореЙрдбреНрдпреВрд▓ рдореЗрдВ, <i>init / 1</i> рджреЛ рдкреИрд░рд╛рдореАрдЯрд░ рд▓реЗрддрд╛ рд╣реИ - рдкреЛрд░реНрдЯ рдирдВрдмрд░ рдЬрд┐рд╕реЗ рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЦреЛрд▓рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рд╣реИрдВрдбрд▓рд░ рдХрд╛ рдирд╛рдоред  рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдлрд╝рдВрдХреНрд╢рди рд╕реЙрдХреЗрдЯ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдореЛрдб рдореЗрдВ рдЦреЛрд▓рддрд╛ рд╣реИред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдбреЗрдЯрд╛ рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдкрд░ рд╣рдорд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рдг рд╣реЛред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЗрд╕ рдХреЛрдб рдХрд╛ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╣рд┐рд╕реНрд╕рд╛ <i>prim_inet: async_accept / 2 рдХреЗ</i> рд▓рд┐рдП рдХреЙрд▓ рд╣реИред  рдЗрд╕ рдХрд╛рдо рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ <i>set_sockopt / 2</i> рдлрд╝рдВрдХреНрд╢рди рд╕реЗ OTP рдЖрдВрддрд░рд┐рдХ рдХреЛрдб рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдХреЙрдкреА рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬреЛ рд╕реЙрдХреЗрдЯ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЙрдХреЗрдЯ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдиреЗ рдХрд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЬреИрд╕реЗ рд╣реА рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЙрдХреЗрдЯ рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИ, рдиреЗрдЯрд╡рд░реНрдХ рдбреНрд░рд╛рдЗрд╡рд░ рдЗрд╕ рд╕рдВрджреЗрд╢ рдХреА рд╢реНрд░рд╡рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ <i>{inet_async, ListSock, Ref, {OK, CliSocket}}</i> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реВрдЪрд┐рдд рдХрд░реЗрдЧрд╛ред  рдлрд┐рд▓рд╣рд╛рд▓, рд╣рдо рдХреНрд▓рд╛рдЗрдВрдЯ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдФрд░ рдЗрд╕реЗ CliSocket рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд▓реЙрдиреНрдЪ рдХрд░ рд░рд╣реЗ рд╣реИрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЬрдмрдХрд┐ <i>tcp_listener</i> рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИ, <i>tcp_echo_fsm</i> рдПрдХ TCP рд╕рд░реНрд╡рд░ рдмрдирд╛рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП FSM рдареВрдВрда рд╕реЗ рдЕрдзрд┐рдХ рдХреБрдЫ рдирд╣реАрдВ рд╣реИред  рдЗрд╕ рдореЙрдбреНрдпреВрд▓ рд╕реЗ рджреЛ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдирд┐рд░реНрдпрд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП - <i>tcp_client_sup</i> рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдФрд░ рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП <i>set_socket / 2 рдХреЗ</i> рд▓рд┐рдП <i>start_link /</i> рддрд╛рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рдВрджреЗрд╢ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдмрд╛рдж рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП рдХрд┐ рдпрд╣ рд╕реЙрдХреЗрдЯ рдХрд╛ рд╕реНрд╡рд╛рдореА рдмрди рдЬрд╛рддрд╛ рд╣реИ рдФрд░ <i>{рд╕рдХреНрд░рд┐рдп, рдПрдХ рдмрд╛рд░}</i> рд╕реЗрдЯ рдХрд░рдХреЗ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред <i>{рд╕рдХреНрд░рд┐рдп, рд╕рддреНрдп}</i> рд╡рд┐рдХрд▓реНрдкред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рд╣рдо рд╢реНрд░рд╡рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдФрд░ рдЧреНрд░рд╛рд╣рдХ рдХреЗ рдмреАрдЪ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдкреИрдЯрд░реНрди рдкрд░ рдЬреЛрд░ рджреЗрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддрд╛рдХрд┐ рдЧрд▓рдд (рд╕реБрдирдиреЗ) рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЙрдирдХреЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рдг рдХреЗ рдХрд╛рд░рдг рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдВрджреЗрд╢ рд╣рд╛рдирд┐ рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗред  рд╕реЙрдХреЗрдЯ рдХрд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдХрд░рдиреЗ рд╡рд╛рд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЗрд╕реЗ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдореЛрдб рдореЗрдВ рдЦреБрд▓рд╛ рд░рдЦрддреА рд╣реИред  рдЕрдЧрд▓рд╛, рдХреНрд▓рд╛рдЗрдВрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдПрдХ рд╕реЙрдХреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреА рд╣реИ рдЬреЛ рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реЗ рд╡рд┐рдХрд▓реНрдк (рдирд┐рд╖реНрдХреНрд░рд┐рдп рдореЛрдб рд╕рд╣рд┐рдд) рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рддреА рд╣реИред  <i>рд╕реЙрдХреЗрдЯ</i> рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдХреЛ рдЧреНрд░рд╛рд╣рдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ <i>gen_tcp: control_process / 2</i> рдФрд░ <i>set_socket / 2 рдХрд╣рдХрд░</i> рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕реВрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рд╕реЙрдХреЗрдЯ рд╕реЗ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЬрдм рддрдХ рд╕реЙрдХреЗрдЯ рдХреЛ рд╕рдХреНрд░рд┐рдп рдореЛрдб рдкрд░ рд╕реЗрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддрдм рддрдХ рдкреНрд░рд╛рдкреНрдд рд╕рднреА рдбреЗрдЯрд╛ рд╕реЙрдХреЗрдЯ рдмрдлрд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЬрдм рд╕реЙрдХреЗрдЯ рдХрд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ WAIT_FOR_SOCKET рд░рд╛рдЬреНрдп рдореЗрдВ рдХреНрд▓рд╛рдЗрдВрдЯ FSM рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рд╣реЛ рдЬрд╛рддрд╛ <i>рд╣реИ,</i> рддреЛ рдиреЗрдЯрд╡рд░реНрдХ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдПрдХ рдмрд╛рд░ рдореЗрдВ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <i>{рд╕рдХреНрд░рд┐рдп, рдПрдХ рдмрд╛рд░}</i> рдореЛрдб рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдУрдЯреАрдкреА рд╕рд┐рджреНрдзрд╛рдВрдд рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛ рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдмрдирд╛рдП рд░рдЦрдиреЗ рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрддрд╛рд░ рдореЗрдВ рд╕рдВрджреЗрд╢реЛрдВ рдФрд░ рдЯреАрд╕реАрдкреА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдорд┐рд▓рд╛рдиреЗ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      FSM рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ <i>tcp_echo_fsm</i> рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ <i>рдЬрд╛рддрд╛</i> рд╣реИ, рдЬреЛ рдирд╛рдордХрд░рдг рд╕рдореНрдореЗрд▓рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  FSM рдореЗрдВ рджреЛ рд░рд╛рдЬреНрдп рд╣реЛрддреЗ рд╣реИрдВред  <i>WAIT_FOR_SOCKET</i> рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЕрд╡рд╕реНрдерд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ FSM рд╕реЙрдХреЗрдЯ рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдФрд░ <i>WAIT_FOR_DATA</i> , рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЗ рдПрдХ рдЯреАрд╕реАрдкреА рд╕рдВрджреЗрд╢ рдХреЗ рдЗрдВрддрдЬрд╛рд░ рдХреА рд╕реНрдерд┐рддрд┐ рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, FSM рдПрдХ рд╡рд┐рд╢реЗрд╖ "рдЯрд╛рдЗрдордЖрдЙрдЯ" рд╕рдВрджреЗрд╢ рднреА рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреА рдХреЛрдИ рдЧрддрд┐рд╡рд┐рдзрд┐ рдирд╣реАрдВ рд╣реИ рдФрд░ рдпрд╣ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд╕рд╛рде рдХрдиреЗрдХреНрд╢рди рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs mel">-module(tcp_echo_fsm). -author(<span class="hljs-string"><span class="hljs-string">'saleyn@gmail.com'</span></span>). -behaviour(gen_fsm). -export([start_link/<span class="hljs-number"><span class="hljs-number">0</span></span>, set_socket/<span class="hljs-number"><span class="hljs-number">2</span></span>]). %% gen_fsm callbacks -export([init/<span class="hljs-number"><span class="hljs-number">1</span></span>, handle_event/<span class="hljs-number"><span class="hljs-number">3</span></span>, handle_sync_event/<span class="hljs-number"><span class="hljs-number">4</span></span>, handle_info/<span class="hljs-number"><span class="hljs-number">3</span></span>, terminate/<span class="hljs-number"><span class="hljs-number">3</span></span>, code_change/<span class="hljs-number"><span class="hljs-number">4</span></span>]). %% FSM States -export([ <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> ]). -record(state, { socket, % client socket addr % client address }). -define(TIMEOUT, <span class="hljs-number"><span class="hljs-number">120000</span></span>). %%%------------------------------------------------------------------------ %%% API %%%------------------------------------------------------------------------ %%------------------------------------------------------------------------- %% @spec (Socket) -&gt; {ok,Pid} | ignore | {<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>,Error} %% @doc To be called by the supervisor <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> order to start the server. %% If init/<span class="hljs-number"><span class="hljs-number">1</span></span> fails with Reason, the function returns {<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>,Reason}. %% If init/<span class="hljs-number"><span class="hljs-number">1</span></span> returns {stop,Reason} or ignore, the process is %% terminated and the function returns {<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>,Reason} or ignore, %% respectively. %% @end %%------------------------------------------------------------------------- start_link() -&gt; gen_fsm:start_link(?MODULE, [], []). set_socket(Pid, Socket) when is_pid(Pid), is_port(Socket) -&gt; gen_fsm:send_event(Pid, {socket_ready, Socket}). %%%------------------------------------------------------------------------ %%% Callback functions from gen_server %%%------------------------------------------------------------------------ %%------------------------------------------------------------------------- %% Func: init/<span class="hljs-number"><span class="hljs-number">1</span></span> %% Returns: {ok, StateName, StateData} | %% {ok, StateName, StateData, Timeout} | %% ignore | %% {stop, StopReason} %% @private %%------------------------------------------------------------------------- init([]) -&gt; process_flag(trap_exit, true), {ok, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>, #state{}}. %%------------------------------------------------------------------------- %% Func: StateName/<span class="hljs-number"><span class="hljs-number">2</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} %% @private %%------------------------------------------------------------------------- <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>({socket_ready, Socket}, State) when is_port(Socket) -&gt; % Now we own the socket inet:setopts(Socket, [{active, once}, {packet, <span class="hljs-number"><span class="hljs-number">2</span></span>}, binary]), {ok, {IP, _Port}} = inet:peername(Socket), {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>, State#state{socket=Socket, addr=IP}, ?TIMEOUT}; <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>(Other, State) -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"State: 'WAIT_FOR_SOCKET'. Unexpected message: ~p\n"</span></span>, [Other]), %% Allow to receive async messages {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_SOCKET'</span></span>, State}. %% Notification <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> coming from client <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>({data, Data}, #state{socket=S} = State) -&gt; ok = gen_tcp:send(S, Data), {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>, State, ?TIMEOUT}; <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>(timeout, State) -&gt; error_logger:error_msg(<span class="hljs-string"><span class="hljs-string">"~p Client connection timeout - closing.\n"</span></span>, [self()]), {stop, normal, State}; <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>(Data, State) -&gt; io:<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>(<span class="hljs-string"><span class="hljs-string">"~p Ignoring data: ~p\n"</span></span>, [self(), Data]), {next_state, <span class="hljs-string"><span class="hljs-string">'WAIT_FOR_DATA'</span></span>, State, ?TIMEOUT}. %%------------------------------------------------------------------------- %% Func: handle_event/<span class="hljs-number"><span class="hljs-number">3</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} %% @private %%------------------------------------------------------------------------- handle_event(Event, StateName, StateData) -&gt; {stop, {StateName, undefined_event, Event}, StateData}. %%------------------------------------------------------------------------- %% Func: handle_sync_event/<span class="hljs-number"><span class="hljs-number">4</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {reply, Reply, NextStateName, NextStateData} | %% {reply, Reply, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} | %% {stop, Reason, Reply, NewStateData} %% @private %%------------------------------------------------------------------------- handle_sync_event(Event, _From, StateName, StateData) -&gt; {stop, {StateName, undefined_event, Event}, StateData}. %%------------------------------------------------------------------------- %% Func: handle_info/<span class="hljs-number"><span class="hljs-number">3</span></span> %% Returns: {next_state, NextStateName, NextStateData} | %% {next_state, NextStateName, NextStateData, Timeout} | %% {stop, Reason, NewStateData} %% @private %%------------------------------------------------------------------------- handle_info({tcp, Socket, Bin}, StateName, #state{socket=Socket} = StateData) -&gt; % Flow <span class="hljs-keyword"><span class="hljs-keyword">control</span></span>: enable forwarding of next TCP message inet:setopts(Socket, [{active, once}]), ?MODULE:StateName({data, Bin}, StateData); handle_info({tcp_closed, Socket}, _StateName, #state{socket=Socket, addr=Addr} = StateData) -&gt; error_logger:info_msg(<span class="hljs-string"><span class="hljs-string">"~p Client ~p disconnected.\n"</span></span>, [self(), Addr]), {stop, normal, StateData}; handle_info(_Info, StateName, StateData) -&gt; {noreply, StateName, StateData}. %%------------------------------------------------------------------------- %% Func: terminate/<span class="hljs-number"><span class="hljs-number">3</span></span> %% Purpose: Shutdown the fsm %% Returns: any %% @private %%------------------------------------------------------------------------- terminate(_Reason, _StateName, #state{socket=Socket}) -&gt; (<span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> gen_tcp:close(Socket)), ok. %%------------------------------------------------------------------------- %% Func: code_change/<span class="hljs-number"><span class="hljs-number">4</span></span> %% Purpose: Convert process state when code is changed %% Returns: {ok, NewState, NewStateData} %% @private %%------------------------------------------------------------------------- code_change(_OldVsn, StateName, StateData, _Extra) -&gt; {ok, StateName, StateData}.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рдЖрд╡реЗрджрди рд╡рд┐рд╡рд░рдг </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OTP рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╣рд┐рд╕реНрд╕рд╛ рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдирд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдирд╛рдо, рд╕рдВрд╕реНрдХрд░рдг, рдкреНрд░рд╛рд░рдВрдн рдореЙрдбреНрдпреВрд▓ рдФрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЖрд╡реЗрджрди рдлрд╝рд╛рдЗрд▓ (tcp_server.app): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs mel">{application, tcp_server, [ {description, <span class="hljs-string"><span class="hljs-string">"Demo TCP server"</span></span>}, {vsn, <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>}, {id, <span class="hljs-string"><span class="hljs-string">"tcp_server"</span></span>}, {modules, [tcp_listener, tcp_echo_fsm]}, {registered, [tcp_server_sup, tcp_listener]}, {applications, [kernel, stdlib]}, %% %% mod: Specify the module name to start the application, plus args %% {mod, {tcp_server_app, []}}, {<span class="hljs-keyword"><span class="hljs-keyword">env</span></span>, []} ] }.</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рд╕рдВрдХрд▓рди </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЗрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдирд┐рдореНрди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдПрдВ: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs coffeescript">.<span class="hljs-regexp"><span class="hljs-regexp">/tcp_server ./tcp_server/ebin/</span></span> ./tcp_server/ebin/tcp_server.app ./tcp_server/src/tcp_server_app.erl ./tcp_server/src/tcp_listener.erl ./tcp_server/src/tcp_echo_fsm.erl</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs ruby">$ cd tcp_server/src $ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tcp*.erl ; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> erlc +debug_info -o ../ebin $f</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рд▓рд╛рдВрдЪ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рд╣рдо рдПрд╕рдПрдПрд╕рдПрд▓ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдПрдХ рдПрд░рд▓рд╛рдВрдЧ рд╢реЗрд▓ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╣рдо рдЕрдкрдиреЗ рдЖрд╡реЗрджрди рдХреЗ рд▓рд┐рдП рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ рддреНрд░реБрдЯрд┐ рд░рд┐рдкреЛрд░реНрдЯ рдХреА рд╕реНрдерд┐рддрд┐ рджреЗрдЦ рд╕рдХреЗрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЗ рдкрджрд╛рдиреБрдХреНрд░рдо рдХреЛ рдиреЗрддреНрд░рд╣реАрди рд░реВрдк рд╕реЗ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП appmon рдРрдк рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs dos">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ebin $ erl -boot start_sasl ... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; appmon:<span class="hljs-built_in"><span class="hljs-built_in">start</span></span>(). {ok,&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">44</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;} <span class="hljs-number"><span class="hljs-number">2</span></span>&gt; application:<span class="hljs-built_in"><span class="hljs-built_in">start</span></span>(tcp_server). ok</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдЕрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реБрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рдХреЗ рдкрджрд╛рдиреБрдХреНрд░рдо рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП appmon рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ <i>tcp_server</i> рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">3&gt; </span></span>{ok,S} = gen_tcp:connect({<span class="hljs-number"><span class="hljs-number">127</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},<span class="hljs-number"><span class="hljs-number">2222</span></span>,[{packet,<span class="hljs-number"><span class="hljs-number">2</span></span>}]). {ok,#Port&lt;<span class="hljs-number"><span class="hljs-number">0.150</span></span>&gt;}</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рд╣рдордиреЗ рдЕрднреА рдПрдХ рдирдпрд╛ рдЗрдХреЛ рд╕рд░реНрд╡рд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рд╢реБрд░реВ рдХрд┐рдпрд╛ рд╣реИред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">4&gt; </span></span>gen_tcp:send(S,&lt;&lt;<span class="hljs-string"><span class="hljs-string">"hello"</span></span>&gt;&gt;). ok <span class="hljs-number"><span class="hljs-number">5</span></span>&gt; f(M), receive M -&gt; M end. {tcp,#Port&lt;<span class="hljs-number"><span class="hljs-number">0.150</span></span>&gt;,<span class="hljs-string"><span class="hljs-string">"hello"</span></span>}</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рд╣рдордиреЗ рдЬрд╛рдБрдЪ рдХреА рдХрд┐ рдЗрдХреЛ рд╕рд░реНрд╡рд░ рдЕрдкреЗрдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рдерд╛ред  рдЕрдм рдЪрд▓реЛ рд╕рд░реНрд╡рд░ рдкрд░ рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рдХреЛ "рдбрд╛рд▓рдиреЗ" рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ рдФрд░ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдХреА рдкреАрдврд╝реА рдХреЛ рджреЗрдЦреЗрдВред 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs erlang-repl"><span class="hljs-meta"><span class="hljs-meta">6&gt; </span></span>[{_,Pid,_,_}] = supervisor:which_children(tcp_client_sup). [{undefined,&lt;<span class="hljs-number"><span class="hljs-number">0.64</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,worker,[]}] <span class="hljs-number"><span class="hljs-number">7</span></span>&gt; exit(Pid,kill). true =SUPERVISOR REPORT==== <span class="hljs-number"><span class="hljs-number">31</span></span>-Jul-<span class="hljs-number"><span class="hljs-number">2007</span></span>::<span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span> === Supervisor: {local,tcp_client_sup} Context: child_terminated Reason: killed Offender: [{pid,&lt;<span class="hljs-number"><span class="hljs-number">0.77</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;}, {name,undefined}, {mfa,{tcp_echo_fsm,start_link,[]}}, {restart_type,temporary}, {shutdown,<span class="hljs-number"><span class="hljs-number">2000</span></span>}, {child_type,worker}]</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рдЖрдк рд╕рд░реНрд╡рд░ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдХрдиреЗрдХреНрд╢рди рдХреЗ рд╕рд╛рде рд▓реЛрдб рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕реАрдорд╛ рдХреЗ рдмрд╛рдж рд╕реБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирдП рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреА рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдкрдХреЛ рдПрдХ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"too many open files"</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  рдирд┐рд╖реНрдХрд░реНрд╖ </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OTP рдЧреИрд░-рдЕрд╡рд░реБрджреНрдз рдЯреАрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрдбрд┐рдВрдЧ рдмреНрд▓реЙрдХ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдЧрд╛рдЗрдб рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдорд╛рдирдХ рдУрдЯреАрдкреА рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╕рд░рд▓ рд╕рд░реНрд╡рд░ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдПред </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../In111263/index.html">рдкрд╛рдпрдерди рдореЗрдВ рдЖрдИрд╕реАрдХреНрдпреВ рдмреЙрдЯ</a></li>
<li><a href="../In111264/index.html">Drupal Forms APIред рднрд╛рдЧ 1 - рджреНрд░реБрдкрд╛рд▓ 6 рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../In111265/index.html">рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЗ рдЯреАрдо рд╡рд┐рдХрд╛рд╕ рдХрд╛ рд╕рдВрдЧрдарди</a></li>
<li><a href="../In111266/index.html">Ptrace рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓</a></li>
<li><a href="../In111267/index.html">Zappos.com: рдЬреВрддреЗ рдкрд░ $ 1 рдмрд┐рд▓рд┐рдпрди рдХреИрд╕реЗ рдХрд░реЗрдВ?</a></li>
<li><a href="../In11127/index.html">rozrobotka</a></li>
<li><a href="../In111270/index.html">Google рдбреЙрдХреНрд╕ рдореЗрдВ рдПрдирд┐рдореЗрд╢рди</a></li>
<li><a href="../In111271/index.html">рд╡рд┐рдХрд╕рд┐рдд рд╕реНрдкрд░реНрд╢ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдмрд╛рдЬрд╛рд░ рдХреЗ рд▓рд┐рдП рд▓реЗрдХреНрд╕рд┐рдХрди</a></li>
<li><a href="../In111272/index.html">рдкреЛрд╕реНрдЯ рдорд╢реАрди рдкрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ</a></li>
<li><a href="../In111274/index.html">рдХреНрд▓рд╛рдЙрдб рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ, рдмреЙрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд╡рд▓реЛрдХрди рдпрд╛ рдПрдХ рд▓реЗрдЦ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
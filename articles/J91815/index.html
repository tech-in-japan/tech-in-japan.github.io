<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚱 👨🏿‍🤝‍👨🏻 🔄 Android用のHabraKarma ex-CarmaWidgetウィジェットを作成します 🧜🏼 👨‍👩‍👧‍👧 🤪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="昨日、スマートフォンのデスクトップにカルマを表示するウィジェットであるCarmaWidgetを更新しました。 今日は、ウィジェットの作成方法について説明します。 
  
 
  
  
  
 
  
 原則は次のとおりです。 
  
 

- クラス-後者がデスクトップに追加されたときに起動するウ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Android用のHabraKarma ex-CarmaWidgetウィジェットを作成します</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/91815/"> 昨日、スマートフォンのデスクトップにカルマを表示するウィジェットであるCarmaWidgetを更新しました。 今日は、ウィジェットの作成方法について説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://nixan.org/habr/habracarma/device1.png" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     原則は次のとおりです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> クラス-後者がデスクトップに追加されたときに起動するウィジェットの設定。 </li><li> クラスは、すべてのタイマーが存在するウィジェットの情報プロバイダーです。 </li><li> データベース-ユーザー情報を保存します。 </li><li> ウィジェットとカスタマイザーの2つのレイアウト。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     実際に行きましょう！ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> データベースを操作するためのクラス。 </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このクラスでは、列、テーブル、ベース自体のすべての名前を取得します。 テーブルを作成、削除、必要に応じてアップグレードするメソッド。 また、1つのレシーバーを実装しています。  AndroidのベースはSQLiteであるため、複数のスレッドから同じデータベースに同時に書き込むことはできません。 私はこれを回避しましたが、すべての記録呼び出しのコストがインターフェイススレッドの外部から開始されるようになりました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     クラスはDatabasHelperと呼ばれ、SQLiteOpenHelperを継承します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     すべての定数を設定します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 public static String DATABASE_NAME = "carmawidget.db"
	 private static int DATABASE_VERSION = 1;
	 public static String TABLE_NAME = "users";
	
	 public static String USERS_ID = "_id";
	 public static String USERS_NAME = "name";
	 public static String USERS_KARMA = "karma";
	 public static String USERS_RATE = "rate";
	 public static String USERS_UPDATE = "_update";
	 public static String USERS_ICON = "icon";
	 public static String USERS_ICON_URL = "icon_url";
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  DATABASE_NAME-データベース名 </li><li>  DATABASE_VERSION-データベースのバージョン。 この値が変更されると、onUpdate（）メソッドが呼び出されます。 </li><li>  TABLE_NAME-テーブル名 </li><li>  USERS_ID-テーブルの最初の列。 これには、ユーザーの一意の識別子が含まれ、これは本質的にウィジェットの識別子でもあります。 </li><li>  USERS_KARMA-カルマ。 </li><li>  USERS_RATE-評価。 </li><li>  USERS_UPDATE-更新レート。 </li><li>  USERS_ICON_URL-ユーザーアイコンへのリンク。 更新時に変更される場合は、アイコン自体を更新します。 </li><li>  USERS_ICON-アイコン。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     伝統的に、私はかむ） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i><b>USERS_ID-</b>ユーザーがウィジェットを追加すると、識別子がユーザーに割り当てられ、同じタイプの別のウィジェットが追加された場合、この識別子を使用して特定のウィジェットにアクセスできます。</i>  <i>おそらく今はまだあまり明確ではなく、もう少し詳細になります。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i><b>USERS_ICONおよびUSERS_ICON_URL-カスタマイザーにチェックボックス</b>があります。</i>  <i>チェックされている場合、アイコンをロードし、ロードされていない場合は、両方の列のデータベースにNULLを入れます。</i>  <i>次に、更新時にデータベースUSERS_ICON_URLから読み取り、それがNULLでない場合、ユーザーは設定でそれをダウンロードすることを示し、サーバーから受信したことを確認し、一致しないかUSERS_ICONにNULLが含まれている場合、実際にアイコンを更新します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     コンストラクターを定義します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 public DatabaseHelper（コンテキストコンテキスト）{
		 super（コンテキスト、DATABASE_NAME、null、DATABASE_VERSION）;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ベースは1つしかないので、少し簡略化しました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     テーブルを作成するSQLクエリを生成するメソッドを作成しています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	プライベート文字列usersCreate（）
	 {
		 StringBuilder result = new StringBuilder（ "CREATE TABLE"）;
		 result.append（TABLE_NAME）;
		 result.append（ "（"）;
		 result.append（USERS_ID）;
		 result.append（ "INTEGER PRIMARY KEY、"）;
		 result.append（USERS_NAME）;
		 result.append（ "TEXT NOT NULL、"）;
		 result.append（USERS_KARMA）;
		 result.append（ "TEXT DEFAULT '0,00'、"）;
		 result.append（USERS_RATE）;
		 result.append（ "TEXT DEFAULT '0,00'、"）;
		 result.append（USERS_ICON_URL）;
		 result.append（ "TEXT、"）;
		 result.append（USERS_UPDATE）;
		 result.append（ "INTEGER DEFAULT '0'、"）;
		 result.append（USERS_ICON）;
		 result.append（ "BLOB）;"）;
		 return result.toString（）;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ベースを作成するメソッド。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 @Override
	 public void onCreate（SQLiteDatabase db）{
		 db.execSQL（usersCreate（））;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     テーブルのバージョンが変更されたときに呼び出されるonUpgradeメソッド。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 @Override
	 public void onUpgrade（SQLiteDatabase db、int oldVersion、int newVersion）{
		 db.execSQL（ "DROP TABLE IF EXISTS" + TABLE_NAME）;
		 onCreate（db）;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>たとえば、開発プロセス中に、列を追加する必要がありました。</i>  <i>リクエストジェネレータを修正し、バージョンを増やします。</i>  <i>ベースが新たに作成されます。</i>  <i>しかし、これが最も簡単な方法です。良い方法では、削除せずに追加する必要があります。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     書き込むベースを返すメソッド。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 @Override
	パブリックSQLiteDatabase getWritableDatabase（）
	 {
		 SQLiteDatabase db = null;
		 while（db == null）
		 {
			試してみる
			 {
				 db = super.getWritableDatabase（）;	
			 }
			 catch（SQLiteException e）
			 {
				 {
					 Thread.sleep（500）;
				 } catch（InterruptedException e1）{
				 }
			 }	
		 }
		 return db;
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>すぐに予約しますが、解決策は正しくないかもしれませんが、うまくいくようです。</i>  <i>記録にアクセスする方法がない場合は、0.5秒待ってから再試行します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Habraサーバーを操作するためのクラスを作成します。 </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     定数を設定します 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 private static String USER_URL = "http：// &lt;ユーザー名&gt; .habrahabr.ru /";
	 private static String API_URL = "http://habrahabr.ru/api/profile/";
	 public static String RESULT_OK = "ok";
	 public static String RESULT_SERVER = "server";
	 public static String RESULT_USER_NOT_FOUND = "not_found";
	 public static String RESULT_NETWORK = "network";
	
	 public static String RESULT_NO_USERPIC = "http://habrahabr.ru/i/avatars/stub-user-middle.gif";
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i><b>RESULT_NO_USERPIC-</b>これは、ハブの「アバターなし」アイコンへのリンクです。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     カルマと評価を取得する方法。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> public String [] getStats（String username）
	 {
		 String [] result = new String [] {"0.00"、 "0.00"、RESULT_OK};
		文字列url = API_URL + Uri.encode（ユーザー名）;
		文字列proxyHost = android.net.Proxy.getDefaultHost（）;
		 int proxyPort = android.net.Proxy.getDefaultPort（）;
		 HttpClient httpClient = new DefaultHttpClient（）;
		 if（proxyPort&gt; 0）
		 {
			 HttpHost proxy = new HttpHost（proxyHost、proxyPort）;
			 httpClient.getParams（）。setParameter（ConnRoutePNames.DEFAULT_PROXY、プロキシ）;
		 }
		 HttpGet httpGet = new HttpGet（url）;
		 {
			 HttpResponse response = httpClient.execute（httpGet）;
			 if（response.getStatusLine（）。getStatusCode（）== HttpStatus.SC_OK）
			 {
				 BufferedReader reader =新しいBufferedReader（新しいInputStreamReader（response.getEntity（）。GetContent（）））;
				 StringBuilder sb = new StringBuilder（）;
				文字列line = null;
				 while（（line = reader.readLine（））！= null）{
					 sb.append（line + System.getProperty（ "line.separator"））;
				 }
				文字列answerInputString = sb.toString（）;
				 if（answerInputString.contains（ "&lt;habrauser&gt;"））
				 {
					 if（answerInputString.contains（ "&lt;error&gt; 404 &lt;/ error&gt;"））
					 {
						結果[2] = RESULT_USER_NOT_FOUND;
					 }
					他に
					 {
						 result [0] = answerInputString.substring（answerInputString.indexOf（ "&lt;karma&gt;"）+ "&lt;karma&gt;" .length（）、answerInputString.indexOf（ "&lt;/ karma&gt;"））;
						 result [1] = answerInputString.substring（answerInputString.indexOf（ "&lt;rating&gt;"）+ "&lt;rating&gt;" .length（）、answerInputString.indexOf（ "&lt;/ rating&gt;"））;
						結果[0] =フォーマッタ（結果[0]）;
						結果[1] =フォーマッタ（結果[1]）;
					 }
				 }
				他に
				 {
					結果[2] = RESULT_SERVER;
				 }
			 }
			他に
			 {
				結果[2] = RESULT_SERVER;
			 }
		 } catch（例外e）{
			結果[2] = RESULT_NETWORK;
		 }
		結果を返す;	
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i><b>result-</b>メソッドの出力値、3行の配列。1行目はカルマ、2行目は評価、3行目はエラーメッセージです。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Habraのapiはカルマと評価、たとえば12を返すことができるので、フォーム12.00に持ってくる必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	プライベート文字列フォーマッタ（文字列文字列）
	 {
		 string = string.replace（ "。"、 "、"）;
		 if（！string.contains（ "、"））
		 {
			 string = string + "、00";
		 }
		 for（int i = 0; i &lt;2-string.split（ "、"）[1] .length（）; i ++）
		 {
			 string = string + "0";
		 }
		戻り文字列。
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     リンクアイコンを取得します。  APIにはこれがありません。ユーザープロファイルを解析する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 public String getUserpicUrl（ストリングユーザー名）
	 {
		文字列の結果= "";
		結果= RESULT_NO_USERPIC;
		文字列url = USER_URL.replace（ "&lt;ユーザー名&gt;"、ユーザー名）;
		文字列proxyHost = android.net.Proxy.getDefaultHost（）;
		 int proxyPort = android.net.Proxy.getDefaultPort（）;
		 HttpClient httpClient = new DefaultHttpClient（）;
		 if（proxyPort&gt; 0）
		 {
			 HttpHost proxy = new HttpHost（proxyHost、proxyPort）;
			 httpClient.getParams（）。setParameter（ConnRoutePNames.DEFAULT_PROXY、プロキシ）;
		 }
		 HttpGet httpGet = new HttpGet（url）;
		 {
			 HttpResponse response = httpClient.execute（httpGet）;
			 if（response.getStatusLine（）。getStatusCode（）== HttpStatus.SC_OK）
			 {
				 BufferedReader reader =新しいBufferedReader（新しいInputStreamReader（response.getEntity（）。GetContent（）））;
				 StringBuilder sb = new StringBuilder（）;
				文字列line = null;
				 while（（line = reader.readLine（））！= null）{
					 sb.append（line + System.getProperty（ "line.separator"））;
				 }
				文字列の答え= sb.toString（）;
				結果= RESULT_NO_USERPIC;
				 answer = answer.substring（answer.indexOf（ "&lt;h1 class = \" habrauserava \ "&gt;"））;
				 answer = answer.substring（answer.indexOf（ "&lt;img src = \" "）+" &lt;img src = \ ""。length（）、answer.indexOf（ "\" alt "））;
				結果=回答;
			 }
		 } catch（例外e）
		 {
			
		 }
		結果を返す;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして実際にアイコンをロードします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	パブリックビットマップimageDownloader（文字列url）
	 {
		ビットマップ結果= null;
		
		文字列proxyHost = android.net.Proxy.getDefaultHost（）;
		 int proxyPort = android.net.Proxy.getDefaultPort（）;
		
		 {
			 URL bitmapUrl =新しいURL（url）;
			 HttpURLConnection接続。
			 if（proxyPort&gt; 0）
			 {
				 InetSocketAddress proxyAddr =新しいInetSocketAddress（proxyHost、proxyPort）;
				プロキシproxy = new Proxy（Proxy.Type.HTTP、proxyAddr）;
				 connection =（HttpURLConnection）bitmapUrl.openConnection（プロキシ）;
			 }
			他に
			 {
				 connection =（HttpURLConnection）bitmapUrl.openConnection（）;					
			 }
			 connection.setDoInput（true）;
			 connection.connect（）;
			 InputStream inputStream = connection.getInputStream（）;
			 result = BitmapFactory.decodeStream（inputStream）;
		 }
		 catch（例外e）
		 {
			
		 }
		結果を返す;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2> ウィジェットカスタマイザー </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://nixan.org/habr/habracarma/device2.png" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Configクラスは通常のアクティビティですが、作業の結果をウィジェットに返す必要があります。 つまり、ウィジェットを追加するためにクリックすると、このカスタマイザーが表示され、正しく機能した場合、結果を肯定として設定し、たとえば、ユーザーが見つかった場合、これについて通知し、ユーザーは再試行または閉じる。 したがって、データ入力が成功せずに終了すると、結果がキャンセルされたと設定されます。 実際には少し低くなります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>パブリッククラスConfigはActivity {を拡張します
     / **アクティビティが最初に作成されたときに呼び出されます。  * /
	コンテキストコンテキスト。
     Thread updaterThread = new Thread（）;
     ProgressDialog progressDialog;
     @Override
     public void onCreate（バンドルsavedInstanceState）{
         super.onCreate（savedInstanceState）;
         setContentView（R.layout.main）;
        コンテキスト=これ;
         setResult（RESULT_CANCELED）;
         progressDialog = new ProgressDialog（this）;
         progressDialog.setMessage（getApplicationContext（）。getResources（）。getString（R.string.loading））;
        ボタン準備完了=（ボタン）findViewById（R.id.submit）;
         ready.setOnClickListener（新しいOnClickListener（）{

			 @Override
			 public void onClick（View v）{
				 // TODO自動生成メソッドスタブ
				 if（updaterThread.getState（）== State.NEW || updaterThread.getState（）== State.TERMINATED）
				 {
					 updaterThread = new Thread（アップデーター）;
					 updaterThread.start（）;
					 progressDialog.show（）;
				 }
			 }
        
         }）;
     }
 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>インターフェイスを公開し、[完了]ボタンをクリックするためのハンドラーを記述します。</i>  <i>setResult（RESULT_CANCELLED）-アクションの結果をキャンセル済みとして最初に設定するだけです。</i>  <i>すべてがうまくいけば、それを変更します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ここにRunnable updaterを追加します-初期データのロードが行われる別のストリーム。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>    Runnable updater = new Runnable（）{@Override public void run（）{// TODO Auto-generated method stub String username =（（EditText）findViewById（R.id.username））。GetText（）.ToString（）;  int update =（（Spinner）findViewById（R.id.update_value））。getSelectedItemPosition（）;  boolean picupdate =（（CheckBox）findViewById（R.id.load_pic））。isChecked（）; 文字列[]値=新しいHabrahabrAPI（）。GetStats（ユーザー名）;  if（値[2] .equals（HabrahabrAPI.RESULT_OK））{Intent intent = getIntent（）;  if（intent.getExtras（）！= null）{int appWidgetId = intent.getExtras（）。getInt（AppWidgetManager.EXTRA_APPWIDGET_ID、AppWidgetManager.INVALID_APPWIDGET_ID）;  if（appWidgetId！= AppWidgetManager.INVALID_APPWIDGET_ID）{ContentValues contentValues = new ContentValues（）;  contentValues.put（DatabaseHelper.USERS_ID、appWidgetId）;  contentValues.put（DatabaseHelper.USERS_NAME、ユーザー名）;  contentValues.put（DatabaseHelper.USERS_KARMA、値[0]）;  contentValues.put（DatabaseHelper.USERS_RATE、値[1]）;  contentValues.put（DatabaseHelper.USERS_UPDATE、更新）;  AppWidgetManager appWidgetManager = AppWidgetManager.getInstance（getApplicationContext（））;  RemoteViewsビュー=新しいRemoteViews（getApplicationContext（）。GetPackageName（）、R.layout.widget）;  if（picupdate == true）{String icon = new HabrahabrAPI（）。getUserpicUrl（username）;  contentValues.put（DatabaseHelper.USERS_ICON_URL、アイコン）;  if（！icon.equals（HabrahabrAPI.RESULT_NO_USERPIC））{Bitmap userpic = new HabrahabrAPI（）。imageDownloader（icon）;  if（userpic！= null）{ByteArrayOutputStream baos = new ByteArrayOutputStream（）;  userpic.compress（Bitmap.CompressFormat.PNG、100、baos）;  contentValues.put（DatabaseHelper.USERS_ICON、baos.toByteArray（））;  views.setBitmap（R.id.icon、 "setImageBitmap"、userpic）;  }} else {views.setBitmap（R.id.icon、 "setImageBitmap"、BitmapFactory.decodeResource（getApplicationContext（）。getResources（）、R.drawable.userpic））;  ByteArrayOutputStream baos = new ByteArrayOutputStream（）;  BitmapFactory.decodeResource（getApplicationContext（）。GetResources（）、R.drawable.userpic）.compress（Bitmap.CompressFormat.PNG、100、baos）;  contentValues.put（DatabaseHelper.USERS_ICON、baos.toByteArray（））;  }} else {contentValues.putNull（DatabaseHelper.USERS_ICON）;  contentValues.putNull（DatabaseHelper.USERS_ICON_URL）;  } SQLiteDatabase db = new DatabaseHelper（getApplicationContext（））。GetWritableDatabase（）;  db.insert（DatabaseHelper.TABLE_NAME、null、contentValues）;  db.close（）;  contentValues.clear（）;  views.setTextViewText（R.id.karma、値[0]）;  views.setTextViewText（R.id.rating、値[1]）;  appWidgetManager.updateAppWidget（appWidgetId、ビュー）;  Intent resultValue = new Intent（）;  resultValue.putExtra（AppWidgetManager.EXTRA_APPWIDGET_ID、appWidgetId）;  setResult（RESULT_OK、resultValue）; インテントupdaterIntent = new Intent（）;  updaterIntent.setAction（AppWidgetManager.ACTION_APPWIDGET_UPDATE）;  updaterIntent.putExtra（AppWidgetManager.EXTRA_APPWIDGET_IDS、新しいint [] {appWidgetId}）;  updaterIntent.setData（Uri.withAppendedPath（Uri.parse（Widget.URI_SCHEME + "：// widget / id /"）、String.valueOf（appWidgetId）））;  PendingIntent pendingIntent = PendingIntent.getBroadcast（getApplicationContext（）、0、updaterIntent、PendingIntent.FLAG_UPDATE_CURRENT）;  AlarmManager alarmManager =（AlarmManager）getApplicationContext（）。GetSystemService（Context.ALARM_SERVICE）;  alarmManager.setRepeating（AlarmManager.ELAPSED_REALTIME、SystemClock.elapsedRealtime（）+（Widget.updatePeriodsMinutes [更新] * 60000）、Widget.updatePeriodsMinutes [更新] * 60000、pendingIntent）;  }}} Bundle data = new Bundle（）;  data.putString（ "RESULT"、値[2]）; メッセージmessage = new Message（）;  message.setData（データ）;  handler.sendMessage（メッセージ）;  }}; </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>まず、インターフェイス要素から入力を取得します。</i>  <i>そして、％username％のカルマをロードします。</i>  <i>次に、インテントからウィジェット識別子を取得します。</i>  <i>結果をデータベースに入れるために、ContentValuesクラスの変数を作成します。</i>  <i>次に、RemoteViewsを使用して、ウィジェットビューを更新します。ウィジェットビューの構成を行い、この内容をデータベースに配置します。</i>  <i>最後に、更新を行うIntent updaterIntentを作成します。</i>  <i>Androidは、setData（Uri）データをこのインテントに追加しなかった場合、そのようなインテントが既に存在していると見なし、それを再び使用するように機能します。</i>  <i>setDataは一意になるようにのみ作成されます。</i> <i>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </i>  <i>AlarmManagerを使用して、次の更新の時間を設定します。</i>  <i>一般に、devGuideは、ウィジェットプロバイダーの説明を通じて更新時間を使用するように指示します。詳細については、以下を参照してください。</i>  <i>ただし、これにより、異なる更新時間を設定することはできません。</i>  <i>TimerTaskを使用できますが、画面をオンにすると、デバイスの電源がオフになっている間にすぐに更新が開始されます。</i>  <i>この点で、AlarmManagerは非常に便利です。デバイスが停止している間は更新されませんが、この間に少なくとも1つの更新が行われた場合、起動後に1回呼び出されます。</i> <i>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </i>  <i>この実行可能ファイルの最後に、結果を処理するハンドラーを呼び出して、エラーメッセージを含むgetStats（username）メソッドから3行目を渡します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     結果ハンドラ。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>     Handler handler = new Handler（）{
    	
    	 @Override
    	 public void handleMessage（メッセージメッセージ）
    	 {
    		 progressDialog.dismiss（）;
			 AlertDialog.Builder builder = new AlertDialog.Builder（コンテキスト）;
			 builder.setIcon（android.R.drawable.ic_dialog_alert）;
			 builder.setPositiveButton（R.string.ok、新しいDialogInterface.OnClickListener（）{

				 @Override
				 public void onClick（DialogInterfaceダイアログ、int which）{
					 // TODO自動生成メソッドスタブ
					 dialog.dismiss（）;
				 }
				
			 }）;
    		 String result = message.getData（）。GetString（ "RESULT"）;
    		 if（result.equals（HabrahabrAPI.RESULT_NETWORK））
    		 {
    			 builder.setTitle（R.string.error_network）;
    			 builder.setMessage（R.string.try_later）;
    		 }
    		 if（result.equals（HabrahabrAPI.RESULT_USER_NOT_FOUND））
    		 {
    			 builder.setTitle（R.string.error_user）;
    			 builder.setMessage（R.string.try_user）;
    		 }
    		 if（result.equals（HabrahabrAPI.RESULT_SERVER））
    		 {
    			 builder.setTitle（R.string.error_server）;
    			 builder.setMessage（R.string.try_later）;
    		 }
    		 if（result.equals（HabrahabrAPI.RESULT_OK））
    		 {
    			終了（）;
    		 }
    		他に
    		 {
    			 builder.show（）;
    		 }
    	 }
     };
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>この結果に応じて、対応するメッセージを発行しますが、結果がRESULT_OKの場合、API habrを使用してクラスに設定し、このアクティビティのみを閉じます。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  AppWidgetProvider </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ウィジェットが更新されるメインクラス。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     定数を設定します： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 public static int [] updatePeriodsMinutes = new int [] {30、60、180、360、720}; 
	 public static String URI_SCHEME = "karma_widget";
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>この場合の配列には、ConfigクラスのSpinnerViewの分が含まれています。</i>  <i>AlarmManagerのスピナーのテキスト値をミリ秒に変換するために必要です。</i>  <i>Configでは、選択したアイテムのインデックスを取得し、データベースに配置します。</i>  <i>プロバイダーでは、ベースからのインデックスを持つ配列から要素を取得し、それを60,000倍します。ミリ秒を取得します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OnEnabled（）メソッド 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 @Override
	 public void onEnabled（コンテキストコンテキスト）
	 {
		 SQLiteDatabase db = new DatabaseHelper（コンテキスト）.getReadableDatabase（）;
		 Cursor cursor = db.query（DatabaseHelper.TABLE_NAME、new String [] {DatabaseHelper.USERS_ID、DatabaseHelper.USERS_KARMA、DatabaseHelper.USERS_RATE、DatabaseHelper.USERS_UPDATE、DatabaseHelper.USERS_ICON}、null、null、null、null、null、null、null、null、null、null、null、null
		 while（cursor.moveToNext（））
		 {
			 RemoteViewsビュー=新しいRemoteViews（context.getPackageName（）、R.layout.widget）;
			 int id = cursor.getInt（cursor.getColumnIndex（DatabaseHelper.USERS_ID））;
			文字列karma = cursor.getString（cursor.getColumnIndex（DatabaseHelper.USERS_KARMA））;
			文字列率= cursor.getString（cursor.getColumnIndex（DatabaseHelper.USERS_RATE））;
			バイト[]アイコン= cursor.getBlob（cursor.getColumnIndex（DatabaseHelper.USERS_ICON））;
			 int update = cursor.getInt（cursor.getColumnIndex（DatabaseHelper.USERS_UPDATE））;
			 views.setTextViewText（R.id.karma、karma）;
			 views.setTextViewText（R.id.rating、rate）;
			 if（アイコン== null）
			 {
				 views.setBitmap（R.id.icon、 "setImageBitmap"、BitmapFactory.decodeResource（context.getResources（）、R.drawable.userpic））;	
			 }
			他に
			 {
				 views.setBitmap（R.id.icon、 "setImageBitmap"、BitmapFactory.decodeByteArray（icon、0、icon.length））;
			 }
			 AppWidgetManager appWidgetManager = AppWidgetManager.getInstance（コンテキスト）;
			 appWidgetManager.updateAppWidget（id、views）;
			インテントupdaterIntent = new Intent（）;
			 updaterIntent.setAction（AppWidgetManager.ACTION_APPWIDGET_UPDATE）;
			 updaterIntent.putExtra（AppWidgetManager.EXTRA_APPWIDGET_IDS、新しいint [] {id}）;
			 updaterIntent.setData（Uri.withAppendedPath（Uri.parse（URI_SCHEME + "：// widget / id /"）、String.valueOf（id）））;
			 PendingIntent pendingIntent = PendingIntent.getBroadcast（context、0、updaterIntent、PendingIntent.FLAG_UPDATE_CURRENT）;
			 AlarmManager alarmManager =（AlarmManager）context.getSystemService（Context.ALARM_SERVICE）;
			 alarmManager.setRepeating（AlarmManager.ELAPSED_REALTIME、SystemClock.elapsedRealtime（）、updatePeriodsMinutes [update] * 60000、pendingIntent）;
		 } 
		 cursor.close（）;
		 db.close（）;
		 super.onEnabled（コンテキスト）;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>一般に、このプロバイダーの開始時に一度呼び出されます。</i>  <i>既存の要素のすべてのタイマーはここで設定されます。</i>  <i>たとえば、ウィジェットをインストールしたばかりです。</i>  <i>メソッドは呼び出されますが、データベースが空なので、何も開始されません。</i>  <i>しかし、電話を再起動するときに、彼はこのメソッドを呼び出し、要素があれば、更新のためのタイマーを開始し、データベースの過去の値に設定します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OnDeleted（）メソッド 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 @Override
	 public void onDeleted（Context ctxt、int [] id）
	 {
		 final int [] appWidgetIds = ids;
		最終コンテキストcontext = ctxt;
		新しいスレッド（新しいRunnable（）{
			 @Override
			 public void run（）{
				 for（int i = 0; i &lt;appWidgetIds.length; i ++）
				 {
					意図の意図=新しい意図（）;
					 intent.setAction（AppWidgetManager.ACTION_APPWIDGET_UPDATE）;
					 intent.putExtra（AppWidgetManager.EXTRA_APPWIDGET_IDS、新しいint [] {appWidgetIds [i]}）;
					 intent.setData（Uri.withAppendedPath（Uri.parse（URI_SCHEME + "：// widget / id /"）、String.valueOf（appWidgetIds [i]）））;
					 PendingIntent pendingIntent = PendingIntent.getBroadcast（context、0、intent、PendingIntent.FLAG_UPDATE_CURRENT）;
					 AlarmManager alarmManager =（AlarmManager）context.getSystemService（Context.ALARM_SERVICE）;
					 alarmManager.cancel（pendingIntent）;
					
					 SQLiteDatabase db = new DatabaseHelper（コンテキスト）.getWritableDatabase（）;
					 db.delete（DatabaseHelper.TABLE_NAME、DatabaseHelper.USERS_ID + "=" + appWidgetIds [i]、null）;
					 db.close（）;
				 }
			 }
		 }）。start（）;
		 super.onDeleted（ctxt、ids）;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>デスクトップからウィジェットを削除するときに呼び出されます。</i>  <i>さて、ここでタイマーを停止し、データベースから削除します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OnUpdate（）メソッド 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 @Override
	 public void onUpdate（コンテキストctxt、AppWidgetManager mgr、int [] appWidgetIds）
	 {
		最終コンテキストcontext = ctxt;
		最終AppWidgetManager appWidgetManager = mgr;
		 final int [] ids = appWidgetIds;
		新しいスレッド（新しいRunnable（）{

			 @Override
			 public void run（）{
				 // TODO自動生成メソッドスタブ
				 for（int i = 0; i &lt;ids.length; i ++）
				 {
					 appWidgetManager.updateAppWidget（ids [i]、buildUpdate（context、ids [i]））;
				 }
			 }
		 }）。start（）;
		 super.onUpdate（ctxt、mgr、appWidgetIds）;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>AlarmManagerは、更新が必要なときにこのメソッドを呼び出します。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      BuildUpdate（）メソッド 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	パブリックRemoteViews buildUpdate（コンテキストコンテキスト、int id）
	 {
		 RemoteViewsビュー=新しいRemoteViews（context.getPackageName（）、R.layout.widget）;
		 SQLiteDatabase db = new DatabaseHelper（コンテキスト）.getReadableDatabase（）;
		カーソルcursor = db.query（DatabaseHelper.TABLE_NAME、新しい文字列[] {DatabaseHelper.USERS_ID、DatabaseHelper.USERS_KARMA、DatabaseHelper.USERS_RATE、DatabaseHelper.USERS_ICON、DatabaseHelper.USERS_ICON_URL、DatabaseHelper.USERS_NAME_ + +}} .valueOf（id）、null、null、null、null）;
		 if（cursor.getCount（）！= 0）
		 {
			 ContentValues contentValues =新しいContentValues（）;
			 cursor.moveToFirst（）;
			 String username = cursor.getString（cursor.getColumnIndex（DatabaseHelper.USERS_NAME））;
			文字列karma = cursor.getString（cursor.getColumnIndex（DatabaseHelper.USERS_KARMA））;
			文字列率= cursor.getString（cursor.getColumnIndex（DatabaseHelper.USERS_RATE））;
			文字列icon_url = cursor.getString（cursor.getColumnIndex（DatabaseHelper.USERS_ICON_URL））;
			バイト[]アイコン= cursor.getBlob（cursor.getColumnIndex（DatabaseHelper.USERS_ICON））;
			文字列[]更新=新しいHabrahabrAPI（）。GetStats（ユーザー名）;
			 if（[2] .equals（HabrahabrAPI.RESULT_OK）を更新）
			 {
				 if（！更新[0] .equals（karma）||！更新[1] .equals（rate））
				 {
					 karma =更新[0];
					レート=更新[1];
					 contentValues.put（DatabaseHelper.USERS_KARMA、karma）;
					 contentValues.put（DatabaseHelper.USERS_RATE、率）;
				 }	
			 }
			 views.setTextViewText（R.id.karma、karma）;
			 views.setTextViewText（R.id.rating、rate）;
			 if（icon_url！= null）
			 {
				文字列updatedIconUrl = new HabrahabrAPI（）。GetUserpicUrl（ユーザー名）;
				 if（（icon == null ||！icon_url.equals（updatedIconUrl））&amp;&amp;！updatedIconUrl.equals（HabrahabrAPI.RESULT_NO_USERPIC））
				 {
					 icon_url = updatedIconUrl;
					 Log.d（「CarmaWidget」、「Downloaded new userpic」）;
					ビットマップiconBitmap =新しいHabrahabrAPI（）。ImageDownloader（icon_url）;
					 if（iconBitmap！= null）
					 {
						 ByteArrayOutputStream baos = new ByteArrayOutputStream（）;
						 iconBitmap.compress（CompressFormat.PNG、100、baos）;
						 icon = baos.toByteArray（）;
						 contentValues.put（DatabaseHelper.USERS_ICON_URL、icon_url）;
						 contentValues.put（DatabaseHelper.USERS_ICON、アイコン）;
						 views.setBitmap（R.id.icon、 "setImageBitmap"、iconBitmap）;	
					 }
				 }
			 }
			他に
			 {
				 if（アイコン== null）
				 {
					 views.setBitmap（R.id.icon、 "setImageBitmap"、BitmapFactory.decodeResource（context.getResources（）、R.drawable.userpic））;	
				 }
				他に
				 {
					 views.setBitmap（R.id.icon、 "setImageBitmap"、BitmapFactory.decodeByteArray（icon、0、icon.length））;
				 }
			 }
			 cursor.close（）;
			 db.close（）;
			 if（contentValues.size（）！= 0）
			 {
				 db = new DatabaseHelper（context）.getWritableDatabase（）;
				 db.update（DatabaseHelper.TABLE_NAME、contentValues、DatabaseHelper.USERS_ID + "=" + String.valueOf（id）、null）;
				 db.close（）;
			 }
		 }
		他に
		 {
			 cursor.close（）;
			 db.close（）;
		 }
		ビューを返す;
	 }
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>更新が行われる場所であり、Configクラスの更新に非常に似ています</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、ウィジェットのカスタマイザー、幅、高さ、レイアウトを設定する必要があります。 これを行うには、res / xmlフォルダーで、次の形式のxmlファイルを作成します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> &lt;？xml version = "1.0" encoding = "utf-8"？&gt;
 &lt;appwidget-provider xmlns：android = "http://schemas.android.com/apk/res/android"
	 android：initialLayout = "@ layout / widget"
	 android：minHeight = "72dp"
	 android：minWidth = "146dp"
	 android：configure = "com.nixan.carmawidget.Config" /&gt;
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>これに更新時間を追加できますが、繰り返しますが、すべてのウィジェットで同じになります。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最後に-AndroidManifest.xmlを編集します 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> &lt;？xml version = "1.0" encoding = "utf-8"？&gt;
 &lt;マニフェストxmlns：android = "http://schemas.android.com/apk/res/android"
      パッケージ= "com.nixan.carmawidget"
       android：versionCode = "3"
       android：versionName = "1.2"&gt;
     &lt;application android：icon = "@ drawable / icon" android：label = "@ string / app_name" android：theme = "@ android：style / Theme.Light"&gt;
         &lt;アクティビティandroid：name = "。Config" android：screenOrientation = "portrait"&gt;
             &lt;intent-filter&gt;
    			 &lt;action android：name = "android.appwidget.action.APPWIDGET_CONFIGURE" /&gt;
    		 &lt;/ intent-filter&gt;
         &lt;/アクティビティ&gt;
		 &lt;receiver android：name = "。Widget"
		     android：label = "@ string / app_name"&gt;
		    	 &lt;intent-filter&gt;
		    		 &lt;action android：name = "android.appwidget.action.APPWIDGET_UPDATE" /&gt;
		    	 &lt;/ intent-filter&gt;	
		    	 &lt;meta-data android：name = "android.appwidget.provider" android：resource = "@ xml / carmawidget_provider" /&gt;
		 &lt;/ receiver&gt;
		 &lt;receiver android：name = "。Widget"
		     android：label = "@ string / app_name"&gt;
		    	 &lt;intent-filter&gt;
		    		 &lt;action android：name = "android.appwidget.action.APPWIDGET_UPDATE" /&gt;
		    		 &lt;data android：scheme = "karma_widget" /&gt;
		    	 &lt;/ intent-filter&gt;	
		    	 &lt;meta-data android：name = "android.appwidget.provider" android：resource = "@ xml / carmawidget_provider" /&gt;
		 &lt;/ receiver&gt;
     &lt;/ application&gt;
     &lt;uses-sdk android：minSdkVersion = "3" /&gt;
	 &lt;uses-permission android：name = "android.permission.INTERNET" /&gt;
 &lt;/ manifest&gt;
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     インターフェースの設計はソースにあります。何か明確でない場合は、 <a href="http://habrahabr.ru/blogs/android/87657/">ここ</a>と<a href="http://habrahabr.ru/blogs/android/87201/">ここを</a>読むことができ<a href="http://habrahabr.ru/blogs/android/87201/">ます</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="">ソースのダウンロード（172 Kb）</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="">アプリケーションのダウンロード（51 Kb）</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     またはパブ市場：nixan 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ご清聴ありがとうございました） </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J91805/index.html">オフラインコンバージョントラッキング。 パート1</a></li>
<li><a href="../J91806/index.html">カノボヴォスティ、第36版</a></li>
<li><a href="../J91809/index.html">1Password for Windows Beta</a></li>
<li><a href="../J91812/index.html">サーバーの撤回時にログを記録します。 Guardianデーモン（unix）</a></li>
<li><a href="../J91813/index.html">サンゴ礁でのヴォロビエフへのインタビュー：ゾーンについてRf、su、ru、キリル文字のサポート</a></li>
<li><a href="../J9182/index.html">反重力</a></li>
<li><a href="../J91822/index.html">通信の監督のための連邦サービスへのビーラインおよびオンラインアピール</a></li>
<li><a href="../J91826/index.html">絶対に安全なファイルシステム</a></li>
<li><a href="../J91828/index.html">私は検索エンジン（仮想プロジェクト）を書いています。 データ保存</a></li>
<li><a href="../J9183/index.html">Googleマッシュアップ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
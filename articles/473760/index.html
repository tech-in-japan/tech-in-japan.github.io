<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå™Ô∏è ‚ò™Ô∏è ü§≤üèø Psss, want some terrible IT stories? üê£ üë©üèø‚Äçüöí ‚õµÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Are you afraid of the dark? Maybe a zombie apocalypse or monsters under the bed? We know not. We, IT specialists, have their own sources of horror: cr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Psss, want some terrible IT stories?</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/473760/">  Are you afraid of the dark?  Maybe a zombie apocalypse or monsters under the bed?  We know not.  We, IT specialists, have their own sources of horror: crooked users, far from IT bosses, crashed servers, missing or not made backups, went down code and Agile-rallies, when in fact the whole development is controlled by screaming ‚Äújust yesterday‚Äù, ‚Äúthe customer is throwing‚Äù , "There criticized the prod."  On the eve of Halloween, we decided to find the most terrible stories, tell a couple of ours, and at the same time hear yours.  Well, are you ready to tell the stories chilling soul? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c95/41f/0e7/c9541f0e7789505da6d03442e9bd7468.jpg"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#3AC1EF">Easy warm up to goosebumps</font> </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's start with one very simple function.  In theory, she should check whether the number is prime. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="plaintext hljs">bool primeCheckUgly(unsigned long long int n){//good luck     ...</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Well, if the comment wished us good luck, then you are definitely ready to see a screenshot of the full code for this function.  Ready?  Well? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Boo!</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89c/ef2/3b5/89cef23b569d63147fffa78f5ef38834.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href=""><i>Full size</i></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And what does the code snippet do in the following screenshot? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cfa/7ef/032/cfa7ef032080bfa60a3d7d4692690022.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Boo!</b> <div class="spoiler_text">  Checks if the number is odd.  What did you think? </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#3AC1EF">Scary Stories Time With Reddit</font> </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Story 1 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Very long and scary listing - we warned!</b> <div class="spoiler_text"><div class="oembed"><script type="application/javascript" src="//pastebin.com/embed_js/U1Xr9hWv"></script><style>		div.embedPastebin { text-align:left; padding: 0; color: #000; margin: 0; font-family: monospace; background: #F7F7F7; border: 1px solid ddd; border-radius:3px; }		div.embedPastebin {  }		div.embedPastebin div.embedFooter { background: #F7F7F7; color: #333; font-size: 100%; padding: 6px 12px; border-bottom: 1px solid #ddd; text-transform:uppercase; }		div.embedPastebin div.embedFooter a,		div.embedPastebin div.embedFooter a:visited { color: #336699; text-decoration:none; }		div.embedPastebin div.embedFooter a:hover { color: red; }		.noLines ol { list-style-type: none; padding-left: 0.5em; }		.embedPastebin{background-color:#F8F8F8;border:1px solid #ddd;font-size:12px;overflow:auto;margin: 0 0 0 0;padding:0 0 0 0;line-height:21px}		.embedPastebin div { line-height:21px; font-family:Consolas, Menlo, Monaco, Lucida Console,'Bitstream Vera Sans Mono','Courier',monospace; }		ol { margin:0; padding: 0 0 0 55px}		ol li { border:0; margin:0;padding:0; }		li.ln-xtra .de1, li.ln-xtra .de2 {background:#F8F8CE;}		.embedPastebin ol li.li1 { margin: 0; }		.embedPastebin ol li.li2 { margin: 0; }.php .de1, .php .de2 {-moz-user-select: text;-khtml-user-select: text;-webkit-user-select: text;-ms-user-select: text;user-select: text;margin:0; padding: 0 8px; background:none; vertical-align:top;color:#000;border-left: 1px solid #ddd; margin: 0 0 0 -7px; position: relative; background: #ffffff;}.php  {color:#ACACAC;}.php .imp {font-weight: bold; color: red;}.php li, .php .li1 {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;-ms-user-select: none;user-select: none;}.php .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}.php .kw1 {color: #b1b100;}.php .kw2 {color: #000000; font-weight: bold;}.php .kw3 {color: #990000;}.php .kw4 {color: #009900; font-weight: bold;}.php .co1 {color: #666666; font-style: italic;}.php .co2 {color: #666666; font-style: italic;}.php .co3 {color: #0000cc; font-style: italic;}.php .co4 {color: #009933; font-style: italic;}.php .coMULTI {color: #666666; font-style: italic;}.php .es0 {color: #000099; font-weight: bold;}.php .es1 {color: #000099; font-weight: bold;}.php .es2 {color: #660099; font-weight: bold;}.php .es3 {color: #660099; font-weight: bold;}.php .es4 {color: #006699; font-weight: bold;}.php .es5 {color: #006699; font-weight: bold; font-style: italic;}.php .es6 {color: #009933; font-weight: bold;}.php .es_h {color: #000099; font-weight: bold;}.php .br0 {color: #009900;}.php .sy0 {color: #339933;}.php .sy1 {color: #000000; font-weight: bold;}.php .st0 {color: #0000ff;}.php .st_h {color: #0000ff;}.php .nu0 {color: #cc66cc;}.php .nu8 {color: #208080;}.php .nu12 {color: #208080;}.php .nu19 {color:#800080;}.php .me1 {color: #004000;}.php .me2 {color: #004000;}.php .re0 {color: #000088;}.php .ln-xtra, .php li.ln-xtra, .php div.ln-xtra {background:#FFFF88;}.php span.xtra { display:block; }	</style>	<div class="embedPastebin">		<div class="embedFooter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data hosted with ‚ô• by </font></font><a href="" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pastebin.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download Raw</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">See Original</font></font></a></div><ol class="php"><li class="li1"><div class="de1"><span class="kw2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;? php</font></font></span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> get_string_between<span class="br0">(</span><span class="re0">$string</span><span class="sy0">,</span> <span class="re0">$start</span><span class="sy0">,</span> <span class="re0">$end</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$string</span> <span class="sy0">=</span> <span class="st_h">' '</span> <span class="sy0">.</span> <span class="re0">$string</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$ini</span> <span class="sy0">=</span> <span class="kw3">strpos</span><span class="br0">(</span><span class="re0">$string</span><span class="sy0">,</span> <span class="re0">$start</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$ini</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="kw1">return</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$ini</span> <span class="sy0">+=</span> <span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$start</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$len</span> <span class="sy0">=</span> <span class="kw3">strpos</span><span class="br0">(</span><span class="re0">$string</span><span class="sy0">,</span> <span class="re0">$end</span><span class="sy0">,</span> <span class="re0">$ini</span><span class="br0">)</span> <span class="sy0">-</span> <span class="re0">$ini</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$string</span><span class="sy0">,</span> <span class="re0">$ini</span><span class="sy0">,</span> <span class="re0">$len</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> html2plain<span class="br0">(</span><span class="re0">$html</span><span class="sy0">,</span> <span class="re0">$numchars</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Remove the HTML tag</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$html</span> <span class="sy0">=</span> <span class="kw3">strip_tags</span><span class="br0">(</span><span class="re0">$html</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Convert HTML entities to single characters</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$html</span> <span class="sy0">=</span> <span class="kw3">html_entity_decode</span><span class="br0">(</span><span class="re0">$html</span><span class="sy0">,</span> <span class="kw4">ENT_QUOTES</span><span class="sy0">,</span> <span class="st_h">'UTF-8'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Make the string the desired number of characters</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Note that substr is not good as it counts by bytes and not characters</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$html</span> <span class="sy0">=</span> <span class="kw3">mb_substr</span><span class="br0">(</span><span class="re0">$html</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$numchars</span><span class="sy0">,</span> <span class="st_h">'UTF-8'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Add an elipsis</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$html</span> <span class="sy0">.=</span> <span class="st0">"‚Ä¶"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$html</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> filtriraj<span class="br0">(</span><span class="re0">$value</span><span class="sy0">,</span><span class="re0">$tit</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$value</span><span class="sy0">=</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$value</span><span class="sy0">=</span><span class="kw3">preg_replace</span><span class="br0">(</span><span class="st_h">'/&lt;[^&gt;]*&gt;/'</span><span class="sy0">,</span> <span class="st_h">''</span><span class="sy0">,</span><span class="re0">$value</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tit</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$value</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"'"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$value</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$value</span><span class="sy0">=</span><span class="kw3">htmlspecialchars</span><span class="br0">(</span><span class="re0">$value</span><span class="sy0">,</span> <span class="kw4">ENT_QUOTES</span><span class="sy0">,</span> <span class="st_h">'UTF-8'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">return</span> <span class="re0">$value</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> confirmUsers<span class="br0">(</span><span class="re0">$email</span><span class="sy0">,</span> <span class="re0">$password</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="re0">$resulta</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM users_admin WHERE email="</span><span class="sy0">.</span>safe<span class="br0">(</span><span class="re0">$email</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">" AND akt='Y'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$resulta</span><span class="br0">)</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span> <span class="co1">//Pogresan email</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$dbarray</span> <span class="sy0">=</span> <span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$resulta</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$dbarray</span><span class="br0">[</span><span class="st_h">'password'</span><span class="br0">]</span> &nbsp;<span class="sy0">=</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$dbarray</span><span class="br0">[</span><span class="st_h">'password'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$password</span> <span class="sy0">=</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$password</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cek</span><span class="sy0">=</span>tep_validate_password<span class="br0">(</span><span class="re0">$password</span><span class="sy0">,</span> <span class="re0">$dbarray</span><span class="br0">[</span><span class="st_h">'password'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="co1">//if($password == $dbarray['password']){</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$cek</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="co1">//Uspesan login</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="nu0">2</span><span class="sy0">;</span> <span class="co1">//Pogresna Sifra</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> checkLogins<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_COOKIE</span><span class="br0">[</span><span class="st_h">'ipcooknames'</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_COOKIE</span><span class="br0">[</span><span class="st_h">'ipcookpasss'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$_COOKIE</span><span class="br0">[</span><span class="st_h">'ipcooknames'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'passwords'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$_COOKIE</span><span class="br0">[</span><span class="st_h">'ipcookpasss'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'userid'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$_COOKIE</span><span class="br0">[</span><span class="st_h">'ipcookids'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'passwords'</span><span class="br0">]</span><span class="br0">)</span> and <span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT email FROM users_admin WHERE email='<span class="es4">$_SESSION[emails]</span>'"</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">unset</span><span class="br0">(</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">unset</span><span class="br0">(</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'passwords'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">unset</span><span class="br0">(</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'userids'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">unset</span><span class="br0">(</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'korisniks'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'sublogins'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'email'</span><span class="br0">]</span> <span class="sy0">||</span> <span class="sy0">!</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'pass'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="re0">$msls</span><span class="sy0">=</span><span class="re0">$langa</span><span class="br0">[</span><span class="st_h">'logins7'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'email'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw3">trim</span><span class="br0">(</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'email'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="co1">//$md5pass = md5($_POST['pass']);</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="re0">$md5pass</span> <span class="sy0">=</span> <span class="kw3">trim</span><span class="br0">(</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'pass'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$result</span> <span class="sy0">=</span> confirmUsers<span class="br0">(</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'email'</span><span class="br0">]</span><span class="sy0">,</span> <span class="re0">$md5pass</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$result</span> <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="re0">$msls</span><span class="sy0">=</span><span class="re0">$langa</span><span class="br0">[</span><span class="st_h">'logins8'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw1">else</span> <span class="kw1">if</span><span class="br0">(</span><span class="re0">$result</span> <span class="sy0">==</span> <span class="nu0">2</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; <span class="re0">$msls</span><span class="sy0">=</span><span class="re0">$langa</span><span class="br0">[</span><span class="st_h">'logins8'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'email'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'email'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'panels'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'panel'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'passwords'</span><span class="br0">]</span> <span class="sy0">=</span> tep_encrypt_password<span class="br0">(</span><span class="re0">$md5pass</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$resulti</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"select * from users_admin where email = '"</span><span class="sy0">.</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$dbarrayi</span> <span class="sy0">=</span> <span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$resulti</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'userids'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$dbarrayi</span><span class="br0">[</span><span class="st_h">'user_id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'usernames'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$dbarrayi</span><span class="br0">[</span><span class="st_h">'adm_username'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'korisniks'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$dbarrayi</span><span class="br0">[</span><span class="st_h">'name'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">" "</span><span class="sy0">.</span><span class="re0">$dbarrayi</span><span class="br0">[</span><span class="st_h">'surname'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st_h">'remember'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; <span class="kw3">setcookie</span><span class="br0">(</span><span class="st0">"ipcooknames"</span><span class="sy0">,</span> <span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span><span class="sy0">,</span> <span class="kw3">time</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">+</span><span class="nu0">60</span><span class="sy0">*</span><span class="nu0">60</span><span class="sy0">*</span><span class="nu0">24</span><span class="sy0">*</span><span class="nu0">100</span><span class="sy0">,</span> <span class="st0">"/"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">setcookie</span><span class="br0">(</span><span class="st0">"ipcookpasss"</span><span class="sy0">,</span> <span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'passwords'</span><span class="br0">]</span><span class="sy0">,</span> <span class="kw3">time</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">+</span><span class="nu0">60</span><span class="sy0">*</span><span class="nu0">60</span><span class="sy0">*</span><span class="nu0">24</span><span class="sy0">*</span><span class="nu0">100</span><span class="sy0">,</span> <span class="st0">"/"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw3">setcookie</span><span class="br0">(</span><span class="st0">"ipcookids"</span><span class="sy0">,</span> <span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'userids'</span><span class="br0">]</span><span class="sy0">,</span> <span class="kw3">time</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">+</span><span class="nu0">60</span><span class="sy0">*</span><span class="nu0">60</span><span class="sy0">*</span><span class="nu0">24</span><span class="sy0">*</span><span class="nu0">100</span><span class="sy0">,</span> <span class="st0">"/"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">echo</span> <span class="kw3">header</span><span class="br0">(</span><span class="st0">"Location: <span class="es4">$patH</span>/admin/index.php"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="coMULTI">/* podesavanje logged_in promenljive */</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">preg_match</span><span class="br0">(</span><span class="st0">"/admin/"</span><span class="sy0">,</span>curPageURL<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$logged_ins</span> <span class="sy0">=</span> checkLogins<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> check_admins<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$logged_ins</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$logged_ins</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$qa</span> <span class="sy0">=</span> <span class="st0">"select active from users_admin where email = '"</span><span class="sy0">.</span><span class="re0">$_SESSION</span><span class="br0">[</span><span class="st_h">'emails'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$resultadmin</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$qa</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="re0">$addb</span> <span class="sy0">=</span> <span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$resultadmin</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$addb</span><span class="br0">[</span><span class="st_h">'active'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">preg_match</span><span class="br0">(</span><span class="st0">"/admin/"</span><span class="sy0">,</span>curPageURL<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$admins</span> <span class="sy0">=</span> check_admins<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;<span class="co1">//include($page_path2."/language/$lang.php");</span></div></li><li class="li2"><div class="de2"><span class="co1">//include($page_path2."/funkc.php");</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> replace_slug<span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$all</span><span class="sy0">=</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"√§"</span><span class="sy0">,</span><span class="st0">"a"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"√∂"</span><span class="sy0">,</span><span class="st0">"o"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"√º"</span><span class="sy0">,</span><span class="st0">"u"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"√Ñ"</span><span class="sy0">,</span><span class="st0">"a"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"√ñ"</span><span class="sy0">,</span><span class="st0">"o"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"√ü"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'"'</span><span class="sy0">,</span><span class="st_h">''</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"'"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"?"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"!"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"."</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">":"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">";"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"/"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">" &nbsp; "</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">" &nbsp;"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$nid_pr=str_replace("-","",$nid_pr);</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"+"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"*"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"("</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">")"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"="</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"^"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&amp;"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"[[:punct:]]"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr1</span><span class="sy0">=</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$nid_pr1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="re0">$nid_pr2</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"--"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$nid_pr2</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//include($page_path2."/language/$lang.php");</span></div></li><li class="li1"><div class="de1"><span class="co1">//include($page_path2."/funkc.php");</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> replace<span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"S"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"Z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"Dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'"'</span><span class="sy0">,</span><span class="st_h">''</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"'"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"?"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"!"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"."</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">":"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">";"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"/"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"+"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"*"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"("</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">")"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"="</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"^"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&amp;"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"[[:punct:]]"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr1</span><span class="sy0">=</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$nid_pr1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$nid_pr2</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> replaceZZ<span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"S"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"Z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"Dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">preg_replace</span><span class="br0">(</span><span class="st0">"/[[:punct:]]/"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr1</span><span class="sy0">=</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$nid_pr1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$nid_pr2</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> replace1<span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"S"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"Z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"Dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"?"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"!"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">preg_replace</span><span class="br0">(</span><span class="st0">"/[[:punct:]]/"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$nid_pr2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> replace2<span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"S"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"Z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"Dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$nid_pr</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> replace_implode<span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"S"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"Z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"Dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"?"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"!"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">preg_replace</span><span class="br0">(</span><span class="st0">"/[[:punct:]]/"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr1</span><span class="sy0">=</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"_"</span><span class="sy0">,</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$nid_pr1</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$nid_pr2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> replace_implode1<span class="br0">(</span><span class="re0">$all</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$all</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"S"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"Z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"Dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'"'</span><span class="sy0">,</span><span class="st_h">''</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"'"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"?"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"!"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"."</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">":"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">";"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"/"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"("</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">")"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"^"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">" &nbsp;"</span><span class="sy0">,</span><span class="st0">" "</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"$"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"#"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&amp;"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"*"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"="</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"+"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="co1">//$nid_pr=preg_replace("/[[:punct:]]/","",$nid_pr);</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"--"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$nid_pr2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr2</span><span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$nid_pr2</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">return</span> <span class="re0">$nid_pr2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> replace_implode2<span class="br0">(</span><span class="re0">$nid_pr</span><span class="sy0">,</span><span class="re0">$nosrb</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span> <span class="re0">$norazm</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$nosrb</span><span class="sy0">==</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒÜ"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒá"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒå"</span><span class="sy0">,</span><span class="st0">"C"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒç"</span><span class="sy0">,</span><span class="st0">"c"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈†"</span><span class="sy0">,</span><span class="st0">"S"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈°"</span><span class="sy0">,</span><span class="st0">"s"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈æ"</span><span class="sy0">,</span><span class="st0">"z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"≈Ω"</span><span class="sy0">,</span><span class="st0">"Z"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒë"</span><span class="sy0">,</span><span class="st0">"dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"ƒê"</span><span class="sy0">,</span><span class="st0">"Dj"</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'"'</span><span class="sy0">,</span><span class="st_h">''</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"'"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"?"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"!"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"."</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">":"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">";"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"/"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"("</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">")"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"^"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">" &nbsp;"</span><span class="sy0">,</span><span class="st0">" "</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"$"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"#"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&amp;"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"*"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"="</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"+"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$nid_pr=preg_replace("/[[:punct:]]/","",$nid_pr);</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr1</span><span class="sy0">=</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$norazm</span><span class="sy0">==</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$nid_pr</span><span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">""</span><span class="sy0">,</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$nid_pr</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$nid_pr</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> addslash<span class="br0">(</span><span class="re0">$theValue</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$theValue</span> <span class="sy0">=</span> <span class="br0">(</span><span class="sy0">!</span><span class="kw3">get_magic_quotes_gpc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> ? <span class="kw3">addslashes</span><span class="br0">(</span><span class="re0">$theValue</span><span class="br0">)</span> <span class="sy0">:</span> <span class="re0">$theValue</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="kw1">return</span> <span class="re0">$theValue</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> safed<span class="br0">(</span><span class="re0">$str</span><span class="sy0">,</span> <span class="re0">$using_like</span><span class="sy0">=</span><span class="kw4">false</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span> <span class="kw3">get_magic_quotes_gpc</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">)</span> &nbsp;<span class="co1">// if already escaped</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$str</span> <span class="sy0">=</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$str</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$str</span> <span class="sy0">=</span> <span class="kw3">mysqli_real_escape_string</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$str</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="br0">(</span> <span class="re0">$using_like</span>? <span class="kw3">addcslashes</span><span class="br0">(</span><span class="re0">$str</span><span class="sy0">,</span> <span class="st_h">'%_'</span><span class="br0">)</span> <span class="sy0">:</span> <span class="re0">$str</span> <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="kw2">function</span> safe<span class="br0">(</span><span class="re0">$value</span><span class="sy0">,</span><span class="re0">$sp</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">get_magic_quotes_gpc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="co1">//dali je magic quptes ukljucen</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp;<span class="re0">$value</span> <span class="sy0">=</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">//ako je, ponisti sta je napravio</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="co1">//if (!is_numeric($value)) //dali nije numericka vrjednost (dali je string?)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$value</span> <span class="sy0">=</span> <span class="st0">"'"</span> <span class="sy0">.</span> <span class="kw3">mysqli_real_escape_string</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$value</span><span class="br0">)</span> <span class="sy0">.</span> <span class="st0">"'"</span><span class="sy0">;</span> <span class="co1">//ako je string, escapaj ga kako spada</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$sp</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$value</span><span class="sy0">=</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">return</span> <span class="re0">$value</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">/*</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">function flash($path1,$fajl,$wid,$heig)</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">echo "&lt;object style='visibility: visible;z-index:-1000;' &nbsp;type='application/x-shockwave-flash' data='$path1/$fajl' width='$wid' height='$heig'&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="coMULTI">&lt;param name='movie' value='$path1/$fajl' /&gt;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp; &lt;param name='quality' value='high' /&gt;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp; &lt;param name='wmode' value='transparent' /&gt;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&lt;/object&gt;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">";</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">}*/</span></div></li><li class="li1"><div class="de1"><span class="co2">################ RAND ##################</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> gen_rand_string<span class="br0">(</span><span class="re0">$ime</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$chars</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span> <span class="st_h">'a'</span><span class="sy0">,</span> <span class="st_h">'b'</span><span class="sy0">,</span> <span class="st_h">'c'</span><span class="sy0">,</span> <span class="st_h">'d'</span><span class="sy0">,</span> <span class="st_h">'e'</span><span class="sy0">,</span> <span class="st_h">'f'</span><span class="sy0">,</span> <span class="st_h">'g'</span><span class="sy0">,</span> <span class="st_h">'h'</span><span class="sy0">,</span> <span class="st_h">'i'</span><span class="sy0">,</span> <span class="st_h">'j'</span><span class="sy0">,</span> <span class="st_h">'k'</span><span class="sy0">,</span> <span class="st_h">'l'</span><span class="sy0">,</span> <span class="st_h">'m'</span><span class="sy0">,</span> <span class="st_h">'n'</span><span class="sy0">,</span> <span class="st_h">'o'</span><span class="sy0">,</span> <span class="st_h">'p'</span><span class="sy0">,</span> <span class="st_h">'q'</span><span class="sy0">,</span> <span class="st_h">'r'</span><span class="sy0">,</span> <span class="st_h">'s'</span><span class="sy0">,</span> <span class="st_h">'t'</span><span class="sy0">,</span> <span class="st_h">'u'</span><span class="sy0">,</span> <span class="st_h">'v'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="sy0">,</span> &nbsp;<span class="st_h">'x'</span><span class="sy0">,</span> <span class="st_h">'y'</span><span class="sy0">,</span> <span class="st_h">'z'</span><span class="sy0">,</span> <span class="st_h">'1'</span><span class="sy0">,</span> <span class="st_h">'2'</span><span class="sy0">,</span> <span class="st_h">'3'</span><span class="sy0">,</span> <span class="st_h">'4'</span><span class="sy0">,</span> <span class="st_h">'5'</span><span class="sy0">,</span> <span class="st_h">'6'</span><span class="sy0">,</span> <span class="st_h">'7'</span><span class="sy0">,</span> <span class="st_h">'8'</span><span class="sy0">,</span> <span class="st_h">'9'</span><span class="sy0">,</span> <span class="st_h">'0'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$max_chars</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">(</span><span class="re0">$chars</span><span class="br0">)</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">srand</span><span class="br0">(</span> <span class="br0">(</span>double<span class="br0">)</span> <span class="kw3">microtime</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">1000000</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$rand_str</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">for</span><span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="nu0">5</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$rand_str</span> <span class="sy0">=</span> <span class="br0">(</span> <span class="re0">$i</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span> ? <span class="re0">$chars</span><span class="br0">[</span><span class="kw3">rand</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$max_chars</span><span class="br0">)</span><span class="br0">]</span> <span class="sy0">:</span> <span class="re0">$rand_str</span> <span class="sy0">.</span> <span class="re0">$chars</span><span class="br0">[</span><span class="kw3">rand</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$max_chars</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".jpg"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$ime</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".JPG"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".JPEG"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".jpeg"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".gif"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".GIF"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".png"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".PNG"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".swf"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".SWF"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".doc"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".DOC"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".pdf"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$rep</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">".PDF"</span><span class="sy0">,</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$rep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$rep</span><span class="sy0">.</span><span class="re0">$rand_str</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> gen_rand6<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$chars</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span> <span class="st_h">'a'</span><span class="sy0">,</span> <span class="st_h">'b'</span><span class="sy0">,</span> <span class="st_h">'c'</span><span class="sy0">,</span> <span class="st_h">'d'</span><span class="sy0">,</span> <span class="st_h">'e'</span><span class="sy0">,</span> <span class="st_h">'f'</span><span class="sy0">,</span> <span class="st_h">'g'</span><span class="sy0">,</span> <span class="st_h">'h'</span><span class="sy0">,</span> <span class="st_h">'i'</span><span class="sy0">,</span> <span class="st_h">'j'</span><span class="sy0">,</span> <span class="st_h">'k'</span><span class="sy0">,</span> <span class="st_h">'l'</span><span class="sy0">,</span> <span class="st_h">'m'</span><span class="sy0">,</span> <span class="st_h">'n'</span><span class="sy0">,</span> <span class="st_h">'o'</span><span class="sy0">,</span> <span class="st_h">'p'</span><span class="sy0">,</span> <span class="st_h">'q'</span><span class="sy0">,</span> <span class="st_h">'r'</span><span class="sy0">,</span> <span class="st_h">'s'</span><span class="sy0">,</span> <span class="st_h">'t'</span><span class="sy0">,</span> <span class="st_h">'u'</span><span class="sy0">,</span> <span class="st_h">'v'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="sy0">,</span> &nbsp;<span class="st_h">'x'</span><span class="sy0">,</span> <span class="st_h">'y'</span><span class="sy0">,</span> <span class="st_h">'z'</span><span class="sy0">,</span> <span class="st_h">'1'</span><span class="sy0">,</span> <span class="st_h">'2'</span><span class="sy0">,</span> <span class="st_h">'3'</span><span class="sy0">,</span> <span class="st_h">'4'</span><span class="sy0">,</span> <span class="st_h">'5'</span><span class="sy0">,</span> <span class="st_h">'6'</span><span class="sy0">,</span> <span class="st_h">'7'</span><span class="sy0">,</span> <span class="st_h">'8'</span><span class="sy0">,</span> <span class="st_h">'9'</span><span class="sy0">,</span> <span class="st_h">'0'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$max_chars</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">(</span><span class="re0">$chars</span><span class="br0">)</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">srand</span><span class="br0">(</span> <span class="br0">(</span>double<span class="br0">)</span> <span class="kw3">microtime</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">1000000</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$rand_str</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">for</span><span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="nu0">6</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$rand_str</span> <span class="sy0">=</span> <span class="br0">(</span> <span class="re0">$i</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span> ? <span class="re0">$chars</span><span class="br0">[</span><span class="kw3">rand</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$max_chars</span><span class="br0">)</span><span class="br0">]</span> <span class="sy0">:</span> <span class="re0">$rand_str</span> <span class="sy0">.</span> <span class="re0">$chars</span><span class="br0">[</span><span class="kw3">rand</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$max_chars</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">strtoupper</span><span class="br0">(</span><span class="re0">$rand_str</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> gen_rand<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$chars</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span> <span class="st_h">'a'</span><span class="sy0">,</span> <span class="st_h">'b'</span><span class="sy0">,</span> <span class="st_h">'c'</span><span class="sy0">,</span> <span class="st_h">'d'</span><span class="sy0">,</span> <span class="st_h">'e'</span><span class="sy0">,</span> <span class="st_h">'f'</span><span class="sy0">,</span> <span class="st_h">'g'</span><span class="sy0">,</span> <span class="st_h">'h'</span><span class="sy0">,</span> <span class="st_h">'i'</span><span class="sy0">,</span> <span class="st_h">'j'</span><span class="sy0">,</span> <span class="st_h">'k'</span><span class="sy0">,</span> <span class="st_h">'l'</span><span class="sy0">,</span> <span class="st_h">'m'</span><span class="sy0">,</span> <span class="st_h">'n'</span><span class="sy0">,</span> <span class="st_h">'o'</span><span class="sy0">,</span> <span class="st_h">'p'</span><span class="sy0">,</span> <span class="st_h">'q'</span><span class="sy0">,</span> <span class="st_h">'r'</span><span class="sy0">,</span> <span class="st_h">'s'</span><span class="sy0">,</span> <span class="st_h">'t'</span><span class="sy0">,</span> <span class="st_h">'u'</span><span class="sy0">,</span> <span class="st_h">'v'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="sy0">,</span> &nbsp;<span class="st_h">'x'</span><span class="sy0">,</span> <span class="st_h">'y'</span><span class="sy0">,</span> <span class="st_h">'z'</span><span class="sy0">,</span> <span class="st_h">'1'</span><span class="sy0">,</span> <span class="st_h">'2'</span><span class="sy0">,</span> <span class="st_h">'3'</span><span class="sy0">,</span> <span class="st_h">'4'</span><span class="sy0">,</span> <span class="st_h">'5'</span><span class="sy0">,</span> <span class="st_h">'6'</span><span class="sy0">,</span> <span class="st_h">'7'</span><span class="sy0">,</span> <span class="st_h">'8'</span><span class="sy0">,</span> <span class="st_h">'9'</span><span class="sy0">,</span> <span class="st_h">'0'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$max_chars</span> <span class="sy0">=</span> <span class="kw3">count</span><span class="br0">(</span><span class="re0">$chars</span><span class="br0">)</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">srand</span><span class="br0">(</span> <span class="br0">(</span>double<span class="br0">)</span> <span class="kw3">microtime</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">1000000</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$rand_str</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">for</span><span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="nu0">15</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$rand_str</span> <span class="sy0">=</span> <span class="br0">(</span> <span class="re0">$i</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span> ? <span class="re0">$chars</span><span class="br0">[</span><span class="kw3">rand</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$max_chars</span><span class="br0">)</span><span class="br0">]</span> <span class="sy0">:</span> <span class="re0">$rand_str</span> <span class="sy0">.</span> <span class="re0">$chars</span><span class="br0">[</span><span class="kw3">rand</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$max_chars</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$rand_str</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co2">############################### UPLOAD IMAGE ##############</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> UploadSlika<span class="br0">(</span><span class="re0">$imesl</span><span class="sy0">,</span><span class="re0">$tmp_name</span><span class="sy0">,</span><span class="re0">$ext</span><span class="sy0">,</span><span class="re0">$lokacija</span><span class="sy0">,</span><span class="re0">$da</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$crop</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$resizep</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$forname</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$slika2</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$iimesl</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st_h">'.'</span><span class="sy0">,</span> <span class="re0">$imesl</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ext</span><span class="sy0">=</span> <span class="st0">"."</span><span class="sy0">.</span><span class="kw3">end</span><span class="br0">(</span><span class="re0">$iimesl</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ext</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"JPEG"</span><span class="sy0">,</span> <span class="st0">"jpg"</span><span class="sy0">,</span> <span class="re0">$ext</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ext</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"jpeg"</span><span class="sy0">,</span> <span class="st0">"jpg"</span><span class="sy0">,</span> <span class="re0">$ext</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$imesl</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="st0">"_"</span><span class="sy0">,</span><span class="re0">$imesl</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$imesl</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&amp;"</span><span class="sy0">,</span><span class="st0">"_"</span><span class="sy0">,</span><span class="re0">$imesl</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$imesl</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="re0">$ext</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$imesl</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$forname</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span> <span class="re0">$forname1</span><span class="sy0">=</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$forname</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$forname1</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$slika2</span> <span class="sy0">=</span> <span class="kw3">date</span><span class="br0">(</span><span class="st0">"Y-m-d-H-i"</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span>replace2<span class="br0">(</span><span class="re0">$imesl</span><span class="br0">)</span><span class="sy0">.</span><span class="re0">$forname1</span><span class="sy0">.</span><span class="re0">$ext</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//} else $slika2 = $imesl;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$fold</span><span class="sy0">=</span><span class="re0">$lokacija</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$uploadfile</span> <span class="sy0">=</span> <span class="re0">$lokacija</span> <span class="sy0">.</span> <span class="re0">$slika2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy0">@</span><span class="kw3">copy</span><span class="br0">(</span><span class="re0">$tmp_name</span><span class="sy0">,</span> <span class="re0">$uploadfile</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">preg_match</span><span class="br0">(</span><span class="st0">"/galerija/"</span><span class="sy0">,</span><span class="re0">$lokacija</span><span class="br0">)</span> or <span class="kw3">preg_match</span><span class="br0">(</span><span class="st0">"/images/"</span><span class="sy0">,</span><span class="re0">$lokacija</span><span class="br0">)</span> or <span class="br0">(</span><span class="re0">$da</span><span class="sy0">==</span><span class="nu0">1</span> or <span class="re0">$da</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ext</span><span class="sy0">==</span><span class="st0">".jpg"</span> or <span class="re0">$ext</span><span class="sy0">==</span><span class="st0">".JPG"</span> or <span class="re0">$ext</span><span class="sy0">==</span><span class="st0">".gif"</span> or <span class="re0">$ext</span><span class="sy0">==</span><span class="st0">".GIF"</span> or <span class="re0">$ext</span><span class="sy0">==</span><span class="st0">".png"</span> or <span class="re0">$ext</span><span class="sy0">==</span><span class="st0">".PNG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">//resizerv_watermark($slika2,$fold);</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$resizep</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">resize<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="re0">$resizep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$_GET</span><span class="br0">[</span><span class="st_h">'tip'</span><span class="br0">]</span><span class="sy0">!=</span><span class="nu0">13</span> or <span class="re0">$da</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">resizerv<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="nu0">1000</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$da</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">resize<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="st0">"360-360-thumb360"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">resize<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="st0">"150-150-thumb150"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$crop</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"#"</span><span class="sy0">,</span><span class="re0">$crop</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$crop</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"#"</span><span class="sy0">,</span><span class="re0">$crop</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">create_square_image2<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="re0">$crop</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">create_square_image2<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="re0">$crop</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">else</span></div></li><li class="li1"><div class="de1">create_square_image2<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="re0">$crop</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$crop</span><span class="sy0">==</span><span class="nu0">100</span><span class="br0">)</span> <span class="co1">//$crop=100; else $crop="";</span></div></li><li class="li2"><div class="de2">create_square_image<span class="br0">(</span><span class="re0">$slika2</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">,</span><span class="re0">$crop</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//else create_square_image1($slika2,$fold,320);</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//chmod($uploadfile, 0644);</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$imesl</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$slika2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co2">########################## RESIZE IMAGE create thumb ###################</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> resize<span class="br0">(</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$folder</span><span class="sy0">,</span><span class="re0">$resizep</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$image</span> <span class="sy0">=</span> <span class="st0">"<span class="es4">$folder</span><span class="es4">$slika</span>"</span><span class="sy0">;</span><span class="co1">//ovo je slika koju ces da resajzujes</span></div></li><li class="li2"><div class="de2"><span class="co1">//$newHeight = '200';//u pixelima postavim visinu i sirinu</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$kvalitet</span> <span class="sy0">=</span> <span class="st_h">'100'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$resi</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$resizep</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$slika</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//u pixelima uzima stvarnu visinu i sirinu slike</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$imgratio</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$wid</span><span class="sy0">=</span><span class="re0">$resi</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$resi</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$heig</span><span class="sy0">=</span><span class="re0">$resi</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="re0">$heig</span><span class="sy0">=</span><span class="re0">$resi</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$newWidth</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newHeight</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newHeight</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$newWidth</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><span class="co1">//ovde u pixelima stavi odakle da krene sa crop-ovanjem</span></div></li><li class="li1"><div class="de1"><span class="re0">$y</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="co1">//ako je slika gif onda ovako, ako je jpg onda ImageCreateFromJpg a ako je png ImageCreateFromPng</span></div></li><li class="li1"><div class="de1"><span class="re0">$exstension</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$image</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpeg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromjpeg</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> &nbsp;<span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromgif</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$tmb</span> <span class="sy0">=</span> <span class="kw3">ImageCreateTrueColor</span><span class="br0">(</span><span class="re0">$newWidth</span><span class="sy0">,</span><span class="re0">$newHeight</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//pravi praznu lsiku sa zadatim velicinama</span></div></li><li class="li1"><div class="de1"><span class="co1">//// eliminisanje pozadine PNG slike///</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> &nbsp;<span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span><span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$transparent</span> <span class="sy0">=</span> <span class="kw3">imagecolorallocatealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">127</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagefilledrectangle</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$transparent</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co1">//////////</span></div></li><li class="li2"><div class="de2"><span class="kw3">ImageCopyresampled</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$src</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$x</span><span class="sy0">,</span> <span class="re0">$y</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//opet menjaj u zavisnosti kakva je slika u pitanju (gif,jpg,png)</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$destJpeg</span><span class="sy0">=</span><span class="re0">$folder</span><span class="sy0">.</span><span class="st0">"<span class="es4">$resi[2]</span>/<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imageJpeg</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imageGif</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagePng</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$src</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$tmb</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> resizervE<span class="br0">(</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$folder</span><span class="sy0">,</span> <span class="re0">$isto</span><span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$image</span> <span class="sy0">=</span> <span class="st0">"<span class="es4">$folder</span><span class="es4">$slika</span>"</span><span class="sy0">;</span><span class="co1">//ovo je slika koju ces da resajzujes</span></div></li><li class="li1"><div class="de1"><span class="co1">//$newHeight = '200';//u pixelima postavim visinu i sirinu</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$kvalitet</span> <span class="sy0">=</span> <span class="st_h">'100'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//u pixelima uzima stvarnu visinu i sirinu slike</span></div></li><li class="li1"><div class="de1"><span class="re0">$newWidth</span><span class="sy0">=</span><span class="re0">$width</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newHeight</span><span class="sy0">=</span><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;=</span><span class="nu0">520</span> or <span class="re0">$height</span><span class="sy0">&gt;=</span><span class="nu0">520</span> or <span class="re0">$isto</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$isto</span><span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$imgratio</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$wid</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">=</span><span class="nu0">520</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newWidth</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">*</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newHeight</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newHeight</span><span class="sy0">=</span><span class="re0">$hd</span><span class="sy0">*</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newWidth</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><span class="co1">//ovde u pixelima stavi odakle da krene sa crop-ovanjem</span></div></li><li class="li1"><div class="de1"><span class="re0">$y</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//ako je slika gif onda ovako, ako je jpg onda ImageCreateFromJpg a ako je png ImageCreateFromPng</span></div></li><li class="li1"><div class="de1"><span class="re0">$exstension</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$image</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpeg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromjpeg</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> &nbsp;<span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromgif</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$tmb</span> <span class="sy0">=</span> <span class="kw3">ImageCreateTrueColor</span><span class="br0">(</span><span class="re0">$newWidth</span><span class="sy0">,</span><span class="re0">$newHeight</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//pravi praznu lsiku sa zadatim velicinama</span></div></li><li class="li1"><div class="de1"><span class="co1">//// eliminisanje pozadine PNG slike///</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span><span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$transparent</span> <span class="sy0">=</span> <span class="kw3">imagecolorallocatealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">127</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagefilledrectangle</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$transparent</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="co1">//////////</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageCopyresampled</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$src</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$x</span><span class="sy0">,</span> <span class="re0">$y</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//opet menjaj u zavisnosti kakva je slika u pitanju (gif,jpg,png)</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$destJpeg</span><span class="sy0">=</span><span class="re0">$folder</span><span class="sy0">.</span><span class="st0">"thumb/<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imageJpeg</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="kw3">imageGif</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagePng</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$src</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$tmb</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> resizerv<span class="br0">(</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$folder</span><span class="sy0">,</span><span class="re0">$tip</span><span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$image</span> <span class="sy0">=</span> <span class="st0">"<span class="es4">$folder</span><span class="es4">$slika</span>"</span><span class="sy0">;</span><span class="co1">//ovo je slika koju ces da resajzujes</span></div></li><li class="li1"><div class="de1"><span class="co1">//$newHeight = '200';//u pixelima postavim visinu i sirinu</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$kvalitet</span> <span class="sy0">=</span> <span class="st_h">'100'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//u pixelima uzima stvarnu visinu i sirinu slike</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tip</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$WH</span><span class="sy0">=</span><span class="re0">$tip</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="re0">$WH</span><span class="sy0">=</span><span class="nu0">800</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$WH</span> or <span class="re0">$height</span><span class="sy0">&gt;</span><span class="re0">$WH</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$imgratio</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$wid</span><span class="sy0">=</span><span class="re0">$WH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$heig</span><span class="sy0">=</span><span class="re0">$WH</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newWidth</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newHeight</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newHeight</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$newWidth</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><span class="co1">//ovde u pixelima stavi odakle da krene sa crop-ovanjem</span></div></li><li class="li2"><div class="de2"><span class="re0">$y</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//ako je slika gif onda ovako, ako je jpg onda ImageCreateFromJpg a ako je png ImageCreateFromPng</span></div></li><li class="li1"><div class="de1"><span class="re0">$exstension</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$image</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpeg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromjpeg</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> &nbsp;<span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromgif</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$tmb</span> <span class="sy0">=</span> <span class="kw3">ImageCreateTrueColor</span><span class="br0">(</span><span class="re0">$newWidth</span><span class="sy0">,</span><span class="re0">$newHeight</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//pravi praznu lsiku sa zadatim velicinama</span></div></li><li class="li1"><div class="de1"><span class="co1">//// eliminisanje pozadine PNG slike///</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span><span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$transparent</span> <span class="sy0">=</span> <span class="kw3">imagecolorallocatealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">127</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagefilledrectangle</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$transparent</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co1">//////////</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageCopyresampled</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$src</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$x</span><span class="sy0">,</span> <span class="re0">$y</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//opet menjaj u zavisnosti kakva je slika u pitanju (gif,jpg,png)</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;<span class="co1">//unlink($folder."$slika");</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$destJpeg</span><span class="sy0">=</span><span class="re0">$folder</span><span class="sy0">.</span><span class="st0">"<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imageJpeg</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imageGif</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagePng</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$src</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$tmb</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw2">function</span> create_square_image1<span class="br0">(</span><span class="re0">$original_file</span><span class="sy0">,</span> <span class="re0">$destination_file</span><span class="sy0">,</span> <span class="re0">$sq</span><span class="sy0">=</span><span class="nu0">520</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$square_size</span><span class="sy0">=</span><span class="re0">$sq</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$square_size</span><span class="sy0">==</span><span class="st0">""</span><span class="br0">)</span> <span class="re0">$square_size</span><span class="sy0">=</span><span class="nu0">520</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$imagez</span> <span class="sy0">=</span> <span class="re0">$destination_file</span><span class="sy0">.</span><span class="st0">""</span><span class="sy0">.</span><span class="re0">$original_file</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// get width and height of original image</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$imagedata</span> <span class="sy0">=</span> <span class="kw3">getimagesize</span><span class="br0">(</span><span class="re0">$imagez</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_width</span> <span class="sy0">=</span> <span class="re0">$imagedata</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_height</span> <span class="sy0">=</span> <span class="re0">$imagedata</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$original_width</span> <span class="sy0">&gt;</span> <span class="re0">$original_height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_height</span> <span class="sy0">=</span> <span class="re0">$square_size</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_width</span> <span class="sy0">=</span> <span class="re0">$new_height</span><span class="sy0">*</span><span class="br0">(</span><span class="re0">$original_width</span><span class="sy0">/</span><span class="re0">$original_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$original_height</span> <span class="sy0">&gt;</span> <span class="re0">$original_width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_width</span> <span class="sy0">=</span> <span class="re0">$square_size</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_height</span> <span class="sy0">=</span> <span class="re0">$new_width</span><span class="sy0">*</span><span class="br0">(</span><span class="re0">$original_height</span><span class="sy0">/</span><span class="re0">$original_width</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$original_height</span> <span class="sy0">==</span> <span class="re0">$original_width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_width</span> <span class="sy0">=</span> <span class="re0">$square_size</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_height</span> <span class="sy0">=</span> <span class="re0">$square_size</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_width</span> <span class="sy0">=</span> <span class="kw3">round</span><span class="br0">(</span><span class="re0">$new_width</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$new_height</span> <span class="sy0">=</span> <span class="kw3">round</span><span class="br0">(</span><span class="re0">$new_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// load the image</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".jpg"</span><span class="br0">)</span> or <span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".jpeg"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromjpeg</span><span class="br0">(</span><span class="re0">$imagez</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".gif"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromgif</span><span class="br0">(</span><span class="re0">$imagez</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".png"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$imagez</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$smaller_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatetruecolor</span><span class="br0">(</span><span class="re0">$new_width</span><span class="sy0">,</span> <span class="re0">$new_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$square_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatetruecolor</span><span class="br0">(</span><span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; <span class="coMULTI">/*if(substr_count(strtolower($original_file), ".png")){</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">imagealphablending($square_image, false);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">imagesavealpha($square_image,true);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$transparent = imagecolorallocatealpha($square_image, 255, 255, 255, 127);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">imagefilledrectangle($square_image, 0, 0, $new_width, $new_height, $transparent);</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">} */</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".png"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecolortransparent</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span> <span class="kw3">imagecolorallocatealpha</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">127</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span> <span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$smaller_image</span><span class="sy0">,</span> <span class="re0">$original_image</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$new_width</span><span class="sy0">,</span> <span class="re0">$new_height</span><span class="sy0">,</span> <span class="re0">$original_width</span><span class="sy0">,</span> <span class="re0">$original_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$new_width</span><span class="sy0">&gt;</span><span class="re0">$new_height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$difference</span> <span class="sy0">=</span> <span class="re0">$new_width</span><span class="sy0">-</span><span class="re0">$new_height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$half_difference</span> <span class="sy0">=</span> &nbsp;<span class="kw3">round</span><span class="br0">(</span><span class="re0">$difference</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span> <span class="re0">$smaller_image</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">-</span><span class="re0">$half_difference</span><span class="sy0">+</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">+</span><span class="re0">$difference</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$new_width</span><span class="sy0">,</span> <span class="re0">$new_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$new_height</span><span class="sy0">&gt;</span><span class="re0">$new_width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$difference</span> <span class="sy0">=</span> <span class="re0">$new_height</span><span class="sy0">-</span><span class="re0">$new_width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$half_difference</span> <span class="sy0">=</span> &nbsp;<span class="kw3">round</span><span class="br0">(</span><span class="re0">$difference</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span> <span class="re0">$smaller_image</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">-</span><span class="re0">$half_difference</span><span class="sy0">+</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">+</span><span class="re0">$difference</span><span class="sy0">,</span> <span class="re0">$new_width</span><span class="sy0">,</span> <span class="re0">$new_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$new_height</span> <span class="sy0">==</span> <span class="re0">$new_width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span> <span class="re0">$smaller_image</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$new_width</span><span class="sy0">,</span> <span class="re0">$new_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// if no destination file was given then display a png</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="re0">$destination_file</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagepng</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span><span class="kw4">NULL</span><span class="sy0">,</span><span class="nu0">9</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$destJpeg</span><span class="sy0">=</span><span class="re0">$destination_file</span><span class="sy0">.</span><span class="st0">"thumb/<span class="es4">$original_file</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// save the smaller image FILE if destination file given</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".jpg"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagejpeg</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span><span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">100</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".gif"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagegif</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span><span class="re0">$destJpeg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".png"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagepng</span><span class="br0">(</span><span class="re0">$square_image</span><span class="sy0">,</span><span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">9</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagedestroy</span><span class="br0">(</span><span class="re0">$original_image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagedestroy</span><span class="br0">(</span><span class="re0">$smaller_image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagedestroy</span><span class="br0">(</span><span class="re0">$square_image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> create_square_image2<span class="br0">(</span><span class="re0">$original_file</span><span class="sy0">,</span> <span class="re0">$destination_file</span><span class="sy0">,</span> <span class="re0">$sq</span><span class="sy0">=</span><span class="st0">"300-300"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$squ</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$sq</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;<span class="re0">$folder_save</span><span class="sy0">=</span><span class="re0">$squ</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$imagez</span> <span class="sy0">=</span> <span class="re0">$destination_file</span><span class="sy0">.</span><span class="st0">""</span><span class="sy0">.</span><span class="re0">$original_file</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$thumb_width</span><span class="sy0">=</span><span class="re0">$squ</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$thumb_height</span> <span class="sy0">=</span> <span class="re0">$squ</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$destJpeg</span><span class="sy0">=</span><span class="re0">$destination_file</span><span class="sy0">.</span><span class="st0">"<span class="es4">$folder_save</span>/<span class="es4">$original_file</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// load the image</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".jpg"</span><span class="br0">)</span> or <span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".jpeg"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromjpeg</span><span class="br0">(</span><span class="re0">$imagez</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".gif"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromgif</span><span class="br0">(</span><span class="re0">$imagez</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".png"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$imagez</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$width</span> <span class="sy0">=</span> <span class="kw3">imagesx</span><span class="br0">(</span><span class="re0">$original_image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="kw3">imagesy</span><span class="br0">(</span><span class="re0">$original_image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$original_aspect</span> <span class="sy0">=</span> <span class="re0">$width</span> <span class="sy0">/</span> <span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$thumb_aspect</span> <span class="sy0">=</span> <span class="re0">$thumb_width</span> <span class="sy0">/</span> <span class="re0">$thumb_height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$original_aspect</span> <span class="sy0">&gt;=</span> <span class="re0">$thumb_aspect</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="co1">// If image is wider than thumbnail (in aspect ratio sense)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$new_height</span> <span class="sy0">=</span> <span class="re0">$thumb_height</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="re0">$new_width</span> <span class="sy0">=</span> <span class="re0">$width</span> <span class="sy0">/</span> <span class="br0">(</span><span class="re0">$height</span> <span class="sy0">/</span> <span class="re0">$thumb_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="co1">// If the thumbnail is wider than the image</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="re0">$new_width</span> <span class="sy0">=</span> <span class="re0">$thumb_width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$new_height</span> <span class="sy0">=</span> <span class="re0">$height</span> <span class="sy0">/</span> <span class="br0">(</span><span class="re0">$width</span> <span class="sy0">/</span> <span class="re0">$thumb_width</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">//&nbsp; $smaller_image = imagecreatetruecolor($new_width, $new_height);</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$thumb_image</span> <span class="sy0">=</span> <span class="kw3">imagecreatetruecolor</span><span class="br0">(</span><span class="re0">$thumb_width</span><span class="sy0">,</span> <span class="re0">$thumb_height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".png"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecolortransparent</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span> <span class="kw3">imagecolorallocatealpha</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">127</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span> <span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$original_image</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="nu0">0</span> <span class="sy0">-</span> <span class="br0">(</span><span class="re0">$new_width</span> <span class="sy0">-</span> <span class="re0">$thumb_width</span><span class="br0">)</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="co1">// Center the image horizontally</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="nu0">0</span> <span class="sy0">-</span> <span class="br0">(</span><span class="re0">$new_height</span> <span class="sy0">-</span> <span class="re0">$thumb_height</span><span class="br0">)</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="co1">// Center the image vertically</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$new_width</span><span class="sy0">,</span> <span class="re0">$new_height</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// if no destination file was given then display a png</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="coMULTI">/*if(!$destination_file){</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; imagepng($thumb_image,NULL,9);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp; &nbsp; &nbsp; &nbsp; }*/</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// save the smaller image FILE if destination file given</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".jpg"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagejpeg</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span><span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">100</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".gif"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagegif</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span><span class="re0">$destJpeg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr_count</span><span class="br0">(</span><span class="kw3">strtolower</span><span class="br0">(</span><span class="re0">$original_file</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">".png"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagepng</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="sy0">,</span><span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">9</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagedestroy</span><span class="br0">(</span><span class="re0">$original_image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">//&nbsp; imagedestroy($smaller_image);</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagedestroy</span><span class="br0">(</span><span class="re0">$thumb_image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="co1">// create_square_image($original_file, $destination_file, $sq=520)</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw2">function</span> create_square_image<span class="br0">(</span><span class="re0">$source</span><span class="sy0">,</span> <span class="re0">$destination</span><span class="sy0">,</span> <span class="re0">$sq</span><span class="sy0">=</span><span class="nu0">520</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$quality</span><span class="sy0">=</span><span class="nu0">90</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$square_size</span><span class="sy0">=</span><span class="re0">$sq</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$square_size</span><span class="sy0">==</span><span class="st0">""</span><span class="br0">)</span> <span class="re0">$square_size</span><span class="sy0">=</span><span class="nu0">520</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$iimesl</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st_h">'.'</span><span class="sy0">,</span> <span class="re0">$source</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$extension</span><span class="sy0">=</span> <span class="kw3">strtolower</span><span class="br0">(</span><span class="kw3">end</span><span class="br0">(</span><span class="re0">$iimesl</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$slika</span> <span class="sy0">=</span> <span class="re0">$destination</span><span class="sy0">.</span><span class="st0">"thumb/"</span><span class="sy0">.</span><span class="re0">$source</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$status</span> &nbsp;<span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">list</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="sy0">,</span> <span class="re0">$type</span><span class="sy0">,</span> <span class="re0">$attr</span><span class="br0">)</span> <span class="sy0">=</span> <span class="kw3">getimagesize</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span> <span class="re0">$height</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$width_t</span> <span class="sy0">=</span> &nbsp;<span class="re0">$square_size</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$height_t</span> &nbsp; &nbsp;<span class="sy0">=</span> &nbsp; <span class="kw3">round</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">*</span><span class="re0">$square_size</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$off_y</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> &nbsp; <span class="kw3">ceil</span><span class="br0">(</span><span class="br0">(</span><span class="re0">$width_t</span><span class="sy0">-</span><span class="re0">$height_t</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$off_x</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> &nbsp; <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$difference</span> <span class="sy0">=</span> <span class="re0">$width_t</span><span class="sy0">-</span><span class="re0">$new_height_t</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$half_difference</span> <span class="sy0">=</span> &nbsp;<span class="kw3">round</span><span class="br0">(</span><span class="re0">$difference</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;</span> <span class="re0">$width</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$height_t</span> &nbsp; &nbsp;<span class="sy0">=</span> &nbsp; <span class="re0">$square_size</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$width_t</span> <span class="sy0">=</span> &nbsp; <span class="kw3">round</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">*</span><span class="re0">$square_size</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$off_x</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> &nbsp; <span class="kw3">ceil</span><span class="br0">(</span><span class="br0">(</span><span class="re0">$height_t</span><span class="sy0">-</span><span class="re0">$width_t</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$off_y</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> &nbsp; <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$difference</span> <span class="sy0">=</span> <span class="re0">$height_t</span><span class="sy0">-</span><span class="re0">$width_t</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$half_difference</span> <span class="sy0">=</span> &nbsp;<span class="kw3">round</span><span class="br0">(</span><span class="re0">$difference</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$width_t</span> &nbsp; &nbsp;<span class="sy0">=</span> &nbsp; <span class="re0">$height_t</span> &nbsp; <span class="sy0">=</span> &nbsp; <span class="re0">$square_size</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$off_x</span> &nbsp; &nbsp; &nbsp;<span class="sy0">=</span> &nbsp; <span class="re0">$off_y</span> &nbsp; &nbsp; &nbsp;<span class="sy0">=</span> &nbsp; <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$thumb_p</span> &nbsp; &nbsp;<span class="sy0">=</span> <span class="kw3">imagecreatetruecolor</span><span class="br0">(</span><span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="co1">// &nbsp; $extension &nbsp;= self::get_file_extension($source);</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$extension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> or <span class="re0">$extension</span> <span class="sy0">==</span> <span class="st0">"png"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecolortransparent</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="kw3">imagecolorallocatealpha</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">127</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'jpg'</span> <span class="sy0">||</span> <span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'jpeg'</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$thumb</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromjpeg</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'gif'</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$thumb</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromgif</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'png'</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$thumb</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$bg</span> <span class="sy0">=</span> <span class="kw3">imagecolorallocate</span> <span class="br0">(</span> <span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span> <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagefill</span> <span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$bg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width_t</span><span class="sy0">&gt;</span><span class="re0">$height_t</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="re0">$thumb</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">-</span><span class="re0">$half_difference</span><span class="sy0">+</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">+</span><span class="re0">$difference</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width_t</span><span class="sy0">&gt;</span><span class="re0">$height_t</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="re0">$thumb</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">-</span><span class="re0">$half_difference</span><span class="sy0">+</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">+</span><span class="re0">$difference</span><span class="sy0">,</span> &nbsp;<span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width_t</span><span class="sy0">==</span><span class="re0">$height_t</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagecopyresampled</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span> <span class="re0">$thumb</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$square_size</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$destinationa</span><span class="sy0">=</span><span class="re0">$destination</span><span class="sy0">.</span><span class="st0">"thumb/<span class="es4">$source</span>"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'jpg'</span> <span class="sy0">||</span> <span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'jpeg'</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$status</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">imagejpeg</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span><span class="re0">$destinationa</span><span class="sy0">,</span><span class="re0">$quality</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'gif'</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$status</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">imagegif</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span><span class="re0">$destinationa</span><span class="sy0">,</span><span class="re0">$quality</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$extension</span> <span class="sy0">==</span> <span class="st_h">'png'</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$status</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">imagepng</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="sy0">,</span><span class="re0">$destinationa</span><span class="sy0">,</span><span class="nu0">9</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagedestroy</span><span class="br0">(</span><span class="re0">$thumb</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">imagedestroy</span><span class="br0">(</span><span class="re0">$thumb_p</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$status</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> resizerv_watermark<span class="br0">(</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$folder</span><span class="sy0">,</span><span class="re0">$tip</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$image</span> <span class="sy0">=</span> <span class="st0">"<span class="es4">$folder</span><span class="es4">$slika</span>"</span><span class="sy0">;</span><span class="co1">//ovo je slika koju ces da resajzujes</span></div></li><li class="li1"><div class="de1"><span class="co1">//$newHeight = '200';//u pixelima postavim visinu i sirinu</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$kvalitet</span> <span class="sy0">=</span> <span class="st_h">'95'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//u pixelima uzima stvarnu visinu i sirinu slike</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> <span class="sy0">=</span> <span class="re0">$newWidth</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$newHeight</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;</span><span class="nu0">300</span><span class="br0">)</span> <span class="re0">$wat</span><span class="sy0">=</span><span class="nu0">220</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$wat</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; <span class="re0">$watermark</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/css/watermark<span class="es4">$wat</span>.png"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$watermark</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$watermark</span><span class="sy0">,</span> <span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$wtrmrk_w</span> <span class="sy0">=</span> <span class="kw3">imagesx</span><span class="br0">(</span><span class="re0">$watermark</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$wtrmrk_h</span> <span class="sy0">=</span> <span class="kw3">imagesy</span><span class="br0">(</span><span class="re0">$watermark</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$dst_x</span> <span class="sy0">=</span> <span class="br0">(</span><span class="re0">$width</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">)</span> <span class="sy0">-</span> <span class="br0">(</span><span class="re0">$wtrmrk_w</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// For centering the watermark on any image</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$dst_y</span> <span class="sy0">=</span> <span class="br0">(</span><span class="re0">$height</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">)</span> <span class="sy0">-</span> <span class="br0">(</span><span class="re0">$wtrmrk_h</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// For centering the watermark on any image</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><span class="co1">//ovde u pixelima stavi odakle da krene sa crop-ovanjem</span></div></li><li class="li2"><div class="de2"><span class="re0">$y</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//ako je slika gif onda ovako, ako je jpg onda ImageCreateFromJpg a ako je png ImageCreateFromPng</span></div></li><li class="li1"><div class="de1"><span class="re0">$exstension</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$image</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpeg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromjpeg</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> &nbsp;<span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefrompng</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$src</span> <span class="sy0">=</span> <span class="kw3">imagecreatefromgif</span><span class="br0">(</span><span class="re0">$image</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$tmb</span> <span class="sy0">=</span> <span class="kw3">ImageCreateTrueColor</span><span class="br0">(</span><span class="re0">$newWidth</span><span class="sy0">,</span><span class="re0">$newHeight</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">//pravi praznu lsiku sa zadatim velicinama</span></div></li><li class="li1"><div class="de1"><span class="co1">//// eliminisanje pozadine PNG slike///</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"x-png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagealphablending</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="kw4">false</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagesavealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span><span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$transparent</span> <span class="sy0">=</span> <span class="kw3">imagecolorallocatealpha</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">127</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagefilledrectangle</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$transparent</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co1">//////////</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageCopyresampled</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$src</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$x</span><span class="sy0">,</span> <span class="re0">$y</span><span class="sy0">,</span> <span class="re0">$newWidth</span><span class="sy0">,</span> <span class="re0">$newHeight</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//opet menjaj u zavisnosti kakva je slika u pitanju (gif,jpg,png)</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw3">imagecopy</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$watermark</span><span class="sy0">,</span> <span class="re0">$dst_x</span><span class="sy0">,</span> <span class="re0">$dst_y</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$wtrmrk_w</span><span class="sy0">,</span> <span class="re0">$wtrmrk_h</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw3">unlink</span><span class="br0">(</span><span class="re0">$folder</span><span class="sy0">.</span><span class="st0">"<span class="es4">$slika</span>"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$destJpeg</span><span class="sy0">=</span><span class="re0">$folder</span><span class="sy0">.</span><span class="st0">"<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"jpg"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"JPG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imageJpeg</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"gif"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"GIF"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imageGif</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="re0">$kvalitet</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"png"</span> <span class="sy0">||</span> <span class="re0">$exstension</span> <span class="sy0">==</span> <span class="st0">"PNG"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw3">imagePng</span><span class="br0">(</span><span class="re0">$tmb</span><span class="sy0">,</span> <span class="re0">$destJpeg</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$src</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw3">ImageDestroy</span><span class="br0">(</span><span class="re0">$tmb</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> opist<span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw1">return</span> <span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"diframe"</span><span class="sy0">,</span> <span class="st0">"iframe"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co2">################### for page site ###################</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> opis<span class="br0">(</span><span class="re0">$duz</span><span class="sy0">,</span><span class="re0">$opis</span><span class="sy0">,</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$fajl</span><span class="sy0">,</span><span class="re0">$podrob</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='opis'&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$duz</span><span class="sy0">&gt;</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$op</span><span class="sy0">=</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$op</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="re0">$duz</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"..."</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='link'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;a href='<span class="es4">$path1</span>/<span class="es4">$fajl</span>?id=<span class="es4">$id</span>'&gt;<span class="es4">$podrob</span>&lt;/a&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"IMG"</span><span class="sy0">,</span> <span class="st0">"img alt='digitalni_print'"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;BR&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;br /&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;br&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;br /&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$opis=str_replace("size=\"1\"","style=\"font-size:10px;\"",$opis);</span></div></li><li class="li1"><div class="de1"><span class="co1">//$opis=str_replace("size=\"2\"","style=\"font-size:11px;\"",$opis);</span></div></li><li class="li1"><div class="de1"><span class="co1">//$opis=str_replace("size=1","style=\"font-size:10px;\"",$opis);</span></div></li><li class="li2"><div class="de2"><span class="co1">//$opis=str_replace("size=2","style=\"font-size:11px;\"",$opis);</span></div></li><li class="li1"><div class="de1"><span class="co1">//$opis=str_replace("size=3","style=\"font-size:11px;\"",$opis);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">/*$opis=str_replace("face=\"Times New Roman\"","",$opis);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">//$opis=str_replace("align=middle","align=center",$opis);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$opis=str_replace("src=\"../../../../","src=\"$patH/",$opis);</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">$opis=str_replace("src=\"../../","src=\"$patH/",$opis);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$opis=str_replace("src=\"../","src=\"$patH/",$opis);</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$opis=str_replace("id=\"_mcePaste\"","",$opis);*/</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&amp;lt;"</span><span class="sy0">,</span><span class="st0">"&lt;"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&amp;gt;"</span><span class="sy0">,</span><span class="st0">"&gt;"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> opis1<span class="br0">(</span><span class="re0">$duz</span><span class="sy0">,</span><span class="re0">$opis</span><span class="sy0">,</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$fajl</span><span class="sy0">,</span><span class="re0">$podrob</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='opis1'&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$duz</span><span class="sy0">&gt;</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$op</span><span class="sy0">=</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$op</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="re0">$duz</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"..."</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='link'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;a href='<span class="es4">$path1</span>/<span class="es4">$fajl</span>/<span class="es4">$id</span>/'&gt;<span class="es4">$podrob</span>&lt;/a&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"IMG"</span><span class="sy0">,</span> <span class="st0">"img alt='digitalni_print'"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;BR&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;br /&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=<span class="es1">\"</span>1<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:10px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=<span class="es1">\"</span>2<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=1"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:10px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=2"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=3"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"face=<span class="es1">\"</span>Times New Roman<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;img "</span><span class="sy0">,</span><span class="st0">"&lt;img class='magnify' "</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"align=middle"</span><span class="sy0">,</span><span class="st0">"align=center"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"align=center"</span><span class="sy0">,</span><span class="st0">"style='text-align:center;'"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> opis2<span class="br0">(</span><span class="re0">$duz</span><span class="sy0">,</span><span class="re0">$opis</span><span class="sy0">,</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$fajl</span><span class="sy0">,</span><span class="re0">$podrob</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='opis2'&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$duz</span><span class="sy0">&gt;</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$op</span><span class="sy0">=</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$op</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="re0">$duz</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"..."</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='link'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;a href='<span class="es4">$patH</span>/<span class="es4">$fajl</span>?id=<span class="es4">$id</span>'&gt;<span class="es4">$podrob</span>&lt;/a&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"IMG"</span><span class="sy0">,</span> <span class="st0">"img alt='digitalni_print'"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;BR&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;br /&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=<span class="es1">\"</span>1<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:10px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=<span class="es1">\"</span>2<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=1"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:10px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=2"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> opis3<span class="br0">(</span><span class="re0">$duz</span><span class="sy0">,</span><span class="re0">$opis</span><span class="sy0">,</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$fajl</span><span class="sy0">,</span><span class="re0">$podrob</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='opis1'&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$duz</span><span class="sy0">&gt;</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$op</span><span class="sy0">=</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$op</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="re0">$duz</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"..."</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div class='link'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;a href='<span class="es4">$path1</span>/<span class="es4">$fajl</span>/<span class="es4">$id</span>/'&gt;<span class="es4">$podrob</span>&lt;/a&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"IMG"</span><span class="sy0">,</span> <span class="st0">"img alt='digitalni_print'"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/P&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/p&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/ul&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/LI&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/li&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;BR&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;br /&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"&lt;/STRONG&gt;"</span><span class="sy0">,</span> <span class="st0">"&lt;/strong&gt;"</span><span class="sy0">,</span> <span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=<span class="es1">\"</span>1<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:10px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=<span class="es1">\"</span>2<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=1"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:10px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=2"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"size=3"</span><span class="sy0">,</span><span class="st0">"style=<span class="es1">\"</span>font-size:11px;<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"face=<span class="es1">\"</span>Times New Roman<span class="es1">\"</span>"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$opis</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"align=middle"</span><span class="sy0">,</span><span class="st0">"align=center"</span><span class="sy0">,</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$opis</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co1">/////////// convert DATE ////////////</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> datum<span class="br0">(</span><span class="re0">$datum</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$exp</span><span class="sy0">=</span><span class="re0">$ivreme</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="re0">$datum</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$exp</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$exp</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$exp</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$exp</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$datum</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$exp_rev</span><span class="sy0">=</span><span class="kw3">array_reverse</span><span class="br0">(</span><span class="re0">$exp</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$imp</span><span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"."</span><span class="sy0">,</span><span class="re0">$exp_rev</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$ivreme</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$imp</span><span class="sy0">.</span><span class="st0">". "</span><span class="sy0">.</span><span class="re0">$ivreme</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$imp</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> datum1<span class="br0">(</span><span class="re0">$datum</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$exp</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$datum</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$exp_rev</span><span class="sy0">=</span><span class="kw3">array_reverse</span><span class="br0">(</span><span class="re0">$exp</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$imp</span><span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$exp_rev</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$imp</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="co1">//////////////////// return idpage //////////////</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> idpages<span class="br0">(</span><span class="re0">$strana</span><span class="sy0">,</span><span class="re0">$lang</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$pp</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM page WHERE file='<span class="es4">$strana</span>' AND jezik='<span class="es4">$lang</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$pp1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$pp</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">return</span> <span class="re0">$pp1</span><span class="br0">[</span>id_grupe<span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> read_files<span class="br0">(</span><span class="re0">$kol</span><span class="sy0">,</span><span class="re0">$i</span><span class="sy0">,</span><span class="re0">$idpage</span><span class="sy0">,</span><span class="re0">$patH</span><span class="sy0">,</span><span class="re0">$page_path2</span><span class="sy0">,</span><span class="re0">$download</span><span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$pp</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT p.*, pt.*</span></div></li><li class="li1"><div class="de1"><span class="st0"> &nbsp; &nbsp; &nbsp; &nbsp;FROM files p</span></div></li><li class="li1"><div class="de1"><span class="st0"> &nbsp; &nbsp; &nbsp; &nbsp;INNER JOIN files_lang pt ON p.id = pt.id_fajla</span></div></li><li class="li1"><div class="de1"><span class="st0"> &nbsp; &nbsp; &nbsp; &nbsp;WHERE pt.lang='<span class="es4">$lang</span>' &nbsp;AND p.akt='Y' AND p.<span class="es4">$kol</span>=<span class="es4">$i</span> ORDER BY -p.pozicija DESC"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">(</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$pp</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$g</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div &nbsp;class='files'&gt;&lt;ul&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="sy0">@</span><span class="re0">$pp1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$pp</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="co1">//if($g%2==0)</span></div></li><li class="li1"><div class="de1"><span class="co1">//$fr=" class='iright'"; else $fr="";</span></div></li><li class="li1"><div class="de1"><span class="re0">$nazi</span><span class="sy0">=</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st0">"naslov"</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"pdf"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-pdf'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"xls"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-excel'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"xlsx"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-excel'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"doc"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-word'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"docx"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-word'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"zip"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-archive'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"avi"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-video'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"mpg"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-video'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"wmv"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-video'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"mp3"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"&lt;i class='far fa-file-audio'&gt;&lt;/i&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">file_exists</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>"</span><span class="sy0">.</span>SUBFOLDER<span class="sy0">.</span><span class="st0">"/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">""</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span><span class="sy0">=</span><span class="kw3">ceil</span><span class="br0">(</span><span class="kw3">filesize</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>"</span><span class="sy0">.</span>SUBFOLDER<span class="sy0">.</span><span class="st0">"/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">""</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">1024</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$download</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span><span class="co1">//($size Kb)</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;li<span class="es4">$fr</span>&gt;&lt;a href='"</span><span class="sy0">.</span><span class="re0">$patH</span><span class="sy0">.</span><span class="st0">"/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"' target='_blank'&gt;<span class="es4">$tip</span> &amp;nbsp;&amp;nbsp;<span class="es4">$nazi</span>&lt;/a&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$download</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;li<span class="es4">$fr</span>&gt;&lt;a href='"</span><span class="sy0">.</span><span class="re0">$patH</span><span class="sy0">.</span><span class="st0">"/download.php?f="</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"'&gt;<span class="es4">$tip</span> &amp;nbsp;&amp;nbsp;<span class="es4">$nazi</span>&lt;/a&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$g</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/ul&gt;&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> read_files_pdf<span class="br0">(</span><span class="re0">$kol</span><span class="sy0">,</span><span class="re0">$i</span><span class="sy0">,</span><span class="re0">$idpage</span><span class="sy0">,</span><span class="re0">$patH</span><span class="sy0">,</span><span class="re0">$page_path2</span><span class="sy0">,</span><span class="re0">$download</span><span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$pp</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM files WHERE <span class="es4">$kol</span>='<span class="es4">$i</span>' AND akt='Y' ORDER BY -pozicija DESC"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">(</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$pp</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$g</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;ul class='pdf'&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="sy0">@</span><span class="re0">$pp1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$pp</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="co1">//if($g%2==0)</span></div></li><li class="li1"><div class="de1"><span class="co1">//$fr=" class='iright'"; else $fr="";</span></div></li><li class="li1"><div class="de1"><span class="re0">$nazi</span><span class="sy0">=</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st0">"naslov<span class="es4">$lang</span>"</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"pdf"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"pdf.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"xls"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"excel.png"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"xlsx"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"excel.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"doc"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"word.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"docx"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"word.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"zip"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"zip.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"swf"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"swf.png"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"avi"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"video.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"mpg"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"video.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"wmv"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"video.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">file_exists</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>"</span><span class="sy0">.</span>SUBFOLDER<span class="sy0">.</span><span class="st0">"/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">""</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span><span class="sy0">=</span><span class="kw3">ceil</span><span class="br0">(</span><span class="kw3">filesize</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>"</span><span class="sy0">.</span>SUBFOLDER<span class="sy0">.</span><span class="st0">"/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">""</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">1024</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$download</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span><span class="co1">//($size Kb)</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;li<span class="es4">$fr</span>&gt;&lt;a href='"</span><span class="sy0">.</span><span class="re0">$patH</span><span class="sy0">.</span><span class="st0">"/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"' target='_blank'&gt;<span class="es4">$nazi</span></span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;/a&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$download</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;li<span class="es4">$fr</span>&gt;&lt;a href='"</span><span class="sy0">.</span><span class="re0">$patH</span><span class="sy0">.</span><span class="st0">"/download.php?f="</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'slika'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"'&gt;<span class="es4">$nazi</span>&lt;/a&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$g</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/ul&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> read_files_left<span class="br0">(</span><span class="re0">$kol</span><span class="sy0">,</span><span class="re0">$i</span><span class="sy0">,</span><span class="re0">$idpage</span><span class="sy0">,</span><span class="re0">$patH</span><span class="sy0">,</span><span class="re0">$page_path2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$pp</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM files WHERE idstrane='<span class="es4">$i</span>' AND id_page=<span class="es4">$idpage</span> AND akt='Y'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$g</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="sy0">@</span><span class="re0">$pp1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$pp</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$g</span><span class="sy0">%</span><span class="nu19">2</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div style='width:100%;height:5px;float:left;'&gt;&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw3">preg_match</span><span class="br0">(</span><span class="st0">"/::<span class="es4">$lang</span>::(.*)::<span class="es4">$lang</span>::/"</span><span class="sy0">,</span> <span class="re0">$pp1</span><span class="br0">[</span>naslov<span class="br0">]</span><span class="sy0">,</span> <span class="re0">$matches</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nazi</span><span class="sy0">=</span><span class="re0">$matches</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"pdf"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"pdf.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"xls"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"excel.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"doc"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"word.png"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"zip"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"zip.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"swf"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"swf.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"avi"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"video.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"mpg"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"video.png"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"wmv"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"video.png"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">file_exists</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>/private/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">""</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span><span class="sy0">=</span><span class="kw3">ceil</span><span class="br0">(</span><span class="kw3">filesize</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>/private/files/"</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">""</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">1024</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;table style='float:left;width:100%;' class='files' cellspacing='0'&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;tr &gt;&lt;td style='width:30px;'&gt;&lt;img src='"</span><span class="sy0">.</span><span class="re0">$patH</span><span class="sy0">.</span><span class="st0">"images/<span class="es4">$tip</span>' alt='' width='40' /&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='"</span><span class="sy0">.</span><span class="re0">$patH</span><span class="sy0">.</span><span class="st0">"download.php?down="</span><span class="sy0">.</span><span class="re0">$pp1</span><span class="br0">[</span><span class="st_h">'opis'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"' &nbsp;style='text-align:left;font-size:11px;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&amp;raquo; <span class="es4">$nazi</span></span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$g</span><span class="sy0">++;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> read_galery<span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$idp</span><span class="sy0">,</span><span class="re0">$wi</span><span class="sy0">,</span><span class="re0">$he</span><span class="sy0">,</span><span class="re0">$ur</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$page_path2</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/private"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$wi</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$wid</span><span class="sy0">=</span><span class="nu0">90</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$wid</span><span class="sy0">=</span><span class="re0">$wi</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$he</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$heig</span><span class="sy0">=</span><span class="nu0">80</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$heig</span><span class="sy0">=</span><span class="re0">$he</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$id</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$im</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM galerija WHERE katid='<span class="es4">$id</span>' &nbsp;AND akt='Y' AND id_page='<span class="es4">$idp</span>' ORDER BY pozicija, id ASC"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="re0">$im</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM galerija WHERE id_page='<span class="es4">$idp</span>' AND akt='Y' ORDER BY pozicija, id ASC"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$l</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$p1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$im</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$sl</span><span class="sy0">=</span><span class="st0">"slika1"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$b</span><span class="sy0">=</span><span class="re0">$l</span><span class="sy0">%</span><span class="re0">$ur</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$b</span><span class="sy0">==</span><span class="nu0">0</span> and <span class="re0">$l</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div style='float:left;width:100%;height:4px;'&gt;&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$p1</span><span class="br0">[</span><span class="re0">$sl</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">3</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$pic</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/private/galerija/<span class="es4">$p1[slika1]</span>"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$p1</span><span class="br0">[</span>naslov<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$title</span><span class="sy0">=</span><span class="st0">"Cvetlicarna GARDENIA"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$title</span><span class="sy0">=</span><span class="st0">"<span class="es4">$p1[naslov]</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div style='float:left;'&gt;&lt;div style='margin-left:5px;margin-top:10px;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;a href='<span class="es4">$patH</span>/galerija/<span class="es4">$p1</span>[<span class="es4">$sl</span>]' &nbsp;class='pirobox_gall' title='<span class="es4">$title</span>'&gt;&lt;img src='<span class="es4">$patH</span>/galerija/thumb/<span class="es4">$p1</span>[<span class="es4">$sl</span>]' width='<span class="es4">$width1</span>' height='<span class="es4">$height1</span>' style='border:1px solid #fff;' &nbsp;alt='paintball club' /&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$l</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co1">//////////////////// read images///////////</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> read_images<span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$idp</span><span class="sy0">,</span><span class="re0">$kol</span><span class="sy0">,</span><span class="re0">$wi</span><span class="sy0">,</span><span class="re0">$he</span><span class="sy0">,</span><span class="re0">$title</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$page_path2</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/private"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$wi</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$wid</span><span class="sy0">=</span><span class="nu0">90</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$wid</span><span class="sy0">=</span><span class="re0">$wi</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$he</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$heig</span><span class="sy0">=</span><span class="nu0">80</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$heig</span><span class="sy0">=</span><span class="re0">$he</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$im</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM slike_paintb WHERE <span class="es4">$kol</span>='<span class="es4">$id</span>' AND akt='Y' AND id_page='<span class="es4">$idp</span>' ORDER BY pozicija, id ASC"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$l</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$num</span><span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$im</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$p1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$im</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$sl</span><span class="sy0">=</span><span class="st0">"slika"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$b</span><span class="sy0">=</span><span class="re0">$l</span><span class="sy0">%</span><span class="nu19">3</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$b</span><span class="sy0">==</span><span class="nu0">0</span> and <span class="re0">$l</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div style='float:left;width:100%;height:4px;'&gt;&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$p1</span><span class="br0">[</span><span class="re0">$sl</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">3</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$pic</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/private/galerija/<span class="es4">$p1[slika]</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">/*echo "&lt;div style='float:left;'&gt;&lt;div style='margin-left:5px;margin-top:10px;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&lt;a href='$patH/galerija/$p1[$sl]' rel='lightbox[slide]' title='paintball club airsoft'&gt;&lt;img src='$patH/galerija/thumb/$p1[$sl]' width='$width1' height='$height1' style='border:1px solid #99999;' &nbsp;alt='paintball club' /&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;";*/</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$num</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span> <span class="re0">$pi</span><span class="sy0">=</span><span class="st0">"pirobox"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$pi</span><span class="sy0">=</span><span class="st0">"pirobox_gall"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div style='float:left;'&gt;&lt;div style='margin-left:5px;margin-top:10px;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;a href='<span class="es4">$patH</span>/galerija/<span class="es4">$p1</span>[<span class="es4">$sl</span>]' &nbsp; class=<span class="es1">\"</span>highslide<span class="es1">\"</span> onclick=<span class="es1">\"</span>return hs.expand(this)<span class="es1">\"</span> title='<span class="es4">$title</span>' &gt;&lt;img src='<span class="es4">$patH</span>/galerija/thumb/<span class="es4">$p1</span>[<span class="es4">$sl</span>]' width='<span class="es4">$width1</span>' height='<span class="es4">$height1</span>' style='border:1px solid #111;' &nbsp;alt='paintball club' /&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$l</span><span class="sy0">++;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> read_images1<span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$idp</span><span class="sy0">,</span><span class="re0">$kol</span><span class="sy0">,</span><span class="re0">$bruredu</span><span class="sy0">,</span><span class="re0">$wi</span><span class="sy0">,</span><span class="re0">$he</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$page_path2</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/private"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$wi</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$wid</span><span class="sy0">=</span><span class="nu0">74</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$wid</span><span class="sy0">=</span><span class="re0">$wi</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$he</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$heig</span><span class="sy0">=</span><span class="nu0">50</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$heig</span><span class="sy0">=</span><span class="re0">$he</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$im</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM slike_paintb WHERE <span class="es4">$kol</span>='<span class="es4">$id</span>' AND id_page='<span class="es4">$idp</span>' ORDER BY pozicija, id ASC"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$i</span><span class="sy0">=</span><span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$widd</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">+</span><span class="nu0">10</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$widd1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">+</span><span class="nu0">2</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$p1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$im</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$b</span><span class="sy0">=</span><span class="re0">$i</span><span class="sy0">%</span><span class="re0">$bruredu</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li2"><div class="de2">&lt;div style='float:left;width:<span class="sy1">&lt;?=</span><span class="re0">$widd</span><span class="sy1">?&gt;</span>px;text-align:center;font-size:1px;'&gt;</div></li><li class="li1"><div class="de1">&lt;div style='border:1px solid #999;width:<span class="sy1">&lt;?=</span><span class="re0">$widd1</span><span class="sy1">?&gt;</span>px;'&gt;</div></li><li class="li1"><div class="de1"><span class="sy1">&lt;?</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$p1</span><span class="br0">[</span>slika<span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">3</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$page_path2</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/private"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$pic</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/galerija/<span class="es4">$p1[slika]</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$pic="galerija/$p1[slika]";</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="co1">//echo "&lt;a href='$patH/galerija/$p1[slika]' &nbsp;rel='lightbox[slide]' alt='airsoft paintball club'&gt;";</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;a href='<span class="es4">$patH</span>/galerija/<span class="es4">$p1[slika]</span>' rel='thumbnail'&gt;&lt;img src='<span class="es4">$patH</span>/galerija/<span class="es4">$p1[slika]</span>' width='<span class="es4">$width1</span>' height='<span class="es4">$height1</span>' alt='paintbal club airsoft' title='paintbal airsoft club' &nbsp;class='magnify' /&gt;&lt;/a&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;/div&gt;</div></li><li class="li2"><div class="de2">&lt;/div&gt;</div></li><li class="li1"><div class="de1"><span class="sy1">&lt;?</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$b</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div style='width:100%;height:10px;float:left;font-size:1px;'&gt;&amp;nbsp;&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$i</span><span class="sy0">++;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> image_size<span class="br0">(</span><span class="re0">$wid</span><span class="sy0">,</span><span class="re0">$heig</span><span class="sy0">,</span><span class="re0">$slika</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$page_path2</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span>SUBFOLDER<span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$pic</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span>GALFOLDER<span class="sy0">.</span><span class="re0">$slika</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">2</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$width1</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$height1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> image_size1<span class="br0">(</span><span class="re0">$wid</span><span class="sy0">,</span><span class="re0">$heig</span><span class="sy0">,</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$path1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$lang</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$pic</span><span class="sy0">=</span><span class="st0">"."</span><span class="sy0">.</span>SUBFOLDER<span class="sy0">.</span>GALFOLDER<span class="sy0">.</span><span class="st0">"/"</span><span class="sy0">.</span><span class="re0">$slika</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span> and <span class="kw3">is_file</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height1</span><span class="sy0">&gt;</span><span class="re0">$heig</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;=</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$height1</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&lt;=</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$height1</span><span class="sy0">*</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$height1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> image_size2<span class="br0">(</span><span class="re0">$wid</span><span class="sy0">,</span><span class="re0">$heig</span><span class="sy0">,</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$fold</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">2</span> and <span class="kw3">file_exists</span><span class="br0">(</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/<span class="es4">$fold</span>/<span class="es4">$slika</span>"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$pic</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/<span class="es4">$fold</span>/<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$heig</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wd</span><span class="sy0">*</span><span class="re0">$height1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$height1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&gt;</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$wd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$width1</span><span class="sy0">/</span><span class="re0">$wd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$width</span><span class="sy0">&lt;=</span><span class="re0">$height</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$width1</span><span class="sy0">*</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$height1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> image_size3<span class="br0">(</span><span class="re0">$wid</span><span class="sy0">,</span><span class="re0">$heig</span><span class="sy0">,</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$fold</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$pic</span><span class="sy0">=</span><span class="st0">"."</span><span class="sy0">.</span>SUBFOLDER<span class="sy0">.</span>GALFOLDER<span class="sy0">.</span><span class="st0">"/"</span><span class="sy0">.</span><span class="re0">$slika</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span> and <span class="kw3">is_file</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$heig</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&lt;</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">*</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$wid</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;=</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;=</span><span class="nu0">150</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="nu0">150</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="nu0">150</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">*</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&lt;</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$height1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> image_size33<span class="br0">(</span><span class="re0">$wid</span><span class="sy0">,</span><span class="re0">$heig</span><span class="sy0">,</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$fold</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$pic</span><span class="sy0">=</span><span class="st0">"<span class="es4">$fold</span>/<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span> &nbsp;and <span class="kw3">file_exists</span><span class="br0">(</span><span class="st0">"<span class="es4">$fold</span>/<span class="es4">$slika</span>"</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$size</span> <span class="sy0">=</span> <span class="kw3">GetImageSize</span><span class="br0">(</span><span class="re0">$pic</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width</span> &nbsp;<span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height</span> <span class="sy0">=</span> <span class="re0">$size</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$heig</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&lt;</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">*</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$heig</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$wid</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;=</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$height</span><span class="sy0">/</span><span class="re0">$width</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&gt;=</span><span class="nu0">80</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="nu0">80</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="nu0">80</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">*</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$height</span><span class="sy0">&lt;</span><span class="re0">$width</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$hd</span><span class="sy0">=</span><span class="re0">$width</span><span class="sy0">/</span><span class="re0">$height</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$width1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$height1</span><span class="sy0">=</span><span class="re0">$wid</span><span class="sy0">/</span><span class="re0">$hd</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$width1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$height1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> ukupno_art<span class="br0">(</span><span class="re0">$nd</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$ku</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id_parent='<span class="es4">$nd</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">while</span><span class="br0">(</span><span class="re0">$ku1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$ku</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nn2</span> <span class="sy0">.=</span><span class="st0">", "</span><span class="sy0">.</span><span class="re0">$ku1</span><span class="br0">[</span>id<span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$num</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM proizvodi_new WHERE katid = '<span class="es4">$ku1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$num1</span><span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$num</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nums</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$num1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//////// ispis podkategorija /////////</span></div></li><li class="li2"><div class="de2"><span class="co1">//echo $ku1[ime];</span></div></li><li class="li1"><div class="de1"><span class="re0">$kd</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id_parent='<span class="es4">$ku1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$br1</span> <span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$kd</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">while</span><span class="br0">(</span><span class="re0">$kd1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$kd</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">// echo $kd1[id]."--";</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="re0">$nn3</span> <span class="sy0">.=</span><span class="st0">", "</span><span class="sy0">.</span><span class="re0">$kd1</span><span class="br0">[</span>id<span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$num</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM proizvodi_new WHERE katid='<span class="es4">$kd1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$numi1</span> <span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$num</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//echo "--".$numi1;</span></div></li><li class="li2"><div class="de2"><span class="re0">$numi11</span> <span class="sy0">.=</span><span class="st0">", "</span><span class="sy0">.</span><span class="re0">$numi1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$numg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM proizvodi_new WHERE katid='<span class="es4">$nd</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$numg1</span> <span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$numg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nums_exp</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$nums</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nums_exp1</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$numi11</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$num1</span><span class="sy0">=</span><span class="kw3">array_sum</span><span class="br0">(</span><span class="re0">$nums_exp</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$vuv</span><span class="sy0">=</span><span class="kw3">array_sum</span><span class="br0">(</span><span class="re0">$nums_exp1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">echo</span> <span class="re0">$vuv</span><span class="sy0">+</span><span class="re0">$num1</span><span class="sy0">+</span><span class="re0">$numg1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> find<span class="br0">(</span><span class="re0">$nn1</span><span class="sy0">,</span><span class="re0">$v</span><span class="sy0">,</span><span class="re0">$v1</span><span class="sy0">,</span><span class="re0">$v2</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; <span class="kw2">global</span> <span class="re0">$nn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw2">global</span> <span class="re0">$num2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$ku</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id_parent='<span class="es4">$nn1</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; <span class="kw1">while</span><span class="br0">(</span><span class="re0">$ku1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$ku</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$nn2</span> <span class="sy0">.=</span><span class="st0">", "</span><span class="sy0">.</span><span class="re0">$ku1</span><span class="br0">[</span>id<span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$num</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM proizvodi_new WHERE katid = '<span class="es4">$ku1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$num1</span><span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$num</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//////// ispis podkategorija /////////</span></div></li><li class="li1"><div class="de1"><span class="co1">//echo $ku1[ime];</span></div></li><li class="li1"><div class="de1"><span class="re0">$kd</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id_parent='<span class="es4">$ku1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$br1</span> <span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$kd</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; <span class="kw1">while</span><span class="br0">(</span><span class="re0">$kd1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$kd</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">// echo $kd1[id]."--";</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$nn3</span> <span class="sy0">.=</span><span class="st0">", "</span><span class="sy0">.</span><span class="re0">$kd1</span><span class="br0">[</span>id<span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$num</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM proizvodi_new WHERE katid='<span class="es4">$kd1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$numi1</span> <span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$num</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="co1">//echo "--".$numi1;</span></div></li><li class="li1"><div class="de1"><span class="re0">$numi11</span> <span class="sy0">.=</span><span class="st0">", "</span><span class="sy0">.</span><span class="re0">$numi1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$vuv</span> <span class="sy0">+=</span><span class="re0">$numi1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co1">//echo $vuv;</span></div></li><li class="li2"><div class="de2">&nbsp; <span class="re0">$numi111</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">", "</span><span class="sy0">,</span><span class="re0">$numi11</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw3">array_shift</span><span class="br0">(</span><span class="re0">$numi111</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$numi111</span><span class="sy0">=</span><span class="kw3">array_reverse</span><span class="br0">(</span><span class="re0">$numi111</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$nuv</span><span class="sy0">=</span><span class="kw3">array_slice</span><span class="br0">(</span><span class="re0">$numi111</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="re0">$br1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="re0">$gg</span><span class="sy0">=</span> <span class="kw3">array_sum</span><span class="br0">(</span><span class="re0">$nuv</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$num2</span><span class="sy0">=</span><span class="re0">$num1</span><span class="sy0">+</span><span class="re0">$gg</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$v2</span><span class="sy0">==</span><span class="nu0">1</span> and <span class="re0">$nn1</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">echo</span> <span class="st0">"&lt;option &nbsp;style='color:black;font-weight:normal;' <span class="es4">$su</span> value=<span class="es4">$ku1[id]</span>&gt;<span class="es4">$ku1[ime]</span> (<span class="es4">$num2</span>)&lt;/option&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$v</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;div style='float:left;width:50%;'&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">echo</span> <span class="st0">"</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;img src='images/B2.jpg'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;a href=<span class="es4">$PHP_SELF</span>?id_kat=<span class="es4">$ku1[id]</span> class='link11'&gt;<span class="es4">$ku1[ime]</span>&lt;/a&gt; &lt;span style='font-size:11px;color:#999;'&gt;(<span class="es4">$num2</span>)&lt;/span&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/div&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$v1</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$nn</span><span class="sy0">=</span><span class="re0">$nn1</span><span class="sy0">.</span><span class="re0">$nn2</span><span class="sy0">.</span><span class="re0">$nn3</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; <span class="kw1">return</span> <span class="re0">$nn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="co2">##################### PORUDZBINE @##############</span></div></li><li class="li2"><div class="de2"> <span class="kw2">function</span> toma<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw2">function</span> poruceno<span class="br0">(</span><span class="re0">$poruceno</span><span class="sy0">,</span><span class="re0">$nnt</span><span class="sy0">,</span><span class="re0">$cene</span><span class="sy0">,</span><span class="re0">$ddv</span><span class="sy0">,</span><span class="re0">$jezik</span><span class="sy0">,</span><span class="re0">$nacin_placanja</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">//$cmsniz=cmsniz($cmsniz);</span></div></li><li class="li1"><div class="de1"><span class="co1">//$nacin_placanja= nacin($nacin_placanja);</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$niz</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$exa</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$poruceno</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ce</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$cene</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$send</span><span class="sy0">=</span> <span class="st0">"&lt;table style='width:670px;'&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$jezik</span><span class="br0">)</span> <span class="re0">$tab</span><span class="sy0">=</span><span class="re0">$jezik</span><span class="sy0">.</span><span class="st0">"_proizvodi_new"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$tab</span><span class="sy0">=</span><span class="st0">"proizvodi_new"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">for</span><span class="br0">(</span><span class="re0">$g</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$g</span><span class="sy0">&lt;</span><span class="kw3">count</span><span class="br0">(</span><span class="re0">$exa</span><span class="br0">)</span><span class="sy0">;</span> <span class="re0">$g</span><span class="sy0">++</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nim</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$exa</span><span class="br0">[</span><span class="re0">$g</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$cec</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$ce</span><span class="br0">[</span><span class="re0">$g</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$key</span><span class="sy0">=</span><span class="re0">$nim</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$val</span><span class="sy0">=</span><span class="re0">$nim</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$kor</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tab</span> WHERE id='<span class="es4">$key</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$kor1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$kor</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="co1">//$num=mysqli_num_rows($kor);</span></div></li><li class="li1"><div class="de1"><span class="co1">//if($admin==1 or $admin==2)</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cec</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="co1">//elseif($admin==0) $cc=$kor1[cena]+($kor1[cena]*(30/100));</span></div></li><li class="li1"><div class="de1"><span class="co1">//$vrzapr=$cc*$val;</span></div></li><li class="li2"><div class="de2"><span class="co1">//if($admin==0) $cc=$kor1[cena];</span></div></li><li class="li1"><div class="de1"><span class="co1">//elseif($admin==1) $cc=$kor1[cena1];</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$sddv1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">+</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">*</span><span class="br0">(</span><span class="re0">$ddv</span><span class="sy0">/</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sddv2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$sddv1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ubrez</span><span class="sy0">=</span><span class="re0">$cc1</span><span class="sy0">*</span><span class="re0">$val</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ubrez1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$ubrez</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$uzddv</span><span class="sy0">=</span><span class="re0">$sddv1</span><span class="sy0">*</span><span class="re0">$val</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$uzddv1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$uzddv</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$val1</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$val</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;td&gt;&lt;a href='<span class="es4">$PHP_SELF</span>?idpro=<span class="es4">$kor1[id]</span>' class='reg2' style='color:white;'&gt;"</span><span class="sy0">.</span><span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$kor1</span><span class="br0">[</span>naslov<span class="br0">]</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"&lt;/a&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;td&gt;<span class="es4">$cc2</span> &lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;td&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;form method=post action='<span class="es4">$PHP_SELF</span>?izmeni=izmeni&amp;prikazi=<span class="es4">$_GET[prikazi]</span>' style='margin:0px;'&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;input type='text' name='kolicina' value='<span class="es4">$val</span>' size='1' style='font-size:9px;margin:0px;'&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;input type='hidden' name='kol' value='<span class="es4">$val</span>'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;input type='hidden' name='tabela' value='<span class="es4">$_GET[tabela]</span>'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;input type='hidden' name='vred' value='<span class="es4">$key</span>'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/form&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;td align='right'&gt;<span class="es4">$ubrez1</span> &lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ukupno</span><span class="sy0">+=</span><span class="re0">$ubrez</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ukupno1</span><span class="sy0">+=</span><span class="re0">$uzddv</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$ukupno</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$ukupno</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$ukupno1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$ukupno1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ukupno1=$ukupno+($ukupno*($ddv/100));</span></div></li><li class="li2"><div class="de2"><span class="co1">//$ukupno=str_replace(".",",",sprintf("%4.2f",$ukupno)) ;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//$ukupno1=str_replace(".",",",sprintf("%4.2f",$ukupno1)) ;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr&gt;&lt;td colspan='5'&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr style='font-size:13px;font-weight:bold;background:#f1f1f1;height:20px;'&gt;&lt;td colspan='2'&gt;"</span><span class="sy0">.</span><span class="re0">$niz</span><span class="br0">[</span>kupovina<span class="br0">]</span><span class="br0">[</span><span class="nu0">8</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;td align='right' colspan='3'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;div style='width:100%;text-align:right;float:left;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;span style='font-weight:bold;font-size:13px;'&gt;<span class="es4">$ukupno</span> <span class="es4">$din</span>&lt;/span&gt;&lt;/div&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr&gt;&lt;td colspan='5' style='padding-bottom:10px;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;strong&gt;Naƒçin plaƒáanja:&lt;/strong&gt; "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$send</span> <span class="sy0">.=</span> <span class="re0">$nacin_placanja</span><span class="br0">[</span><span class="re0">$nnt</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/td&gt;&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/table&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$send</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;<span class="kw2">function</span> poruceno1<span class="br0">(</span><span class="re0">$poruceno</span><span class="sy0">,</span><span class="re0">$nnt</span><span class="sy0">,</span><span class="re0">$cene</span><span class="sy0">,</span><span class="re0">$ddv</span><span class="sy0">,</span><span class="re0">$jezik</span><span class="sy0">,</span><span class="re0">$nacin_placanja</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">//$cmsniz=cmsniz($cmsniz);</span></div></li><li class="li1"><div class="de1"><span class="co1">//$nacin_placanja= nacin($nacin_placanja);</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$niz</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$exa</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$poruceno</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ce</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$cene</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span><span class="sy0">=</span> <span class="st0">"&lt;table style='width:520px;'&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$jezik</span><span class="br0">)</span> <span class="re0">$tab</span><span class="sy0">=</span><span class="re0">$jezik</span><span class="sy0">.</span><span class="st0">"_proizvodi_new"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$tab</span><span class="sy0">=</span><span class="st0">"proizvodi_new"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">for</span><span class="br0">(</span><span class="re0">$g</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$g</span><span class="sy0">&lt;</span><span class="kw3">count</span><span class="br0">(</span><span class="re0">$exa</span><span class="br0">)</span><span class="sy0">;</span> <span class="re0">$g</span><span class="sy0">++</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$nim</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$exa</span><span class="br0">[</span><span class="re0">$g</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cec</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$ce</span><span class="br0">[</span><span class="re0">$g</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$key</span><span class="sy0">=</span><span class="re0">$nim</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$val</span><span class="sy0">=</span><span class="re0">$nim</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$kor</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tab</span> WHERE id='<span class="es4">$key</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$kor1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$kor</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$num=mysqli_num_rows($kor);</span></div></li><li class="li2"><div class="de2"><span class="co1">//if($admin==1 or $admin==2)</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cec</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="co1">//elseif($admin==0) $cc=$kor1[cena]+($kor1[cena]*(30/100));</span></div></li><li class="li1"><div class="de1"><span class="co1">//$vrzapr=$cc*$val;</span></div></li><li class="li1"><div class="de1"><span class="co1">//if($admin==0) $cc=$kor1[cena];</span></div></li><li class="li2"><div class="de2"><span class="co1">//elseif($admin==1) $cc=$kor1[cena1];</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sddv1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">+</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">*</span><span class="br0">(</span><span class="re0">$ddv</span><span class="sy0">/</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$sddv2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$sddv1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ubrez</span><span class="sy0">=</span><span class="re0">$cc1</span><span class="sy0">*</span><span class="re0">$val</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ubrez1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$ubrez</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$uzddv</span><span class="sy0">=</span><span class="re0">$sddv1</span><span class="sy0">*</span><span class="re0">$val</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$uzddv1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$uzddv</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$val1</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$val</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;td&gt;&lt;span style='color:red;'&gt;"</span><span class="sy0">.</span><span class="kw3">stripslashes</span><span class="br0">(</span><span class="re0">$kor1</span><span class="br0">[</span>naslov<span class="br0">]</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"&lt;/span&gt;&lt;/td&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;td&gt;<span class="es4">$cc2</span> &lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;td&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;form method=post action='<span class="es4">$PHP_SELF</span>?izmeni=izmeni&amp;prikazi=<span class="es4">$_GET[prikazi]</span>' style='margin:0px;'&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;input type='text' name='kolicina' value='<span class="es4">$val</span>' size='1' style='font-size:9px;margin:0px;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;input type='hidden' name='kol' value='<span class="es4">$val</span>'&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;input type='hidden' name='tabela' value='<span class="es4">$_GET[tabela]</span>'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;input type='hidden' name='vred' value='<span class="es4">$key</span>'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/form&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/td&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;td align='right'&gt;<span class="es4">$ubrez1</span> &lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ukupno</span><span class="sy0">+=</span><span class="re0">$ubrez</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ukupno1</span><span class="sy0">+=</span><span class="re0">$uzddv</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$ukupno</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$ukupno</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$ukupno1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$ukupno1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ukupno1=$ukupno+($ukupno*($ddv/100));</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ukupno=str_replace(".",",",sprintf("%4.2f",$ukupno)) ;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//$ukupno1=str_replace(".",",",sprintf("%4.2f",$ukupno1)) ;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr&gt;&lt;td colspan='5'&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr style='font-size:13px;font-weight:bold;background:#f1f1f1;height:20px;'&gt;&lt;td colspan='2'&gt;"</span><span class="sy0">.</span><span class="re0">$niz</span><span class="br0">[</span>kupovina<span class="br0">]</span><span class="br0">[</span><span class="nu0">8</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;td align='right' colspan='3'&gt;</span></div></li><li class="li2"><div class="de2"><span class="st0">&lt;span style='font-weight:bold;font-size:13px;'&gt;<span class="es4">$ukupno</span> <span class="es4">$din</span>&lt;/span&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;tr&gt;&lt;td colspan='5' style='padding-bottom:10px;'&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;strong&gt;Naƒçin plaƒáanja:&lt;/strong&gt; "</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$send</span> <span class="sy0">.=</span> <span class="re0">$nacin_placanja</span><span class="br0">[</span><span class="re0">$nnt</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/td&gt;&lt;/tr&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$send</span> <span class="sy0">.=</span> <span class="st0">"&lt;/table&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">return</span> <span class="re0">$send</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> kategorije<span class="br0">(</span><span class="re0">$idkat</span><span class="sy0">,</span><span class="re0">$tab</span><span class="sy0">,</span><span class="re0">$podkat</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ss</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tab</span> WHERE id='<span class="es4">$idkat</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ss1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$ss</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$in</span><span class="sy0">=</span><span class="re0">$ss1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$podkat</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$sa</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tab</span> WHERE id_parent='"</span><span class="sy0">.</span><span class="re0">$ss1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sa1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sa</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$in</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$sa1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tab</span> WHERE id_parent='"</span><span class="sy0">.</span><span class="re0">$sa1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sg</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$in</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$sg1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$st</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tab</span> WHERE id_parent='"</span><span class="sy0">.</span><span class="re0">$sg1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$st</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$in</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$st1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$in</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> kategorije1<span class="br0">(</span><span class="re0">$idkat</span><span class="sy0">,</span><span class="re0">$tabela</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$sa</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE id_parent='<span class="es4">$idkat</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$c</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sa1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sa</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$c</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">","</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$in</span> <span class="sy0">.=</span><span class="st0">"<span class="es4">$za</span>"</span><span class="sy0">.</span><span class="re0">$sa1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE id_parent='<span class="es4">$sa1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sg</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$in</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$sg1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$st</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE id_parent='<span class="es4">$sg1[id]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$st</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$in</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$st1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$c</span><span class="sy0">++;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$in</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">","</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$idkat</span><span class="sy0">.</span><span class="st0">"<span class="es4">$za</span>"</span><span class="sy0">.</span><span class="re0">$in</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> kategorije2<span class="br0">(</span><span class="re0">$idkat</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ss</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$idkat</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ss1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$ss</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ins</span><span class="sy0">=</span><span class="re0">$ss1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$sa</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$ss1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sa1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sa</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$ins</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$sa1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sa1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sg</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$ins</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$sg1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$st</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sg1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$st</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$ins</span> <span class="sy0">.=</span><span class="st0">","</span><span class="sy0">.</span><span class="re0">$st1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$ins</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> kategorije3<span class="br0">(</span><span class="re0">$idkat</span><span class="sy0">,</span><span class="re0">$patH</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sa</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$idkat</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$sa1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sa</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$sa1</span><span class="br0">[</span>nivo<span class="br0">]</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$insa</span><span class="sy0">=</span> <span class="st0">"&lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$sa1[ime1]</span>__<span class="es4">$sa1[id]</span>/' class='sc1'&gt;<span class="es4">$sa1[ime]</span>&lt;/a&gt;&amp;raquo; "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$sa1</span><span class="br0">[</span>nivo<span class="br0">]</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$sg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sa1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$insa</span><span class="sy0">=</span> <span class="st0">"&lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$sg1[ime1]</span>__<span class="es4">$sg1[id]</span>/' class='sc1'&gt;<span class="es4">$sg1[ime]</span>&lt;/a&gt;&amp;raquo; &lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$sg1[ime1]</span>__<span class="es4">$sg1[id]</span>/<span class="es4">$sa1[ime1]</span>__<span class="es4">$sa1[id]</span>/' class='sc1'&gt;<span class="es4">$sa1[ime]</span>&lt;/a&gt;&amp;raquo; "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$sa1</span><span class="br0">[</span>nivo<span class="br0">]</span><span class="sy0">==</span><span class="nu0">3</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sa1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sb</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sg1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sb1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sb</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$insa</span><span class="sy0">=</span> <span class="st0">"&lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$sb1[ime1]</span>__<span class="es4">$sb1[id]</span>/' class='sc1'&gt;<span class="es4">$sb1[ime]</span>&lt;/a&gt;&amp;raquo; &lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$sb1[ime1]</span>__<span class="es4">$sb1[id]</span>/<span class="es4">$sg1[ime1]</span>__<span class="es4">$sg1[id]</span>/' class='sc1'&gt;<span class="es4">$sg1[ime]</span>&lt;/a&gt;&amp;raquo; &lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$sb1[ime1]</span>__<span class="es4">$sb1[id]</span>/<span class="es4">$sg1[ime1]</span>__<span class="es4">$sg1[id]</span>/<span class="es4">$sa1[ime1]</span>__<span class="es4">$sa1[id]</span>/' class='sc1'&gt;<span class="es4">$sa1[ime]</span>&lt;/a&gt;&amp;raquo; "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$insa</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> kategorije4<span class="br0">(</span><span class="re0">$idkat</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sa</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$idkat</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$sa1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sa</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$sa1</span><span class="br0">[</span>nivo<span class="br0">]</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$insak</span><span class="sy0">=</span> <span class="st0">" <span class="es4">$sa1[ime]</span> "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$sa1</span><span class="br0">[</span>nivo<span class="br0">]</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$sg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sa1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$insak</span><span class="sy0">=</span> <span class="st0">" <span class="es4">$sg1[ime]</span>, <span class="es4">$sa1[ime]</span>, "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$sa1</span><span class="br0">[</span>nivo<span class="br0">]</span><span class="sy0">==</span><span class="nu0">3</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sa1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sg1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sg</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sb</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id='<span class="es4">$sg1[id_parent]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sb1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sb</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$insak</span><span class="sy0">=</span> <span class="st0">" <span class="es4">$sb1[ime]</span>, <span class="es4">$sg1[ime]</span>, <span class="es4">$sa1[ime]</span>, "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$insak</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> kategorije5<span class="br0">(</span><span class="re0">$idkat</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$in</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="co1">//echo kategorije1($likat1['id'], "kateg_proizvoda_new")."&lt;br&gt;";</span></div></li><li class="li1"><div class="de1"><span class="re0">$sa</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM kateg_proizvoda_new WHERE id_parent='<span class="es4">$idkat</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$c</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sa1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sa</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$c</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">","</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$in</span> <span class="sy0">.=</span><span class="st0">"<span class="es4">$za</span>"</span><span class="sy0">.</span><span class="re0">$sa1</span><span class="br0">[</span><span class="st_h">'id'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$c</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$in</span><span class="br0">)</span><span class="br0">)</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$za</span><span class="sy0">=</span><span class="st0">","</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$idkat</span><span class="sy0">.</span><span class="st0">"<span class="es4">$za</span>"</span><span class="sy0">.</span><span class="re0">$in</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> back_category<span class="br0">(</span><span class="re0">$kateg</span><span class="sy0">,</span> <span class="re0">$tabela</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$niz</span><span class="sy0">=</span><span class="kw3">array</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ar</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE id=<span class="es4">$kateg</span>"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ar1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$ar</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$niz[0]=$kateg;</span></div></li><li class="li1"><div class="de1"><span class="re0">$niz</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">=</span><span class="st0">"&lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$ar1[ime1]</span>/' title='<span class="es4">$ar1[ime]</span>'&gt;<span class="es4">$ar1[ime]</span>&lt;/a&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ar1</span><span class="br0">[</span>id_parent<span class="br0">]</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$zr</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE id=<span class="es4">$ar1[id_parent]</span>"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$zr1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$zr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$niz</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">=</span><span class="st0">"&lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$zr1[ime1]</span>/' title='<span class="es4">$zr1[ime]</span>'&gt;<span class="es4">$zr1[ime]</span>&lt;/a&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$zr1</span><span class="br0">[</span>id_parent<span class="br0">]</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$cr</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE id=<span class="es4">$zr1[id_parent]</span>"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cr1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$cr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$niz</span><span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="sy0">=</span><span class="st0">"&lt;a href='<span class="es4">$patH</span>/videos/<span class="es4">$cr1[ime1]</span>/' title='<span class="es4">$cr1[ime]</span>'&gt;<span class="es4">$cr1[ime]</span>&lt;/a&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$fir_kateg</span><span class="sy0">=</span><span class="kw3">array_reverse</span><span class="br0">(</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$fkateg</span><span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">" &amp;raquo; "</span><span class="sy0">,</span><span class="re0">$fir_kateg</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">" &amp;raquo;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">/*foreach($fir_kateg as $key =&gt; $val)</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="coMULTI">$fkateg[]=$fir_kateg[$key];</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">}*/</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$fkateg</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> cena_u_EVR<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span> <span class="re0">$valuta</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$valuta</span><span class="sy0">==</span><span class="st0">"rsd"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">/</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> format_ceneSES<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$valuta</span><span class="sy0">,</span><span class="re0">$idv</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$idv</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">*</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$idv</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">/</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">"."</span><span class="sy0">,</span> <span class="st0">","</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc2</span><span class="sy0">.</span><span class="st0">" "</span><span class="sy0">.</span><span class="re0">$valuta</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> format_ceneSES1<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$valuta</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$valuta</span><span class="sy0">==</span><span class="st0">"rsd"</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">*</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> format_ceneEU<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$vas</span><span class="sy0">,</span><span class="re0">$nn</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$nn</span><span class="sy0">==</span><span class="st0">"n"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc2</span><span class="sy0">.</span><span class="st0">" "</span><span class="sy0">.</span><span class="re0">$vas</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> format_ceneED<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$idv</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">*</span><span class="re0">$idv</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$vas</span><span class="sy0">=</span><span class="st0">" RSD"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">"."</span><span class="sy0">,</span> <span class="st0">","</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc2</span><span class="sy0">.</span><span class="re0">$vas</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> format_ceneS<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$idv</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$idv</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">*</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$idv</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span> <span class="re0">$vas</span><span class="sy0">=</span><span class="st0">" RSD"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$vas</span><span class="sy0">=</span><span class="st0">" &amp;euro;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">"."</span><span class="sy0">,</span> <span class="st0">","</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc2</span><span class="sy0">.</span><span class="re0">$vas</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> format_ceneS1<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$idv</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$idv</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">*</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">"."</span><span class="sy0">,</span> <span class="st0">""</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> format_ceneSS<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$idv</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$idv</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">*</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> format_ceneS2<span class="br0">(</span><span class="re0">$cc</span><span class="sy0">,</span><span class="re0">$idv</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$settings</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$idv</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cc</span><span class="sy0">*</span><span class="re0">$settings</span><span class="br0">[</span><span class="st_h">'evro_iznos'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$vas</span><span class="sy0">=</span><span class="st0">" RSD"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">"."</span><span class="sy0">,</span> <span class="st0">","</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$cc2</span><span class="sy0">.</span><span class="re0">$vas</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="co2">############### CENE format ###############</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> format_cenec<span class="br0">(</span><span class="re0">$id</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$id</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$sddv1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">+</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">*</span><span class="br0">(</span><span class="re0">$ddv</span><span class="sy0">/</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sddv2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$sddv1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ubrez=$cc1;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ubrez1=number_format ($ubrez, 2, ",", ".");</span></div></li><li class="li1"><div class="de1"><span class="re0">$uzddv</span><span class="sy0">=</span><span class="re0">$sddv1</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$uzddv1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$uzddv</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$uzddv1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> format_cene<span class="br0">(</span><span class="re0">$cena1</span><span class="sy0">,</span><span class="re0">$cena</span><span class="sy0">,</span><span class="re0">$ddv</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">//$kor=mysqli_query($conn,"SELECT * FROM proizvodi_new WHERE id='$id'");</span></div></li><li class="li1"><div class="de1"><span class="co1">//$kor1=mysqli_fetch_array($kor);</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$cena1</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cena1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sddv1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">+</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">*</span><span class="br0">(</span><span class="re0">$ddv</span><span class="sy0">/</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$sddv2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$sddv1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ubrez=$cc1;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ubrez1=number_format ($ubrez, 2, ",", ".");</span></div></li><li class="li1"><div class="de1"><span class="re0">$uzddv</span><span class="sy0">=</span><span class="re0">$sddv1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$uzddvA1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$uzddv</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">else</span> <span class="re0">$uzddvA1</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$cc</span><span class="sy0">=</span><span class="re0">$cena</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="re0">$cc</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$cc2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$sddv1</span><span class="sy0">=</span><span class="kw3">sprintf</span><span class="br0">(</span><span class="st0">"<span class="es6">%4.2f</span>"</span><span class="sy0">,</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">+</span><span class="br0">(</span><span class="re0">$cc1</span><span class="sy0">*</span><span class="br0">(</span><span class="re0">$ddv</span><span class="sy0">/</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sddv2</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$sddv1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ubrez=$cc1;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$ubrez1=number_format ($ubrez, 2, ",", ".");</span></div></li><li class="li1"><div class="de1"><span class="re0">$uzddv</span><span class="sy0">=</span><span class="re0">$sddv1</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$uzddv1</span><span class="sy0">=</span><span class="kw3">number_format</span> <span class="br0">(</span><span class="re0">$uzddv</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="st0">","</span><span class="sy0">,</span> <span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$uzddv1</span><span class="sy0">.</span><span class="st0">"-"</span><span class="sy0">.</span><span class="re0">$uzddvA1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;<span class="kw2">function</span> tep_rand<span class="br0">(</span><span class="re0">$min</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="sy0">,</span> <span class="re0">$max</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; static <span class="re0">$seeded</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><span class="re0">$seeded</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw3">mt_srand</span><span class="br0">(</span><span class="br0">(</span>double<span class="br0">)</span><span class="kw3">microtime</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">1000000</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="re0">$seeded</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$min</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="kw3">isset</span><span class="br0">(</span><span class="re0">$max</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$min</span> <span class="sy0">&gt;=</span> <span class="re0">$max</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$min</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">mt_rand</span><span class="br0">(</span><span class="re0">$min</span><span class="sy0">,</span> <span class="re0">$max</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">mt_rand</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw2">function</span> tep_not_null<span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">is_array</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">sizeof</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span><span class="kw3">is_string</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span> <span class="sy0">||</span> <span class="kw3">is_int</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="re0">$value</span> <span class="sy0">!=</span> <span class="st_h">''</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="re0">$value</span> <span class="sy0">!=</span> <span class="st_h">'NULL'</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$value</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw2">function</span> tep_validate_password<span class="br0">(</span><span class="re0">$plain</span><span class="sy0">,</span> <span class="re0">$encrypted</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span>tep_not_null<span class="br0">(</span><span class="re0">$plain</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> tep_not_null<span class="br0">(</span><span class="re0">$encrypted</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">// split apart the hash / salt</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; <span class="re0">$stack</span> <span class="sy0">=</span> <span class="kw3">explode</span><span class="br0">(</span><span class="st_h">':'</span><span class="sy0">,</span> <span class="re0">$encrypted</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">sizeof</span><span class="br0">(</span><span class="re0">$stack</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">2</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">md5</span><span class="br0">(</span><span class="re0">$stack</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">.</span> <span class="re0">$plain</span><span class="br0">)</span> <span class="sy0">==</span> <span class="re0">$stack</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw2">function</span> tep_encrypt_password<span class="br0">(</span><span class="re0">$plain</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$password</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$i</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">&lt;</span><span class="nu0">10</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="re0">$password</span> <span class="sy0">.=</span> tep_rand<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$salt</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">(</span><span class="kw3">md5</span><span class="br0">(</span><span class="re0">$password</span><span class="br0">)</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$password</span> <span class="sy0">=</span> <span class="kw3">md5</span><span class="br0">(</span><span class="re0">$salt</span> <span class="sy0">.</span> <span class="re0">$plain</span><span class="br0">)</span> <span class="sy0">.</span> <span class="st_h">':'</span> <span class="sy0">.</span> <span class="re0">$salt</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$password</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> create_table<span class="br0">(</span><span class="re0">$table</span><span class="sy0">,</span><span class="re0">$fix</span><span class="sy0">,</span><span class="re0">$database_conn</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$structure</span> <span class="sy0">=</span> <span class="st0">"CREATE TABLE IF NOT EXISTS &nbsp;`"</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st0">"` (<span class="es1">\n</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st_h">'SHOW FIELDS FROM `'</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="sy0">@</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$n</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">while</span> <span class="br0">(</span> <span class="re0">$record</span> <span class="sy0">=</span> <span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span>n<span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span> <span class="re0">$prim</span><span class="sy0">=</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st_h">'`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'` '</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Type'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="sy0">!</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Default'</span><span class="br0">]</span><span class="br0">)</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st_h">' DEFAULT \''</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Default'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'\''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="sy0">@</span><span class="kw3">strcmp</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Null'</span><span class="br0">]</span><span class="sy0">,</span><span class="st_h">'YES'</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st_h">' NOT NULL'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//if ( !empty($record['Extra']) )</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//&nbsp; $structure .= ' '.$record['Extra'];</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st0">",<span class="es1">\n</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$n</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$x</span> <span class="sy0">=</span> <span class="kw3">mysql_list_fields</span><span class="br0">(</span><span class="re0">$database_conn</span><span class="sy0">,</span> <span class="re0">$table</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">for</span> <span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="nu0">1</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$prim</span> <span class="sy0">=</span><span class="st0">"(`"</span><span class="sy0">.</span><span class="kw3">mysql_field_name</span><span class="br0">(</span><span class="re0">$x</span><span class="sy0">,</span> <span class="re0">$i</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"`)"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st0">"PRIMARY KEY"</span><span class="sy0">.</span> <span class="re0">$prim</span><span class="sy0">.</span><span class="st0">"<span class="es1">\n</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">",<span class="es1">\n</span>$"</span><span class="sy0">,</span> <span class="kw4">null</span><span class="sy0">,</span> <span class="re0">$structure</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Save all Column Indexes</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">//&nbsp; $structure .= $this-&gt;getSqlKeysTable($table);</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st0">"<span class="es1">\n</span>)"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//Save table engine</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SHOW TABLE STATUS LIKE '"</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st0">"'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$record</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="sy0">!</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Engine'</span><span class="br0">]</span><span class="br0">)</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st_h">' ENGINE='</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Engine'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="sy0">!</span><span class="kw3">empty</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Auto_increment'</span><span class="br0">]</span><span class="br0">)</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st_h">' DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;AUTO_INCREMENT='</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Auto_increment'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st0">";"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$structure</span> <span class="sy0">.=</span> <span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$tab</span><span class="sy0">=</span><span class="re0">$fix</span><span class="sy0">.</span><span class="st0">"_"</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$str</span><span class="sy0">=</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">"<span class="es4">$table</span>"</span><span class="sy0">,</span><span class="st0">"<span class="es4">$tab</span>"</span><span class="sy0">,</span><span class="re0">$structure</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"<span class="es4">$str</span>"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> isTextValue<span class="br0">(</span><span class="re0">$field_type</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">switch</span> <span class="br0">(</span><span class="re0">$field_type</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"tinytext"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"text"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"mediumtext"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"longtext"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"binary"</span><span class="sy0">:</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"varbinary"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"tinyblob"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"blob"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"mediumblob"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"longblob"</span><span class="sy0">:</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">True</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">default</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">False</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw2">function</span> getTableData<span class="br0">(</span><span class="re0">$table</span><span class="sy0">,</span><span class="re0">$fix</span><span class="sy0">,</span><span class="re0">$hexValue</span> <span class="sy0">=</span> <span class="kw4">false</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Header</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st_h">'SHOW FIELDS FROM `'</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_fields</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$num_fields</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Field names</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">=</span> <span class="st0">"SELECT "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">=</span> <span class="st0">"INSERT INTO `<span class="es4">$fix</span><span class="es4">$table</span>` ("</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$hexField</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$x</span> <span class="sy0">&lt;</span> <span class="re0">$num_fields</span><span class="sy0">;</span> <span class="re0">$x</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$record</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span><span class="re0">$hexValue</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>isTextValue<span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Type'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st_h">'HEX(`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`)'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$hexField</span> <span class="br0">[</span><span class="re0">$x</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st_h">'`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">.=</span> <span class="st_h">'`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">.=</span> <span class="st0">", "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st0">", "</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$insertStatement</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">') VALUES'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$selectStatement</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">' FROM `'</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$selectStatement</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_rows</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_fields</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysql_num_fields</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Dump data</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$num_rows</span> <span class="sy0">&gt;</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="re0">$insertStatement</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_rows</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$record</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">' ('</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$j</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$j</span> <span class="sy0">&lt;</span> <span class="re0">$num_fields</span><span class="sy0">;</span> <span class="re0">$j</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$field_name</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysql_field_name</span><span class="br0">(</span><span class="re0">$records</span><span class="sy0">,</span> <span class="re0">$j</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$hexField</span><span class="br0">[</span><span class="re0">$j</span><span class="br0">]</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">@</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"0x"</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"'"</span><span class="sy0">.@</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'\"'</span><span class="sy0">,</span><span class="st_h">'"'</span><span class="sy0">,@</span><span class="kw3">mysql_escape_string</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">','</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$data</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">")"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="br0">(</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="br0">(</span><span class="re0">$num_rows</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">)</span> ? <span class="st_h">','</span> <span class="sy0">:</span> <span class="st_h">';'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//if data in greather than 1MB save</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$data</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">function</span> getTableData1<span class="br0">(</span><span class="re0">$table</span><span class="sy0">,</span><span class="re0">$fix</span><span class="sy0">,</span><span class="re0">$idpage</span><span class="sy0">,</span><span class="re0">$hexValue</span> <span class="sy0">=</span> <span class="kw4">false</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st_h">'SHOW FIELDS FROM `'</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_fields</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$num_fields</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Field names</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">=</span> <span class="st0">"SELECT "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">=</span> <span class="st0">"INSERT INTO `<span class="es4">$table</span>` ("</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$hexField</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$x</span> <span class="sy0">&lt;</span> <span class="re0">$num_fields</span><span class="sy0">;</span> <span class="re0">$x</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$record</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span><span class="re0">$hexValue</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>isTextValue<span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Type'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st_h">'HEX(`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`)'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$hexField</span> <span class="br0">[</span><span class="re0">$x</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st_h">'`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$x</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">.=</span> <span class="st_h">'`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">.=</span> <span class="st0">", "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st0">", "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$insertStatement</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">') VALUES'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$selectStatement</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">' FROM `'</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st_h">'` WHERE id_page='</span><span class="sy0">.</span><span class="re0">$idpage</span><span class="sy0">.</span><span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$selectStatement</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_rows</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_fields</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysql_num_fields</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Dump data</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$num_rows</span> <span class="sy0">&gt;</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="re0">$insertStatement</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_rows</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$record</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">' ('</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$j</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$j</span> <span class="sy0">&lt;</span> <span class="re0">$num_fields</span><span class="sy0">;</span> <span class="re0">$j</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$field_name</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysql_field_name</span><span class="br0">(</span><span class="re0">$records</span><span class="sy0">,</span> <span class="re0">$j</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$hexField</span><span class="br0">[</span><span class="re0">$j</span><span class="br0">]</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">@</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">""</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$j</span><span class="sy0">&gt;</span><span class="nu0">0</span> and <span class="re0">$j</span><span class="sy0">!=</span><span class="re0">$num_fields</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"'"</span><span class="sy0">.@</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'\"'</span><span class="sy0">,</span><span class="st_h">'"'</span><span class="sy0">,@</span><span class="kw3">mysql_escape_string</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">','</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$j</span><span class="sy0">==</span><span class="re0">$num_fields</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"'"</span><span class="sy0">.@</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'\"'</span><span class="sy0">,</span><span class="st_h">'"'</span><span class="sy0">,</span><span class="re0">$fix</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$data</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">")"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="br0">(</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="br0">(</span><span class="re0">$num_rows</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">)</span> ? <span class="st_h">','</span> <span class="sy0">:</span> <span class="st_h">';'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//if data in greather than 1MB save</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$data</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">function</span> getTableData2<span class="br0">(</span><span class="re0">$table</span><span class="sy0">,</span><span class="re0">$fix</span><span class="sy0">,</span><span class="re0">$idpage</span><span class="sy0">,</span><span class="re0">$hexValue</span> <span class="sy0">=</span> <span class="kw4">false</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$fix1</span> <span class="sy0">.=</span><span class="re0">$fix</span><span class="sy0">.</span><span class="st0">"_"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st_h">'SHOW FIELDS FROM `'</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_fields</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$num_fields</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Field names</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">=</span> <span class="st0">"SELECT "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">=</span> <span class="st0">"INSERT INTO `<span class="es4">$fix1</span><span class="es4">$table</span>` ("</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$hexField</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$x</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$x</span> <span class="sy0">&lt;</span> <span class="re0">$num_fields</span><span class="sy0">;</span> <span class="re0">$x</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$record</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span><span class="re0">$hexValue</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>isTextValue<span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Type'</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st_h">'HEX(`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`)'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$hexField</span> <span class="br0">[</span><span class="re0">$x</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st_h">'`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">.=</span> <span class="st_h">'`'</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">.</span><span class="st_h">'`'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">.=</span> <span class="st0">", "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">.=</span> <span class="st0">", "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$insertStatement</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$insertStatement</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">') VALUES'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$selectStatement</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$selectStatement</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">' FROM `'</span><span class="sy0">.</span><span class="re0">$table</span><span class="sy0">.</span><span class="st_h">'` WHERE id_page='</span><span class="sy0">.</span><span class="re0">$idpage</span><span class="sy0">.</span><span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$records</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$selectStatement</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_rows</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$num_fields</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysql_num_fields</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Dump data</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$num_rows</span> <span class="sy0">&gt;</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="re0">$insertStatement</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$num_rows</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$record</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$records</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">' ('</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$j</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$j</span> <span class="sy0">&lt;</span> <span class="re0">$num_fields</span><span class="sy0">;</span> <span class="re0">$j</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$field_name</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">mysql_field_name</span><span class="br0">(</span><span class="re0">$records</span><span class="sy0">,</span> <span class="re0">$j</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span> <span class="re0">$hexField</span><span class="br0">[</span><span class="re0">$j</span><span class="br0">]</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">@</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">""</span><span class="sy0">.</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$j</span><span class="sy0">!=</span><span class="re0">$num_fields</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"'"</span><span class="sy0">.@</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'\"'</span><span class="sy0">,</span><span class="st_h">'"'</span><span class="sy0">,@</span><span class="kw3">mysql_escape_string</span><span class="br0">(</span><span class="re0">$record</span><span class="br0">[</span><span class="re0">$field_name</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">','</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$j</span><span class="sy0">==</span><span class="re0">$num_fields</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"'"</span><span class="sy0">.@</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st_h">'\"'</span><span class="sy0">,</span><span class="st_h">'"'</span><span class="sy0">,</span><span class="re0">$fix</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st0">"'"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$data</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">")"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">.=</span> <span class="br0">(</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="br0">(</span><span class="re0">$num_rows</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">)</span> ? <span class="st_h">','</span> <span class="sy0">:</span> <span class="st_h">';'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//if data in greather than 1MB save</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span> &nbsp; &nbsp;<span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$data</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> del_slike<span class="br0">(</span><span class="re0">$kolona</span><span class="sy0">,</span><span class="re0">$idupisa</span><span class="sy0">,</span><span class="re0">$jezik</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$pic</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/galerija/<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$sel</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM slike_paintb WHERE <span class="es4">$kolona</span>='<span class="es4">$idupisa</span>' AND jezik='<span class="es4">$jezik</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sel1</span><span class="sy0">=@</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sel</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$sl</span><span class="sy0">=</span><span class="st0">"slika"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$el</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM slike_paintb WHERE slika='<span class="es4">$sel1</span>[<span class="es4">$sl</span>]'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$sel1</span><span class="br0">[</span><span class="re0">$sl</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">2</span> and <span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$el</span><span class="br0">)</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw3">unlink</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>/galerija/<span class="es4">$sel1</span>[<span class="es4">$sl</span>]"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">unlink</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>/galerija/thumb/<span class="es4">$sel1</span>[<span class="es4">$sl</span>]"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> del_files<span class="br0">(</span><span class="re0">$kolona</span><span class="sy0">,</span><span class="re0">$idupisa</span><span class="sy0">,</span><span class="re0">$jezik</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sel</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM files WHERE <span class="es4">$kolona</span>='<span class="es4">$idupisa</span>' AND jezik='<span class="es4">$jezik</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sel1</span><span class="sy0">=@</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sel</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$sl</span><span class="sy0">=</span><span class="st0">"opis"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$el</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM files WHERE opis='<span class="es4">$sel1[opis]</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$sel1</span><span class="br0">[</span>opis<span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">2</span> and <span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$el</span><span class="br0">)</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw3">unlink</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>/files/<span class="es4">$sel1</span>[<span class="es4">$sl</span>]"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> del_galerije<span class="br0">(</span><span class="re0">$id_page</span><span class="sy0">,</span><span class="re0">$tabela</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$patH</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$pic</span><span class="sy0">=</span><span class="re0">$page_path2</span><span class="sy0">.</span><span class="st0">"/galerija/<span class="es4">$slika</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$sel</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE id_page='<span class="es4">$id_page</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">while</span><span class="br0">(</span><span class="re0">$sel1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$sel</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$sl</span><span class="sy0">=</span><span class="st0">"slika1"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$el</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$tabela</span> WHERE slika1='<span class="es4">$sel1</span>[<span class="es4">$sl</span>]'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$sel1</span><span class="br0">[</span><span class="re0">$sl</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">2</span> and <span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$el</span><span class="br0">)</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw3">unlink</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>/galerija/<span class="es4">$sel1</span>[<span class="es4">$sl</span>]"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">unlink</span><span class="br0">(</span><span class="st0">"<span class="es4">$page_path2</span>/galerija/thumb/<span class="es4">$sel1</span>[<span class="es4">$sl</span>]"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> freeRTE_Preload<span class="br0">(</span><span class="re0">$content</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">// Strip newline characters.</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw3">str_replace</span><span class="br0">(</span><span class="kw3">chr</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">" "</span><span class="sy0">,</span> <span class="re0">$content</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw3">str_replace</span><span class="br0">(</span><span class="kw3">chr</span><span class="br0">(</span><span class="nu0">13</span><span class="br0">)</span><span class="sy0">,</span> <span class="st0">" "</span><span class="sy0">,</span> <span class="re0">$content</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">// Replace single quotes.</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw3">str_replace</span><span class="br0">(</span><span class="kw3">chr</span><span class="br0">(</span><span class="nu0">145</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw3">chr</span><span class="br0">(</span><span class="nu0">39</span><span class="br0">)</span><span class="sy0">,</span> <span class="re0">$content</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw3">str_replace</span><span class="br0">(</span><span class="kw3">chr</span><span class="br0">(</span><span class="nu0">146</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw3">chr</span><span class="br0">(</span><span class="nu0">39</span><span class="br0">)</span><span class="sy0">,</span> <span class="re0">$content</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">// Return the result.</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$content</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw2">function</span> curPageURL<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$pageURL</span> <span class="sy0">=</span> <span class="st_h">'http'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span> <span class="br0">(</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"HTTPS"</span><span class="br0">]</span> <span class="sy0">==</span> <span class="st0">"on"</span><span class="br0">)</span> <span class="br0">{</span><span class="re0">$pageURL</span> <span class="sy0">.=</span> <span class="st0">"s"</span><span class="sy0">;</span><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="re0">$pageURL</span> <span class="sy0">.=</span> <span class="st0">"://"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span> <span class="br0">(</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"SERVER_PORT"</span><span class="br0">]</span> <span class="sy0">!=</span> <span class="st0">"80"</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$pageURL</span> <span class="sy0">.=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"SERVER_NAME"</span><span class="br0">]</span><span class="sy0">.</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"REQUEST_URI"</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$pageURL</span> <span class="sy0">.=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"SERVER_NAME"</span><span class="br0">]</span><span class="sy0">.</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"REQUEST_URI"</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">return</span> <span class="kw3">urldecode</span><span class="br0">(</span><span class="kw3">str_replace</span><span class="br0">(</span><span class="st0">":443"</span><span class="sy0">,</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$pageURL</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> iframeYT<span class="br0">(</span><span class="re0">$ytcode</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="sy0">,</span> <span class="re0">$autopl</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$autopl</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span> <span class="re0">$autoplay</span><span class="sy0">=</span><span class="st0">"?autoplay=1"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ytcode</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$text</span><span class="sy0">=</span> <span class="st_h">'&lt;iframe src="http://www.youtube.com/embed/'</span><span class="sy0">.</span><span class="re0">$ytcode</span><span class="sy0">.</span><span class="re0">$autoplay</span><span class="sy0">.</span><span class="st_h">'" width="'</span><span class="sy0">.</span><span class="re0">$width</span><span class="sy0">.</span><span class="st_h">'" height="'</span><span class="sy0">.</span><span class="re0">$height</span><span class="sy0">.</span><span class="st_h">'" style="padding-right:5px;padding-bottom:5px;padding-top:5px;" frameborder="0"&gt;&lt;/iframe&gt;'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">else</span> <span class="re0">$text</span><span class="sy0">=</span><span class="st0">"No video"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$text</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> youtubeVideo<span class="br0">(</span><span class="re0">$text</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"vimeo.com"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span> or <span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"www.youtu"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span> or &nbsp;<span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"http://youtu.be"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"vimeo"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$idv</span> <span class="sy0">=</span> <span class="kw3">preg_replace</span> <span class="br0">(</span> <span class="st_h">'/[^0-9]/'</span><span class="sy0">,</span> <span class="st_h">''</span><span class="sy0">,</span> <span class="re0">$text</span> <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="re0">$text</span><span class="sy0">=</span><span class="st_h">'&lt;iframe src="http://player.vimeo.com/video/'</span><span class="sy0">.</span><span class="re0">$idv</span><span class="sy0">.</span><span class="st_h">'?byline=0&amp;amp;portrait=0" width="'</span><span class="sy0">.</span><span class="re0">$width</span><span class="sy0">.</span><span class="st_h">'" height="'</span><span class="sy0">.</span><span class="re0">$height</span><span class="sy0">.</span><span class="st_h">'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$text</span> <span class="sy0">=</span> <span class="kw3">preg_replace</span><span class="br0">(</span><span class="st_h">'~</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;# Match non-linked youtube URL in the wild. (Rev:20111012)</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;https?:// &nbsp; &nbsp; &nbsp; &nbsp; # Required scheme. Either http or https.</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?:[0-9A-Z-]+\.)? # Optional subdomain.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Group host alternatives.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;youtu\.be/ &nbsp; &nbsp; &nbsp;# Either youtu.be,</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;| youtube\.com &nbsp; &nbsp;# or youtube.com followed by</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\S* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Allow anything up to VIDEO_ID,</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[^\w\-\s] &nbsp; &nbsp; &nbsp; # but char before ID is non-ID char.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End host alternatives.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;([\w\-]{11}) &nbsp; &nbsp; &nbsp;# $1: VIDEO_ID is exactly 11 chars.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?=[^\w\-]|$) &nbsp; &nbsp; # Assert next char is non-ID or EOS.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?! &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Assert URL is not pre-linked.</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[?=&amp;+%\w]* &nbsp; &nbsp; &nbsp;# Allow URL (query) remainder.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Group pre-linked alternatives.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[\'"][^&lt;&gt;]*&gt; &nbsp;# Either inside a start tag,</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &lt;/a&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# or inside &lt;a&gt; element text contents.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End recognized pre-linked alts.</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End negative lookahead assertion.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;[?=&amp;+%\w]* &nbsp; &nbsp; &nbsp; &nbsp;# Consume any URL (query) remainder.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;~ix'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'&lt;iframe src="http://www.youtube.com/embed/$1" width="'</span><span class="sy0">.</span><span class="re0">$width</span><span class="sy0">.</span><span class="st_h">'" height="'</span><span class="sy0">.</span><span class="re0">$height</span><span class="sy0">.</span><span class="st_h">'" style="padding-right:5px;padding-bottom:5px;padding-top:5px;" frameborder="0"&gt;&lt;/iframe&gt;&lt;br /&gt;'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$text</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$text</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span><span class="kw1">else</span> <span class="kw1">return</span> <span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> youtubeURL<span class="br0">(</span><span class="re0">$text</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"vimeo.com"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span> or <span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"www.youtu"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span> or &nbsp;<span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"http://youtu.be"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"vimeo"</span><span class="sy0">,</span><span class="re0">$text</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$idv</span> <span class="sy0">=</span> <span class="kw3">preg_replace</span> <span class="br0">(</span> <span class="st_h">'/[^0-9]/'</span><span class="sy0">,</span> <span class="st_h">''</span><span class="sy0">,</span> <span class="re0">$text</span> <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$text</span><span class="sy0">=</span><span class="st_h">'http://player.vimeo.com/video/'</span><span class="sy0">.</span><span class="re0">$idv</span><span class="sy0">.</span><span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$text</span> <span class="sy0">=</span> <span class="kw3">preg_replace</span><span class="br0">(</span><span class="st_h">'~</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;# Match non-linked youtube URL in the wild. (Rev:20111012)</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;https?:// &nbsp; &nbsp; &nbsp; &nbsp; # Required scheme. Either http or https.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?:[0-9A-Z-]+\.)? # Optional subdomain.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Group host alternatives.</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;youtu\.be/ &nbsp; &nbsp; &nbsp;# Either youtu.be,</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;| youtube\.com &nbsp; &nbsp;# or youtube.com followed by</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\S* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Allow anything up to VIDEO_ID,</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[^\w\-\s] &nbsp; &nbsp; &nbsp; # but char before ID is non-ID char.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End host alternatives.</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;([\w\-]{11}) &nbsp; &nbsp; &nbsp;# $1: VIDEO_ID is exactly 11 chars.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?=[^\w\-]|$) &nbsp; &nbsp; # Assert next char is non-ID or EOS.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?! &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Assert URL is not pre-linked.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[?=&amp;+%\w]* &nbsp; &nbsp; &nbsp;# Allow URL (query) remainder.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Group pre-linked alternatives.</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[\'"][^&lt;&gt;]*&gt; &nbsp;# Either inside a start tag,</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &lt;/a&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# or inside &lt;a&gt; element text contents.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End recognized pre-linked alts.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End negative lookahead assertion.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;[?=&amp;+%\w]* &nbsp; &nbsp; &nbsp; &nbsp;# Consume any URL (query) remainder.</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;~ix'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'http://www.youtube.com/embed/$1'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$text</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$text</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span><span class="kw1">else</span> <span class="kw1">return</span> <span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> youtube_id_from_url<span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$pattern</span> <span class="sy0">=</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'%^# Match any youtube URL</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?:https?://)? &nbsp;# Optional scheme. Either http or https</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?:www\.)? &nbsp; &nbsp; &nbsp;# Optional www subdomain</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;(?: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Group host alternatives</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;youtu\.be/ &nbsp; &nbsp;# Either youtu.be,</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;| youtube\.com &nbsp;# or youtube.com</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Group path alternatives</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/embed/ &nbsp; &nbsp; # Either /embed/</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| /v/ &nbsp; &nbsp; &nbsp; &nbsp; # or /v/</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| /watch\?v= &nbsp;# or /watch\?v=</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End path alternatives.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End host alternatives.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;([\w-]{10,12}) &nbsp;# Allow 10-12 for 11 char youtube id.</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp;$%x'</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$result</span> <span class="sy0">=</span> <span class="kw3">preg_match</span><span class="br0">(</span><span class="re0">$pattern</span><span class="sy0">,</span> <span class="re0">$url</span><span class="sy0">,</span> <span class="re0">$matches</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw4">false</span> <span class="sy0">!==</span> <span class="re0">$result</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="sy0">@</span><span class="re0">$matches</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> isValidYoutubeURL<span class="br0">(</span><span class="re0">$yid</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$url</span> <span class="sy0">=</span> <span class="st0">"http://www.youtube.com/watch?v=<span class="es4">$yid</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="co1">// Let's check the host first</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$parse</span> <span class="sy0">=</span> <span class="kw3">parse_url</span><span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$host</span> <span class="sy0">=</span> <span class="re0">$parse</span><span class="br0">[</span><span class="st_h">'host'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$host</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">(</span><span class="st_h">'youtube.com'</span><span class="sy0">,</span> <span class="st_h">'www.youtube.com'</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$ch</span> <span class="sy0">=</span> <span class="kw3">curl_init</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$oembedURL</span> <span class="sy0">=</span> <span class="st_h">'www.youtube.com/oembed?url='</span> <span class="sy0">.</span> <span class="kw3">urlencode</span><span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">'&amp;format=json'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_URL<span class="sy0">,</span> <span class="re0">$oembedURL</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">// Silent CURL execution</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="kw3">curl_exec</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">unset</span><span class="br0">(</span><span class="re0">$output</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$info</span> <span class="sy0">=</span> <span class="kw3">curl_getinfo</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_close</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$info</span><span class="br0">[</span><span class="st_h">'https_code'</span><span class="br0">]</span> <span class="sy0">!==</span> <span class="nu0">404</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> isEmbeddableYoutubeURL<span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="co1">// Let's check the host first</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$parse</span> <span class="sy0">=</span> <span class="kw3">parse_url</span><span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$host</span> <span class="sy0">=</span> <span class="re0">$parse</span><span class="br0">[</span><span class="st_h">'host'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$host</span><span class="sy0">,</span> <span class="kw3">array</span><span class="br0">(</span><span class="st_h">'youtube.com'</span><span class="sy0">,</span> <span class="st_h">'www.youtube.com'</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$ch</span> <span class="sy0">=</span> <span class="kw3">curl_init</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$oembedURL</span> <span class="sy0">=</span> <span class="st_h">'www.youtube.com/oembed?url='</span> <span class="sy0">.</span> <span class="kw3">urlencode</span><span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">'&amp;format=json'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_URL<span class="sy0">,</span> <span class="re0">$oembedURL</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="kw3">curl_exec</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_close</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="kw3">json_decode</span><span class="br0">(</span><span class="re0">$output</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><span class="re0">$data</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span> <span class="co1">// Either 404 or 401 (Unauthorized)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><span class="re0">$data</span><span class="sy0">-&gt;</span><span class="br0">{</span><span class="st_h">'html'</span><span class="br0">}</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span> <span class="co1">// Embeddable video MUST have 'html' provided</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> getVimeoThumb<span class="br0">(</span><span class="re0">$id</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">file_get_contents</span><span class="br0">(</span><span class="st0">"http://vimeo.com/api/v2/video/<span class="es4">$id</span>.json"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="kw3">json_decode</span><span class="br0">(</span><span class="re0">$data</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$data</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">-&gt;</span><span class="me1">thumbnail_medium</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> VimeoDuration<span class="br0">(</span><span class="re0">$id</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">file_get_contents</span><span class="br0">(</span><span class="st0">"http://vimeo.com/api/v2/video/<span class="es4">$id</span>.json"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="kw3">json_decode</span><span class="br0">(</span><span class="re0">$data</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$data</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">-&gt;</span><span class="me1">duration</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> parse_vimeo<span class="br0">(</span><span class="re0">$link</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$regexstr</span> <span class="sy0">=</span> <span class="st_h">'~</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Match Vimeo link and embed code</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?:&lt;iframe [^&gt;]*src=")? &nbsp; &nbsp; &nbsp; # If iframe match up to first quote of src</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Group vimeo url</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;https?:\/\/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Either http or https</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?:[\w]+\.)* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Optional subdomains</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vimeo\.com &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Match vimeo.com</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?:[\/\w]*\/videos?)? &nbsp; # Optional video sub directory this handles groups links also</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Slash before Id</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;([0-9]+) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# $1: VIDEO_ID is numeric</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[^\s]* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Not a space</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # End group</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"? &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Match end quote if part of src</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?:[^&gt;]*&gt;&lt;/iframe&gt;)? &nbsp; &nbsp; &nbsp; &nbsp;# Match the end of the iframe</span></div></li><li class="li2"><div class="de2"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(?:&lt;p&gt;.*&lt;/p&gt;)? &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Match any title information stuff</span></div></li><li class="li1"><div class="de1"><span class="st_h"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;~ix'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">preg_match</span><span class="br0">(</span><span class="re0">$regexstr</span><span class="sy0">,</span> <span class="re0">$link</span><span class="sy0">,</span> <span class="re0">$matches</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$matches</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">==</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$must</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"/"</span><span class="sy0">,</span><span class="re0">$link</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$must1</span><span class="sy0">=</span><span class="kw3">array_reverse</span><span class="br0">(</span><span class="re0">$must</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$must1</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$matches</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">=</span><span class="re0">$must1</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$matches</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">=</span><span class="re0">$must1</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$matches</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw2">function</span> iframeVI<span class="br0">(</span><span class="re0">$ytcode</span><span class="sy0">,</span> <span class="re0">$width</span><span class="sy0">,</span> <span class="re0">$height</span><span class="sy0">,</span> <span class="re0">$autopl</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$autopl</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span> <span class="re0">$autoplay</span><span class="sy0">=</span><span class="st0">"?autoplay=1"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ytcode</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="re0">$text</span><span class="sy0">=</span> <span class="st_h">'&lt;iframe src="//player.vimeo.com/video/'</span><span class="sy0">.</span><span class="re0">$ytcode</span><span class="sy0">.</span><span class="re0">$autoplay</span><span class="sy0">.</span><span class="st_h">'" width="'</span><span class="sy0">.</span><span class="re0">$width</span><span class="sy0">.</span><span class="st_h">'" height="'</span><span class="sy0">.</span><span class="re0">$height</span><span class="sy0">.</span><span class="st_h">'" style="padding-right:5px;padding-bottom:5px;padding-top:5px;" frameborder="0"&gt;&lt;/iframe&gt;'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">else</span> <span class="re0">$text</span><span class="sy0">=</span><span class="st0">"No video"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$text</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> getDuration<span class="br0">(</span><span class="re0">$yid</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="re0">$url</span> <span class="sy0">=</span> <span class="st0">"http://www.youtube.com/watch?v=<span class="es4">$yid</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">parse_str</span><span class="br0">(</span><span class="kw3">parse_url</span><span class="br0">(</span><span class="re0">$url</span><span class="sy0">,</span>PHP_URL_QUERY<span class="br0">)</span><span class="sy0">,</span><span class="re0">$arr</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$video_id</span><span class="sy0">=</span><span class="re0">$arr</span><span class="br0">[</span><span class="st_h">'v'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$data</span><span class="sy0">=@</span><span class="kw3">file_get_contents</span><span class="br0">(</span><span class="st_h">'http://gdata.youtube.com/feeds/api/videos/'</span><span class="sy0">.</span><span class="re0">$video_id</span><span class="sy0">.</span><span class="st_h">'?v=2&amp;alt=jsonc'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw4">false</span><span class="sy0">===</span><span class="re0">$data</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$obj</span><span class="sy0">=</span><span class="kw3">json_decode</span><span class="br0">(</span><span class="re0">$data</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="sy0">@</span><span class="re0">$obj</span><span class="sy0">-&gt;</span><span class="me1">data</span><span class="sy0">-&gt;</span><span class="me1">duration</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> getVimeoInfo<span class="br0">(</span><span class="re0">$link</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">preg_match</span><span class="br0">(</span><span class="st_h">'~^http://(?:www\.)?vimeo\.com/(?:clip:)?(\d+)~'</span><span class="sy0">,</span> <span class="re0">$link</span><span class="sy0">,</span> <span class="re0">$match</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$id</span> <span class="sy0">=</span> <span class="re0">$match</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$id</span> <span class="sy0">=</span> <span class="kw3">substr</span><span class="br0">(</span><span class="re0">$link</span><span class="sy0">,</span><span class="nu0">10</span><span class="sy0">,</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$link</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><span class="kw3">function_exists</span><span class="br0">(</span><span class="st_h">'curl_init'</span><span class="br0">)</span><span class="br0">)</span> <span class="kw3">die</span><span class="br0">(</span><span class="st_h">'CURL is not installed!'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$ch</span> <span class="sy0">=</span> <span class="kw3">curl_init</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_URL<span class="sy0">,</span> <span class="st0">"http://vimeo.com/api/v2/video/<span class="es4">$id</span>.php"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_HEADER<span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_TIMEOUT<span class="sy0">,</span> <span class="nu0">10</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="kw3">unserialize</span><span class="br0">(</span><span class="kw3">curl_exec</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="re0">$output</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_close</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$output</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> save_image_local<span class="br0">(</span><span class="re0">$thumbnail_url</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">//for save image at local server</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$filename</span> <span class="sy0">=</span> <span class="kw3">time</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">'_hbk.jpg'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="re0">$fullpath</span> <span class="sy0">=</span> <span class="st_h">'../../app/webroot/img/videos/image/'</span><span class="sy0">.</span><span class="re0">$filename</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">file_put_contents</span> <span class="br0">(</span><span class="re0">$fullpath</span><span class="sy0">,</span><span class="kw3">file_get_contents</span><span class="br0">(</span><span class="re0">$thumbnail_url</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$filename</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw2">function</span> header_404<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$page_path2</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="kw3">header</span><span class="br0">(</span><span class="st0">"Status: 404 Not Found"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="sy0">@</span><span class="kw1">include</span><span class="br0">(</span><span class="st0">"404.html"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">echo</span> <span class="st0">"&lt;title&gt;Izbrana stranica ne postoji&lt;/title&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw3">exit</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> ae_detect_ie<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_USER_AGENT'</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">(</span><span class="kw3">strpos</span><span class="br0">(</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_USER_AGENT'</span><span class="br0">]</span><span class="sy0">,</span> <span class="st_h">'MSIE'</span><span class="br0">)</span> <span class="sy0">!==</span> <span class="kw4">false</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> base_ret<span class="br0">(</span><span class="re0">$base</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$baser</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"/"</span><span class="sy0">,</span> <span class="kw3">strip_tags</span><span class="br0">(</span><span class="re0">$base</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$baser</span><span class="sy0">=</span><span class="kw3">array_filter</span><span class="br0">(</span><span class="re0">$baser</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$baser=implode("/",$baser);</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$baser</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> base_ret_rev<span class="br0">(</span><span class="re0">$base</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$baser</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"/"</span><span class="sy0">,</span> <span class="kw3">strip_tags</span><span class="br0">(</span><span class="re0">$base</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$baser</span><span class="sy0">=</span><span class="kw3">array_filter</span><span class="br0">(</span><span class="re0">$baser</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$baser</span><span class="sy0">=</span><span class="kw3">array_reverse</span><span class="br0">(</span><span class="re0">$baser</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$baser=implode("/",$baser);</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$baser</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> check_image<span class="br0">(</span><span class="re0">$slika</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$form_slika</span><span class="sy0">=</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">"jpg"</span><span class="sy0">,</span><span class="st0">"jpeg"</span><span class="sy0">,</span><span class="st0">"JPG"</span><span class="sy0">,</span><span class="st0">"JPEG"</span><span class="sy0">,</span><span class="st0">"gif"</span><span class="sy0">,</span><span class="st0">"GIF"</span><span class="sy0">,</span><span class="st0">"png"</span><span class="sy0">,</span><span class="st0">"PNG"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="kw3">in_array</span><span class="br0">(</span><span class="kw3">substr</span><span class="br0">(</span><span class="re0">$slika</span><span class="sy0">,-</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">,</span><span class="re0">$form_slika</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> check_file<span class="br0">(</span><span class="re0">$slika</span><span class="sy0">,</span><span class="re0">$ext</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$af</span><span class="sy0">=</span><span class="kw3">array_reverse</span><span class="br0">(</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"."</span><span class="sy0">,</span><span class="re0">$slika</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$form_slika</span><span class="sy0">=</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">"doc"</span><span class="sy0">,</span><span class="st0">"pdf"</span><span class="sy0">,</span><span class="st0">"DOC"</span><span class="sy0">,</span><span class="st0">"PDF"</span><span class="sy0">,</span><span class="st0">"docx"</span><span class="sy0">,</span><span class="st0">"DOCX"</span><span class="sy0">,</span><span class="st0">"jpg"</span><span class="sy0">,</span><span class="st0">"jpeg"</span><span class="sy0">,</span><span class="st0">"gif"</span><span class="sy0">,</span><span class="st0">"png"</span><span class="sy0">,</span> <span class="st0">"zip"</span><span class="sy0">,</span> <span class="st0">"ZIP"</span><span class="sy0">,</span> <span class="st0">"rar"</span><span class="sy0">,</span> <span class="st0">"RAR"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ext</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$form_slika</span><span class="sy0">=</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">"<span class="es4">$ext</span>"</span><span class="sy0">,</span> <span class="kw3">strtoupper</span><span class="br0">(</span><span class="re0">$ext</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$af</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span><span class="re0">$form_slika</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">else</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> ifempty<span class="br0">(</span><span class="re0">$val</span><span class="sy0">,</span><span class="re0">$ns</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$val</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span> <span class="re0">$val</span><span class="sy0">=</span><span class="re0">$val</span><span class="sy0">;</span> <span class="kw1">else</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ns</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$val</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="re0">$val</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="kw3">trim</span><span class="br0">(</span><span class="re0">$val</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> datef<span class="br0">(</span><span class="re0">$tip</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$hi</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$hi</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span> <span class="re0">$his</span><span class="sy0">=</span><span class="st0">" H:i"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$hi</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span> <span class="re0">$his</span><span class="sy0">=</span><span class="st0">" H:i:s"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="re0">$his</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tip</span><span class="sy0">==</span><span class="st0">"us"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$datume</span><span class="sy0">=</span><span class="kw3">date</span><span class="br0">(</span><span class="st0">"Y-m-d<span class="es4">$his</span>"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tip</span><span class="sy0">==</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$datume</span><span class="sy0">=</span><span class="kw3">date</span><span class="br0">(</span><span class="st0">"d-m-Y<span class="es4">$his</span>"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> send_email<span class="br0">(</span><span class="re0">$tip</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$to</span><span class="sy0">,</span> <span class="re0">$from_email</span><span class="sy0">,</span> <span class="re0">$replyto_email</span><span class="sy0">,</span> <span class="re0">$subject</span><span class="sy0">,</span> <span class="re0">$from_name</span><span class="sy0">,</span> <span class="re0">$html_text</span><span class="sy0">,</span> <span class="re0">$alt_text</span><span class="sy0">,</span> <span class="re0">$fajl</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$host_smtp</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$port_smtp</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$password_smtp</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw2">global</span> <span class="re0">$username_smtp</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span> <span class="sy0">=</span> <span class="kw2">new</span> PHPMailer<span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tip</span><span class="sy0">==</span><span class="st0">"smtp"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$host_smpt</span><span class="sy0">=</span><span class="st0">"94.130.154.232"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$port_smtp</span><span class="sy0">=</span><span class="nu0">587</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$password_smtp</span><span class="sy0">=</span><span class="st0">"ovojesifra"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$username_smtp</span><span class="sy0">=</span><span class="st0">"kontakt@greenlancer.com"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">isSMTP</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">SMTPDebug</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">SMTPAuth</span> &nbsp; <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span> &nbsp; <span class="co1">// enable SMTP authentication</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">SMTPAuth</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Host</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="st0">"<span class="es4">$host_smtp</span>"</span><span class="sy0">;</span> <span class="co1">// sets the SMTP server</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Port</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="st0">"<span class="es4">$port_smtp</span>"</span><span class="sy0">;</span> &nbsp;<span class="co1">// set the SMTP port for the GMAIL server</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Username</span> &nbsp; <span class="sy0">=</span> <span class="st0">""</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; <span class="co1">// SMTP account username</span></div></li><li class="li2"><div class="de2"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Password</span> &nbsp; <span class="sy0">=</span> <span class="re0">$pass_smtp</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">// SMTP account password</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$tip</span><span class="sy0">==</span><span class="st0">"mail"</span> or <span class="re0">$tip</span><span class="sy0">==</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Mailer</span> &nbsp; <span class="sy0">=</span> <span class="st0">"mail"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Debugoutput</span> <span class="sy0">=</span> <span class="st_h">'html'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">CharSet</span> <span class="sy0">=</span> <span class="st_h">'UTF-8'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Set who the message is to be sent from</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">setFrom</span><span class="br0">(</span><span class="re0">$from_email</span><span class="sy0">,</span> <span class="re0">$from_name</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Set an alternative reply-to address</span></div></li><li class="li2"><div class="de2"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">addReplyTo</span><span class="br0">(</span><span class="re0">$replyto_email</span><span class="sy0">,</span> <span class="st_h">''</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Set who the message is to be sent to</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">addAddress</span><span class="br0">(</span><span class="re0">$to</span><span class="sy0">,</span> <span class="st_h">''</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Set the subject line</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Subject</span> <span class="sy0">=</span> <span class="re0">$subject</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="co1">//Read an HTML message body from an external file, convert referenced images to embedded,</span></div></li><li class="li1"><div class="de1"><span class="co1">//convert HTML into a basic plain-text alternative body</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">msgHTML</span><span class="br0">(</span><span class="re0">$html_text</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Replace the plain text body with one created manually</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">AltBody</span> <span class="sy0">=</span> <span class="re0">$alt_text</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$fajl</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">3</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">AddAttachment</span><span class="br0">(</span><span class="re0">$fajl</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"SERVER_NAME"</span><span class="br0">]</span><span class="sy0">!=</span><span class="st0">"localhost"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="kw1">if</span><span class="br0">(</span><span class="re0">$mail</span><span class="sy0">-&gt;</span><span class="me1">Send</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/************************ login funcition **************/</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> meta_tags_new<span class="br0">(</span><span class="re0">$title</span><span class="sy0">,</span> <span class="re0">$desc</span><span class="sy0">,</span> <span class="re0">$key</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$vrati</span> <span class="sy0">.=</span>PHP_EOL<span class="sy0">.</span><span class="st_h">'&lt;title&gt;'</span><span class="sy0">.</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="re0">$title</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">'&lt;/title&gt;'</span><span class="sy0">.</span>PHP_EOL<span class="sy0">.</span><span class="st_h">'</span></div></li><li class="li2"><div class="de2"><span class="st_h">&lt;meta name="description" content="'</span><span class="sy0">.</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="re0">$desc</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">'" /&gt;'</span><span class="sy0">.</span>PHP_EOL<span class="sy0">.</span><span class="st_h">'</span></div></li><li class="li1"><div class="de1"><span class="st_h">&lt;meta name="Keywords" content="'</span><span class="sy0">.</span><span class="kw3">strip_tags</span><span class="br0">(</span><span class="re0">$key</span><span class="br0">)</span><span class="sy0">.</span><span class="st_h">'" /&gt;'</span><span class="sy0">.</span>PHP_EOL<span class="sy0">.</span><span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$vrati</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">/******************* end login function ******************/</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> tagovi<span class="br0">(</span><span class="re0">$tag</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$tagovi</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span> <span class="re0">$tag</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$tagovi</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> sharebutton<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;div &nbsp; style="float:right;margin-bottom:2px;"&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&lt;span class='st_facebook_hcount' displayText='Facebook'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1">&lt;span class='st_googleplus_hcount' displayText='Google +'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1">&lt;span class='st_twitter_hcount' displayText='Tweet'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1">&lt;span class='st_pinterest_hcount' displayText='Pinterest'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$kdkd</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;span class='st_instagram_hcount' displayText='Instagram Badge' st_username='saleksandrou'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;/div&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> sharebuttons<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;div class="social-likes" data-url="<span class="kw2">&lt;?php</span> <span class="kw1">echo</span> curPageURL<span class="br0">(</span><span class="br0">)</span><span class="sy1">?&gt;</span>" data-title="fany video" style="float:right;margin-bottom:-2px;"&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &lt;div class="facebook" title="Share link on Facebook"&gt;Facebook&lt;/div&gt;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &lt;div class="twitter" title="Share link on Twitter"&gt;Twitter&lt;/div&gt;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &lt;div class="plusone" title="Share link on Google+"&gt;Google+&lt;/div&gt;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &lt;div class="pinterest" title="Share image on Pinterest" data-media=""&gt;Pinterest&lt;/div&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&lt;/div&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> sharebuttonl<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;div &nbsp; style="float:right;margin:2px 0px 0px 0px;"&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;span class='st_facebook_hcount' displayText='Facebook'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1">&lt;span class='st_googleplus_hcount' displayText='Google +'&gt;&lt;/span&gt;</div></li><li class="li2"><div class="de2">&lt;span class='st_twitter_hcount' displayText='Tweet'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1">&lt;span class='st_pinterest_hcount' displayText='Pinterest'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$kdkd</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;span class='st_instagram_hcount' displayText='Instagram Badge' st_username='saleksandrou'&gt;&lt;/span&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li2"><div class="de2">&lt;/div&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> sharebutton1<span class="br0">(</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;!-- Go to www.addthis.com/dashboard to customize your tools --&gt;</div></li><li class="li1"><div class="de1">&lt;div class="addthis_sharing_toolbox"&gt;&lt;/div&gt;</div></li><li class="li1"><div class="de1">&lt;!-- Go to www.addthis.com/dashboard to customize your tools --&gt;</div></li><li class="li1"><div class="de1">&lt;script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4e6e52ce4fc756a1"&gt;&lt;/script&gt;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> num_years<span class="br0">(</span><span class="re0">$birth</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$birthdate</span> <span class="sy0">=</span> <span class="kw2">new</span> DateTime<span class="br0">(</span><span class="re0">$birth</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$today</span> &nbsp; &nbsp; <span class="sy0">=</span> <span class="kw2">new</span> DateTime<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$interval</span> &nbsp;<span class="sy0">=</span> <span class="re0">$today</span><span class="sy0">-&gt;</span><span class="me1">diff</span><span class="br0">(</span><span class="re0">$birthdate</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$interval</span><span class="sy0">-&gt;</span><span class="me1">format</span><span class="br0">(</span><span class="st_h">'%y years'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$interval</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/************ add del column in table *******************/</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> checkFieldExists<span class="br0">(</span><span class="re0">$tableName</span><span class="sy0">,</span><span class="re0">$columnName</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$sql</span> <span class="sy0">=</span> <span class="st0">"show columns from <span class="es4">$tableName</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="re0">$data</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="re0">$sql</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="kw1">while</span><span class="br0">(</span><span class="re0">$data_row</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$data</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="re0">$column</span> <span class="sy0">=</span> <span class="re0">$data_row</span><span class="br0">[</span><span class="st_h">'Field'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">(</span><span class="re0">$column</span><span class="sy0">==</span> <span class="re0">$columnName</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span> <span class="co1">//end of function</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">function</span> alter<span class="br0">(</span><span class="re0">$lang</span><span class="sy0">,</span><span class="re0">$page_add_array</span><span class="sy0">,</span><span class="re0">$tips</span><span class="sy0">,</span><span class="re0">$lang_old</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">foreach</span><span class="br0">(</span><span class="re0">$page_add_array</span> <span class="kw1">as</span> <span class="re0">$key</span><span class="sy0">=&gt;</span><span class="re0">$value</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$row</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$drop</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$field_name</span><span class="sy0">=</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">""</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$resulta</span> <span class="sy0">=</span> <span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM <span class="es4">$key</span> limit 1"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; <span class="kw1">while</span><span class="br0">(</span><span class="re0">$row</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$resulta</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp;<span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$field_name</span><span class="sy0">=</span><span class="kw3">array_keys</span><span class="br0">(</span><span class="re0">$row</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="co1">//array_shift($field_name);</span></div></li><li class="li1"><div class="de1"><span class="re0">$gova</span><span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="re0">$resulta</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$p</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">foreach</span><span class="br0">(</span><span class="re0">$value</span> <span class="kw1">as</span> <span class="re0">$keys</span><span class="sy0">=&gt;</span><span class="re0">$values</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$p</span><span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span> &nbsp;<span class="re0">$zap</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$zap</span><span class="sy0">=</span><span class="st0">", "</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$values</span><span class="sy0">==</span><span class="st0">"varchar"</span><span class="br0">)</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"VARCHAR(150)"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$tip</span><span class="sy0">=</span><span class="st0">"TEXT"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/*if($gova&gt;0)</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">if($tips=="add")</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">if(!in_array($keys.$lang, $field_name))</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$row .=$zap."ADD COLUMN $keys$lang $tip NULL";</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="coMULTI">$p++;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">}</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">}</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">if($tips=="del")</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">{</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">if(in_array($keys.$lang, $field_name))</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$drop .=$zap."DROP &nbsp;`$keys$lang`";</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$p++;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">}</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">}</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">}</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">else</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">*/</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tips</span><span class="sy0">==</span><span class="st0">"add"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span>checkFieldExists<span class="br0">(</span><span class="re0">$key</span><span class="sy0">,</span><span class="re0">$keys</span><span class="sy0">.</span><span class="re0">$lang</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$row</span> <span class="sy0">.=</span><span class="re0">$zap</span><span class="sy0">.</span><span class="st0">"ADD COLUMN <span class="es4">$keys</span><span class="es4">$lang</span> <span class="es4">$tip</span> NULL"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$p</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tips</span><span class="sy0">==</span><span class="st0">"del"</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span>checkFieldExists<span class="br0">(</span><span class="re0">$key</span><span class="sy0">,</span><span class="re0">$keys</span><span class="sy0">.</span><span class="re0">$lang</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$drop</span> <span class="sy0">.=</span><span class="re0">$zap</span><span class="sy0">.</span><span class="st0">"DROP &nbsp;`<span class="es4">$keys</span><span class="es4">$lang</span>`"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$p</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$tips</span><span class="sy0">==</span><span class="st0">"ren"</span> and <span class="re0">$lang</span><span class="sy0">!=</span><span class="re0">$lang_old</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span>checkFieldExists<span class="br0">(</span><span class="re0">$key</span><span class="sy0">,</span><span class="re0">$keys</span><span class="sy0">.</span><span class="re0">$lang_old</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$ren</span> <span class="sy0">.=</span><span class="re0">$zap</span><span class="sy0">.</span><span class="st0">"CHANGE `<span class="es4">$keys</span><span class="es4">$lang_old</span>` `<span class="es4">$keys</span><span class="es4">$lang</span>` <span class="es4">$tip</span> NULL"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$p</span><span class="sy0">++;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw1">echo</span> <span class="re0">$row</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$drop</span><span class="sy0">!=</span><span class="st0">""</span> and <span class="re0">$tips</span><span class="sy0">==</span><span class="st0">"del"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">//echo $key."===".$drop."&lt;br&gt;";</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"ALTER TABLE `<span class="es4">$key</span>` <span class="es4">$drop</span>"</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">echo</span> <span class="re0">$conn</span><span class="sy0">-&gt;</span><span class="me1">error</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$row</span><span class="sy0">!=</span><span class="st0">""</span> and <span class="re0">$tips</span><span class="sy0">==</span><span class="st0">"add"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"ALTER TABLE <span class="es4">$key</span> <span class="es4">$row</span> AFTER id"</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">echo</span> <span class="re0">$conn</span><span class="sy0">-&gt;</span><span class="me1">error</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ren</span><span class="sy0">!=</span><span class="st0">""</span> and <span class="re0">$tips</span><span class="sy0">==</span><span class="st0">"ren"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"ALTER TABLE `<span class="es4">$key</span>` <span class="es4">$ren</span>"</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">echo</span> <span class="re0">$conn</span><span class="sy0">-&gt;</span><span class="me1">error</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$cur_link</span><span class="sy0">=</span>curPageURL<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> fajlovi<span class="br0">(</span><span class="re0">$ul</span><span class="sy0">,</span> <span class="re0">$boja</span><span class="sy0">,</span> <span class="re0">$dirk</span><span class="sy0">,</span> <span class="re0">$col</span><span class="sy0">,</span> <span class="re0">$zz1</span><span class="sy0">,</span> <span class="re0">$id_page</span><span class="sy0">,</span><span class="re0">$lod</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$load_name</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$nono</span><span class="sy0">=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;ul &nbsp;class='ul divu <span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$boja</span> <span class="sy1">?&gt;</span>' id="polje<span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$ul</span><span class="sy1">?&gt;</span>"&gt;<span class="sy1">&lt;?</span> <span class="co1">//echo $zz1[include_file_vrh]?&gt;</span></div></li><li class="li2"><div class="de2"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="re0">$dir</span><span class="sy0">=</span><span class="st0">"../include-pages/<span class="es4">$dirk</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$exo</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$zz1</span><span class="br0">[</span><span class="st0">"include_file_<span class="es4">$col</span>"</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//$files = scandir($dir);</span></div></li><li class="li1"><div class="de1"><span class="co1">//$count_dir=count($files)-2;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st0">"include_<span class="es4">$col</span>"</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$exo</span><span class="sy0">=</span><span class="re0">$_POST</span><span class="br0">[</span><span class="st0">"include_<span class="es4">$col</span>"</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$exo</span><span class="br0">)</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">foreach</span><span class="br0">(</span><span class="re0">$exo</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">/*$teva=preg_replace("/text[1-9]+.php/","text.php",$value);</span></div></li><li class="li2"><div class="de2"><span class="coMULTI">if($teva=="text.php")</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">{</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$ima=mysqli_num_rows(mysqli_query($conn,"SELECT * FROM pages_text_include WHERE &nbsp;id_page='$id_page' AND include_file_$col='$value'"));</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">$imas="($ima)";</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">}else $imas="";*/</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"text-"</span><span class="sy0">,</span><span class="re0">$value</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$la</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM language WHERE akt='Y' order by pozicija ASC"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="kw1">while</span><span class="br0">(</span><span class="re0">$la1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_array</span><span class="br0">(</span><span class="re0">$la</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$jezici</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">=</span><span class="re0">$la1</span><span class="br0">[</span><span class="st_h">'jezik'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;<span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$firstlang</span><span class="sy0">=</span><span class="re0">$jezici</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$id_text</span><span class="sy0">=</span><span class="kw3">preg_replace</span><span class="br0">(</span><span class="st_h">'#[^0-9]#i'</span><span class="sy0">,</span> <span class="st_h">''</span><span class="sy0">,</span> <span class="re0">$value</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="re0">$ima</span><span class="sy0">=</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM pages_text_lang WHERE &nbsp;id_text='<span class="es4">$id_text</span>' AND lang='<span class="es4">$firstlang</span>'"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ima1</span><span class="sy0">=</span><span class="kw3">mysqli_fetch_assoc</span><span class="br0">(</span><span class="re0">$ima</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$id_get</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span> <span class="re0">$id_get</span><span class="sy0">=</span><span class="re0">$id_get</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$id_get</span><span class="sy0">=</span><span class="re0">$id_text</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$value</span><span class="sy0">=</span><span class="st0">"&lt;a href='index.php?base=admin&amp;page=page_edit_content&amp;id=<span class="es4">$id_text</span>' target='_blank'&gt;"</span><span class="sy0">.</span><span class="re0">$ima1</span><span class="br0">[</span><span class="st_h">'naslov'</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"&lt;/a&gt;"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">echo</span> <span class="st0">"&lt;li<span class="es4">$zakla</span>&gt;&lt;label style='display:block'&gt;&lt;input type='checkbox' name='include_"</span><span class="sy0">.</span><span class="re0">$col</span><span class="sy0">.</span><span class="st0">"[]' value='text-<span class="es4">$id_get</span>' checked /&gt; <span class="es4">$value</span>&lt;/label&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">//if($nono==1) $disme="disabled"; else $disme="";</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">echo</span> <span class="st0">"&lt;li<span class="es4">$zakla</span>&gt;&lt;label style='display:block'&gt;&lt;input type='checkbox' name='include_"</span><span class="sy0">.</span><span class="re0">$col</span><span class="sy0">.</span><span class="st0">"[]' value='<span class="es4">$value</span>' checked /&gt; <span class="es4">$value</span>&lt;/label&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">(</span><span class="re0">$handle</span> <span class="sy0">=</span> <span class="kw3">opendir</span><span class="br0">(</span><span class="re0">$dir</span><span class="br0">)</span> and <span class="re0">$nono</span><span class="sy0">!=</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">while</span> <span class="br0">(</span><span class="kw4">false</span> <span class="sy0">!==</span> <span class="br0">(</span><span class="re0">$entry</span> <span class="sy0">=</span> <span class="kw3">readdir</span><span class="br0">(</span><span class="re0">$handle</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$entry</span> <span class="sy0">!=</span> <span class="st0">"."</span> <span class="sy0">&amp;&amp;</span> <span class="re0">$entry</span> <span class="sy0">!=</span> <span class="st0">".."</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$entry</span><span class="sy0">,</span><span class="re0">$exo</span><span class="br0">)</span> and <span class="re0">$entry</span><span class="sy0">!=</span><span class="st0">"text.php"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;li&gt;&lt;label style='display:block'&gt;&lt;input type='checkbox' name='include_"</span><span class="sy0">.</span><span class="re0">$col</span><span class="sy0">.</span><span class="st0">"[]' value='<span class="es4">$entry</span>' /&gt; <span class="es4">$entry</span>&lt;/label&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">closedir</span><span class="br0">(</span><span class="re0">$handle</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$lod</span><span class="sy0">!=</span><span class="st0">""</span> and <span class="sy0">!</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$lod</span><span class="sy0">,</span><span class="re0">$exo</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$mikis</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$lod</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;li&gt;&lt;label style='display:block'&gt;&lt;input type='checkbox' name='include_"</span><span class="sy0">.</span><span class="re0">$col</span><span class="sy0">.</span><span class="st0">"[]' value='<span class="es4">$lod</span>' /&gt; &lt;a href='index.php?base=admin&amp;page=page_edit_content&amp;id=<span class="es4">$mikis[1]</span>' target='_blank'&gt;<span class="es4">$load_name</span>&lt;/a&gt;&lt;/label&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;/ul&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> fajlovi_tekst<span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span> <span class="re0">$id_page</span><span class="sy0">,</span> &nbsp;<span class="re0">$zz1</span><span class="sy0">,</span> <span class="re0">$col</span><span class="sy0">,</span> <span class="re0">$ie_page</span><span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;ul &nbsp;class='divu' id="polje<span class="kw2">&lt;?php</span> <span class="kw1">echo</span> <span class="re0">$ul</span><span class="sy1">?&gt;</span>"&gt;<span class="sy1">&lt;?</span> <span class="co1">//echo $zz1[include_file_vrh]?&gt;</span></div></li><li class="li2"><div class="de2"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$exo</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">","</span><span class="sy0">,</span><span class="re0">$zz1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$exo</span><span class="br0">)</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">foreach</span><span class="br0">(</span><span class="re0">$exo</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="re0">$teva</span><span class="sy0">=</span><span class="kw3">preg_replace</span><span class="br0">(</span><span class="st0">"/text[1-9]+.php/"</span><span class="sy0">,</span><span class="st0">"text.php"</span><span class="sy0">,</span><span class="re0">$value</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$teva</span><span class="sy0">!=</span><span class="st0">"text.php"</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$disab</span><span class="sy0">=</span><span class="st0">"disabled"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$boja</span><span class="sy0">=</span><span class="st_h">' style="color:#999;"'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$disab</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$boja</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$ima</span><span class="sy0">=</span><span class="kw3">mysqli_num_rows</span><span class="br0">(</span><span class="kw3">mysqli_query</span><span class="br0">(</span><span class="re0">$conn</span><span class="sy0">,</span><span class="st0">"SELECT * FROM pages_text_include WHERE id_tekst='<span class="es4">$id</span>' AND id_page='<span class="es4">$id_page</span>' AND include_file_<span class="es4">$col</span>='<span class="es4">$value</span>'"</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$ima</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span> <span class="re0">$sel</span><span class="sy0">=</span><span class="st0">"checked"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$sel</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;li&gt;&lt;label style='display:block'&gt;&lt;input type='checkbox' name='include_"</span><span class="sy0">.</span><span class="re0">$col</span><span class="sy0">.</span><span class="st0">"[]' value='<span class="es4">$value</span>' <span class="es4">$disab</span> <span class="es4">$sel</span> /&gt; &lt;span<span class="es4">$boja</span>&gt;<span class="es4">$value</span>&lt;/span&gt;&lt;/label&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&lt;/ul&gt;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> hashlink<span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niza</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span><span class="re0">$k</span><span class="sy0">,</span><span class="re0">$filt</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw2">global</span> <span class="re0">$conn</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$giza</span><span class="sy0">=</span><span class="re0">$niza</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">)</span> and <span class="re0">$niza</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">[</span><span class="re0">$filt</span><span class="br0">]</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$niz</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niza</span><span class="br0">[</span><span class="re0">$filt</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$na</span><span class="sy0">=</span><span class="kw3">array_search</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">unset</span><span class="br0">(</span><span class="re0">$niz</span><span class="br0">[</span><span class="re0">$na</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$niza</span><span class="br0">[</span><span class="re0">$filt</span><span class="br0">]</span> <span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span> <span class="kw1">else</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$niz</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">=</span><span class="re0">$id</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$niza</span><span class="br0">[</span><span class="re0">$filt</span><span class="br0">]</span> <span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">[</span><span class="st0">"p"</span><span class="br0">]</span><span class="sy0">!=</span><span class="st0">""</span> and <span class="kw3">mb_eregi</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niza</span><span class="br0">[</span><span class="st0">"p"</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$fus</span><span class="sy0">=</span><span class="kw3">explode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niza</span><span class="br0">[</span><span class="st0">"p"</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$niza</span><span class="br0">[</span><span class="st0">"p"</span><span class="br0">]</span><span class="sy0">=</span><span class="re0">$fus</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="re0">$niza</span><span class="sy0">=</span><span class="kw3">array_filter</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret</span> <span class="sy0">=</span><span class="st0">"&amp;"</span><span class="sy0">.</span><span class="kw3">http_build_query</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret</span> <span class="sy0">=</span><span class="st0">"&amp;<span class="es4">$filt</span>=<span class="es4">$id</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">[</span><span class="re0">$filt</span><span class="br0">]</span><span class="br0">)</span> and <span class="kw3">isset</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">)</span> and <span class="re0">$giza</span><span class="br0">[</span><span class="re0">$filt</span><span class="br0">]</span><span class="sy0">!=</span><span class="re0">$id</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret</span> <span class="sy0">=</span><span class="st0">"&amp;"</span><span class="sy0">.</span><span class="kw3">http_build_query</span><span class="br0">(</span><span class="re0">$niza</span><span class="br0">)</span><span class="sy0">.</span><span class="st0">"&amp;<span class="es4">$filt</span>=<span class="es4">$id</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$ret</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp;<span class="kw2">function</span> hashlink1<span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niz</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span> <span class="re0">$niz1</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">,</span> <span class="re0">$k</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$niz</span><span class="br0">)</span> and <span class="re0">$niz</span><span class="sy0">!=</span><span class="st0">""</span> and <span class="re0">$k</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$na</span><span class="sy0">=</span><span class="kw3">array_search</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">unset</span><span class="br0">(</span><span class="re0">$niz</span><span class="br0">[</span><span class="re0">$na</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$vrati</span> <span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span> <span class="kw1">else</span></div></li><li class="li2"><div class="de2"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$niz</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">=</span><span class="re0">$id</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$vrati</span> <span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$k</span><span class="sy0">==</span><span class="nu0">1</span><span class="br0">)</span></div></li><li class="li2"><div class="de2"><span class="re0">$vrati</span> <span class="sy0">=</span><span class="re0">$id</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$vrati</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret</span><span class="sy0">=</span><span class="st0">"&amp;brend=<span class="es4">$vrati</span>"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li2"><div class="de2"><span class="re0">$ret</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">isset</span><span class="br0">(</span><span class="re0">$niz1</span><span class="br0">)</span> and <span class="re0">$niz1</span><span class="sy0">!=</span><span class="st0">""</span> and <span class="re0">$k</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niz1</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$na</span><span class="sy0">=</span><span class="kw3">array_search</span><span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span><span class="re0">$niz1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw3">unset</span><span class="br0">(</span><span class="re0">$niz1</span><span class="br0">[</span><span class="re0">$na</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$vrati1</span> <span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span> <span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="re0">$niz1</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">=</span><span class="re0">$id</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$vrati1</span> <span class="sy0">=</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="br0">}</span><span class="kw1">elseif</span><span class="br0">(</span><span class="re0">$k</span><span class="sy0">==</span><span class="nu0">2</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$vrati1</span> <span class="sy0">=</span><span class="re0">$id</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$vrati1</span><span class="sy0">!=</span><span class="st0">""</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret1</span><span class="sy0">=</span><span class="st0">"&amp;filt=<span class="es4">$vrati1</span>"</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret1</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$k</span><span class="sy0">==</span><span class="nu0">2</span> and <span class="kw3">count</span><span class="br0">(</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret</span> <span class="sy0">=</span><span class="st0">"&amp;brend="</span><span class="sy0">.</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$k</span><span class="sy0">==</span><span class="nu0">1</span> and <span class="kw3">count</span><span class="br0">(</span><span class="re0">$niz1</span><span class="br0">)</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="re0">$ret1</span> <span class="sy0">=</span><span class="st0">"&amp;filt="</span><span class="sy0">.</span><span class="kw3">implode</span><span class="br0">(</span><span class="st0">"-"</span><span class="sy0">,</span><span class="re0">$niz1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">return</span> <span class="re0">$ret</span><span class="sy0">.</span><span class="re0">$ret1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> klase<span class="br0">(</span><span class="re0">$tip</span><span class="sy0">,</span><span class="re0">$data</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li2"><div class="de2"><span class="kw1">echo</span> <span class="st0">"&lt;ul &nbsp;class='divu' style='margin-top:0px;padding-top:0px;'&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;li&gt;&lt;label style='display:block'&gt;&lt;input type='radio' name='klasa_<span class="es4">$tip</span>' value='' /&gt; Nijedna&lt;/label&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">for</span><span class="br0">(</span><span class="re0">$i</span><span class="sy0">=</span><span class="nu0">1</span><span class="sy0">;</span><span class="re0">$i</span><span class="sy0">&lt;</span><span class="nu0">9</span><span class="sy0">;</span><span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">(</span><span class="re0">$data</span><span class="br0">[</span><span class="st0">"class_<span class="es4">$tip</span>"</span><span class="br0">]</span><span class="sy0">==</span><span class="st0">"<span class="es4">$tip</span><span class="es4">$i</span>"</span><span class="br0">)</span> <span class="re0">$che</span><span class="sy0">=</span><span class="st0">"checked"</span><span class="sy0">;</span> <span class="kw1">else</span> <span class="re0">$che</span><span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2"><span class="kw1">echo</span> <span class="st0">"&lt;li&gt;&lt;label style='display:block'&gt;&lt;input type='radio' name='klasa_<span class="es4">$tip</span>' value='<span class="es4">$tip</span><span class="es4">$i</span>' <span class="es4">$che</span> id='<span class="es4">$tip</span><span class="es4">$i</span>' /&gt; "</span><span class="sy0">.</span><span class="re0">$tip</span><span class="sy0">.</span><span class="st0">"<span class="es4">$i</span>&lt;/label&gt;&lt;/li&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">"&lt;/ul&gt;"</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> get_client_ip_env<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_CLIENT_IP'</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_CLIENT_IP'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_X_FORWARDED_FOR'</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_X_FORWARDED_FOR'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">else</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_X_FORWARDED'</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_X_FORWARDED'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_FORWARDED_FOR'</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_FORWARDED_FOR'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_FORWARDED'</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'HTTP_FORWARDED'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span> <span class="kw1">if</span><span class="br0">(</span><span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'REMOTE_ADDR'</span><span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="kw3">getenv</span><span class="br0">(</span><span class="st_h">'REMOTE_ADDR'</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">else</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipaddress</span> <span class="sy0">=</span> <span class="st_h">'UNKNOWN'</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$ipaddress</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> ip_infoSA<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">filter_var</span><span class="br0">(</span><span class="re0">$ip</span><span class="sy0">,</span> FILTER_VALIDATE_IP<span class="br0">)</span> <span class="sy0">===</span> <span class="kw4">FALSE</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ip</span> <span class="sy0">=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"REMOTE_ADDR"</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$deep_detect</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">filter_var</span><span class="br0">(</span><span class="sy0">@</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_X_FORWARDED_FOR'</span><span class="br0">]</span><span class="sy0">,</span> FILTER_VALIDATE_IP<span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ip</span> <span class="sy0">=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_X_FORWARDED_FOR'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">filter_var</span><span class="br0">(</span><span class="sy0">@</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_CLIENT_IP'</span><span class="br0">]</span><span class="sy0">,</span> FILTER_VALIDATE_IP<span class="br0">)</span><span class="br0">)</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ip</span> <span class="sy0">=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_CLIENT_IP'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">echo</span> <span class="kw3">file_get_contents</span><span class="br0">(</span><span class="st0">"http://www.geoplugin.net/json.gp?ip="</span> <span class="sy0">.</span> <span class="re0">$ip</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li2"><div class="de2"><span class="kw2">function</span> ip_info<span class="br0">(</span><span class="re0">$ip</span> <span class="sy0">=</span> <span class="kw4">NULL</span><span class="sy0">,</span> <span class="re0">$purpose</span> <span class="sy0">=</span> <span class="st0">"location"</span><span class="sy0">,</span> <span class="re0">$deep_detect</span> <span class="sy0">=</span> <span class="kw4">TRUE</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="kw4">NULL</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">filter_var</span><span class="br0">(</span><span class="re0">$ip</span><span class="sy0">,</span> FILTER_VALIDATE_IP<span class="br0">)</span> <span class="sy0">===</span> <span class="kw4">FALSE</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ip</span> <span class="sy0">=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st0">"REMOTE_ADDR"</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$deep_detect</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">filter_var</span><span class="br0">(</span><span class="sy0">@</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_X_FORWARDED_FOR'</span><span class="br0">]</span><span class="sy0">,</span> FILTER_VALIDATE_IP<span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ip</span> <span class="sy0">=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_X_FORWARDED_FOR'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">filter_var</span><span class="br0">(</span><span class="sy0">@</span><span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_CLIENT_IP'</span><span class="br0">]</span><span class="sy0">,</span> FILTER_VALIDATE_IP<span class="br0">)</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ip</span> <span class="sy0">=</span> <span class="re0">$_SERVER</span><span class="br0">[</span><span class="st_h">'HTTP_CLIENT_IP'</span><span class="br0">]</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$purpose</span> &nbsp; &nbsp;<span class="sy0">=</span> <span class="kw3">str_replace</span><span class="br0">(</span><span class="kw3">array</span><span class="br0">(</span><span class="st0">"name"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\n</span>"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\t</span>"</span><span class="sy0">,</span> <span class="st0">" "</span><span class="sy0">,</span> <span class="st0">"-"</span><span class="sy0">,</span> <span class="st0">"_"</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw4">NULL</span><span class="sy0">,</span> <span class="kw3">strtolower</span><span class="br0">(</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$purpose</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$support</span> &nbsp; &nbsp;<span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span><span class="st0">"country"</span><span class="sy0">,</span> <span class="st0">"countrycode"</span><span class="sy0">,</span> <span class="st0">"state"</span><span class="sy0">,</span> <span class="st0">"region"</span><span class="sy0">,</span> <span class="st0">"city"</span><span class="sy0">,</span> <span class="st0">"location"</span><span class="sy0">,</span> <span class="st0">"address"</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$continents</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"AF"</span> <span class="sy0">=&gt;</span> <span class="st0">"Africa"</span><span class="sy0">,</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"AN"</span> <span class="sy0">=&gt;</span> <span class="st0">"Antarctica"</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"AS"</span> <span class="sy0">=&gt;</span> <span class="st0">"Asia"</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"EU"</span> <span class="sy0">=&gt;</span> <span class="st0">"Europe"</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"OC"</span> <span class="sy0">=&gt;</span> <span class="st0">"Australia (Oceania)"</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"NA"</span> <span class="sy0">=&gt;</span> <span class="st0">"North America"</span><span class="sy0">,</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"SA"</span> <span class="sy0">=&gt;</span> <span class="st0">"South America"</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">filter_var</span><span class="br0">(</span><span class="re0">$ip</span><span class="sy0">,</span> FILTER_VALIDATE_IP<span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="kw3">in_array</span><span class="br0">(</span><span class="re0">$purpose</span><span class="sy0">,</span> <span class="re0">$support</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$ipdat</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="kw3">json_decode</span><span class="br0">(</span><span class="kw3">file_get_contents</span><span class="br0">(</span><span class="st0">"http://www.geoplugin.net/json.gp?ip="</span> <span class="sy0">.</span> <span class="re0">$ip</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">@</span><span class="kw3">strlen</span><span class="br0">(</span><span class="kw3">trim</span><span class="br0">(</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_countryCode</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">2</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">switch</span> <span class="br0">(</span><span class="re0">$purpose</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"location"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"city"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">=&gt;</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_city</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"state"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="sy0">=&gt;</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_regionName</span><span class="sy0">,</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"country"</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="sy0">=&gt;</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_countryName</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"country_code"</span> &nbsp; <span class="sy0">=&gt;</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_countryCode</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"continent"</span> &nbsp; &nbsp; &nbsp;<span class="sy0">=&gt;</span> <span class="sy0">@</span><span class="re0">$continents</span><span class="br0">[</span><span class="kw3">strtoupper</span><span class="br0">(</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_continentCode</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"continent_code"</span> <span class="sy0">=&gt;</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_continentCode</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"address"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$address</span> <span class="sy0">=</span> <span class="kw3">array</span><span class="br0">(</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_countryName</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">@</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_regionName</span><span class="br0">)</span> <span class="sy0">&gt;=</span> <span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$address</span><span class="br0">[</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_regionName</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">@</span><span class="kw3">strlen</span><span class="br0">(</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_city</span><span class="br0">)</span> <span class="sy0">&gt;=</span> <span class="nu0">1</span><span class="br0">)</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$address</span><span class="br0">[</span><span class="br0">]</span> <span class="sy0">=</span> <span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_city</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="kw3">implode</span><span class="br0">(</span><span class="st0">", "</span><span class="sy0">,</span> <span class="kw3">array_reverse</span><span class="br0">(</span><span class="re0">$address</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"city"</span><span class="sy0">:</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_city</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"state"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_regionName</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"region"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_regionName</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"country"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_countryName</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">"countrycode"</span><span class="sy0">:</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$output</span> <span class="sy0">=</span> <span class="sy0">@</span><span class="re0">$ipdat</span><span class="sy0">-&gt;</span><span class="me1">geoplugin_countryCode</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$output</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="kw2">function</span> strip_html_tags<span class="br0">(</span> <span class="re0">$text</span> <span class="br0">)</span></div></li><li class="li1"><div class="de1"><span class="br0">{</span></div></li><li class="li1"><div class="de1"><span class="co1">// Remove invisible content</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$text</span> <span class="sy0">=</span> <span class="kw3">preg_replace</span><span class="br0">(</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">array</span><span class="br0">(</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//ADD a (') before @&lt;head ON NEXT LINE. Why? see below</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;head[^&gt;]*?&gt;.*?&lt;/head&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;style[^&gt;]*?&gt;.*?&lt;/style&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;script[^&gt;]*?.*?&lt;/script&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;object[^&gt;]*?.*?&lt;/object&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;embed[^&gt;]*?.*?&lt;/embed&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;applet[^&gt;]*?.*?&lt;/applet&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;noframes[^&gt;]*?.*?&lt;/noframes&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;noscript[^&gt;]*?.*?&lt;/noscript&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;noembed[^&gt;]*?.*?&lt;/noembed&gt;@siu'</span><span class="sy0">,</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Add line breaks before and after blocks</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;/?((address)|(blockquote)|(center)|(del))@iu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;/?((div)|(h[1-9])|(ins)|(isindex)|(p)|(pre))@iu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;/?((dir)|(dl)|(dt)|(dd)|(li)|(menu)|(ol)|(ul))@iu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;/?((table)|(th)|(td)|(caption))@iu'</span><span class="sy0">,</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;/?((form)|(button)|(fieldset)|(legend)|(input))@iu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;/?((label)|(select)|(optgroup)|(option)|(textarea))@iu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">'@&lt;/?((frameset)|(frame)|(iframe))@iu'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">)</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">array</span><span class="br0">(</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span> <span class="st_h">' '</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span> <span class="st0">"<span class="es1">\n</span><span class="es1"><span>$</span></span>0"</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">)</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$text</span> <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">strip_tags</span><span class="br0">(</span> <span class="re0">$text</span> <span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> file_get_contents_curl<span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span> <span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$ch</span> <span class="sy0">=</span> <span class="kw3">curl_init</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_AUTOREFERER<span class="sy0">,</span> <span class="kw4">TRUE</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_HEADER<span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_URL<span class="sy0">,</span> <span class="re0">$url</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_FOLLOWLOCATION<span class="sy0">,</span> <span class="kw4">TRUE</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="re0">$data</span> <span class="sy0">=</span> <span class="kw3">curl_exec</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_close</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$data</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">}</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> curl_get<span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span><span class="br0">{</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; <span class="re0">$ch</span> <span class="sy0">=</span> <span class="kw3">curl_init</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_URL<span class="sy0">,</span><span class="re0">$url</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw3">curl_setopt</span><span class="br0">(</span><span class="re0">$ch</span><span class="sy0">,</span> CURLOPT_COOKIEFILE<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw3">curl_exec</span><span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp; &nbsp; <span class="kw3">curl_close</span> <span class="br0">(</span><span class="re0">$ch</span><span class="br0">)</span><span class="sy0">;</span></div></li></ol></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The user came to discuss whether this code is suitable ... for a business application.  Commentators were at least in shock and found a lot of problems: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  nightmare security threats, SQL vulnerabilities </li><li>  problems with code support (monolith for 3.5 thousand lines) </li><li>  problems with scaling </li><li>  terrible tricks, functions and organization of the code (the author did not regret spaces) </li><li>  poor structure and readability of the code. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Severe readers advised to leave as is and learn a lesson for business (yes, we, as a hosting provider, also know what kind of poor clients come from "free" providers from plow).  Well, the best comment has dotted i: ‚ÄúIf not for alcohol, most code I see would keep me up too‚Äù (If it weren‚Äôt for alcohol, most of the code I saw would not let me fall asleep either). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Story 2 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      An online tutorial treats each word as a separate HTML element, so copying and pasting more than 10 words per paragraph is not possible.  However, in some places Reddit is almost like Habr, therefore, in the comments, only a few users commented on the author of the code as mu ** ke, the rest gave a lot of advice on how to get around this feature and get all the text in the best possible way.  If someone needs methods, you can <a href="https://www.reddit.com/r/assholedesign/comments/dltvkb/my_online_textbook_splits_each_word_into_its_own/">read</a> about them <a href="https://www.reddit.com/r/assholedesign/comments/dltvkb/my_online_textbook_splits_each_word_into_its_own/">in the thread itself</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/338/4eb/757/3384eb757dfc810fcfda700cb98ae777.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Story 3 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This guy was paid $ 50 an hour for such a code, and he created (nagovnokodil) a whole file with a length of more than 3000 lines. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The customer is to blame, the community decided, because $ 50 is a penny, which means that you can only rely on hiring a "monkey."  Some decided that this was just a bad joke and the guy was setting his watch.  Well, a detailed analysis of what is wrong in the code <a href="https://www.reddit.com/r/programminghorror/comments/dbcopq/the_guy_got_paid_50hr_for_this_this_file_is_3000/">in the thread</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a61/487/a67/a61487a67358271ec19d05229656d54d.png"></div>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Story 4 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This, of course, is a story bordering on science fiction, but who at the dawn of a beautiful youth did not do something like that. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The guy was too lazy to select all the files in the directory and did not come up with anything better than to use the utility 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="plaintext hljs">rm -rf /*</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But something, apparently, skipped a beat in his soul and he turned to his service station, whether the correct train of thought was chosen, the guy received confirmation and ... well, you understand.  Comments deliver one hundred percent: ‚Äúhow tasty your tears are‚Äù, ‚Äúit makes no sense to ask a technical manager how to delete files on Linux‚Äù, ‚Äúyou must not be very comfortable with Linux‚Äù (we think there‚Äôs still a bit of trouble with Google and common sense) , "Fail!".  We think that the story is more like a bike, but it was from it that an unfortunate chill passed from the back and somehow I immediately wanted to get out of root.  By the way, there are <a href="https://www.reddit.com/r/programminghorror/comments/disb3k/i_just_rm_rf_my_system/">some useful tips there too</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Story 5 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A bike similar to the previous one.  One team :-) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="plaintext hljs">sudo rm ‚Äìfr /</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Boo!</b> <div class="spoiler_text">  But there is nothing terrible here. </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#3AC1EF">The story of our friend from his past experience</font> </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>"2008 year.</i>  <i>Our site has been hacked.</i>  <i>It was a normal, secure site, which was visited by more than 5,000 people a day.</i>  <i>And now the main text appeared with errors about the Pentagon and the threat to take one hundred million from us (by the way, this was only part of the company's revenue).</i>  <i>Sat-shniki on the ears, the director in a panic, STO washed the rope, the developers ran for Vaseline.</i>  <i>Nothing.</i>  <i>They closed the site, hung 404, received a flurry of calls.</i>  <i>The next day, mom a la Anfisa Chekhov came in the best juice and brought a completely tortured kid of 16 years in glasses.</i>  <i>Says: "This is my son, he is a hacker, take him to work."</i>  <i>The service station got out of the loop, took the small one by the shoulder and forced it to show the small bauble (we haven‚Äôt announced the details), they told their mother about the Criminal Code of the Russian Federation, but they presented something to the guy. ‚Äù</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, the human factor is the reason that each of us can have a personal Halloween on any working day. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#3AC1EF">How not to become a hero of such stories for your colleagues</font> </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Programmer Tips </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Comment on the code, especially if you are new to development.  This will help you, and colleagues, and those who will enter the project much later. </li><li>  Better yet, write readable code.  Code is nothing more than a special communication language for a team of programmers.  Good code is self-sufficient, keep this in mind.  Let even those who come to the team after you understand it. </li><li>  Call variables and functions normal lexical units so you can understand what they should do.  <code>FsskdQwertZeta</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     bad <code>MoveEmployeeFromList</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     normal. </li><li>  Follow the code style adopted by the company - thanks to this, the project will be not only understandable, but also safe: any team developer will be able to make corrections in an emergency situation, without wasting time unraveling either obfuscation or a bad style. </li><li>  Do not waste garbage in the code, modules, projects.  Remove unnecessary modules, do not drag non-working legacy with you, if possible, refactor to throw crutches and melt bikes to a good code. </li><li>  Test your code, check real scripts.  If you do not test the code, it will be tested by prod :-) </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Tips for system administrators </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Document your work to make it easier for your colleagues, shift workers, and yourself to understand standard scenarios. </li><li>  Make backups.  Do their mother, backups! </li><li>  Automate your work, use ticket systems and monitoring systems. </li><li>  Work only on request - so you can prove that you are working, and not driving to Dota, and ‚Äújust reloading the 1C base‚Äù is not ‚Äúsimple‚Äù. </li><li>  Build a system of information security in the company, prevent offenses from colleagues and especially zealous ‚Äúadvanced users‚Äù. </li><li>  Log, log, keep records. </li><li>  Have a replacement fund of peripherals and hardware, manage licenses, budget - be an IT manager, and not just a ‚Äúcall guy‚Äù. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Obviously, isn't it?  But compliance with these simple principles will close more than ‚Öî possible problems that risk turning into chilling stories on Habr√©, Reddit and other resources where your fierce fakap is ready to discuss. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Friends, today, on Halloween, we crave chilling stories and your IT practice.  What made your palms sweat, dark in your eyes, and cool inside?  For the best story (with the highest comment rating), we will give prizes.  For first place - an autographed hoodie by <a href="https://habr.com/ru/users/thelevelord/" class="user_link">thelevelord</a> , <a href="https://habr.com/ru/company/ruvds/blog/442122/">creator of</a> Duke Nukem: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/EhxGP15p7Rs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For second place - stock of socks for the whole year :) </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473742/index.html">Epson engineering printers for CAD and GIS and a few words about "robust design"</a></li>
<li><a href="../473748/index.html">Bezier curve in the service of labor economists</a></li>
<li><a href="../473750/index.html">Stereopi + WebRTC = telepresense at home</a></li>
<li><a href="../473752/index.html">What is wrong with Copy-on-Write for Linux when copying</a></li>
<li><a href="../473756/index.html">HTTPS DNS - Half and Wrong Solution</a></li>
<li><a href="../473762/index.html">Work is not a wolf, part 1. Job search: 9 laps HR-a</a></li>
<li><a href="../473764/index.html">Parcel is my favorite project builder</a></li>
<li><a href="../473766/index.html">Static analysis of large volumes of Python code: Instagram experience. Part 1</a></li>
<li><a href="../473768/index.html">Top 5 books for those who want to improve their skills</a></li>
<li><a href="../473770/index.html">Static analysis of large volumes of Python code: Instagram experience. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
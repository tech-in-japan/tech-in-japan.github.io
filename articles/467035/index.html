<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ë üêã ü§õüèΩ Designing dashboards for web analytics e-commerce site. Part 4: Youtube Channel üåÖ üè® üöî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It‚Äôs easy to calculate how much traffic came from the YouTube channel. For example, go to the Yandex Metrics or Google Analytics counter. And you try ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Designing dashboards for web analytics e-commerce site. Part 4: Youtube Channel</h1><div class="post__text post__text-html js-mediator-article">  It‚Äôs easy to calculate how much traffic came from the YouTube channel.  For example, go to the Yandex Metrics or Google Analytics counter.  And you try to find out what happened to your video on the channel.  Who looked at him, who added to favorites, and who disliked.  But to unload such data, you will need a Python script. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/-v/b0/sf/-vb0sfamlbuklyrfafhmhuzl2d0.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>The dynamics of Youtube activities</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The Youtube API is quite simple.  We will upload a list of playlists and upload statistics for each playlist for the video. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="python hljs">YOUTUBE_API_URL = <span class="hljs-string"><span class="hljs-string">'https://www.googleapis.com/youtube/v3'</span></span> YOUTUBE_API_KEY = <span class="hljs-string"><span class="hljs-string">'...'</span></span> YOUTUBE_CHANNEL_ID = <span class="hljs-string"><span class="hljs-string">'...'</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The channel identifier can be found in the page code.  You can read about obtaining the access key <a href="https://developers.google.com/youtube/v3/docs/">here</a> .  Create a report_client class and define procedures in it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">report_client</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, api_url, api_key, proxies)</span></span></span><span class="hljs-function">:</span></span> self._url = api_url self._key = api_key self._proxies = proxies <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">req_video</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, channel_id = YOUTUBE_CHANNEL_ID)</span></span></span><span class="hljs-function">:</span></span> url = (<span class="hljs-string"><span class="hljs-string">'{0}/activities?channelId={1}&amp;key={2}&amp;part=snippet%2CcontentDetails&amp;maxResults=50'</span></span>) r = requests.get(url.format(self._url, channel_id,self._key) , proxies = self._proxies) parsed = json.loads(r.text) res_df = pd.DataFrame(columns=[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>]: temp = {} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'upload'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> i[<span class="hljs-string"><span class="hljs-string">'contentDetails'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>] = i[<span class="hljs-string"><span class="hljs-string">'contentDetails'</span></span>][<span class="hljs-string"><span class="hljs-string">'upload'</span></span>][<span class="hljs-string"><span class="hljs-string">'videoId'</span></span>] res_df = res_df.append(temp, ignore_index=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res_df <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">req_playlist</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, channel_id = YOUTUBE_CHANNEL_ID)</span></span></span><span class="hljs-function">:</span></span> url = (<span class="hljs-string"><span class="hljs-string">'{0}/playlists?channelId={1}&amp;key={2}&amp;part=snippet%2CcontentDetails&amp;maxResults=50'</span></span>) r = requests.get(url.format(self._url, channel_id, self._key) , proxies = self._proxies) parsed = json.loads(r.text) res_df = pd.DataFrame(columns=[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>]: temp = {} temp[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>] = i[<span class="hljs-string"><span class="hljs-string">'id'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>] = i[<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'title'</span></span>] res_df = res_df.append(temp, ignore_index=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res_df <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">req_playlist_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, playlist_id, channel_id = YOUTUBE_CHANNEL_ID)</span></span></span><span class="hljs-function">:</span></span> res_df = pd.DataFrame(columns=[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i,k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> playlist_id.iterrows(): url = (<span class="hljs-string"><span class="hljs-string">'{0}/playlistItems?playlistId={1}&amp;key={2}&amp;part=snippet&amp;maxResults=50'</span></span>) r = requests.get(url.format(self._url, k[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>],self._key) , proxies = self._proxies) parsed = json.loads(r.text) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>]: temp = {} temp[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>] = j[<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'resourceId'</span></span>][<span class="hljs-string"><span class="hljs-string">'videoId'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>] = k[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>] = k[<span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>] res_df = res_df.append(temp, ignore_index=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) stop = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-string"><span class="hljs-string">'nextPageToken'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed: url = (<span class="hljs-string"><span class="hljs-string">'{0}/playlistItems?playlistId={1}&amp;key={2}&amp;part=snippet&amp;maxResults=50&amp;pageToken={3}'</span></span>) r = requests.get(url.format(self._url, k[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>],self._key,parsed[<span class="hljs-string"><span class="hljs-string">'nextPageToken'</span></span>]) , proxies = self._proxies) parsed = json.loads(r.text) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>]: temp = {} temp[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>] = j[<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'resourceId'</span></span>][<span class="hljs-string"><span class="hljs-string">'videoId'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>] = k[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>] = k[<span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>] res_df = res_df.append(temp, ignore_index=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) stop = stop + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stop == <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res_df <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">req_stat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, video_id)</span></span></span><span class="hljs-function">:</span></span> res_df = pd.DataFrame(columns=[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>,<span class="hljs-string"><span class="hljs-string">'publishedAt'</span></span>,<span class="hljs-string"><span class="hljs-string">'title'</span></span>,<span class="hljs-string"><span class="hljs-string">'description'</span></span>,\ <span class="hljs-string"><span class="hljs-string">'tags'</span></span>,<span class="hljs-string"><span class="hljs-string">'local_title'</span></span>,<span class="hljs-string"><span class="hljs-string">'viewCount'</span></span>,<span class="hljs-string"><span class="hljs-string">'likeCount'</span></span>,\ <span class="hljs-string"><span class="hljs-string">'dislikeCount'</span></span>,<span class="hljs-string"><span class="hljs-string">'favoriteCount'</span></span>,<span class="hljs-string"><span class="hljs-string">'commentCount'</span></span>\ , <span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i,k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> video_id.iterrows(): url = (<span class="hljs-string"><span class="hljs-string">'{0}/videos?id={1}&amp;key={2}&amp;part=snippet,contentDetails,statistics,status&amp;maxResults=50'</span></span>) r = requests.get(url.format(self._url, k[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>], self._key) , proxies = self._proxies) parsed = json.loads(r.text) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'error'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed.keys(): <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> temp = {} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'items'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'video_id'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'id'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'publishedAt'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'publishedAt'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'title'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'description'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'description'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>] = k[<span class="hljs-string"><span class="hljs-string">'playlist_id'</span></span>] temp[<span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>] = k[<span class="hljs-string"><span class="hljs-string">'playlist_name'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'tags'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'tags'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'tags'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'title'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'localized'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'local_title'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'snippet'</span></span>][<span class="hljs-string"><span class="hljs-string">'localized'</span></span>][<span class="hljs-string"><span class="hljs-string">'title'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'viewCount'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'viewCount'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>][<span class="hljs-string"><span class="hljs-string">'viewCount'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'likeCount'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'likeCount'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>][<span class="hljs-string"><span class="hljs-string">'likeCount'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'dislikeCount'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'dislikeCount'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>][<span class="hljs-string"><span class="hljs-string">'dislikeCount'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'favoriteCount'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'favoriteCount'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>][<span class="hljs-string"><span class="hljs-string">'favoriteCount'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'commentCount'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>]: temp[<span class="hljs-string"><span class="hljs-string">'commentCount'</span></span>] = parsed[<span class="hljs-string"><span class="hljs-string">'items'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'statistics'</span></span>][<span class="hljs-string"><span class="hljs-string">'commentCount'</span></span>] res_df = res_df.append(temp, ignore_index=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res_df</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next, to get the unload, we need to initialize the class and start the unload. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">youtube_reports</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> a = report_client(YOUTUBE_API_URL,YOUTUBE_API_KEY,{}) method_rep = getattr(a, <span class="hljs-string"><span class="hljs-string">"req_playlist"</span></span>) playlist_id = method_rep() method_rep = getattr(a, <span class="hljs-string"><span class="hljs-string">"req_playlist_stat"</span></span>) video_id = method_rep(playlist_id) report_list = [<span class="hljs-string"><span class="hljs-string">"req_stat"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> rep <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> report_list: result_local_file_name = <span class="hljs-string"><span class="hljs-string">'df_{0}.csv'</span></span>.format(rep) method_rep = getattr(a, rep) df = method_rep(video_id) df.to_csv(<span class="hljs-string"><span class="hljs-string">r'C:\\Users\\User\\Desktop\\youtube.csv'</span></span>, index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, header=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, sep=<span class="hljs-string"><span class="hljs-string">'\t'</span></span>, quoting = csv.QUOTE_ALL, encoding=<span class="hljs-string"><span class="hljs-string">"utf-8"</span></span>) to_sql_server(df, <span class="hljs-string"><span class="hljs-string">'youtube_{0}'</span></span>.format(rep)) youtube_reports()</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Articles from the cycle: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <a href="https://habr.com/post/422235/">Designing dashboards for web analytics e-commerce site.</a>  <a href="https://habr.com/post/422235/">Part 1: User Friendly Interface</a> </li><li>  <a href="https://habr.com/post/422369/">Designing dashboards for web analytics e-commerce site.</a>  <a href="https://habr.com/post/422369/">Part 2: Email Newsletters.</a>  <a href="https://habr.com/post/422369/">Strategic dashboard</a> </li><li>  <a href="https://habr.com/ru/post/422825/">Designing dashboards for web analytics e-commerce site.</a>  <a href="https://habr.com/ru/post/422825/">Part 2: Email Newsletters.</a>  <a href="https://habr.com/ru/post/422825/">Operational dashboard</a> </li><li>  <a href="https://habr.com/ru/post/467019/">Designing dashboards for web analytics e-commerce site.</a>  <a href="https://habr.com/ru/post/467019/">Part 3: SEO Channel</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467021/index.html">How the Conscience Robot communicates with customers</a></li>
<li><a href="../467023/index.html">We created a plugin in Grafana for monitoring k8s: already in the official Grafana-store</a></li>
<li><a href="../467025/index.html">About the network model in games for beginners</a></li>
<li><a href="../467029/index.html">Grigory Petrov: working with a network in Ruby</a></li>
<li><a href="../467033/index.html">A selection of cool technical papers from Chaos Communication Camp 2019</a></li>
<li><a href="../467037/index.html">Factoring: how to get money for chairs</a></li>
<li><a href="../467039/index.html">How to conduct a code review</a></li>
<li><a href="../467043/index.html">Import OpenStreetMap. From the binary source to the table in the database in a few steps</a></li>
<li><a href="../467047/index.html">XY Phenomenon: Avoiding ‚ÄúWrong‚Äù Problems</a></li>
<li><a href="../467053/index.html">Understanding the basics of Blockchain: The challenge of the Byzantine Generals. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
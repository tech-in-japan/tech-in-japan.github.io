<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ ğŸ§‘ Oï¼ˆ1ï¼‰è¿½åŠ ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨ã—ãŸå¤–éƒ¨ã‚½ãƒ¼ãƒˆ ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ ğŸ†š ğŸ¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã å¾Œã€Oï¼ˆ1ï¼‰å¤–éƒ¨ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨ã—ãŸå¤–éƒ¨ã‚½ãƒ¼ãƒˆã‚’æ›¸ã„ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¾ã—ãŸã€‚ é–¢æ•°ã¯ã€ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€é…åˆ—ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹æœ€å¤§ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚ 
  
 
  
 

void ext_sort(const std::string filename, const...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Oï¼ˆ1ï¼‰è¿½åŠ ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨ã—ãŸå¤–éƒ¨ã‚½ãƒ¼ãƒˆ</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/268535/">  <a href="http://habrahabr.ru/post/266557/">ã“ã®è¨˜äº‹ã‚’</a>èª­ã‚“ã å¾Œã€Oï¼ˆ1ï¼‰å¤–éƒ¨ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨ã—ãŸå¤–éƒ¨ã‚½ãƒ¼ãƒˆã‚’æ›¸ã„ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¾ã—ãŸã€‚ é–¢æ•°ã¯ã€ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€é…åˆ—ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹æœ€å¤§ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ext_sort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filename, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> memory)</span></span></span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://scholar.google.co.il/scholar%3Fcluster%3D7995905689817415486%26hl%3Dru%26as_sdt%3D0,5">è¿½åŠ ã®ãƒ‡ã‚£ã‚¹ã‚¯é ˜åŸŸãªã—ã§å¤–éƒ¨ã‚½ãƒ¼ãƒˆã®åŠ¹æœçš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</a>ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¾ã—ãŸï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã«åã¾ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ã«åˆ†å‰²ã—ã¾ã™ã€‚ ã“ã‚Œã‚‰ã®ãƒ–ãƒ­ãƒƒã‚¯Block_1ã€Block_2ã€...ã€Block_ï¼ˆS-1ï¼‰ã€Block_Sã‚’ç¤ºã—ã¾ã™ã€‚  P = 1ã«è¨­å®šã—ã¾ã™ã€‚ </li><li>  Block_Pã‚’ãƒ¡ãƒ¢ãƒªã«èª­ã¿è¾¼ã¿ã¾ã™ã€‚ </li><li> ãƒ¡ãƒ¢ãƒªå†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚½ãƒ¼ãƒˆã—ã€Block_Pã«æ›¸ãæˆ»ã—ã¾ã™ã€‚  P = P + 1ã«è¨­å®šã—ã€Pâ‰¤Sã®å ´åˆã€Block_Pã‚’ãƒ¡ãƒ¢ãƒªã«èª­ã¿è¾¼ã¿ã€ã“ã®æ‰‹é †ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚ ã¤ã¾ã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å„ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä¸¦ã¹æ›¿ãˆã¾ã™ã€‚ </li><li> å„ãƒ–ãƒ­ãƒƒã‚¯ã‚’å°ã•ãªãƒ–ãƒ­ãƒƒã‚¯B_1ã¨B_2ã«åˆ†å‰²ã—ã¾ã™ã€‚ ã“ã‚Œã‚‰ã®å„ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€ä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®åŠåˆ†ã‚’å æœ‰ã—ã¾ã™ã€‚ </li><li> åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å‰åŠã§ãƒ–ãƒ­ãƒƒã‚¯Block_1ã®ãƒ–ãƒ­ãƒƒã‚¯B_1ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚  Q = 2ã«è¨­å®šã—ã¾ã™ã€‚ </li><li> åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å¾ŒåŠã«ã‚ã‚‹Block_Qãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ–ãƒ­ãƒƒã‚¯B_1ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚ </li><li> ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒ¢ãƒªå†…ã®é…åˆ—ã‚’çµåˆã—ã€ãƒ¡ãƒ¢ãƒªã®å¾ŒåŠã‚’Block_Qãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ–ãƒ­ãƒƒã‚¯B_1ã«æ›¸ãè¾¼ã¿ã€Qâ‰¤Sã®å ´åˆã€Q = Q + 1ã«è¨­å®šã—ã€Block_Qãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ–ãƒ­ãƒƒã‚¯B_1ã‚’ä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å¾ŒåŠã«èª­ã¿å–ã‚Šã€ã“ã®æ‰‹é †ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚ </li><li> åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å‰åŠã‚’ãƒ–ãƒ­ãƒƒã‚¯Block_1ã®ãƒ–ãƒ­ãƒƒã‚¯B_1ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚ å¸¸ã«ãƒ¡ãƒ¢ãƒªå†…ã®è¦ç´ ã®åŠåˆ†æœªæº€ã‚’æ®‹ã—ã€ã™ã¹ã¦ã®ãƒ–ãƒ­ãƒƒã‚¯ã¨ãƒãƒ¼ã‚¸ã™ã‚‹ãŸã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã®Må€‹ã®æœ€å°è¦ç´ ãŒãƒ¡ãƒ¢ãƒªã®ã“ã®éƒ¨åˆ†ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚ </li><li>  Block_Sãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ–ãƒ­ãƒƒã‚¯B_2ã‚’ä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å¾ŒåŠã«èª­ã¿è¾¼ã¿ã¾ã™ã€‚  Q = S âˆ’1ã¨è¨­å®šã—ã¾ã™ã€‚ </li><li> åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å‰åŠã®Block_Qãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ–ãƒ­ãƒƒã‚¯B_2ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚ </li><li> ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒ¢ãƒªå†…ã®é…åˆ—ã‚’çµåˆã—ã€ä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å‰åŠã‚’Block_Qã®ãƒ–ãƒ­ãƒƒã‚¯B_2ã«æ›¸ãè¾¼ã¿ã€Q = Q -1ã«è¨­å®šã—ã¾ã™ã€‚  Qâ‰¥1ã®å ´åˆã€ä½¿ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å‰åŠã®Block_Qãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ–ãƒ­ãƒƒã‚¯B_2ã‚’èª­ã¿å–ã‚Šã€ã“ã®æ‰‹é †ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚ </li><li> åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ¢ãƒªã®å¾ŒåŠã‚’Block_Sãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ–ãƒ­ãƒƒã‚¯B_2ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚ æ‰‹é †8ã¨åŒæ§˜ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã®æœ€å¤§è¦ç´ ãŒã“ã“ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚ </li><li>  Block_1ã®ãƒ–ãƒ­ãƒƒã‚¯B_2ã‹ã‚‰Block_Sã®ãƒ–ãƒ­ãƒƒã‚¯B_1ã¾ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã«æ–°ã—ã„ãƒ–ãƒ­ãƒƒã‚¯ã‚’å®šç¾©ã—ã€Block_1ã‹ã‚‰Block_Sã«å†ã³ç•ªå·ã‚’ä»˜ã‘ã¾ã™ã€‚ å„ãƒ–ãƒ­ãƒƒã‚¯ã‚’ãƒ–ãƒ­ãƒƒã‚¯B_1ã¨B_2ã«åˆ†å‰²ã—ã¾ã™ã€‚  P = 1ã«è¨­å®šã—ã¾ã™ã€‚ </li><li>  Block_Pãƒ–ãƒ­ãƒƒã‚¯ã®B_1ã¨B_2ã‚’ãƒ¡ãƒ¢ãƒªã«èª­ã¿è¾¼ã¿ã¾ã™ã€‚ ãƒ¡ãƒ¢ãƒªå†…ã®é…åˆ—ã‚’çµåˆã—ã¾ã™ã€‚ ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸé…åˆ—ã‚’Block_Pã«æ›¸ãè¾¼ã¿ã€P = P +1ã«è¨­å®šã—ã¾ã™ã€‚  Pâ‰¤Sã®å ´åˆã€ã“ã®æ‰‹é †ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚ </li><li>  S&gt; 1ã®å ´åˆã€ã‚¹ãƒ†ãƒƒãƒ—5ã«æˆ»ã‚Šã¾ã™ã€‚Må€‹ã®æœ€å°è¦ç´ ã¨æœ€å¤§è¦ç´ ã‚’é¸æŠã™ã‚‹ãŸã³ã«ã€ãã‚Œãã‚Œãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã¨æœ«å°¾ã«æ›¸ãè¾¼ã¿ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­å¤®ã«åˆ°é”ã™ã‚‹ã¾ã§æ®‹ã‚Šã®è¦ç´ ã§åŒã˜ã“ã¨ã‚’è¡Œã„ã¾ã™ã€‚ </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã“ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®åˆ©ç‚¹ã¯ã€ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã«ãƒãƒƒãƒ•ã‚¡ãŒãªã„ã“ã¨ã«åŠ ãˆã¦ã€æ¯”è¼ƒçš„å¤§ããªéƒ¨åˆ†ã§ãƒ‡ã‚£ã‚¹ã‚¯ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹ãŸã‚ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒé«˜é€ŸåŒ–ã•ã‚Œã‚‹ã“ã¨ã§ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      C ++ã§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã¾ãšã€ãƒ–ãƒ­ãƒƒã‚¯æ•°ã¨ãƒ–ãƒ­ãƒƒã‚¯ã‚µã‚¤ã‚ºã‚’ãƒã‚¤ãƒˆå˜ä½ã¨è¦ç´ å˜ä½ã§æ±ºå®šã—ã€ãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> type_size = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(T); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> filesize = file_size(filename); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-function">fstream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filename, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::ios::in | </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::ios::out | </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::ios::binary)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> chunk_number = filesize / memory; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> chunk_size = memory / type_size - (memory / type_size) % <span class="hljs-number"><span class="hljs-number">2</span></span>, chunk_byte_size = chunk_size * type_size, half_chunk_byte_size = chunk_byte_size / <span class="hljs-number"><span class="hljs-number">2</span></span>, half_chunk_size = chunk_size / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt; *chunk = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt;(chunk_size);</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     æ¬¡ã«ãƒã‚¤ãƒ³ãƒˆ2ã€œ3-å„ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã‚½ãƒ¼ãƒˆã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; chunk_number; ++i) { data.seekg(chunk_byte_size * i); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); flat_quick_sort(chunk-&gt;begin(), chunk-&gt;end()); data.seekp(chunk_byte_size * i); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚½ãƒ¼ãƒˆã¯å°‘ã—å¾Œã§è¨˜è¿°ã—ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     åˆä½µã«é€²ã¿ã¾ã™ã€‚ ä¸‹åŠåˆ†ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> s = chunk_number, start = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (s &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { data.seekp(half_chunk_byte_size * start); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> q = <span class="hljs-number"><span class="hljs-number">1</span></span>; q &lt; s; ++q) { data.seekg(half_chunk_byte_size * start + chunk_byte_size * q); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size); in_place_merge(chunk-&gt;begin(), chunk-&gt;begin() + half_chunk_size - <span class="hljs-number"><span class="hljs-number">1</span></span>, chunk-&gt;begin() + chunk_size); data.seekp(half_chunk_byte_size * start + chunk_byte_size * q); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size); } data.seekp(half_chunk_byte_size * start); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size);</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãã—ã¦åŒæ§˜ã«ãƒˆãƒƒãƒ—ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"> data.seekp(half_chunk_byte_size * start + chunk_byte_size * s - half_chunk_byte_size); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> q = s - <span class="hljs-number"><span class="hljs-number">2</span></span>; q &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; --q) { data.seekg(half_chunk_byte_size * (start + <span class="hljs-number"><span class="hljs-number">1</span></span>) + chunk_byte_size * q); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size); in_place_merge(chunk-&gt;begin(), chunk-&gt;begin() + half_chunk_size - <span class="hljs-number"><span class="hljs-number">1</span></span>, chunk-&gt;begin() + chunk_size); data.seekp(half_chunk_byte_size * (start + <span class="hljs-number"><span class="hljs-number">1</span></span>) + chunk_byte_size * q); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size); } data.seekg(half_chunk_byte_size * start + chunk_byte_size * s - half_chunk_byte_size); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size);</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãƒ–ãƒ­ãƒƒã‚¯ã‚’å†é…å¸ƒã—ã€ã‚µã‚¤ã‚¯ãƒ«ã‚’çµ‚äº†ã—ã€ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"> --s; ++start; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> p = <span class="hljs-number"><span class="hljs-number">0</span></span>; p &lt; s; ++p) { data.seekp(half_chunk_byte_size * start + chunk_byte_size * p); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); in_place_merge(chunk-&gt;begin(), chunk-&gt;begin() + half_chunk_size - <span class="hljs-number"><span class="hljs-number">1</span></span>, chunk-&gt;begin() + chunk_size); data.seekg(half_chunk_byte_size * start + chunk_byte_size * p); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); } } <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> chunk; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">å…¨æ©Ÿèƒ½</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ext_sort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filename, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> memory)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> type_size = <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(T); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> filesize = file_size(filename); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-function">fstream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filename, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::ios::in | </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::ios::out | </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::ios::binary)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> chunk_number = filesize / memory; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> chunk_size = memory / type_size - (memory / type_size) % <span class="hljs-number"><span class="hljs-number">2</span></span>, chunk_byte_size = chunk_size * type_size, half_chunk_byte_size = chunk_byte_size / <span class="hljs-number"><span class="hljs-number">2</span></span>, half_chunk_size = chunk_size / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt; *chunk = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt;(chunk_size); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; chunk_number; ++i) { data.seekg(chunk_byte_size * i); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); flat_quick_sort(chunk-&gt;begin(), chunk-&gt;end()); data.seekp(chunk_byte_size * i); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); } <span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> s = chunk_number, start = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (s &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { data.seekp(half_chunk_byte_size * start); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> q = <span class="hljs-number"><span class="hljs-number">1</span></span>; q &lt; s; ++q) { data.seekg(half_chunk_byte_size * start + chunk_byte_size * q); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size); in_place_merge(chunk-&gt;begin(), chunk-&gt;begin() + half_chunk_size - <span class="hljs-number"><span class="hljs-number">1</span></span>, chunk-&gt;begin() + chunk_size); data.seekp(half_chunk_byte_size * start + chunk_byte_size * q); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size); } data.seekp(half_chunk_byte_size * start); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size); data.seekp(half_chunk_byte_size * start + chunk_byte_size * s - half_chunk_byte_size); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> q = s - <span class="hljs-number"><span class="hljs-number">2</span></span>; q &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; --q) { data.seekg(half_chunk_byte_size * (start + <span class="hljs-number"><span class="hljs-number">1</span></span>) + chunk_byte_size * q); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size); in_place_merge(chunk-&gt;begin(), chunk-&gt;begin() + half_chunk_size - <span class="hljs-number"><span class="hljs-number">1</span></span>, chunk-&gt;begin() + chunk_size); data.seekp(half_chunk_byte_size * (start + <span class="hljs-number"><span class="hljs-number">1</span></span>) + chunk_byte_size * q); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), half_chunk_byte_size); } data.seekg(half_chunk_byte_size * start + chunk_byte_size * s - half_chunk_byte_size); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) (chunk-&gt;data() + half_chunk_size), half_chunk_byte_size); --s; ++start; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span> p = <span class="hljs-number"><span class="hljs-number">0</span></span>; p &lt; s; ++p) { data.seekp(half_chunk_byte_size * start + chunk_byte_size * p); data.read((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); in_place_merge(chunk-&gt;begin(), chunk-&gt;begin() + half_chunk_size - <span class="hljs-number"><span class="hljs-number">1</span></span>, chunk-&gt;begin() + chunk_size); data.seekg(half_chunk_byte_size * start + chunk_byte_size * p); data.write((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *) chunk-&gt;data(), chunk_byte_size); } } <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> chunk; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     é–¢æ•°flat_quick_sortãŠã‚ˆã³in_place_mergeã®å®Ÿè£…ã¯æ®‹ã‚Šã¾ã™ã€‚  ripatti <a href="http://habrahabr.ru/users/ripatti/" class="user_link">habraiserã®</a> <a href="http://habrahabr.ru/post/247053/">è¨˜äº‹</a>ã§ã€ãƒ•ãƒ©ãƒƒãƒˆã‚¯ã‚¤ãƒƒã‚¯ã‚½ãƒ¼ãƒˆã®ã‚¢ã‚¤ãƒ‡ã‚¢ï¼ˆãŠã‚ˆã³ã»ã¨ã‚“ã©ã®å®Ÿè£…ï¼‰ã‚’å–ã‚Šä¸Šã’<a href="http://habrahabr.ru/users/ripatti/" class="user_link">ã¾ã—ãŸ</a> ã€‚ ä¸­å¤®å€¤ã®ä¸­å¤®å€¤ï¼ˆå¹³å‡çš„ãªã‚±ãƒ¼ã‚¹ã§ã¯éå‰°ã¨è¦‹ãªã•ã‚Œã¾ã™ï¼‰ã‚’ä¸­å¤®å€¤9ã«ç½®ãæ›ãˆã€é…åˆ—ã®å°ã•ãªéƒ¨åˆ†ã«æŒ¿å…¥ã‚’ä½¿ç”¨ã—ãŸä¸¦ã¹æ›¿ãˆã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">flat_quicksort.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> EXTERNAL_SORT_FLAT_QUICKSORT_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> EXTERNAL_SORT_FLAT_QUICKSORT_H template</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;class ForwIt&gt; void insertion_sort(ForwIt be, ForwIt en) { for (ForwIt ii = be + 1; ii != en; ii++) { ForwIt jj = ii - 1; auto val = *ii; while (jj &gt;= be and *jj &gt; val) { *(jj + 1) = *jj; --jj; } *(jj + 1) = val; } } template&lt;class ForwIt&gt; ForwIt median_of_3(ForwIt it1, ForwIt it2, ForwIt it3) { return (*it1 &gt; *it2) ? (*it3 &gt; *it2) ? (*it1 &gt; *it3) ? it3 : it1 : it2 : (*it3 &gt; *it1) ? (*it2 &gt; *it3) ? it3 : it2 : it1; } template&lt;class ForwIt&gt; ForwIt choose_pivot(ForwIt be, ForwIt en) { ptrdiff_t s = (en - be) / 8; ForwIt mid = be + (en - be) / 2; ForwIt best1 = median_of_3(be, be + s, be + 2 * s), best2 = median_of_3(mid - s, mid, mid + s), best3 = median_of_3( en - 2 * s, en - s, en); return median_of_3(best1, best2, best3); } // search for the end of the current block template&lt;class ForwIt&gt; ForwIt block_range(ForwIt be, ForwIt en) { ForwIt it = be; while (it != en) { if (*be &lt; *it) return it; ++it; } return it; } // warning: after the partition outer pivot may point to random element template&lt;class ForwIt&gt; std::pair&lt;ForwIt, ForwIt&gt; partition_range(ForwIt be, ForwIt en, ForwIt pivot) { std::pair&lt;ForwIt, ForwIt&gt; re; ForwIt j = be; for (ForwIt i = be; i != en; ++i) if (*i &lt; *pivot) { if (pivot == i) pivot = j; else if (pivot == j) pivot = i; std::swap(*j, *i); ++j; } re.first = j; for (ForwIt i = j; i != en; ++i) if (*pivot == *i) { if (pivot == i) pivot = j; else if (pivot == j) pivot = i; std::swap(*j, *i); ++j; } re.second = j; return re; } // makes largest element the first template&lt;class ForwIt&gt; void blockify(ForwIt be, ForwIt en) { for (ForwIt it = be; it != en; ++it) if (*be &lt; *it) std::swap(*be, *it); } template&lt;class ForwIt&gt; void flat_quick_sort(ForwIt be, ForwIt en) { ForwIt tmp = en; // the current end of block while (be != en) { if (std::is_sorted(be, tmp)) { be = tmp; tmp = block_range(be, en); continue; } if (tmp - be &lt; 32) insertion_sort(be, tmp); else { ForwIt pivot = choose_pivot(be, tmp); std::pair&lt;ForwIt, ForwIt&gt; range = partition_range(be, tmp, pivot); blockify(range.second, tmp); tmp = range.first; } } } #endif //EXTERNAL_SORT_FLAT_QUICKSORT_H</span></span></span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ãƒãƒ¼ã‚¸ã¯ã‚ˆã‚Šå›°é›£ã§ã—ãŸã€‚ ã¾ãšã€Oï¼ˆnï¼‰ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨ã—ã¦ã‚¹ã‚¿ãƒ–ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;T&gt; &amp;chunk, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> s, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> q, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt; *chunk2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt;(q - s + <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it2 = chunk2-&gt;begin(), it1 = chunk.begin() + q + <span class="hljs-number"><span class="hljs-number">1</span></span>, it = chunk.begin() + s; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::copy(it, it1, it2); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (it2 != chunk2-&gt;end() &amp;&amp; it1 != chunk.begin() + r + <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (*it1 &gt; *it2) { *it = *it2; ++it2; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { *it = *it1; ++it1; } ++it; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (it1 == chunk.begin() + r + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::copy(it2, chunk2-&gt;end(), it); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::copy(it1, chunk.begin() + r + <span class="hljs-number"><span class="hljs-number">1</span></span>, it); <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> chunk2; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã‚¹ã‚¿ãƒ–ã‚’ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ç½®ãæ›ãˆãŸã„ã¨æ€ã£ãŸã¨ãã€é«˜é€Ÿã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã»ã¨ã‚“ã©ç´›ã‚‰ã‚ã—ã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸï¼ˆãŸã¨ãˆã°ã€ <a href="https://scholar.google.com/scholar%3Fcluster%3D15596289922936727341%26hl%3Dru%26as_sdt%3D0,5">ã‚ªãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãŠã‚ˆã³æœ€é©ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ã‚’</a>å‚ç…§ï¼‰ã€‚ ã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ãŒå¿…è¦ã ã£ãŸã®ã§<a href="https://scholar.google.co.il/scholar%3Fcluster%3D8489305296842245618%26hl%3Dru">ã€ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ç”¨ã®ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </a>ã®è¨˜äº‹ã‹ã‚‰ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é¸æŠ<a href="https://scholar.google.co.il/scholar%3Fcluster%3D8489305296842245618%26hl%3Dru">ã—ã¾ã—ãŸ</a> ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Iter&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">merge_B_and_Y</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iter z, Iter y, Iter yn)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; z &lt; y &amp;&amp; y &lt; yn; ++z) { Iter j = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::min_element(z, y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (*j &lt;= *y) <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::swap(*z, *j); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::swap(*z, *y); ++y; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (z &lt; y) flat_quick_sort(z, yn); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Iter&gt; <span class="hljs-function"><span class="hljs-function">Iter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_next_X_block</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iter x0, Iter z, Iter y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> k, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> f, Iter b1, Iter b2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">auto</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> min1 = max, min2 = max; Iter m = x0 + (<span class="hljs-keyword"><span class="hljs-keyword">ptrdiff_t</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">floor</span></span>((z - x0 - f) / k) * k + f, x = x0; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt;= z) m += k; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = m; i + k &lt;= y; i += k) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i != b1 &amp;&amp; i != b2) { Iter j = (i &lt; b1 &amp;&amp; b1 &lt; i + k) ? m - <span class="hljs-number"><span class="hljs-number">1</span></span> : i + k - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (*i &lt;= min1 &amp;&amp; *j &lt;= min2) { x = i; min1 = *i; min2 = *j; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Iter&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in_place_merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iter x0, Iter y0, Iter yn, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int64_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> k, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rec)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (k == <span class="hljs-number"><span class="hljs-number">-1</span></span>) k = (<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(yn - x0); <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> f = (y0 - x0) % k; Iter x = (f == <span class="hljs-number"><span class="hljs-number">0</span></span>) ? y0 - <span class="hljs-number"><span class="hljs-number">2</span></span> * k : y0 - k - f; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> t = *x, max = *<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::max_element(x0, yn); *x = *x0; Iter z = x0, y = y0, b1 = x + <span class="hljs-number"><span class="hljs-number">1</span></span>, b2 = y0 - k; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (y - z &gt; <span class="hljs-number"><span class="hljs-number">2</span></span> * k) { ++i; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (*x &lt;= *y || y &gt;= yn) { *z = *x; *x = *b1; ++x; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((x - x0) % k == f) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (z &lt; x - k) b2 = x - k; x = find_next_X_block(x0, z, y, k, f, b1, b2, max); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { *z = *y; *y = *b1; ++y; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((y - y0) % k == <span class="hljs-number"><span class="hljs-number">0</span></span>) b2 = y - k; } ++z; *b1 = *z; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (z == x) x = b1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (z == b2) b2 = yn + <span class="hljs-number"><span class="hljs-number">1</span></span>; ++b1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((b1 - x0) % k == f) b1 = (b2 == yn + <span class="hljs-number"><span class="hljs-number">1</span></span>) ? b1 - k : b2; } *z = t; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rec) merge_B_and_Y(z, y, yn); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { flat_quick_sort(z, y); in_place_merge(z,y,yn,(<span class="hljs-keyword"><span class="hljs-keyword">int64_t</span></span>)<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(k),<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã—ã‹ã—ã€ç§ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§ã¯ã€ãƒãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ã«ç½®ãæ›ãˆã‚‹ã¨ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒã»ã¼1æ¡é…ããªã‚Šã¾ã—ãŸã€‚ å®Ÿè£…ã‚’é–“é•ãˆãŸã‹ã€å˜ç´”ã•ã‚’è¿½æ±‚ã—ã¦é…ã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é¸æŠã—ãŸã ã‘ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ ã„ã¤ã‚‚ã®ã‚ˆã†ã«ã€ãã‚Œã‚’æ•´ç†ã™ã‚‹æ™‚é–“ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã•ã‚‰ã«ã€gprofãŒä½•ã‚‰ã‹ã®å½¢ã§è½ã¡ã¾ã—ãŸã€‚ ãã—ã¦ã€ãã‚Œã¯ç§ã«å¤œæ˜ã‘ã‚’ã‚‚ãŸã‚‰ã—ã¾ã—ãŸã€‚  Mãƒã‚¤ãƒˆã®å‹•çš„ãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã‚‹å ´åˆã€ã©ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€Oï¼ˆ1ï¼‰ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚ æ¬¡ã«ã€ãƒ‡ãƒ¼ã‚¿ã«2/3ã‚’é¸æŠã—ã€ãƒãƒ¼ã‚¸ãƒãƒƒãƒ•ã‚¡ã«3ç•ªç›®ã‚’é¸æŠã—ã¾ã™ã€‚ ã‚¹ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ã¯ãšã£ã¨å°‘ãªããªã‚Šã¾ã™ã€‚ ãã—ã¦çœŸå®Ÿã¯ï¼š 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><th> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  </th><th> æ™‚é–“ï¼ˆ7.5MBã®ãƒ¡ãƒ¢ãƒªã§75MB int64ï¼‰ </th><th> é€Ÿåº¦ï¼ˆ7.5MBã®ãƒ¡ãƒ¢ãƒªã§75MB int64ï¼‰ </th><th> æ™‚é–“ï¼ˆ75KBã®ãƒ¡ãƒ¢ãƒªã«7.5MB int64ï¼‰ </th><th> é€Ÿåº¦ï¼ˆ75KBã®ãƒ¡ãƒ¢ãƒªã§7.5MB int64ï¼‰ </th><th> æ™‚é–“ï¼ˆ75MBã®ãƒ¡ãƒ¢ãƒªã§750MB int64ï¼‰ </th><th> é€Ÿåº¦ï¼ˆ75MBã®ãƒ¡ãƒ¢ãƒªã§750MB int64ï¼‰ </th></tr><tr><td> ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ </td><td>  6.04329ç§’ </td><td>  1,241,045 B / s </td><td>  24.2993ç§’ </td><td>  3 086 508 B / s </td><td>  - </td><td>  - </td></tr><tr><td> ãƒãƒ¼ã‚¸ </td><td>  0.932663ç§’ </td><td>  8 041 489 B / s </td><td>  2.73895ç§’ </td><td>  27382756 B / s </td><td>  47.7946ç§’ </td><td>  15 691 689 B / s </td></tr><tr><td> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ <a href="http://habrahabr.ru/users/sly_g/" class="user_link">SLY_G</a> </td><td>  1.79629ç§’ </td><td>  4175272 B / s </td><td>  3.84775ç§’ </td><td>  19 491 910 B / s </td><td>  39.77ç§’ </td><td>  18858436 B / s </td></tr></tbody></table> æ®‹å¿µãªãŒã‚‰ã€å¤§å®¹é‡ã®å ´åˆã€ãƒãƒƒãƒ•ã‚¡ãŒã¾ã£ãŸãä½¿ç”¨ã•ã‚Œãªã„ãŸã‚ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®é€Ÿåº¦ãŒä½ä¸‹ã—ã¾ã™ã€‚ ãã‚Œã§ã‚‚ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®é€Ÿåº¦ã¯éå¸¸ã«é©åˆ‡ã§ã‚ã‚Šã€æ”¹å–„ã§ãã‚‹ã¨ç¢ºä¿¡ã—ã¦ã„ã¾ã™ã€‚ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ã™ã¹ã¦ã®ã‚½ãƒ¼ã‚¹ã¯<a href="https://github.com/Randl/CS/tree/master/External%2520sort">ã“ã¡ã‚‰</a>ã§ã™ã€‚ </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J26852/index.html">Appleã®æ–°ã—ã„JavaScriptã‚¨ãƒ³ã‚¸ãƒ³</a></li>
<li><a href="../J268523/index.html">Coremodule 920ã§GPIOã‚’æ§‹æˆã™ã‚‹</a></li>
<li><a href="../J268529/index.html">Linuxã§ã®DOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ</a></li>
<li><a href="../J26853/index.html">Microsoft Managed Extensibility Framework</a></li>
<li><a href="../J268531/index.html">tkinterã‚’ä½¿ç”¨ã—ãŸPythonã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä½œæˆ</a></li>
<li><a href="../J268539/index.html">= ^ ._ã€‚^ =</a></li>
<li><a href="../J26854/index.html">CakePHP 1.2 RC1ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸ</a></li>
<li><a href="../J268541/index.html">çµå©šã›ãšã«æ¥ç¶šã™ã‚‹ãŸã‚ã®OnLime</a></li>
<li><a href="../J268547/index.html">ä»®æƒ³ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ã•ã¾ã–ã¾ãªã‚¿ã‚¤ãƒ—ã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ç®¡ç†</a></li>
<li><a href="../J26855/index.html">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã‚ˆã‚‹ã‚ªãƒ³ãƒ©ã‚¤ãƒ³è¨˜äº‹ã®èªå¥ã®é‡è¦æ€§ã®ãƒ©ãƒ³ã‚¯ä»˜ã‘</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😷 👩🏽‍🚒 👨🏼‍🤝‍👨🏻 Cloud to Device Messaging（C2DM）をサポートするAndroid用アプリケーションを作成しています 👩‍👦 🍲 🍺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="読者の皆さん、Habrahabrこんにちは！ 
  
 
  
 この投稿では、GoogleのC2DMサービスに注意を払い、このサービスのサポートをAndroidアプリケーションに実装する方法を伝えたいと思います。 C2DMは、Androidデバイスにインストールされたアプリケーションにメッセージを...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>Cloud to Device Messaging（C2DM）をサポートするAndroid用アプリケーションを作成しています</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body"> <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/9c/25/9c2506f1622db60eee6e0db21e3c72e3.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     読者の皆さん、Habrahabrこんにちは！ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この投稿では、GoogleのC2DMサービスに注意を払い、このサービスのサポートをAndroidアプリケーションに実装する方法を伝えたいと思います。  C2DMは、Androidデバイスにインストールされたアプリケーションにメッセージを送信するためのAPIを提供する特別なサービスです。 このサービスの使用は、必要に応じて、システムに登録されているが現在アクティブではないユーザーアプリケーションにメッセージを送信するために不可欠な方法です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      C2DMはAndroidプラットフォームの基本的な機能の1つですが、RuNetにはC2DMに関する情報がほとんどありません。 この状況を変えようとする試みは、この投稿のタスクの1つです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     簡単に、簡単なクライアントアプリケーションとサーバーアプリケーションを作成する方法、いくつかの「落とし穴」を示す方法、およびサンプルコードへのリンクを提供します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><h4> クラウドからデバイスへのメッセージング </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     しかし、今のところ、少しの理論。 上で書いたように、C2DMはユーザーアプリケーションからAndroidアプリケーションへのメッセージ配信サービス<a href="http://code.google.com/android/c2dm/index.html">です</a> 。詳細については<a href="http://code.google.com/android/c2dm/index.html">こちらをご覧ください</a> 。 つまり これは、Appleの観点から言えば、プッシュ通知の一種です。 インタラクションの一般的なスキームは、インターネットにある次の図に示されています。 <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/7e/94/7e94c4de49c10be97cd923a41564c47f.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      3つの主要部分が図から見えます： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  <b>C2DMサービス。</b> メッセージを配信するためのGoogleのクラウド。 デバイスおよび認証の登録/再登録だけでなく。 </li><li>  <b>クライアント部分。</b> メッセージを受け入れるAndroidアプリケーション。 </li><li>  <b>サーバー部分。</b> メッセージを送信するクライアントアプリケーション（Googleの用語では「サードパーティサーバー」）。 </li></ol> メッセージパッシングプロセスの詳細は、上記で引用したリンクで記述されていますが、簡単に言うと、次のもので構成されています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  AndroidアプリケーションはC2DMに<a href="http://code.google.com/android/c2dm/index.html">登録さ</a>れているため、メッセージを受信する準備ができたことを通知し、 <b>登録ID</b>を受け取り<b>ます</b> 。 登録IDは、サーバー部分が受信者にメッセージを送信できることを知っている、デバイスの一意の識別子です。 登録時には、Googleアカウントの名前を指定する必要がありますが、これについては後でクライアント側について検討するときに記述します。 </li><li> アプリケーションは、サーバーの登録IDを送信して、メッセージを送信できるユーザーを認識します。 </li><li> サーバー部分は、C2DMに登録するときにAndroidアプリケーションと同じアカウントを使用してGoogleサーバーで<b>認証</b>され、 <b>認証トークン</b>を受け取ります。  Googleのサービスでの承認と認証の詳細については、 <a href="http://code.google.com/apis/gdata/docs/auth/overview.html">こちらをご覧ください</a> 。 </li><li> 登録IDと認証トークンを知っているサーバーは、Androidアプリケーションにメッセージを送信します。 </li></ol> これで、開発に直接行くことができます。 クライアント側（Androidアプリケーション）から始めましょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> クライアント部 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      C2DM Androidを使用するには、デバイスが次の要件を満たしている必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Android 2.2以降のバージョンである必要があります。 以前のバージョンでは、C2DMはサポートされていません！ </li><li> 動作中のGoogleアカウントが必要です。  Androidマーケットをお持ちの場合は、お持ちです。 </li></ol> すべてが完了したら、アプリケーションの作成に進むことができます。 このために、Eclipse + Android SDKを使用します。  TextViewで最も単純な「Hello、World」を作成できます。 アプリケーションを作成する手順については説明しません。たとえば、 <a href="http://habrahabr.ru/blogs/android_development/109944/">ここ</a>や<a href="http://habrahabr.ru/blogs/android_development/110247/">ここ</a>など、それについて多くのことが書かれてい<a href="http://habrahabr.ru/blogs/android_development/110247/">ます</a> 。 次のようなものが得られるはずです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/62/dc/62dc9511e855186e0b04a5b54262f341.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>注：Android 2.2がない場合は、エミュレーターを使用できますが、標準のSDKプラットフォームではなく、Google API（API 8以上）を使用する必要があります。</i>  <i>標準SDKでのGoogleアカウントのサポートはありません。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     アプリケーションを作成したら、パッケージ名（パッケージ名）を指定する必要がある特別な<a href="http://code.google.com/android/c2dm/signup.html">サイト</a>に登録する必要があります。最も重要なのは、メッセージの送信に使用されるGoogleのメールアカウントです。 登録時にクライアントで、認証時にサーバーで使用するのはこのメールです。 確認メールを送信する必要があります。この手紙の後、指定されたアカウントを使用してC2DMを操作できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、「Hello、World！」アプリケーションの変更に進みます。 登録/登録解除、そしてもちろんメッセージの受信を担当するコードの実装が必要です。 初めて自分で書くのは本当に難しい すべてのニュアンスを考慮することは難しいため、 <a href="http://code.google.com/android/c2dm/index.html">例</a>としてGoogle自体に親切に提供するコードを使用します。 クライアント側でC2DMを操作するための既成のクラスセットをsvn <a href="http://code.google.com/p/chrometophone/source/browse/">storage</a>からダウンロードします。 そして、それらをプロジェクトの「 <b>src \ com \ google \ android \ c2dm</b> 」ディレクトリに追加します。 次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/f7/26/f7263dde1715c25e071bee12660a45c9.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、抽象クラスC2DMBaseReceiverのメソッドを実装する必要があります。このため、呼び出しをログに記録するだけでクラスC2DMReceiverを記述し、Mainの隣に配置します。  C2DMReceiverクラスのコンテンツ： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><ol><li>  <font color="#000000">パッケージ</font> <font color="#006699">com.home.c2dmtest</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">import</font> <font color="#006699">com.google.android.c2dm.C2DMBaseReceiver</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">import</font> <font color="#006699">android.app.Notification</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.app.NotificationManager</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.app.PendingIntent</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.content.Context</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.content.Intent</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">android.util.Log</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">パブリック</font> <font color="#000000">クラス</font> C2DMReceiver <font color="#000000">は</font> C2DMBaseReceiverを<font color="#000000">拡張し</font>ます<font color="#009900">{</font> </li><li>  <font color="#000000">パブリック</font> C2DMReceiver <font color="#009900">（</font> <font color="#009900">）</font> <font color="#009900">{</font> </li><li>  <font color="#000000">super</font> <font color="#009900">（</font> <font color="#0000ff">"&lt;yourmail&gt; @ gmail.com"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  @ <font color="#003399">オーバーライド</font> </li><li>  <font color="#000000">public</font> <font color="#006600">void</font> onRegistered <font color="#009900">（</font> <font color="#003399">コンテキスト</font>コンテキスト、 <font color="#003399">文字列</font> registrationId <font color="#009900">）</font> <font color="#009900">{</font> </li><li> ログ  <font color="#006633">w</font> <font color="#009900">（</font> <font color="#0000ff">"onRegistered"</font> 、registrationId <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  @ <font color="#003399">オーバーライド</font> </li><li>  <font color="#000000">public</font> <font color="#006600">void</font> onUnregistered <font color="#009900">（</font> <font color="#003399">コンテキスト</font>コンテキスト<font color="#009900">）</font> <font color="#009900">{</font> </li><li> ログ  <font color="#006633">w</font> <font color="#009900">（</font> <font color="#0000ff">"onUnregistered"</font> 、 <font color="#0000ff">""</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  @ <font color="#003399">オーバーライド</font> </li><li>  <font color="#000000">public</font> <font color="#006600">void</font> onError <font color="#009900">（</font> <font color="#003399">コンテキスト</font>コンテキスト、 <font color="#003399">文字列</font> errorId <font color="#009900">）</font> <font color="#009900">{</font> </li><li> ログ  <font color="#006633">w</font> <font color="#009900">（</font> <font color="#0000ff">"onError"</font> 、errorId <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  @ <font color="#003399">オーバーライド</font> </li><li>  <font color="#000000">protected</font> <font color="#006600">void</font> onMessage <font color="#009900">（</font> <font color="#003399">コンテキスト</font>コンテキスト、インテントインテント<font color="#009900">）</font> <font color="#009900">{</font> </li><li> ログ  <font color="#006633">w</font> <font color="#009900">（</font> <font color="#0000ff">"onMessage"</font> 、 <font color="#0000ff">""</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li><li></li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     しかし、アプリケーションはまだC2DMで動作する準備ができていません。 必要な権利が設定されておらず、BroadcastReceiverが登録されていません。 これを修正するには、AndroidManifest.xmlを変更する必要があり<a href="http://code.google.com/android/c2dm/index.html">ます</a> 。その方法については、 <a href="http://code.google.com/android/c2dm/index.html">こちらをご覧ください</a> 。 私の例では、ファイルは次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><ol><li>  <font color="#009900"><font color="#000000">&lt;？xml</font> <font color="#000066">version</font> = <font color="#ff0000">"1.0"</font> <font color="#000066">encoding</font> = <font color="#ff0000">"utf-8"</font> <font color="#000000">？&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;マニフェスト</font> <font color="#000066">xmlns：android</font> = <font color="#ff0000">" <a href="http://schemas.android.com/apk/res/android%2522">schemas.android.com/apk/res/android"</a></font></font> </li><li>  <font color="#009900"><font color="#000066">android：versionCode</font> = <font color="#ff0000">"1"</font></font> </li><li>  <font color="#009900"><font color="#000066">android：versionName</font> = <font color="#ff0000">"1.0"</font> <font color="#000066">package</font> = <font color="#ff0000">"com.home.c2dmtest"</font> <font color="#000000">&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;アプリケーション</font></font> </li><li>  <font color="#009900"><font color="#000066">android：debuggable</font> = <font color="#ff0000">"true"</font></font> </li><li>  <font color="#009900"><font color="#000066">android：label</font> = <font color="#ff0000">"@ string / app_name"</font> <font color="#000000">&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;アクティビティ</font> <font color="#000066">android：name</font> = <font color="#ff0000">"Main"</font></font> </li><li>  <font color="#009900"><font color="#000066">android：label</font> = <font color="#ff0000">"@ string / app_name"</font></font> </li><li>  <font color="#009900"><font color="#000066">android：theme</font> = <font color="#ff0000">"@android：style / Theme.NoTitleBar"</font> <font color="#000000">&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;意図フィルター<font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;action</font> <font color="#000066">android：name</font> = <font color="#ff0000">"android.intent.action.MAIN"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;category</font> <font color="#000066">android：name</font> = <font color="#ff0000">"android.intent.category.LAUNCHER"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/ intent-filter <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/アクティビティ<font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;service</font> <font color="#000066">android：name</font> = <font color="#ff0000">".C2DMReceiver"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;受信機</font></font> </li><li>  <font color="#009900"><font color="#000066">android：name</font> = <font color="#ff0000">"com.google.android.c2dm.C2DMBroadcastReceiver"</font></font> </li><li>  <font color="#009900"><font color="#000066">android：permission</font> = <font color="#ff0000">"com.google.android.c2dm.permission.SEND"</font> <font color="#000000">&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;意図フィルター<font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;action</font> <font color="#000066">android：name</font> = <font color="#ff0000">"com.google.android.c2dm.intent.RECEIVE"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;category</font> <font color="#000066">android：name</font> = <font color="#ff0000">"com.home.c2dmtest"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/ intent-filter <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;意図フィルター<font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;action</font> <font color="#000066">android：name</font> = <font color="#ff0000">"com.google.android.c2dm.intent.REGISTRATION"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;category</font> <font color="#000066">android：name</font> = <font color="#ff0000">"com.home.c2dmtest"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/ intent-filter <font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/受信機<font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/アプリケーション<font color="#000000">&gt;</font></font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;uses-sdk</font> <font color="#000066">android：minSdkVersion</font> = <font color="#ff0000">"8"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;許可</font></font> </li><li>  <font color="#009900"><font color="#000066">android：name</font> = <font color="#ff0000">"com.home.c2dmtest.permission.C2D_MESSAGE"</font></font> </li><li>  <font color="#009900"><font color="#000066">android：protectionLevel</font> = <font color="#ff0000">"signature"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;uses-permission</font> <font color="#000066">android：name</font> = <font color="#ff0000">"com.home.c2dmtest.permission.C2D_MESSAGE"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;uses-permission</font> <font color="#000066">android：name</font> = <font color="#ff0000">"com.google.android.c2dm.permission.RECEIVE"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;uses-permission</font> <font color="#000066">android：name</font> = <font color="#ff0000">"android.permission.INTERNET"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;uses-permission</font> <font color="#000066">android：name</font> = <font color="#ff0000">"android.permission.WAKE_LOCK"</font> <font color="#000000">/&gt;</font></font> </li><li>  <font color="#009900"><font color="#000000">&lt;/マニフェスト<font color="#000000">&gt;</font></font></font> </li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>注：C2DMを使用するために正しい<a href="http://developer.android.com/reference/android/Manifest.permission.html">android.permission.WAKE_LOCKは</a>必要<a href="http://developer.android.com/reference/android/Manifest.permission.html">あり</a>ませんが、後で必要になります。このファイルを2回リストしないように、事前に追加することにしました。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これで、デバイスをC2DMに登録できます。そのために、OnCreateで次のコードを呼び出します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  C2DMessaging。  <font color="#006633">register</font> <font color="#009900">（</font> <font color="#000000">this</font> 、 <font color="#0000ff">"&lt;yourmail&gt; @ gmail.com"</font> <font color="#009900">）</font> <font color="#339933">;</font> </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     すべてがうまくいった場合、数秒後に新しいRegestration IDがC2DMReceiverクラスのonRegisteredメソッドに分類されます。 これが発生しない場合は、LogCatのログでエラーを確認する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     メソッドを呼び出すことで登録解除できます： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  C2DMessaging。  <font color="#006633">登録解除</font> <font color="#009900">（</font> <font color="#000000">これ</font> <font color="#009900">）</font> <font color="#339933">;</font> </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     現在の登録IDを取得： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <font color="#003399">文字列</font> ID = C2DMessaging。  <font color="#006633">getRegistrationId</font> <font color="#009900">（</font> <font color="#000000">これ</font> <font color="#009900">）</font> <font color="#339933">;</font> </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     登録IDはいつでも変更できます。  Googleは新しい意味を送信できるため、この状況に対処できる必要があります。 この例では、このためにすべてがすでに行われています;このメカニズムの実装は、クラスC2DMBaseReceiverのメソッドhandleRegistrationにあります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最終的なプロジェクトは次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a title="Habraffect.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/a3/98/a398413c1706e11bde1b22c365d1df43.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ここで、プロジェクトをより視覚的にし、メッセージの処理を拡張する必要があります。 新しいメッセージが到着すると<a href="http://developer.android.com/guide/topics/ui/notifiers/notifications.html">通知</a>が表示され、選択されると、アプリケーションはサーバーによって指定されたテキストで開始されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OK、これのために、onMessageコードを次のように変更します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><ol><li>  @ <font color="#003399">オーバーライド</font> </li><li>  <font color="#000000">protected</font> <font color="#006600">void</font> onMessage <font color="#009900">（</font> <font color="#003399">コンテキスト</font>コンテキスト、Intent receiveIntent <font color="#009900">）</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#003399">文字列</font>データ= receiveIntent。  <font color="#006633">getStringExtra</font> <font color="#009900">（</font> <font color="#0000ff">"message"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#000000">if</font> <font color="#009900">（</font> data <font color="#339933">！</font> = <font color="#006600">null</font> <font color="#009900">）</font> </li><li>  <font color="#009900">{</font> </li><li> ログ  <font color="#006633">w</font> <font color="#009900">（</font> <font color="#0000ff">「C2DMReceiver」</font> 、データ<font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  Intent intent = <font color="#000000">new</font> Intent <font color="#009900">（</font> <font color="#000000">this</font> 、Main。Class <font color="#009900">）</font> <font color="#339933">;</font> </li><li> 意図。  <font color="#006633">putExtra</font> <font color="#009900">（</font> <font color="#0000ff">"メッセージ"</font> 、データ<font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  NotificationManager mManager = <font color="#009900">（</font> NotificationManager <font color="#009900">）</font> </li><li>  getSystemService <font color="#009900">（</font> <font color="#006633">Context.NOTIFICATION_SERVICE</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#003399">Notification</font> notification = <font color="#000000">new</font> <font color="#003399">Notification</font> <font color="#009900">（</font> <font color="#006633">android。R</font> . <font color="#006633">Drawable。Ic_dialog_info</font> 、 </li><li>  <font color="#0000ff">「私のC2DMメッセージ」</font> 、 <font color="#003399">システム</font> 。  <font color="#006633">currentTimeMillis</font> <font color="#009900">（</font> <font color="#009900">）</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li> 通知。  <font color="#006633">setLatestEventInfo</font> <font color="#009900">（</font>コンテキスト、 <font color="#0000ff">「アプリ名」</font> 、 <font color="#0000ff">「C2DM通知」</font> 、 </li><li>  PendingIntent。  <font color="#006633">getActivity</font> <font color="#009900">（</font> <font color="#006633">this。getBaseContext</font> <font color="#009900">（</font> <font color="#009900">）</font> 、 <font color="#cc66cc">0</font> 、 </li><li> インテント、PendingIntent。  <font color="#006633">FLAG_CANCEL_CURRENT</font> <font color="#009900">）</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  mManager。  <font color="#006633">通知</font> <font color="#009900">（</font> <font color="#cc66cc">0</font> 、通知<font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>message</b>は、サーバーが送信するメッセージの識別子です。 これを新しいIntentに追加して、後でMainで取得できるようにします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Mainを変更して、送信されたメッセージを表示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><ol><li>  @ <font color="#003399">オーバーライド</font> </li><li> <font color="#000000">public</font> <font color="#006600">void</font> onCreate <font color="#009900">（</font> Bundle savedInstanceState <font color="#009900">）</font> <font color="#009900">{</font> </li><li>  <font color="#000000">スーパー</font> 。  <font color="#006633">onCreate</font> <font color="#009900">（</font> savedInstanceState <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  TextView view = <font color="#000000">new</font> TextView <font color="#009900">（</font> <font color="#000000">this</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#003399">文字列</font>メッセージ= getIntent <font color="#009900">（</font> <font color="#009900">）</font> 。  <font color="#006633">getStringExtra</font> <font color="#009900">（</font> <font color="#0000ff">"message"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#000000">if</font> <font color="#009900">（</font>メッセージ== <font color="#006600">null</font> <font color="#009900">）</font> </li><li> ビュー。  <font color="#006633">setText</font> <font color="#009900">（</font> <font color="#0000ff">"Hello、World !!!"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#000000">他に</font> </li><li> ビュー。  <font color="#006633">setText</font> <font color="#009900">（</font> <font color="#0000ff">"Your message："</font> + message <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  setContentView <font color="#009900">（</font>ビュー<font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#003399">文字列</font> ID = C2DMessaging。  <font color="#006633">getRegistrationId</font> <font color="#009900">（</font> <font color="#000000">これ</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#000000">if</font> <font color="#009900">（</font> id == <font color="#0000ff">""</font> <font color="#009900">）</font> </li><li>  <font color="#009900">{</font> </li><li>  C2DMessaging。  <font color="#006633">register</font> <font color="#009900">（</font> <font color="#000000">this</font> 、 <font color="#0000ff">"&lt;yourmail&gt; @ gmail.com"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     実際には、登録IDをサーバーやその他の小さなものに転送するためのメカニズムを作成する必要がありますが、 この例では、そこで停止し、サーバー上の登録IDをハードコードします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> サーバー側 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最初のステップは、認証トークンを取得することです。 これは<a href="http://prodroid.com.ua/%3Fp%3D52">この</a>ブログによく書かれ<a href="http://prodroid.com.ua/%3Fp%3D52">てい</a>ます（他にも多くの有用な情報があります）。 一般に、例があり、すべてがロシア語であるため、繰り返しは行わず、受け取ったと想定します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、登録IDと認証トークンがあります。 小さい場合は、メッセージを伝える必要があります。 何らかの理由で、インターネットのこの部分に関する情報はほとんどありませんが、ここでは複雑なことは何もありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Googleサーバーとの接続を確立し、 <a href="http://code.google.com/android/c2dm/index.html">正しい</a>形式でリクエストを作成する<a href="http://code.google.com/android/c2dm/index.html">必要があり</a>ます。 そしてそれだけです。 メッセージを送信する簡単な例を次のコードに示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><ol><li>  <font color="#000000">public</font> <font color="#006600">boolean</font> sendData <font color="#009900">（</font> </li><li>  <font color="#003399">文字列</font> authToken、 </li><li>  <font color="#003399">文字列</font> registrationId、 </li><li>  <font color="#003399">文字列の</font>崩壊、 </li><li>  <font color="#003399">文字列</font>キー、 </li><li>  <font color="#003399">文字列</font>値<font color="#009900">）</font> </li><li>  <font color="#003399">IOExceptionを</font> <font color="#000000">スローします</font> <font color="#009900">{</font> </li><li></li><li>  <font color="#666666">//登録IDを設定します</font> </li><li>  <font color="#003399">StringBuilder</font> postDataBuilder = <font color="#000000">new</font> <font color="#003399">StringBuilder</font> <font color="#009900">（</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  postDataBuilder。  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"registration_id"</font> <font color="#009900">）</font> 。 </li><li>  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"="</font> <font color="#009900">）</font> 。  <font color="#006633">追加</font> <font color="#009900">（</font> registrationId <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">// collapse_keyを設定-折りたたみキーが同じ場合にメッセージをグループ化し、</font> </li><li>  <font color="#666666">//たとえば、デバイスはオフになり、1つのメッセージのみが送信されます。</font> </li><li>  <font color="#666666">//一度にすべてではありません。</font> </li><li>  postDataBuilder。  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"＆"</font> <font color="#009900">）</font> 。  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"collapse_key"</font> <font color="#009900">）</font> 。  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"="</font> <font color="#009900">）</font> 。 </li><li>  <font color="#006633">追加</font> <font color="#009900">（</font>折りたたみ<font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">// &lt;data。&gt; &lt;key&gt; = &lt;value&gt;の形式で、送信された日付を追加します</font> </li><li>  postDataBuilder。  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"＆"</font> <font color="#009900">）</font> 。  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"data。"</font> + key <font color="#009900">）</font> 。  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#0000ff">"="</font> <font color="#009900">）</font> 。 </li><li>  <font color="#006633">append</font> <font color="#009900">（</font> <font color="#003399">URLEncoder。encode</font> <font color="#009900">（</font> value、 <font color="#0000ff">"UTF-8"</font> <font color="#009900">）</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#006600">バイト</font> <font color="#009900">[</font> <font color="#009900">]</font> postData = postDataBuilder。  <font color="#006633">toString</font> <font color="#009900">（</font> <font color="#009900">）</font> 。  <font color="#006633">getBytes</font> <font color="#009900">（</font> <font color="#0000ff">"UTF-8"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#003399">URL</font> url = <font color="#000000">新しい</font> <font color="#003399">URL</font> <font color="#009900">（</font> <font color="#0000ff">" <a href="https://android.clients.google.com/c2dm/send%2522">android.clients.google.com/c2dm/send"</a></font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">//接続を設定します</font> </li><li>  <font color="#666666">//プロキシproxy = new Proxy（Proxy.Type.HTTP、new InetSocketAddress（ "lazerboy.local"、8080））;</font> </li><li>  <font color="#003399">HttpsURLConnection</font> conn = <font color="#009900">（</font> <font color="#003399">HttpsURLConnection</font> <font color="#009900">）</font> url。  <font color="#006633">openConnection</font> <font color="#009900">（</font> <font color="#666666">/ *プロキシ* /</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  conn。  <font color="#006633">setDoOutput</font> <font color="#009900">（</font> <font color="#006600">true</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  conn。  <font color="#006633">setHostnameVerifier</font> <font color="#009900">（</font> <font color="#000000">this</font> .new MyHostnameVerifier <font color="#009900">（</font> <font color="#009900">）</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  conn。  <font color="#006633">setRequestMethod</font> <font color="#009900">（</font> <font color="#0000ff">"POST"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  conn。  <font color="#006633">setRequestProperty</font> <font color="#009900">（</font> <font color="#0000ff">"Content-Type"</font> 、 </li><li>  <font color="#0000ff">"application / x-www-form-urlencoded; charset = UTF-8"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  conn。  <font color="#006633">setRequestProperty</font> <font color="#009900">（</font> <font color="#0000ff">"Content-Length"</font> 、Integer。toString <font color="#009900">（</font> postData。length <font color="#009900">）</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  conn。  <font color="#006633">setRequestProperty</font> <font color="#009900">（</font> <font color="#0000ff">"Authorization"</font> 、 <font color="#0000ff">"GoogleLogin auth ="</font> + authToken <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#003399">OutputStream</font> out = conn。  <font color="#006633">getOutputStream</font> <font color="#009900">（</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li> アウト。  <font color="#006633">書き込み</font> <font color="#009900">（</font> postData <font color="#009900">）</font> <font color="#339933">;</font> </li><li> アウト。  <font color="#006633">閉じる</font> <font color="#009900">（</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">//応答コードを取得します。</font> </li><li>  <font color="#006600">int</font> responseCode = conn。  <font color="#006633">getResponseCode</font> <font color="#009900">（</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">if</font> <font color="#009900">（</font> responseCode == HttpServletResponse。SC_UNAUTHORIZED || </li><li>  responseCode == HttpServletResponse。  <font color="#006633">SC_FORBIDDEN</font> <font color="#009900">）</font> <font color="#009900">{</font> </li><li>  <font color="#003399">システム</font>  <font color="#006633">アウト</font> 。  <font color="#006633">printf</font> <font color="#009900">（</font> <font color="#0000ff">「無許可-トークンが必要」</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#006600">falseを</font> <font color="#000000">返し</font> <font color="#006600">ます</font> <font color="#339933">。</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#000000">if</font> <font color="#009900">（</font> responseCode == HttpServletResponse。SC_OK <font color="#009900">）</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#003399">システム</font>  <font color="#006633">アウト</font> 。  <font color="#006633">printf</font> <font color="#009900">（</font> <font color="#0000ff">"デバイスに送信されたデータ！"</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li>  <font color="#006600">trueを</font> <font color="#000000">返し</font> <font color="#006600">ます</font> <font color="#339933">。</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#003399">システム</font>  <font color="#006633">アウト</font> 。  <font color="#006633">printf</font> <font color="#009900">（</font> <font color="#0000ff">"何か間違っている、応答メッセージ："</font> 、接続<font color="#006633">getResponseMessage</font> <font color="#009900">（</font> <font color="#009900">）</font> <font color="#009900">）</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#006600">falseを</font> <font color="#000000">返し</font> <font color="#006600">ます</font> <font color="#339933">。</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ここでは、サーバーからのメッセージの処理という非常に重要な詳細が1つ欠落しています。 そのため、たとえば、認証トークンの有効期限が切れる状況は一切処理されません。 しかし、すぐに使用できるライブラリではなく、動作するアプリケーションの例を書きたかったのです。 さらに、必要なものはすべて、Googleのソースコード（たとえば、 <a href="http://code.google.com/p/jumpnote/source/browse/">こちら）にあります</a> 。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     コードが正常に機能する場合、ユーザーのデバイスの通知領域に通知が表示され、クリックすると、サーバーからのテキストでアプリケーションが起動します。 ほら、これはまさに私たちが達成したことです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> おわりに </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      AndroidベースのアプリケーションにC2DMサポートをそれほど頭痛なく固定できる方法を示しました。 クライアント側とサーバー側の両方で、このために必要なこと。 もちろん、「ホワイトスポット」はありましたが、繰り返しますが、主なタスクは、この投稿を読んでいる人がC2DMをサポートするアプリケーションの開発を容易にするためのアイデアを伝え、コード例を示すことでした。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> 便利なリンク </h4><ol><li>  <a href="http://code.google.com/android/c2dm/index.html">Androidクラウドからデバイスへのメッセージング</a> </li><li>  <a href="http://code.google.com/android/c2dm/signup.html">C2DMを使用するためにアカウントを登録する必要がある場所</a> </li><li>  <a href="http://prodroid.com.ua/">C2DMおよびAndroidに関するロシア語のブログ</a> </li><li>  <a href="http://code.google.com/p/chrometophone/">Googleのサンプル</a> </li><li>  <a href="http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/">トピックに関する別のブログ</a> </li><li>  <a href="http://mylifewithandroid.blogspot.com/2010/10/push-service-from-google.html">C2DMの使用例</a> </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J116099/index.html">Ubuntu 11.04用に17の新しい壁紙が選択され、デフォルトのデスクトップ画像がわずかに更新されました</a></li>
<li><a href="../J11610/index.html">ボールまたは同性愛者ではない人はいくらですか</a></li>
<li><a href="../J116101/index.html">2つのチャットボット間の会話と、一方が他方を彼がAIであるとどのように確信させたか</a></li>
<li><a href="../J116102/index.html">ウェブカメラとオリエンテーションイベント</a></li>
<li><a href="../J116103/index.html">9か月後のUsbFlashSpeed</a></li>
<li><a href="../J116108/index.html">製品ライフサイクル管理システム：CADを含む</a></li>
<li><a href="../J11611/index.html">インターネットビジネスで成功する10の方法</a></li>
<li><a href="../J116110/index.html">Spree 0.50.0リリース</a></li>
<li><a href="../J116111/index.html">CodeFest ITインフラストラクチャ（WiFi、プロジェクター、ラップトップなど）</a></li>
<li><a href="../J116112/index.html">カザンのpythonでの最初のBars Groupマスタークラスのレポート</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏻 🏴󠁧󠁢󠁳󠁣󠁴󠁿 💥 クロスプラットフォームの3Dゲームエンジンを書いたように 👩🏿‍🎓 🧝🏾 🙌🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、Habr！ 私たちの多くは、おそらく「自分でゲームを書いてみませんか」と思ったでしょう。 今、私は「Open Tomb 」プロジェクトを実行しています。「Tomb Raider」の最初の5部でプレイするポータブルエンジンを作成する試みです。これはsourceforge.comで入手できま...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>クロスプラットフォームの3Dゲームエンジンを書いたように</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body"> こんにちは、Habr！ 私たちの多くは、おそらく「自分でゲームを書いてみませんか」と思ったでしょう。 今、私は<a href="http://sourceforge.net/projects/opentomb/">「Open</a> Tomb <a href="http://sourceforge.net/projects/opentomb/">」プロジェクトを</a>実行しています。「Tomb Raider」の最初の5部でプレイするポータブルエンジンを作成する試みです。これはsourceforge.comで入手できます。しかし、私自身の経験からすると、これはゼロから作成されたものであり、この分野の知識はほとんどありません。 今でも、多くの知識では不十分であり、より良いことやより正確に何かをするためのモチベーションが足りない場合もありますが、一歩一歩プロジェクトがどのように実現したかを説明する方が良いでしょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> エンジンを書くようになったきっかけ </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     物語はかなり前に始まり、Vista 64で素晴らしいロジックパズル「プッシャー」をプレイしたかったという事実から始まりました。しかし、元のゲームは16ビットであり、開始を完全に拒否しました。  Cでクローンを書くことほど良いことはありませんでした（最初はより良い結果につながる最良のソリューションではないこともあります）。 しばらくして、 <a href="http://www.libsdl.org/">SDL</a> v1.2 + <a href="https://www.opengl.org/">OpenGL</a>プラットフォームでゲームを実装しました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/0c4/032/d76/0c4032d76ceda66f6dc2d5413c8b04af.jpg" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     マップ転送の利便性のために、レベルエディターを追加し、64枚のカードすべてを手動で複製しました。 しばらくして、「プッシャー」への関心が薄れ、私はすでに3dfxグラフィックスで<a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529">トゥームレイダー</a> 1を運転したいと思っていました。 そして、多くの人がすでに推測しているように、これを行うための既存の解決策は（むしろ、主観的にさえ）私を本当に喜ばせず、ポートを探し始めました。 有名な<a href="http://sourceforge.net/projects/openraider">Open raider</a>プロジェクトに加えて、何も見つかりませんでした。 私は<a href="https://ru.wikipedia.org/wiki/MinGW">mingw</a>コンパイラを使用してWindowsでビルドしたことで苦しんだことを今でも覚えています（開発環境、 <a href="http://www.codeblocks.org/">コード::ブロック</a>または<a href="https://netbeans.org/">netbeansの</a>いずれかを覚えていません）。 ビルド結果はまったく私を喜ばせませんでした：約1分間レベルをロードし、最後に黒い画面を表示しました。 他の人のコードを選択し、その構造と関数の意味を理解する能力はありませんでした。  「より良い」をまとめる試みは停止しました。 ただし、オープンエンジンの少なくとも1つを手動でアセンブルするというアイデアを得ました<a href="http://habrahabr.ru/post/188354/">。DieGNU Autotoolsの</a> auto-configではなく、開発環境の自己アセンブルされたデザイナーからです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、モニターの後ろにかなりの時間を置いた後、一定量のマットなどを置いて、音のない<a href="http://tenebrae.sourceforge.net/">Quake Tenebraeを組み立てました</a> 。 しかし、彼は働いた！ 私は他の人のコードをよりよく理解し始め、最終的にコンパイラの組織の少なくとも何かを理解し始めました-それなしでは不可能です。 その後、いくつかのマイナーな改善が行われ、いくつかのバグが修正され、サウンドが開始されましたが、プロジェクトはインターネットにアップロードされませんでした（それでも、特に<a href="http://icculus.org/twilight/darkplaces">ダークプレースエンジンの</a>存在を考慮すると、道徳的に廃止されました）。 ただし、 <a href="http://tenebrae.sourceforge.net/">Quake Tenebrae</a>エンジンコードから、ゲーム全体の作業、個々のコンポーネント、およびメモリマネージャーがどのように編成されているかを学びました（非常に単純ではありますが、 <i>realloc</i>関数を追加しましたが、クラッシュすることなく機能しました）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> エンジンを書く </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     少し慣れると、エンジンをゼロから書き始めることにしました。 楽しみと自己啓発のためだけに。 エンジンの作成の基礎は次のとおりです<a href="http://sourceforge.net/projects/tdm-gcc">。GCC-TDMv4.X.X</a> + <a href="http://sourceforge.net/projects/mingwbundle">msysコンパイラー</a>および<a href="https://netbeans.org/">Netbeans</a>開発環境。 ライブラリ： <a href="http://www.libsdl.org/">SDL</a> v1.2 + <a href="https://www.opengl.org/">OpenGL</a> 実装された最初の機能は、スクリーンショットを撮り、*。bmpファイルに保存することで、この形式で動作するように自己記述ライブラリを使用していました。 コマンド<s>チート</s>を入力し、テキストを表示するためのコンソールなしでどのエンジンができるかはおそらくないので、次に勉強したのはOpenGLウィンドウにテキストを表示し、 <a href="http://freetype.sourceforge.net/">freetype</a> 1 + <a href="http://gltt.sourceforge.net/">gltt bunch</a>を選択する<a href="http://gltt.sourceforge.net/">方法でした</a> 。 最初の認識可能なコマンドは<i>終了コマンドで</i>あり、その後、フォントサイズ、行などで再生するコマンドです... 参考：文字列を解析し、トークンに順番に分割するために<a href="https://github.com/id-Software/Quake">Quake I</a>で使用されているコードが好きでした。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse_token</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *token)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> len; len = <span class="hljs-number"><span class="hljs-number">0</span></span>; token[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!data) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// skip whitespace skipwhite: while((c = *data) &lt;= ' ') { if(c == 0) return NULL; // end of file; data++; } // skip // comments if (c=='/' &amp;&amp; data[1] == '/') { while (*data &amp;&amp; *data != '\n') data++; goto skipwhite; } // handle quoted strings specially if (c == '\"') { data++; while (1) { c = *data++; if (c=='\"' || !c) { token[len] = 0; return data; } token[len] = c; len++; } } // parse single characters if (c=='{' || c=='}'|| c==')'|| c=='(' || c=='\'' || c==':') { token[len] = c; len++; token[len] = 0; return data+1; } // parse a regular word do { token[len] = c; data++; len++; c = *data; if (c=='{' || c=='}'|| c==')'|| c=='(' || c=='\'' || c==':') { break; } } while (c&gt;32); token[len] = 0; return data; }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     先に進む：スクリプトのサポートが必要になったとき、DOOM 3エンジンの例を使用してIDソフトウェアのようにエンジンを開発するアプローチを使用することにしました。これはHabré=で<a href="http://habrahabr.ru/post/166113/">ここ</a>で非常によく説明さ<a href="http://habrahabr.ru/post/166113/">れ</a>ました。翻訳とそれに興味深いコメントを書いた人）。 この記事に感銘を受け、ゲーム内のスクリプト作成のニーズだけでなく、構成ファイルとコンソールコマンドの解析にも<a href="http://www.lua.org/">LUA</a>をエンジンに実装することにしました（つまり、どこでも統一されたシステムが使用されています）。 このアプローチは完全に成果を上げました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  3Dに移りましょう </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     研究所では、線形代数、行列変​​換、ベクトル、数値法が好きだったのは幸運でした。 これらの基本がなければ、エンジンのプログラミングをゼロから始めるのは非常に無謀です（ただし、これらのセクションを例で研究するために特定の理論的知識ベースがなければ、これはほとんど現実的ではありません）。  <a href="http://steps3d.narod.ru/">A.ボレスコフ</a>の著書「OPENGLに基づいた3次元コンピューターゲームのグラフィックス」は、グラフィックスをマスターするのに大いに役立ちました。 数学的装置、レンダラーのタイプ、エンジンの構造に慣れるために、私はそれを何度も読み直しました。 シーンを構築する原理と種マトリックスと投影マトリックスの目的の概念がなければ、進歩は不可能です。 インターネット上のいくつかの資料と単なる文献を研究した後、私はポータルレンダラーを実行することにしました。 エンジンに最初に実装されたのは、自由に飛行するカメラと、互いにしか見えないいくつかのポータルでした。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ハードコードの後、3つの部屋のワイヤーフレームシーンが追加されました（さらに2つと廊下）。 しかし、そのような原始的な世界を飛び回ることは本当に興味深いのでしょうか...そして、 <a href="http://sourceforge.net/projects/openraider">Open Raiderの</a>リソースレイザーを使用してレベルをレンダリングすることにしました。 結果は私を喜ばせ、ここで少なくとも最初の部分で、 <a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529">トゥームレイダー</a>をプレイするための<a href="http://sourceforge.net/projects/opentomb/">ポート</a>を作成する計画を実装することが最終的に決定されました。 オブジェクトを空間に配置するために<a href="http://www.songho.ca/opengl/gl_transform.html">、OpenGLマトリックス</a>を使用しまし<a href="http://www.songho.ca/opengl/gl_transform.html">た。</a>これにより、オブジェクトのローカル座標系の基本ベクトルにアクセスし、1つのコマンド<i>glMultMatrixf</i> （変換）でオブジェクトの位置を設定し、1つの<i>setFromOpenGLMatrix</i> （変換）コマンドでオブジェクトの方向を設定します少し後で。 以下は、上記のリンクのOpenGLマトリックス構造の画像です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/ca3/92a/034/ca392a034a4e67d8b2921b7b6bc08522.png" alt="画像">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     エンジンの変更履歴とバックアップの可能性を維持するために、また自己開発のためだけに、 <a href="http://mercurial.selenic.com/">水銀</a>バージョン管理システムを使用することが決定されました。 そのアプリケーションにより、コードの記述の進行状況を追跡できるだけでなく、結果を<a href="http://sourceforge.com/">sourceforge.com</a>にアップロードすることも可能になりました。 実際のマップからのポータルに関する情報がエンジンに読み込まれ始めたとき、ポータルシステムの実装における膨大な数の欠陥がすぐに表面化したことに注意する必要があります。 オブジェクトの消失やクラッシュの処理には多くの時間がかかりましたが、今でもポータルモジュールには重大な修正が必要だと思います。 エンジンレンダラーは、カメラの位置と向きに応じて、部屋のポータルを通過し始め、表示されている部屋のみをリストに追加します。 次に、レンダラーは、リストからルームとそのコンテンツを描画します。 大規模なオープンスペースの場合、このアプローチが最も成功しているわけではないことは明らかですが、プロジェクトの目的には十分です。 再帰的ルームトラバーサル関数の例を次に示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs">** * The reccursion algorithm: go through the rooms with portal - frustum occlusion test * @portal - we entered to the room through that portal * @frus - frustum that intersects the portal * @<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> number of added rooms */ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Render_ProcessRoom(struct portal_s *portal, struct frustum_s *frus) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ret = <span class="hljs-number"><span class="hljs-number">0</span></span>, i; room_p room = portal-&gt;dest_room; <span class="hljs-comment"><span class="hljs-comment">//    room_p src_room = portal-&gt;current_room; //    portal_p p; //      - frustum_p gen_frus; //    if((src_room == NULL) || !src_room-&gt;active || (room == NULL) || !room-&gt;active) { return 0; } p = room-&gt;portals; for(i=0; i&lt;room-&gt;portal_count; i++,p++) //      { if((p-&gt;dest_room-&gt;active) &amp;&amp; (p-&gt;dest_room != src_room)) //      { gen_frus = Portal_FrustumIntersect(p, frus, &amp;renderer); //  -  .    if(NULL != gen_frus) //        { ret++; Render_AddRoom(p-&gt;dest_room); Render_ProcessRoom(p, gen_frus); } } } return ret; }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> 骨格アニメーションモデル </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして、プロジェクトで最も骨の折れる作業の1つが始まりました。 静的オブジェクトを使用した静的ルームのレンダリングは比較的簡単でしたが、アニメーション化された骨格モデルに関しては...最初に気付いたのは、 <a href="http://sourceforge.net/projects/openraider">Open Raider</a>リソースローダーが骨格モデルに関するすべての必要な情報をロードしないことです。 アニメーションのフレーム数が正しく決定されていないため、1つのアニメーションに複数のフレームが同時に含まれています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これらの問題を解決しようとしている間に、私は<a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529">トゥームレイダー</a>レベルのフォーマットと、同時に独自のリソースローダーを備えた<a href="http://icculus.org/vt/vt/doc/Tomb%2520Raider%2520II%2520Data%2520Formats.htm">vt</a>プロジェクトに関するさまざまなドキュメントを見つけました。 このプロジェクトには、モデルアニメーションのロードフレームはありませんでしたが、より構造化されたコードが含まれていて、読みやすく、頭に浮かぶのに便利です。 そこで、プロジェクトのローダーを<a href="http://icculus.org/vt/vt/doc/Tomb%2520Raider%2520II%2520Data%2520Formats.htm">vt</a>に置き換えました。 たとえば、 <a href="http://sourceforge.net/projects/openraider">オープンレイダーで</a>は、 <a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529">トゥームレイダーの</a> 5つの部分すべてに1つの長い関数がロードされ、多数の<i>if</i>と<i>スイッチ</i>がゲームのバージョン番号によって<i>切り替わります。これ</i>により、コードの読み取りとエラーの検出が大幅に複雑になります。  <a href="http://icculus.org/vt/vt/doc/Tomb%2520Raider%2520II%2520Data%2520Formats.htm">vtに</a>は5つのモジュールがあり、それぞれがレベルの独自のバージョンを担当していたため、コードは読みやすく、変更は難しくありませんでした。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     アニメーションの主な問題は、骨格モデルの骨の回転角度の抽出でした。 実際には、スペースを節約するために、コーナーは2〜4バイト単位でバイトコードに格納されていました。 最初の2バイトには、ここでどの軸の周りに1ターンがあるか、または3つのコーナー自体があるかどうかに関するフラグが含まれています。  3ターンの場合、フラグとコーナーは4バイトで格納され、1ターンの場合は2バイトのみが使用されます。 さらに、すべてのモデル、アニメーション、およびフレームの角度は1つの配列に保存され、オフセットを計算する必要があります。 さらに、モデルの個々のフレームのヘッダーはこのバイトコードに保存されたままであり、オフセットとの混乱が重要ですが、フレーム数が誤って読み込まれることを追加しました（後で、フレーム数が30 fpsの「補間」アニメーションに与えられることがわかりましたが、実際には、フレームは、1、1 / 2、1 / 3、1 / 4のファクターを持つfpsの「スナップショット」形式で保存できます。 アニメーションフレームローダーの完了後、骨格モデルは裏返しにならず、歪んだポリゴンから混乱に変わりました！ 次に、ララを「復活」させる必要があります。 以下は、骨格モデルを生成する関数のコードであり、デバッグ用のコードのスペルとコメントアウトされたセクションが保存されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenSkeletalModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct world_s *world, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> model_num, struct skeletal_model_s *model, class VT_Level *tr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i, j, k, l, l_start; <span class="hljs-keyword"><span class="hljs-keyword">tr_moveable_t</span></span> *tr_moveable; <span class="hljs-keyword"><span class="hljs-keyword">tr_animation_t</span></span> *tr_animation; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> frame_offset, frame_step; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> *frame, temp1, temp2; <span class="hljs-comment"><span class="hljs-comment">///@</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">FIXME:</span></span></span><span class="hljs-comment"> "frame" set, but not used float ang; btScalar rot[3]; bone_tag_p bone_tag; bone_frame_p bone_frame; mesh_tree_tag_p tree_tag; animation_frame_p anim; tr_moveable = &amp;tr-&gt;moveables[model_num]; // original tr structure model-&gt;collision_map = (uint16_t*)malloc(model-&gt;mesh_count * sizeof(uint16_t)); model-&gt;collision_map_size = model-&gt;mesh_count; for(i=0;i&lt;model-&gt;mesh_count;i++) { model-&gt;collision_map[i] = i; } model-&gt;mesh_tree = (mesh_tree_tag_p)malloc(model-&gt;mesh_count * sizeof(mesh_tree_tag_t)); tree_tag = model-&gt;mesh_tree; tree_tag-&gt;mesh2 = NULL; for(k=0;k&lt;model-&gt;mesh_count;k++,tree_tag++) { tree_tag-&gt;mesh = model-&gt;mesh_offset + k; tree_tag-&gt;mesh2 = NULL; tree_tag-&gt;flag = 0x00; vec3_set_zero(tree_tag-&gt;offset); if(k == 0) { tree_tag-&gt;flag = 0x02; vec3_set_zero(tree_tag-&gt;offset); } else { uint32_t *tr_mesh_tree = tr-&gt;mesh_tree_data + tr_moveable-&gt;mesh_tree_index + (k-1)*4; tree_tag-&gt;flag = tr_mesh_tree[0]; tree_tag-&gt;offset[0] = (float)((int32_t)tr_mesh_tree[1]); tree_tag-&gt;offset[1] = (float)((int32_t)tr_mesh_tree[3]); tree_tag-&gt;offset[2] =-(float)((int32_t)tr_mesh_tree[2]); } } /* * ================= now, animation loading ======================== */ if(tr_moveable-&gt;animation_index &lt; 0 || tr_moveable-&gt;animation_index &gt;= tr-&gt;animations_count) { /* * model has no start offset and any animation */ model-&gt;animation_count = 1; model-&gt;animations = (animation_frame_p)malloc(sizeof(animation_frame_t)); model-&gt;animations-&gt;frames_count = 1; model-&gt;animations-&gt;frames = (bone_frame_p)malloc(model-&gt;animations-&gt;frames_count * sizeof(bone_frame_t)); bone_frame = model-&gt;animations-&gt;frames; model-&gt;animations-&gt;id = 0; model-&gt;animations-&gt;next_anim = NULL; model-&gt;animations-&gt;next_frame = 0; model-&gt;animations-&gt;state_change = NULL; model-&gt;animations-&gt;state_change_count = 0; model-&gt;animations-&gt;original_frame_rate = 1; bone_frame-&gt;bone_tag_count = model-&gt;mesh_count; bone_frame-&gt;bone_tags = (bone_tag_p)malloc(bone_frame-&gt;bone_tag_count * sizeof(bone_tag_t)); vec3_set_zero(bone_frame-&gt;pos); vec3_set_zero(bone_frame-&gt;move); bone_frame-&gt;v_Horizontal = 0.0; bone_frame-&gt;v_Vertical = 0.0; bone_frame-&gt;command = 0x00; for(k=0;k&lt;bone_frame-&gt;bone_tag_count;k++) { tree_tag = model-&gt;mesh_tree + k; bone_tag = bone_frame-&gt;bone_tags + k; rot[0] = 0.0; rot[1] = 0.0; rot[2] = 0.0; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); vec3_copy(bone_tag-&gt;offset, tree_tag-&gt;offset); } return; } //Sys_DebugLog(LOG_FILENAME, "model = %d, anims = %d", tr_moveable-&gt;object_id, GetNumAnimationsForMoveable(tr, model_num)); model-&gt;animation_count = GetNumAnimationsForMoveable(tr, model_num); if(model-&gt;animation_count &lt;= 0) { /* * the animation count must be &gt;= 1 */ model-&gt;animation_count = 1; } /* * Ok, let us calculate animations; * there is no difficult: * - first 9 words are bounding box and frame offset coordinates. * - 10's word is a rotations count, must be equal to number of meshes in model. * BUT! only in TR1. In TR2 - TR5 after first 9 words begins next section. * - in the next follows rotation's data. one word - one rotation, if rotation is one-axis (one angle). * two words in 3-axis rotations (3 angles). angles are calculated with bit mask. */ model-&gt;animations = (animation_frame_p)malloc(model-&gt;animation_count * sizeof(animation_frame_t)); anim = model-&gt;animations; for(i=0;i&lt;model-&gt;animation_count;i++,anim++) { tr_animation = &amp;tr-&gt;animations[tr_moveable-&gt;animation_index+i]; frame_offset = tr_animation-&gt;frame_offset / 2; l_start = 0x09; if(tr-&gt;game_version == TR_I || tr-&gt;game_version == TR_I_DEMO || tr-&gt;game_version == TR_I_UB) { l_start = 0x0A; } frame_step = tr_animation-&gt;frame_size; //Sys_DebugLog(LOG_FILENAME, "frame_step = %d", frame_step); anim-&gt;id = i; anim-&gt;next_anim = NULL; anim-&gt;next_frame = 0; anim-&gt;original_frame_rate = tr_animation-&gt;frame_rate; anim-&gt;accel_hi = tr_animation-&gt;accel_hi; anim-&gt;accel_hi2 = tr_animation-&gt;accel_hi2; anim-&gt;accel_lo = tr_animation-&gt;accel_lo; anim-&gt;accel_lo2 = tr_animation-&gt;accel_lo2; anim-&gt;speed = tr_animation-&gt;speed; anim-&gt;speed2 = tr_animation-&gt;speed2; anim-&gt;anim_command = tr_animation-&gt;anim_command; anim-&gt;num_anim_commands = tr_animation-&gt;num_anim_commands; anim-&gt;state_id = tr_animation-&gt;state_id; anim-&gt;unknown = tr_animation-&gt;unknown; anim-&gt;unknown2 = tr_animation-&gt;unknown2; anim-&gt;frames_count = GetNumFramesForAnimation(tr, tr_moveable-&gt;animation_index+i); //Sys_DebugLog(LOG_FILENAME, "Anim[%d], %d", tr_moveable-&gt;animation_index, GetNumFramesForAnimation(tr, tr_moveable-&gt;animation_index)); // Parse AnimCommands // Max. amount of AnimCommands is 255, larger numbers are considered as 0. // See http://evpopov.com/dl/TR4format.html#Animations for details. if( (anim-&gt;num_anim_commands &gt; 0) &amp;&amp; (anim-&gt;num_anim_commands &lt;= 255) ) { // Calculate current animation anim command block offset. int16_t *pointer = world-&gt;anim_commands + anim-&gt;anim_command; for(uint32_t count = 0; count &lt; anim-&gt;num_anim_commands; count++, pointer++) { switch(*pointer) { case TR_ANIMCOMMAND_PLAYEFFECT: case TR_ANIMCOMMAND_PLAYSOUND: // Recalculate absolute frame number to relative. ///@FIXED: was unpredictable behavior. *(pointer + 1) -= tr_animation-&gt;frame_start; pointer += 2; break; case TR_ANIMCOMMAND_SETPOSITION: // Parse through 3 operands. pointer += 3; break; case TR_ANIMCOMMAND_JUMPDISTANCE: // Parse through 2 operands. pointer += 2; break; default: // All other commands have no operands. break; } } } if(anim-&gt;frames_count &lt;= 0) { /* * number of animations must be &gt;= 1, because frame contains base model offset */ anim-&gt;frames_count = 1; } anim-&gt;frames = (bone_frame_p)malloc(anim-&gt;frames_count * sizeof(bone_frame_t)); /* * let us begin to load animations */ bone_frame = anim-&gt;frames; frame = tr-&gt;frame_data + frame_offset; for(j=0;j&lt;anim-&gt;frames_count;j++,bone_frame++,frame_offset+=frame_step) { frame = tr-&gt;frame_data + frame_offset; bone_frame-&gt;bone_tag_count = model-&gt;mesh_count; bone_frame-&gt;bone_tags = (bone_tag_p)malloc(model-&gt;mesh_count * sizeof(bone_tag_t)); vec3_set_zero(bone_frame-&gt;pos); vec3_set_zero(bone_frame-&gt;move); bone_frame-&gt;v_Horizontal = 0.0; bone_frame-&gt;v_Vertical = 0.0; bone_frame-&gt;command = 0x00; GetBFrameBB_Pos(tr, frame_offset, bone_frame); if(frame_offset &lt; 0 || frame_offset &gt;= tr-&gt;frame_data_size) { //Con_Printf("Bad frame offset"); for(k=0;k&lt;bone_frame-&gt;bone_tag_count;k++) { tree_tag = model-&gt;mesh_tree + k; bone_tag = bone_frame-&gt;bone_tags + k; rot[0] = 0.0; rot[1] = 0.0; rot[2] = 0.0; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); vec3_copy(bone_tag-&gt;offset, tree_tag-&gt;offset); } } else { l = l_start; for(k=0;k&lt;bone_frame-&gt;bone_tag_count;k++) { tree_tag = model-&gt;mesh_tree + k; bone_tag = bone_frame-&gt;bone_tags + k; rot[0] = 0.0; rot[1] = 0.0; rot[2] = 0.0; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); vec3_copy(bone_tag-&gt;offset, tree_tag-&gt;offset); switch(tr-&gt;game_version) { case TR_I: /* TR_I */ case TR_I_UB: case TR_I_DEMO: temp2 = tr-&gt;frame_data[frame_offset + l]; l ++; temp1 = tr-&gt;frame_data[frame_offset + l]; l ++; rot[0] = (float)((temp1 &amp; 0x3ff0) &gt;&gt; 4); rot[2] =-(float)(((temp1 &amp; 0x000f) &lt;&lt; 6) | ((temp2 &amp; 0xfc00) &gt;&gt; 10)); rot[1] = (float)(temp2 &amp; 0x03ff); rot[0] *= 360.0 / 1024.0; rot[1] *= 360.0 / 1024.0; rot[2] *= 360.0 / 1024.0; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); break; default: /* TR_II + */ temp1 = tr-&gt;frame_data[frame_offset + l]; l ++; if(tr-&gt;game_version &gt;= TR_IV) { ang = (float)(temp1 &amp; 0x0fff); ang *= 360.0 / 4096.0; } else { ang = (float)(temp1 &amp; 0x03ff); ang *= 360.0 / 1024.0; } switch (temp1 &amp; 0xc000) { case 0x4000: // x only rot[0] = ang; rot[1] = 0; rot[2] = 0; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); break; case 0x8000: // y only rot[0] = 0; rot[1] = 0; rot[2] =-ang; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); break; case 0xc000: // z only rot[0] = 0; rot[1] = ang; rot[2] = 0; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); break; default: // all three temp2 = tr-&gt;frame_data[frame_offset + l]; rot[0] = (float)((temp1 &amp; 0x3ff0) &gt;&gt; 4); rot[2] =-(float)(((temp1 &amp; 0x000f) &lt;&lt; 6) | ((temp2 &amp; 0xfc00) &gt;&gt; 10)); rot[1] = (float)(temp2 &amp; 0x03ff); rot[0] *= 360.0 / 1024.0; rot[1] *= 360.0 / 1024.0; rot[2] *= 360.0 / 1024.0; vec4_SetTRRotations(bone_tag-&gt;qrotate, rot); l ++; break; }; break; }; } } } } /* * Animations interpolation to 1/30 sec like in original. Needed for correct state change works. */ SkeletalModel_InterpolateFrames(model); GenerateAnimCommandsTransform(model); /* * state change's loading */ #if LOG_ANIM_DISPATCHES if(model-&gt;animation_count &gt; 1) { Sys_DebugLog(LOG_FILENAME, "MODEL[%d], anims = %d", model_num, model-&gt;animation_count); } #endif anim = model-&gt;animations; for(i=0;i&lt;model-&gt;animation_count;i++,anim++) { anim-&gt;state_change_count = 0; anim-&gt;state_change = NULL; tr_animation = &amp;tr-&gt;animations[tr_moveable-&gt;animation_index+i]; j = (int)tr_animation-&gt;next_animation - (int)tr_moveable-&gt;animation_index; j &amp;= 0x7fff; if(j &gt;= 0 &amp;&amp; j &lt; model-&gt;animation_count) { anim-&gt;next_anim = model-&gt;animations + j; anim-&gt;next_frame = tr_animation-&gt;next_frame - tr-&gt;animations[tr_animation-&gt;next_animation].frame_start; anim-&gt;next_frame %= anim-&gt;next_anim-&gt;frames_count; if(anim-&gt;next_frame &lt; 0) { anim-&gt;next_frame = 0; } #if LOG_ANIM_DISPATCHES Sys_DebugLog(LOG_FILENAME, "ANIM[%d], next_anim = %d, next_frame = %d", i, anim-&gt;next_anim-&gt;id, anim-&gt;next_frame); #endif } else { anim-&gt;next_anim = NULL; anim-&gt;next_frame = 0; } anim-&gt;state_change_count = 0; anim-&gt;state_change = NULL; if((tr_animation-&gt;num_state_changes &gt; 0) &amp;&amp; (model-&gt;animation_count &gt; 1)) { state_change_p sch_p; #if LOG_ANIM_DISPATCHES Sys_DebugLog(LOG_FILENAME, "ANIM[%d], next_anim = %d, next_frame = %d", i, (anim-&gt;next_anim)?(anim-&gt;next_anim-&gt;id):(-1), anim-&gt;next_frame); #endif anim-&gt;state_change_count = tr_animation-&gt;num_state_changes; sch_p = anim-&gt;state_change = (state_change_p)malloc(tr_animation-&gt;num_state_changes * sizeof(state_change_t)); for(j=0;j&lt;tr_animation-&gt;num_state_changes;j++,sch_p++) { tr_state_change_t *tr_sch; tr_sch = &amp;tr-&gt;state_changes[j+tr_animation-&gt;state_change_offset]; sch_p-&gt;id = tr_sch-&gt;state_id; sch_p-&gt;anim_dispath = NULL; sch_p-&gt;anim_dispath_count = 0; for(l=0;l&lt;tr_sch-&gt;num_anim_dispatches;l++) { tr_anim_dispatch_t *tr_adisp = &amp;tr-&gt;anim_dispatches[tr_sch-&gt;anim_dispatch+l]; int next_anim = tr_adisp-&gt;next_animation &amp; 0x7fff; int next_anim_ind = next_anim - (tr_moveable-&gt;animation_index &amp; 0x7fff); if((next_anim_ind &gt;= 0) &amp;&amp;(next_anim_ind &lt; model-&gt;animation_count)) { sch_p-&gt;anim_dispath_count++; sch_p-&gt;anim_dispath = (anim_dispath_p)realloc(sch_p-&gt;anim_dispath, sch_p-&gt;anim_dispath_count * sizeof(anim_dispath_t)); anim_dispath_p adsp = sch_p-&gt;anim_dispath + sch_p-&gt;anim_dispath_count - 1; int next_frames_count = model-&gt;animations[next_anim - tr_moveable-&gt;animation_index].frames_count; int next_frame = tr_adisp-&gt;next_frame - tr-&gt;animations[next_anim].frame_start; int low = tr_adisp-&gt;low - tr_animation-&gt;frame_start; int high = tr_adisp-&gt;high - tr_animation-&gt;frame_start; adsp-&gt;frame_low = low % anim-&gt;frames_count; adsp-&gt;frame_high = (high - 1) % anim-&gt;frames_count; adsp-&gt;next_anim = next_anim - tr_moveable-&gt;animation_index; adsp-&gt;next_frame = next_frame % next_frames_count; #if LOG_ANIM_DISPATCHES Sys_DebugLog(LOG_FILENAME, "anim_disp[%d], frames_count = %d: interval[%d.. %d], next_anim = %d, next_frame = %d", l, anim-&gt;frames_count, adsp-&gt;frame_low, adsp-&gt;frame_high, adsp-&gt;next_anim, adsp-&gt;next_frame); #endif } } } } } }</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> おでかけ </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     骨格モデルが機能し始めたとき、物理学の存在を必要とするレベリングと「復活」に進むことがすでに可能でした。 そもそも、トピックに精通し、既成の製品の選択により徹底的にアプローチするために、独自の物理エンジンを作成することが決定されました。 キャラクターコントローラーを作成するために最初に必要なことは、高さを決定することです。 最初に、（ <a href="http://ray-tracing.ru/articles213.html">重心アルゴリズムに</a>基づいて）三角形と光線の交差を決定する関数が記述されました。 その後、移動セグメント、三角形と球、三角形と三角形の交点を決定するなどの基本的な方法が追加されました。 このアプローチは、インパルスベースの物理エンジンに固有の、いわゆる「トンネル効果」（高速のため、高速のオブジェクトが衝突することなく互いに飛行できる場合）の出現の可能性を排除することに注意する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そのため、ララはあらゆるサイズのステップをすべて通過しても、レベルを駆け抜けますが、マップから脱落することはありません！ プロジェクトがそのような状態にあったとき、アナトリー・ルムテは、少なくとも誰かが<a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529">トゥームレイダーの</a>最初の部分に興味を持っているのはクールだと私に書いた。 このようにして、プロジェクトへの関心が再び現れ始めたおかげで、通信が始まりました。  <a href="http://www.tombraiderforums.com/">tombraiderforums.com</a>に登録した後（Anatolyは、 <a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529">Tomb raiderの</a>第4部のエンジンを改善する彼のプロジェクトで、かなり長い間そこにいました）。 彼のおかげで<a href="http://www.tombraiderforums.com/showthread.php%3Ft%3D197508">、私のエンジン</a>とコードの多くの改善に関するトピックがこのフォーラムに登場しました：サウンドマネージャー、状態制御システムの変更（以前はアニメーション番号による<i>切り替え</i>があり、現在は状態番号による）。 プロジェクトに興味のある人々の存在は、プロジェクトを開発する動機付けになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> 物理学+レンダラー最適化 </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     物理学を使用し、最適化が不十分であっても、fpsはいくつかの場所で低下し始めました。 さまざまなオープンソースの物理エンジンを長い間選ぶことで、 <a href="http://bulletphysics.org/wordpress/">弾丸</a>が選ばれました。 最初にしたことは、部屋が交差する場合に衝突フィルターを追加することでした。 実際には、元のレベルの設計では、1つの場所で2つ以上の完全に異なる部屋の交差が許可されますが、1つの部屋のオブジェクトは別の部屋のオブジェクトに影響を与えません。 レンダリングと同様。 現在、私はキャラクターのコントローラーに思いをはせようとしています：壁を通過する可能性を排除し（壁に点を接する多くのアニメーションで発生します）、壁や天井にクリッピングが発生した場合のキャラクターの反応と動作を完了します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      OpenGLに戻ります。 最初、エンジンでは、 <i>glVertex3fv</i> （...）などを使用してポリゴンが<i>描画</i>さ<i>れ</i>ました。 このアプローチのパフォーマンスとエンジンの速度について1つ言えることがあります。それはありません。 そのため、 <a href="http://steps3d.narod.ru/tutorials/tutorial-VBO.html">VBO</a> （頂点バッファーオブジェクト）に関連する部分を調べた後、最適化を行い、ポリゴンの頂点のデータをビデオメモリにできるだけ格納し、一度にメッシュを描画し始めました。 速度が著しく向上しました。 ただし、1つのメッシュテクスチャが異なるピクセル配列にある可能性があるため、OpenGLテクスチャの切り替えは必要以上に頻繁に行われ、多くの異なるオブジェクトのテクスチャをピクセルの1つの配列に保存できるという事実により、アンチエイリアシングをオンにすると「アーティファクト」が作成されました。  <a href="http://www.tombraiderforums.com/">tombraiderforums.comの</a> Cochraneはレンダラーの最適化を引き受け、テクスチャ間の境界線を持つテクスチャアトラスを作成しました。 この革新により、すべてのレベルのテクスチャが1〜2個のOpenGLテクスチャに保存され、スムージングによって「アーティファクト」が表示されることはありません。 さらに、彼はMacOSに移植しました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     エンジンに何をどのように取り組むかのアイデアがなかったとき、コードのエラーを探し、その構造を修正し、接続されたライブラリを変更しました。 したがって、「再配置」は<a href="http://www.libsdl.org/">SDL1からSDL2</a>に、 <a href="http://freetype.sourceforge.net/freetype1/index.html">freetype1</a> + <a href="http://gltt.sourceforge.net/">gltt</a>から<a href="http://freetype.sourceforge.net/freetype2/index.html">freetype2</a> + <a href="http://sourceforge.net/projects/ftgl/">ftglに実行されました</a> 。 同様に、 <a href="http://en.wikipedia.org/wiki/Slerp">slerp</a>球面補間を使用して、アニメーションにアンチエイリアスを追加するというアイデアを思いつきました。 ここで追加したいことは、特に「アーチ」（asin、acos、atanなど）に関しては、数学アルゴリズムに注意してください。サインを失うと、スケルトンが歪んでねじれたキラーフレームが多くなります。  bulletのソースコードでslerpの実装を確認することをお勧めします。 アンチエイリアスを追加した後、滑らかでないアニメーションを見ることができなくなりました。 さらに、 <a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529">Tomb raider</a>ですが、サウンドをロードして再生する必要があり、致命的な沈黙の中でレベルを実行することはあまりありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> 音を追加する </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     サウンドを使用するには、 <a href="http://www.libsdl.org/">SDLAudio</a> + <a href="http://www.libsdl.org/projects/SDL_mixer/">SDLMixer</a>を使用する<a href="http://www.libsdl.org/projects/SDL_mixer/">だけでは</a>完全に不十分であり、オーディオストリーム変換アルゴリズムに入り、バイクを作成してエフェクトを作成することは悪い考えです。  Anatolyと相談した後、 <a href="http://sourceforge.net/projects/openal-soft/">OpenAL</a>を使用することが決定されました。 できるだけ多くのプラットフォーム固有のコードが<a href="http://www.libsdl.org/">SDL</a>に転送されるという事実に導かれたので、 <a href="http://sourceforge.net/projects/openal-soft/">OpenALの</a> SDL_backendを書くことほど良いものは思いつきませんでした。<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しかし、それは機能し、ツールをエンジンに追加し、アナトリーは必要に応じて、必要に応じて、そして必要な効果で全員にプレイさせました。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして今、ゲーム世界のあらゆる種類のレバー、トラップ、その他のトリガーを復活させる時が来ました。実際、ここでの開発はロジックに従って行われました。何かを実装する必要があります。これに必要なツール、それらの実装方法。スクリプトに使用される主な機能は、数値IDでオブジェクトへのポインターを取得することです。これにより、</font></font><a href="http://www.lua.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LUA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数はすべての必要なオブジェクトを処理できます。オブジェクトを動的に追加および削除し、IDでオブジェクトにすばやくアクセスするために、</font></font><a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B0%25D1%2581%25D0%25BD%25D0%25BE-%25D1%2587%25D1%2591%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">赤黒木</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用しました</font><font style="vertical-align: inherit;">。理論的に</font></font><a href="https://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、テーブル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B5%25D1%2588-%25D1%2582%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25B8%25D1%2586%25D0%25B0"><font style="vertical-align: inherit;">ハッシュを</font></a><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">が、個人的な好みはおそらくここでうまく</font><font style="vertical-align: inherit;">いき</font><font style="vertical-align: inherit;">ました。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その結果、スクリプトシステムにより、オブジェクトとアニメーションを使用したほぼすべての操作の実行、タスク（およびそれらに基づくタイマー）の作成、オブジェクトの選択、うなり声とボタンの押下、ドアの開閉などが可能になりました。</font></font><a href="http://www.tombraiderforums.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tombraiderforums.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コミュニティの人々の努力のおかげで、</font><font style="vertical-align: inherit;">あるレベルから別のレベルへの移動、必要なスクリプトとスクリーンセーバーのロード、光源に関する情報のロード、OS Lunuxでビルドするための頂点カラー調整とcmakeスクリプトに基づくシンプルなライトマップの実装を担当</font><font style="vertical-align: inherit;">する</font><a href="http://www.tombraiderforums.com/"><font style="vertical-align: inherit;">gameflow_manager</font></a><font style="vertical-align: inherit;">が追加されました。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5> あとがき </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、サードパーティのリソースを使用すると、テストが簡単になり、コンテンツの作成に負担をかける必要がありませんが、これによりエンジンのアーキテクチャに制限が課されるか、起動時にフォーマットを変換してひどい松葉杖を作らないようにする必要があることに注意してくださいゲームエンジン。そして、オリジナルの</font></font><a href="https://ru.wikipedia.org/wiki/Tomb_Raider_%2528%25D1%2581%25D0%25B5%25D1%2580%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%2529"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トゥームレイダー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には</font><font style="vertical-align: inherit;">多くの</font><font style="vertical-align: inherit;">松葉杖があり</font><font style="vertical-align: inherit;">ます。</font><a href="http://sourceforge.net/projects/opentomb/"><font style="vertical-align: inherit;">プロジェクトの</font></a></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今後の計画</font><font style="vertical-align: inherit;">は単純です</font><font style="vertical-align: inherit;">。1）既存のバグ、特に物理学のバグを修正し、キャラクターコントローラーの機能を拡張します。</font><font style="vertical-align: inherit;">2）マップ上の敵を「復活」させ、AIと武器を追加します。</font><font style="vertical-align: inherit;">3）メッシュを切り替えるための骨格モデルのアニメーション管理システムを拡張します。</font></font><a href="http://sourceforge.net/projects/opentomb/"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4）スクリプトシステムの機能を拡張し、キーレベルのスクリプトを作成して、通常のゲームを体験できるようにします。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5）ゲーム内のグラフィックスを改善し、効果を追加しますが、ここではより資格のあるOpenGLプログラマーの助けを期待しています。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、エンジンの例を含むいくつかのビデオ：</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.youtube.com/embed/Td7DEDrwxJ4%3Ffeature%3Doembed&amp;xid=17259,15700021,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700283&amp;usg=ALkJrhhWthmOCwDuVac5GBwyAfdm6h3y0w" frameborder="0" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.youtube.com/embed/9m102yLd83c%3Ffeature%3Doembed&amp;xid=17259,15700021,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700283&amp;usg=ALkJrhiNOpKjrLUZBt6tbvMXEam0kr8VUA" frameborder="0" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ご清聴ありがとうございました！ </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J239739/index.html">Cray Incが新世代のCray XC40スーパーコンピュータを発売</a></li>
<li><a href="../J239741/index.html">オンラインストアを開いてから閉じた方法</a></li>
<li><a href="../J239743/index.html">FuelWear：暖房付きのスマートな衣服は凍結しません</a></li>
<li><a href="../J239747/index.html">写真の中の1つのソフトウェアパッケージのライフストーリー</a></li>
<li><a href="../J239749/index.html">System-NSそのまま</a></li>
<li><a href="../J239753/index.html">最小の携帯電話ネットワークに関するFAQ</a></li>
<li><a href="../J239755/index.html">ロゼッタはチュリュモフ・ゲラシメンコ彗星に10キロメートルの距離で接近します</a></li>
<li><a href="../J239757/index.html">PureViewの作成：Zeissがカメラを作るのにどのように役立つか</a></li>
<li><a href="../J239759/index.html">次の木曜日、夜の9時：新しいiPad、Mac mini、ヨセミテ？</a></li>
<li><a href="../J23976/index.html">Rubyインライン</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
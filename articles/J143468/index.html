<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎁 🔎 🍒 自分で行うJavaプロファイリング 🔚 🔪 💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前回のAppication Developer Daysカンファレンスで、 Roman Elizarov （ elizarov ）がプロファイル方法、つまり Javaベースのアプリケーションのパフォーマンスを調査するために、特別なツールを使用せずに、ベンダースタイルまたはオープンソースであるかどうか...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>自分で行うJavaプロファイリング</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body"> 前回の<a href="http://addconf.ru/">Appication Developer Days</a>カンファレンスで、 <a href="http://elizarov.livejournal.com/">Roman Elizarov</a> （ <a href="https://habrahabr.ru/users/elizarov/" class="user_link">elizarov</a> ）がプロファイル方法、つまり  Javaベースのアプリケーションのパフォーマンスを調査するために、特別なツールを使用せずに、ベンダースタイルまたはオープンソースであるかどうかにかかわらず、JVMに組み込まれているあまり知られていない機能（スレッドダンプ、Javaエージェント、バイトコード操作）を使用し、プロファイリングを迅速かつ効率的に実装できることがわかりました戦闘システムでも常に実行できます。 <a href="http://vimeo.com/23593055">ビデオレポートを</a>以下に示します（ここでは不器用ですが、1280x720であり、すべてが完全に読み取り可能です）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://player.vimeo.com/video/23593055&amp;xid=17259,15700022,15700186,15700191,15700256,15700259,15700262,15700265,15700271,15700283&amp;usg=ALkJrhguSjqbd_Jkd5iDVvwcnmti-wehMQ" width="560" height="315" frameborder="0" title="DIY Javaプログラミング" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     しかし、ビデオとスライドから私が編集した、カットの下にあるイラスト入りの記事の転写の70Kテキストを見てみることもお勧めします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a> <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D1"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/29f/780/234/29f78023473adb608dad4954325aba25.jpg" width="512" height="384"></a> 本日、「Javaでプロファイリングを自分で行う」というレポートを作成します。 スライドは英語で、レポートはロシア語で作成します。 非常に多くのスライドがありますが、それほど時間はありません。そのため、いくつかの質問をすぐにスキップし、質問のために最後にもっと時間を残してみてください。 原則として、突然何かを尋ねたり明確にしたり、あるいは私をさえぎりたいと思っても恥ずかしがらないでください。 私が伝えたいことを単に伝えるよりも、あなたが興味を持っているものをより詳細に説明した方が良いでしょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     レポートは実際の経験に基づいており、10年以上にわたり、1秒あたり数百万の見積もり、何万人ものユーザーがオンラインで、大量のデータを扱う非常に負荷の高い複雑な金融アプリケーションを作成してきました。アプリケーションのプロファイリング。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D2"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/a17/5df/cbc/a175dfcbc8bfe149cac79e8ad4b6b50c.jpg" width="512" height="384"></a> アプリケーションのプロファイリングは最適化の必然的な要素であり、プロファイリングなしの最適化は不可能です。 プロファイルを作成し、ボトルネックを見つけ、最適化プロファイルを作成します。これは一定のサイクルです。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D3"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/92f/8d0/345/92f8d0345b2508ee83d3cc7e4acaae92.jpg" width="512" height="384"></a> レポートが「Do It Yourself Java Profiler」と呼ばれるのはなぜですか、なぜ自分で何かをするのですか？ プロファイリングを支援する既製のツールが多数あります-実際にはプロファイラーと同様のツールです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     しかし、実際には、まず、サードパーティのツールに問題がある可能性があります。 単に何らかの理由で-信頼性またはセキュリティは、ある種の生活環境でサードパーティのツールを実行できない場合があります。 そして残念なことに、テストプラットフォームだけでなく、ライブプラットフォームでもプロファイリングを行うことが必要になることがよくあります。常に負荷の高いプラットフォームでは、システムの同一のコピーを作成して同じ負荷で実行する機会とリソースがあります。 また、多くのボトルネックは、非常に特定の条件下でのみ、高負荷の下でのみ明らかにできます。 システムが正常に動作していないことがわかりますが、その理由はわかりません。 そのためにどのような負荷パターンを作成する必要がありますか。その結果、問題が明らかになります。したがって、多くの場合、稼働中のシステムのプロファイルを作成する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     金融アプリケーションを作成するとき、システムの信頼性を確保するタスクがまだあります。 そして、私たちは「銀行」をしません。そこでは、主なことはあなたのお金を失うことではありませんが、何時間も利用できないかもしれません。 システムの可用性が常に24×7であるオンライン取引用の仲介システムを作成します。これはその重要な品質の1つであり、決して低下することはありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして、業界全体が規制されており、実際のシステムでサードパーティ製品を使用できない場合があることも既に述べました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     しかし、ツールはしばしば不透明です。 はい、「何」を説明するドキュメントがありますが、彼がこれらの結果をどのように取得するかについては説明していません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして、ツールがオープンソースであっても、何も変更しません。このコードがたくさんあるので、それを理解するのに多くの時間を費やすことになります。 ツールを習得する必要があります。もちろん、自分で何かをすることの方がはるかに楽しいです。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D4"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/c95/656/7b5/c956567b5a83e5e2e34faa7c508be457.jpg" width="512" height="384"></a> 学習の問題は何ですか？ 当然、何らかのツールを頻繁に使用する場合は、学ぶ価値があります。 好きな開発環境で毎日プログラミングすれば、それを広く知っています。もちろん、この知識は100倍の成果をもたらします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     また、たとえば月に1回、パフォーマンスバグのプロファイリングを行う必要があるなど、月に1回何かを行う必要がある場合、適切なツールを学習することで成果を上げることはできません。 もちろん、ツールが何倍も速く問題を解決する状況がない場合。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     自分の手で何かをすることで、知識を再利用できます。 たとえば、プログラミング言語やツールの知識がある場合、新しいツールを学習するのではなく、既存のツールを学習することで、それらを深め、拡張し、明確にすることができます。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D5"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/3f2/059/180/3f205918026ac2b97b69bb6344eb9152.jpg" width="512" height="384"></a>  Javaについてレポートする理由 まあ、私たちの会社のプログラムはJavaだけでなく、TIOBEインデックスによる2001年の主要言語であり、エンタープライズアプリケーションに最適です。 また、この特定の講義では、Javaは仮想マシンで動作するマネージ言語であり、Javaでのプロファイリングは非常に簡単であるため、一般的に素晴らしいです。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D6"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/27f/657/9d1/27f6579d188d3972821560f508d6dac5.jpg" width="512" height="384"></a> まず、Javaでコードを作成して、多くのプロファイリングの問題を解決する方法について説明します。 使用できるJavaマシンの機能について説明し、バイトコード操作などの手法について説明します。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D7"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/f4c/f7c/992/f4cf7c992c8c10bcdd3bb7fcba4d9f68.jpg" width="512" height="384"></a> 今日は、CPUとメモリの両方のプロファイリングを見ていきます。 さまざまなテクニックについてお話します。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D8"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/80d/00d/9b2/80d00d9b21eb860c0c35e48c53469cd2.jpg" width="512" height="384"></a>  CPUプロファイリング。 最も簡単な方法は、単につかんでプログラムすることです。 プログラムのどこで、どれだけ、何で、時間がかかり、何回呼び出されるかを把握する必要がある場合、最も簡単な方法は次のとおりです。ツールは不要で、コードを数行書くだけです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Javaには、現在の時刻を返す「currentTimeMillis」という素晴らしい機能があります。 ある場所でそれを測定し、別の場所でそれを測定してから、これが行われた回数、合計時間、最小時間と最大時間などを計算できます。 最も簡単な方法。 最大限のシンプルさと初歩的なDIY。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     奇妙なことに、実際には、この方法はうまく機能し、多くの利点をもたらします-高速、便利、効率的だからです。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D9"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/01a/040/ef7/01a040ef7870c153dcb616a5dee8e863.jpg" width="512" height="384"></a> この方法はいつうまく機能しますか？ これはビジネスメソッドに最適です。ビジネスメソッドは大きく、あまり呼び出されないため、何かについて測定する必要があります。 さらに、このコードを書いたのは、あなたが書いたからです-それはあなたのアプリケーションの一部と機能の一部になります。 多かれ少なかれ、現代の大規模なアプリケーションには、管理インターフェイス、統計などが含まれています...そして一般に、アプリケーションのパフォーマンスは、アプリケーションの機能の一部として、アプリケーション自体が表示されることを頻繁に見たい3つのものの1つです 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この意味で、アプリケーション自体をプロファイルするようにプログラムすることは論理的なステップです。 アプリケーションの機能を強化すると、アプリケーションのプロファイリングがその機能の一部になります。 特に、この方法でエンドユーザーが呼び出すビジネスメソッドに定義を配置すると、この情報はエンドユーザーにとっても意味のあるものになります。 何回呼び出されたか、どのメソッドが呼び出されたか、どれだけ時間がかかったかなど。 この場合、このアプローチで収集する情報は完全に管理下にあります。 コール数、最小時間、最大時間、平均カウントを測定でき、ランタイムの分布のヒストグラムを作成し、中央値とパーセンタイルをカウントできます。 この例のように、コード内のさまざまな実行パスをさまざまな方法で追跡できます。この例では、話をしながら何とかしましたが、実行パスに応じて、クエリ結果がキャッシュに入れられた頻度と時間それには、要求がデータベースにクロールされる頻度と、その所要時間がかかりました。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D8"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/80d/00d/9b2/80d00d9b21eb860c0c35e48c53469cd2.jpg" width="512" height="384"></a> これは、このコードを自分で記述し、統計を収集し、アプリケーションに自分を埋め込む場合に可能です。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D10"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/e72/9dd/fa0/e729ddfa03596033f5ca8aee2e72f0ce.jpg" width="512" height="384"></a> さらに、あなたにとって、プロファイリング最適化サイクルに関与する人として、あなたはこの情報を使用します-あなたのアプリケーションで何が起こりますか？ この情報は常にアプリケーション内にあり、コードは稼働中のシステムで実行されます。 不幸な日がありました。システムがそのように機能しなかったので、ログの統計を調べたり、把握したりできます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     すばらしいテクニックです。サードパーティのツールはなく、Javaのほんの少しのコードです。 <hr> メソッドが短く、より頻繁に呼び出される場合はどうすればよいですか？ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     実際には、「currentTimeMillis」メソッドは高速ではなく、ミリ秒単位でしか測定されないため、このような直接メソッドはもはや適切ではありません。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D11"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/756/9fc/eaa/7569fceaa395e0fa58a9f0a7d2f7375d.jpg" width="512" height="384"></a> 呼び出し数のみを測定する必要がある場合は、Javaクラス「AtomicLong」を使用してこれをすばやく実行できます。 これにより、パフォーマンスに最小限の貢献をすることで、関心のあるメソッドの呼び出し回数を計算できます。 これは、アプリケーション自体の動作を大きく歪めることなく、1秒あたり数万件の呼び出しまで機能します。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D12"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/56e/894/5ee/56e8945ee56a552d6b74c381c737c5b5.jpg" width="512" height="384"></a> それでもランタイムを測定する必要がある場合はどうなりますか？ 短いメソッドの実行時間の測定は非常に複雑なトピックです。  Javaには「systemNanoTime」メソッドがあるという事実にもかかわらず、標準のメソッドでは解決できません。これらの問題は解決せず、それ自体で遅く、それで高速なものを測定することは困難です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     唯一の実際の解決策は、ネイティブコードを使用することです<a href="http://ru.wikipedia.org/wiki/rdtsc" title="rupedia：rdtsc">。x86</a>プロセッサには、プロセッサのクロックサイクル数のカウンタを返すような素晴らしい命令<a href="http://ru.wikipedia.org/wiki/rdtsc" title="rupedia：rdtsc">rdtsc</a>があります。 それへの直接アクセスはありません;「rdtsc」を呼び出すCの単一行メソッドを記述し、それをJavaコードにリンクしてJavaから呼び出すことができます。 この呼び出しには100サイクルかかります。1000サイクルまたは2サイクルかかるコードを測定する必要がある場合は、各マシンサイクルを最適化し、「プラスまたはマイナス」、「高速、低速」を理解する必要があります。 「仕事の仕方。 すべてのメジャーを最適化する必要がある場合、これは非常にまれなケースです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ほとんどの場合、短いコードの一部、より頻繁に呼び出されるコードに関しては、「サンプリング」と呼ばれる別のアプローチを使用します。 何回、何が呼び出されるかを正確に測定する代わりに、プログラムの実行を定期的に分析し、任意の時点で、たとえば1秒に1回、10秒に1回など、プログラムの実行場所を確認します <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D13"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/5bc/655/35c/5bc65535cdf4c0e565f2385b573700b0.jpg" width="512" height="384"></a> 実行が行われる場所と、プログラムが頻繁に見つかる場所を確認します。 プログラムにすべてを費やしている行、またはその時間の少なくとも90％、たとえばあるサイクルがあり、そこに深さのある行がある場合、おそらく実行を停止すると、この行でキャッチします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     プログラム内のこのような場所は「ホットスポット」と呼ばれます。 これは常に最適化の優れた候補です。 これはすごい-すべてのスレッドのダンプを取得するための「スレッドダンプ」と呼ばれる組み込み関数があります。  Windowsでは、コンソールでCTRL-Breakを押すことで行われます。Linuxおよび他のUnixでは、これは3番目のシグナル「kill -3」コマンドを送信することで行われます。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D14"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/da3/782/243/da378224378e3f0a286496eac1aec557.jpg" width="512" height="384"></a> この場合、Javaマシンはコンソール上のすべてのスレッドのステータスの詳細な説明を表示します。 そして、コードに本当にホットスポットがある場合、ほとんどの場合、そこにプログラムがあります。 したがって、コードのパフォーマンスに問題がある場合、プロファイラーを実行する必要はありません。何もする必要はありません。 速度が低下することを確認し、少なくとも1つのスレッドダンプを作成して確認します。 プログラムが常に費やしているホットスポットが1つある場合、スレッドダンプになり、サードパーティの追加ツールを使用せずに、この行がお気に入りの開発環境に表示されます。 このコードを見て、勉強し、最適化してください-頻繁に呼び出されるか、動作が遅いので、結果報告、最適化、またはさらなるプロファイリングがあります。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D15"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/bd1/4e4/738/bd14e4738074f93388e5183ca5b2a688.jpg" width="512" height="384"></a> また、最新のJavaマシンには素晴らしいユーティリティ「jstack」があり、プロセスIDを渡すことができ、出力でスレッドダンプを取得できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     複数のスレッドダンプを実行し、スレッドダンプを実行します。 最初のものがキャッチされない場合は、さらに2、3を見てください。 プログラムは、ホットスポットで時間の100％を費やすのではなく、50％を費やすかもしれません。 いくつかのスレッドダンプを作成したら、明らかにこれらのポイントのうち少なくとも1つをホットスポットからコードから取り出し、コードを見つけた場所を目で見てください。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D16"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/719/a1e/208/719a1e208585be6592f16cee6d87b025.jpg" width="512" height="384"></a> このアイデアはさらに発展させることができます。  Javaマシンを起動することにより、その出力をファイルにリダイレクトし、3秒ごとにスレッドダンプを行うスクリプトを実行できます。 これは、生きているシステムで非常に冷静に行うことができます。 スレッドダンプの収集自体は非常に高速な手順であるため、非常に多数のスレッドがある場合でも100ミリ秒かかります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     また、Javaで記述する場合、システムはリアルタイムではなく、ナノ秒は重要ではありません。これは、すでに定期的にガベージコレクションなどが発生しているためです。 つまり  100ミリ秒の災害に対して不必要に眠りに落ちるシステムを作成しません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして私たちの金融分野でさえ、私たちが書いているシステムのほとんど、人々のために書いています、人々は彼らと一緒に働いています、はい、毎秒何百万もの引用があります、はい、ロボットがありますこれらの引用は、プラスまたはマイナス100ミリ秒で目で気付かない人によって監視されます。  200ミリ秒の間ブレーキがかかっている場合、人は気づくでしょう。すでに人にとって顕著な遅延ですが、100ミリ秒はそうではありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、余分な100ミリ秒を心配することはできず、3秒ごとにスレッドダンプを行うことで、稼働中のシステムであっても完全に安全に実行できます。 同時に、スレッドダンプはJavaマシンの一部であり、十分にテストされています。Javaマシンでスレッドダンプを実行しようとすると、悪い結果が発生することは、これまで見たことがありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     つまり これは、生活システムと作業システムをプロファイリングするための完全に安全なツールです。 その後、スレッドダンプファイルを受け取ったら、それを目で見てみるか、少なくとも統計情報を分析し、少なくとも愚かなことを考慮して、どのメソッドが何回出現したか、スレッドの状態を確認するコードの簡単な部分を書くことができます。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D14"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/da3/782/243/da378224378e3f0a286496eac1aec557.jpg" width="512" height="384"></a> さらに、標準のプロファイリングツールがJavaマシン（「実行可能」）が表示するストリームの状態を実際に見る場合、実際には、プログラムはデータベースで多く動作し、多くの場合、外部...ネットワークを使用すると、コードはネットワーク経由でデータを受信することを期待できますが、Javaマシンはそれを「実行可能」と見なし、何も理解できません-あなたの本当の方法とネットワークからのデータを待っています。 一方、自分でスタックを分析すると、プログラムが何をするのか、これがデータベースへの呼び出しであること、スタック上のこのメソッドがデータベースにログインしていることを意味することを書くことができます。データベースに費やす時間の割合など。 この方法は実際にはCPUを消費しないことを知っているかもしれませんが、Javaマシンは「実行可能」であると考えています。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D17"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/d88/49c/639/d8849c639a93e88ee09a800052455bf2.jpg" width="512" height="384"></a> さらに、スレッドダンプはアプリケーションに統合できます。Javaには素晴らしい方法があります <pre>  Thread.getAllStackTraces 
</pre> これにより、スタックトレースに関する情報をプログラムで取得できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、プロファイリングをこのアプリケーションの機能部分として統合し、組み込みのプロファイリングを使用してアプリケーションを顧客に配布できます。 したがって、アプリケーションを改善するために分析できる情報の一定の流れが得られます。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D18"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/8f6/92e/585/8f692e585ac95fee4cad6c56212764ca.jpg" width="512" height="384"></a> しかし、問題があります。 実際、Javaマシンにスレッドダンプを作成するように要求すると、プロセスを停止してスタックを作成するだけでなく、Javaマシンが次の安全な場所で停止する必要があるというフラグが含まれます。  「安全な場所」とは、コードに従ってコンパイラが配置する特別な場所で、プログラムが特定の状態にある、レジスタがあることが明らかである、実行ポイントが明確であるなどです。 逆遷移やサイクルがない連続したコードを使用すると、「安全点」がまったくない場合があります。 さらに、メソッド呼び出しがインラインでホットスポットになることは問題ではなく、セーブポイントもありません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     したがって、スレッドダンプに行がある場合、これがコードのホットラインであることを意味するものではなく、単にホットポイントに最も近いセーブポイントであることを意味します。  「CTRL-BREAK」を押すと、Javaはすべてのスレッドを「最も近いセーブポイントで停止」するようにストリーミングし、Javaマシンは停止したときにのみ、実行中の状態を分析します。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D19"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/d97/76c/ea9/d9776cea98d888637925dcad65d0c5e7.jpg" width="512" height="384"></a> 次に、これがどのように行われたかのメモリのプロファイリングに移りましょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     まず、Javaマシンにはすぐに使えるすばらしい機能があります。 メモリーが何でいっぱいなのか、どのオブジェクトがどのくらいのメモリーを占有しているかのヒストグラムを表示する優れたjmapツールがあります。 これは、何が起こっているのか、メモリがどのように詰まっているのかを概観するのに最適なツールです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     繰り返しますが、プログラムのプロファイルを作成したことがない場合、ほとんどの場合、すぐに問題が見つかり、メモリ使用量をさらに最適化するための食料が手に入ります。 <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D20"><img alt="DIY Javaプログラミング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/fa9/9a4/d8c/fa99a4d8c20e73d8b7275511d62481d2.jpg" width="512" height="384"></a> 問題は、この方法で、現在使用されていないものも含めて、すべてのオブジェクトに関する情報をゴミ箱に入れることです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">したがって、jmapには特別なオプション「ライブ」があります。これは、ヒストグラムを作成する前にガベージコレクションを行い、使用済みのオブジェクトのみを残し、その後ヒストグラムを作成します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題は、すでにこのオプションでは、10ギガバイトのメモリで動作するシステムのガベージコレクションに数十から2秒かかるため、多くのギガバイトのメモリで動作する大規模なライブシステムのプロファイルを作成できないことです。システムは、システムが3秒以上応答しない有限の人々と連携して動作します。実際、人と一緒に働く生命システムを1秒以上停止することは不可能です。たとえ1秒でも人にはすでに気づいていますが、まだ災害ではありませんが、10秒間停止するツールを接続すると、災害になります。したがって、多くの場合、それらのオブジェクトのjmapのリビングシステムに満足する必要があり、一般に、それがゴミであるかどうかは関係ありません。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D21"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/e95/a4b/985/e95a4b985d28f09358d5045f8770d0f5.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javaマシンの追加オプションを知ることも役立ちます。たとえば、スレッドダンプ→「PrintClassHistogram」を実行すると、Javaマシンがクラスヒストグラムを印刷するように要求される場合があります。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javaマシンにメモリを使用して状態をディスクに書き込むように依頼できます。これは非常に便利です。通常、人々は何らかの理由でメモリ消費が終了したときにのみメモリ消費の最適化を開始します。すべてが問題ない場合、プロファイリングに従事する人はいませんが、プログラムがメモリ不足になるとクラッシュし、そのように最適化する方法を考え始めます。したがって、常にこのオプションを有効にしておくと便利です。その後、悪い場合には、Javaマシンがバイナリダンプを書き込みます。バイナリダンプは、ライブシステム上ではなく、ツールを使用して後で分析できます。同時に、このダンプは、「-dump」オプションを使用して、同じjmapでJavaマシンからいつでも取得できますが、これもJavaマシンを長時間停止するため、ライブシステムにはほとんどアクセスできません。する。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聴衆からのコメント：この「HeapDumpOutOfMemory」は、メモリがすでに不足している場合に最適化されるというプロパティがあります。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     はい、もちろんです。<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「HeapDumpOutOfMemory」は非常に便利なオプションであり、「-XX」ですが、これらのオプションを恐れてはいけません。ただし、この「XX」はメガスペシャリティを強調しますが、これらは実験的なオプションではなく、Javaマシンの通常の本番オプションであり、安定性、信頼性、ライブの実際のシステムで使用できます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらは実験的なオプションではありません！ Javaマシンには明確な区分がありますが、実験的および非実験的オプションへの区分はXの数に依存しません。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聴衆からのコメント：ダンプはこのオプションを延期しない場合があります... </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まあ、Javaマシンにもバグがあります、それはすべて依存しています...メモリが不足する理由はさまざまです。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D22"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/704/abe/23c/704abe23cb0a087bc4b93775b877312c.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残りの時間、つまりメモリ割り当てのプロファイルについて、非常に重要な点について説明します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それは一つのことです-メモリが何であるか、あなたがそれを使用する方法。コードのどこかに一時メモリの過剰な割り当てがある場合、つまりあなたはそれを分離します...それで何かをします、このメソッドはそれを忘れて、ガベージに入り、ガベージコレクタがそれを拾いますそして、何度も何度もそれを行うと、プログラムはこれで動作するよりも遅くなります...しかし、Javaメモリマシンの割り当て操作は素晴らしく速く、速く動作するため、CPUプロファイラでこのコードの場所は見つかりませんJavaでは、メモリの割り当ては単一のポインタをインクリメントするのに簡単なので、非管理言語であるC / C ++よりも。</font></font>それだけです<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらはいくつかの組み立て手順であり、すべてが非常に迅速に行われます。すでにゼロにリセットされており、すべてがすでに割り当てられ準備されています。コードのホットスポットを分析する場合、今回は見つかりません。スレッドダンプやプロファイラーで、ホットスポットであることは決して表示されません。それはすべてあなたと一緒ですが、あなたの時間を使い果たしてしまいます、なぜあなたのアプリケーションですか？そのため、ガベージコレクタはこのガベージを収集するために時間を費やします。したがって、アプリケーションがガベージコレクションに費やす時間の割合を調べてください。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは便利なオプション「-verbose：gc」、「+ PrintGC」、「+ PrintGCDetails」であり、アプリケーションがガベージコレクションに費やす時間を把握できます。時間のかなりの部分がガベージコレクションに費やされていることがわかった場合、プログラムのどこかに多くのメモリを割り当てると、この場所が見つからないため、誰がメモリを割り当てるかを探す必要があります。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D23"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/3e0/56a/619/3e056a619ae459b7f03d7f7cea15d0f4.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検索方法Javaマシンには、「-Xaprof」キーというメソッドが組み込まれています。残念ながら、プロセスの最後にのみ、いわゆる割り当てプロファイルが表示されます。これは、メモリの内容についてではなく、割り当てられたオブジェクトの統計→どのオブジェクトとどのくらいの頻度で割り当てられたかを示します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これが本当に頻繁に発生する場合は、非常に頻繁に目立つ一時的なクラスがどこかにあることがわかります。すぐにaprofを作成してください-すぐに問題が見つかるかもしれません。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D24"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/676/9c4/a45/6769c4a45a348c9ed23796da3e977ec9.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しかし、事実ではありません。多数の文字配列、一部の文字列、または何かの選択が表示されることが判明する場合がありますが、どこにあるかは明確ではありません。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">疑いがあるかもしれないことは明らかです-どこで。おそらく最近の変更が行われる可能性があります。最終的に、atomis longでコードを変更する同じ手法を使用して、メモリが頻繁に割り当てられる場所に追加し、この場所で割り当てが行われる回数をカウントします-統計を見て、疑わしい場所を自分で開始して見つけることができます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しかし、これがどこで起こっているのかわからない場合はどうでしょうか？さて、メモリが割り当てられているすべての場所で、どこかで統計のコレクションを追加する必要があります。アスペクト指向プログラミング、またはバイトコード操作の直接使用は、この種のタスクに最適です。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残りの時間は、バイトコード操作手法に焦点を当てます。これは、「今、この場所で、これがすべての場所で発生する回数を計算したい」などの問題を解決するのにちょうどいい方法です。何らかの理由で多くのint配列を割り当てるまさにその場所を見つけるためのコード。」</font></font>つまり<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらの多くが際立っていることがわかりますが、私はどこで見つけたいだけです。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D25"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/b41/fa3/b86/b41fa3b8646d7f8435947ca04dc003f7.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイトコード操作を使用すると、これらの問題を解決できるだけでなく、コンパイル後に、機能しないコードに変更を加えることができます。したがって、ビジネスロジックからプロファイリングを分解するこの方法。冒頭で、プロファイリングが機能の論理的な部分であることが多いと言った場合、それを必要としない場合、問題を見つけて解決する必要があり、何も残さない場合があります。この場合、バイトコード操作などの素晴らしいテクニックが適しています。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、これは、コードレイアウトのポストコンパイルとコードの両方で実行できます。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D26"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/e43/a72/04b/e43a7204b2b472079649e72a09472db0.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私が知っている最善の方法は、ASMライブラリObjectWebを使用することです。これは、バイトコードの操作が非常に簡単なオープンソースのライブラリであり、非常に高速です。アプリケーションのロード時間を遅くすることなく、コードをその場で操作できます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASMは非常に単純です。彼は.classファイルを読み取り、Visitorテンプレートを使用してバイトを「メソッドを見る」、「このクラスにそのようなフィールドを持つフィールドを見る」などの一連の呼び出しに変換するclass-readerというクラスを持っています。さらに。メソッドを見ると、MethodVisitorを使用して、そこにどんなバイトコードがあるかを報告します。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、反対に、クラスをバイトアレイに変換する「ClassWriter」などがありますが、これはJavaマシンに必要です。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D27"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/feb/6f0/2d2/feb6f02d28e6102aead7e0f124d704b4.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえば、ASMの助けを借りて、配列のすべての割り当てを追跡するには...一般的に、これは基本的に行われます。いくつかのクラスを実行するだけです。アダプタクラスを定義する必要があります。アダプタクラスは、このメソッドで何が行われているのかを知るために、メソッドが表示され、オーバーラップし、独自のビジターメソッドを返すと通知されます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、メソッド内で、配列割り当てのバイトコード（「NEWARRAY」）を持つ整数命令があることを彼に伝えると、その瞬間、彼は自分のバイトコードを上流に挿入する機会があります。そして、配列が割り当てられているすべての場所を追跡し、対応するバイトコードを変更しました。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D28"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/954/fa9/c9e/954fa9c9e37d7e8f21f175f660eedee3.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに-これらの変更をオンザフライで行いたい場合の対処方法。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイルされたクラスのセットがある場合、それは簡単です→このツールを処理したので、それだけです。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オンザフライでこれを行う必要がある場合は、Javaマシンに素晴らしいオプション-javaagentがあります。マニフェストでオプション「Premain-Class」を指定する特別なjarファイルを作成し、そこにクラスの名前を指定します。次に...特定のテンプレートによる「premain」メソッド。したがって、mainメソッドを使用してメインコードを実行する前であっても、制御を取得し、インターフェイスインスツルメンテーションへのポインタを取得します。このインターフェースは素晴らしいもので、Javaマシンのクラスをオンザフライで変更できます。これにより、Javaマシンがクラスをロードするたびに呼び出す独自のクラスファイルトランスフォーマーを配置できます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、クラスを置き換えることができます。</font></font>つまり<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際に存在するクラスだけでなく、同じObjectWebASMを使用して、何かを分析し、変更し、それらをオンザフライで置き換える...選択したオブジェクトのサイズを確認できます。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の問題を解決する必要がある場合に、ひざのプロファイリングを行うためのすばらしいツール。</font></font><a href="http://lib.custis.ru/index.php%3Ftitle%3D%25D0%25A4%25D0%25B0%25D0%25B9%25D0%25BB:DIY_Java_Profiling_(%25D0%25A0%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD_%25D0%2595%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B2,_ADD-2011).pdf%26amp%3Bpage%3D29"><img alt="DIY Javaプロファイリング（Roman Elizarov、ADD-2011）.pdf" src="https://habrastorage.org/getpro/habr/post_images/162/46d/78e/16246d78e1d7345ff8512147f74bdac8.jpg" width="512" height="384"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論として、プロファイリングの問題を解決したり、ツールを所有したりするのに、バイトコード、Javaマシンのオプション、標準のJavaライブラリ（同じjavalangツール）を知っていれば十分です。これにより、発生する膨大な数の特定の問題を解決できます。当社では10年間、特定のプロファイラーでは解決できない特定の問題ではない問題を解決するいくつかの自社開発ツールを開発してきました。重量がありますが、スレッドダンプを分析して統計情報を提供するシンプルなツールであるという事実から始まりますが、それでもツールとは言えないシンプルなユーティリティです。統計を収集し、美しい方法で表示するいくつかのページの古典。非常に有用プロファイラをプロダクションシステムに接続する必要はなく、スレッドダンプを接続するだけです。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、私たち自身のメモリプロファイリングツールがあるという事実で終わりますが、これもまた小さいですが、どこに何が割り当てられているかを追跡するツールと呼ぶことは難しく、プログラムをほとんど減速させることなくこれを行います。さらに、商用プロファイラとオープンプロファイラの両方で、メモリ割り当てを追跡する方法も知っていますが、より複雑で普遍的な問題を解決しようとしています。彼らは、完全なスタックトレースでメモリ割り当てが発生する場所を見つけようとしています。これは長い時間で、かなり遅くなります。同じサンプリングを使用しないでください。常に収集されるわけではないため、すべての統計を受信するわけではありません。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある種の妥協を行います。これは、対象分野では必要ありません。システムのパフォーマンスを分析するときに解決したいタスクがいくつかあります。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 次に、質問に回答します（30:06からの質問への回答）。 </font></font><hr>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また</font></font><a href="http://lib.custis.ru/Stenograms"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、アプリケーション開発者の日からの他のトランスクリプトを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">視聴したり</font><font style="vertical-align: inherit;">、トレント（</font></font><a href="http://rutracker.org/forum/viewtopic.php%3Ft%3D4040013"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2011]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="http://rutracker.org/forum/viewtopic.php%3Ft%3D4039986"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2010]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を使用した</font><font style="vertical-align: inherit;">過去の会議からすべてのビデオをダウンロードし</font><font style="vertical-align: inherit;">たり、</font></font><a href="http://ftp.linux.kiev.ua/pub/conference/peers/addconf/2011/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http経由でフォルダー全体を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードしたりでき</font><a href="http://ftp.linux.kiev.ua/pub/conference/peers/addconf/2011/"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><hr> <s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免責事項：私はレポートの著者ではありません。</font><font style="vertical-align: inherit;">私はこの会議のPC議長であり、ビデオ編集者であり、トランスクリプトです。</font><font style="vertical-align: inherit;">著者にはhabraaccountがありません。たぶん、あなたの質問にコメントするために彼を招待することができます。</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レポートの作成者である</font></font><a href="https://habrahabr.ru/users/elizarov/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エリザロフは、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コメントを求められ、質問に答えます。</font><font style="vertical-align: inherit;">また</font></font><a href="http://elizarov.livejournal.com/17124.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、著者の日記での議論</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ところで、</font></font><a href="https://habrahabr.ru/users/elizarov/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elizarov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会議で講演、</font></font><a href="http://addconf.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADD-2012</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のレポートで「</font></font><a href="http://addconf.ru/event.sdf/ru/add_3/authors/RomanElizarov/writing_fastest_hash_for_data_cashing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データをキャッシュするための最速のハッシュを書きます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。」</font></font></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J143462/index.html">マイクロソフトは安価なジェスチャー認識システムに取り組んでいます（UPD：+ビデオ）</a></li>
<li><a href="../J143463/index.html">なぜ原子力に代わるものがないのか</a></li>
<li><a href="../J143464/index.html">ADD-3のJelastic</a></li>
<li><a href="../J143465/index.html">カリー化と部分関数の使用</a></li>
<li><a href="../J143466/index.html">Rovioは1億米ドルを獲得し、IPOを計画</a></li>
<li><a href="../J143470/index.html">IOS開発：アプリケーションの60％（またはそれ以上）がコストを上回ることはありません</a></li>
<li><a href="../J143472/index.html">長い間同情するよりも迅速に支援する方が良い。</a></li>
<li><a href="../J143473/index.html">Gmailのバックアップ</a></li>
<li><a href="../J143474/index.html">Bloody Gabne vs. Legion of Anonymous</a></li>
<li><a href="../J143475/index.html">サムスンとクアルコムはワイヤレス充電器の開発を強化しました</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🔬 🎗️ 🛥️ gccのavrのC ++サポート 🕸️ 🖕🏼 🤟🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="avrgccコンパイラーはC ++をサポートしますが、その配信には、標準ライブラリーまたはABI：ユーティリティー関数の実装は含まれていません。ユーティリティー関数の呼び出しは、コンパイラー自体によって挿入されます。 その結果、人々は自分で必要な部分を理解しようとしますが、あまりうまくいかないことが...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>gccのavrのC ++サポート</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body">  avrgccコンパイラーはC ++をサポートしますが、その配信には、標準ライブラリーまたはABI：ユーティリティー関数の実装は含まれていません。ユーティリティー関数の呼び出しは、コンパイラー自体によって挿入されます。 その結果、人々は自分で必要な部分を理解しようとしますが、あまりうまくいかないことがよくあります。 たとえば、空の関数__cxa_pure_virtual（void）{}を定義することで自分自身を撃ち殺すか、__ cxa_guard_acquire、__ cxa_guard_release、__ cxa_guard_abortのスタブを作成して熊手を囲むことをお勧めします。 この記事では、幸福のために何が欠けているか、どこで手に入れるか、どのように書くかを理解することを提案します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     マイクロコントローラにはC ++は必要ないと考える人がかなりいることは知っています。 コメントを書く前に、記事の最後のセクションを読むようにお願いします。 <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Arduino所有者向けの機能 </h1>  Arduinoは、限定的なC ++サポートを提供します。 しかし、私が理解しているように、arduino開発者はC ++を好まないため、労働者の要求に応じて、最初に捕まった松葉杖が対応するモジュールに挿入されました。 それは、 <a href="http://www.avrfreaks.net/index.php%3Fname%3DPNphpBB2%26file%3Dviewtopic%26t%3D59453">avrfreaks</a>で説明された松葉杖であることが判明し、トピックへのコメントで指定された修正はありませ<a href="http://www.avrfreaks.net/index.php%3Fname%3DPNphpBB2%26file%3Dviewtopic%26t%3D59453">んでした</a> 。 したがって、最初にそれを取り除く必要があります。 ファイルを削除する <ul><li> ハードウェア/ arduino /コア/ arduino / new.h </li><li> ハードウェア/ arduino /コア/ arduino / new.cpp </li></ul> または、 <a href="https://github.com/kibergus/arduino/blob/master/">すでに実行されて</a>いる<a href="https://github.com/kibergus/arduino/blob/master/">バージョンを</a>使用します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 純粋に仮想およびリモートの方法 </h1> 仮想メソッドのメカニズムは、通常vtableを介して実装されます。 これは規格によって規制されていませんが、すべてのコンパイラで使用されています。 メソッドを純粋に仮想的に宣言する場合、つまり実装を持たない場合でも、vtableにはこのメソッドへのポインタ用のスペースがあります。 これは、子クラスが対応する実装へのポインターを同じオフセットに配置するために必要です。 欠落しているメソッドへのポインターの代わりに、コンパイラーはvtableのスタブ関数__cxa_pure_virtualへのポインターを書き込みます。 誰かが純粋に仮想関数を呼び出すことに成功した場合、コントロールはスタブに移動し、ランダムなメモリを実行しようとする代わりにプログラムを停止します。 この保護はほとんど無料であることに注意してください。単一の呼び出しを含む__cxa_pure_virtual実装は、フラッシュを6バイトしか使用しません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     合理的な疑問が生じますが、抽象クラスのオブジェクトを作成することが不可能な場合、どうすれば純粋に仮想関数を呼び出すことができますか？ 作成することはできませんが、奇妙なコードを記述した場合は呼び出すことができます。 <pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> B { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span>: B() { //   C   ,   vtable  B //        ,  //        virt(),    non_virtual(); } <span class="hljs-type"><span class="hljs-type">void</span></span> non_virtual() { //       ,     //      ,   //    B virt(); // pure virtual <span class="hljs-keyword"><span class="hljs-keyword">method</span></span> <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> // terminate <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> <span class="hljs-keyword"><span class="hljs-keyword">without</span></span> an active <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span> //   (core dumped) } virtual <span class="hljs-type"><span class="hljs-type">void</span></span> virt() = <span class="hljs-number"><span class="hljs-number">0</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> C : <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> B{ <span class="hljs-built_in"><span class="hljs-built_in">public</span></span>: virtual <span class="hljs-type"><span class="hljs-type">void</span></span> virt() {} }; <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">int</span></span> argc, <span class="hljs-type"><span class="hljs-type">char</span></span>** argv) { C c; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> このようなエラーを回避するには、初期化されるまでオブジェクトのメソッドを呼び出さないようにする必要があります。 つまり、コンストラクターで複雑な作業を行う必要はありません。 そして、コンパイラーがアプリケーションをビルドするように、次の関数の実装を追加します。 <pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">void</span></span> __cxa_pure_virtual(<span class="hljs-type"><span class="hljs-type">void</span></span>) { // We might want <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> <span class="hljs-keyword"><span class="hljs-keyword">diagnostics</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> uart <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> std::terminate(); } <span class="hljs-type"><span class="hljs-type">void</span></span> __cxa_deleted_virtual(<span class="hljs-type"><span class="hljs-type">void</span></span>) { // We might want <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> <span class="hljs-keyword"><span class="hljs-keyword">diagnostics</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> uart <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> std::terminate(); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 標準ライブラリから終了するstd ::の実装も必要になります。  2バイトのRAMと14バイトのフラッシュを本当に保存する必要がある場合は、abort（）を直接呼び出すことができますが、後でstd :: terminateが望ましい理由を説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 静的変数 </h1> 関数内で変数を宣言できます。これにより、実際にグローバル変数が関数内でのみ表示されます。 <pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> start</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cnt = start; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ++cnt; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>  Cでは、.dataセクションに初期値をすぐに配置するために静的変数を定数で初期化する必要があるため、このコードはコンパイルされません。  C ++ではこれは許可されていましたが、2つのスレッドが同時に変数を初期化しようとした場合に何が起こるかを指定していませんでした。 この場合、多くのコンパイラがロックを追加してスレッドセーフを提供することを選択しており、C ++ 11ではこの動作が標準の一部になりました。 したがって、静的変数gccの非定数値による初期化は、次のコードに展開されます：gcc / cp / decl.c <pre> <code class="hljs pgsql">static &lt;<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>&gt; guard; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!guard.first_byte) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (__cxa_guard_acquire (&amp;guard)) { <span class="hljs-type"><span class="hljs-type">bool</span></span> flag = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; try { // <span class="hljs-keyword"><span class="hljs-keyword">Do</span></span> initialization. flag = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; __cxa_guard_release (&amp;guard); // Register variable <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> destruction at <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> program. } catch { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!flag) __cxa_guard_abort (&amp;guard); } } }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> ここで、guardはフラグとミューテックスを保持するのに十分な大きさの整数型です。  gccのソースを見ると、その最適化はARMアーキテクチャのみを悩ませていることがわかりました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      gcc / config / arm / arm.c <pre> <code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">/* The generic C++ ABI says 64-bit (long long). The EABI says 32-bit. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> tree </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arm_cxx_guard_type</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TARGET_AAPCS_BASED ? integer_type_node : long_long_integer_type_node; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> それ以外の場合はすべて、デフォルトのタイプlong_long_integer_type_nodeが使用されます。  avrでは、-mint8オプションに応じて、64ビットまたは32ビットになります。 フラグが置かれている16番のguard.first_byteで十分です。コンパイラーは、最下位アドレス*（reinterpret_cast &lt;char *&gt;（g））を持つバイトとして認識します。 例外は、最初のバイトの1ビットのみが使用されるARMプラットフォームです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> どうですか？ </h3> スレッドセーフな静的変数が必要ない場合は、-fno-threadsafe-staticsオプションで無効にします。複雑なロックの代わりにコンパイラーが単純なフラグチェックを設定します。 この場合、__cxa_guard_ *を実装する必要はありません。 しかし、それらを提供する場合（arduinoで行われるように）、変数が通常のコードと割り込みから同時に初期化される場合、実装<b>は</b>正しい動作<b>を</b>保証する必要があります。 つまり、__ cxa_guard_acquireは割り込みをブロックし、__ cxa_guard_releaseと__cxa_guard_abortはそれらを以前の状態に戻す必要があります。  RTOSの場合、おそらく割り込みの正確さを犠牲にして2つのスレッドの正確さを残して準備ができているでしょう。正しい実装は次のように動作するはずです。 <pre> <code class="hljs pgsql">namespace { // guard <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> an <span class="hljs-type"><span class="hljs-type">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> big enough <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> hold flag <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> a mutex. // <span class="hljs-keyword"><span class="hljs-keyword">By</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> gcc uses long long <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> avr ABI does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> change it // So we have <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> bits available. Actually, we need <span class="hljs-number"><span class="hljs-number">16.</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span>&amp; flag_part(__guard *g) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *(reinterpret_cast&lt;<span class="hljs-type"><span class="hljs-type">char</span></span>*&gt;(g)); } <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> uint8_t&amp; sreg_part(__guard *g) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *(reinterpret_cast&lt;uint8_t*&gt;(g) + sizeof(<span class="hljs-type"><span class="hljs-type">char</span></span>)); } } <span class="hljs-type"><span class="hljs-type">int</span></span> __cxa_guard_acquire(__guard *g) { uint8_t oldSREG = SREG; cli(); // Initialization <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> static variable has <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> be done <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> blocked interrupts // because <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> this <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">called</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> interrupt <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> sees that somebody // <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> already doing initialization it MUST wait <span class="hljs-keyword"><span class="hljs-keyword">until</span></span> initializations // <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> complete. That<span class="hljs-string"><span class="hljs-string">'s impossible. // If you don'</span></span>t want this overhead compile <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> -fno-threadsafe-statics <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flag_part(g)) { SREG = oldSREG; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { sreg_part(g) = oldSREG; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-type"><span class="hljs-type">void</span></span> __cxa_guard_release (__guard *g) { flag_part(g) = <span class="hljs-number"><span class="hljs-number">1</span></span>; SREG = sreg_part(g); } <span class="hljs-type"><span class="hljs-type">void</span></span> __cxa_guard_abort (__guard *g) { SREG = sreg_part(g); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> いくら </h3> 静的変数を使用しない場合、または定数値を割り当てる場合は、無料です。  -fno-threadsafe-staticsフラグを指定する場合、フラグに8バイトのRAMを、各変数に12バイトのフラッシュを支払います。 スレッドセーフな初期化を使用する場合は、各変数にさらに38バイト、プログラム全体にさらに44バイトを使用します。 さらに、静的変数の初期化中に割り込みがブロックされます。 しかし、あなたはデザイナーで難しい仕事をしていませんか？ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     選択はあなた次第ですが、どんな場合でも、ライブラリが__cxa_guard_ *関数を提供する場合、それらは正しく実装されるべきであり、どこでも提供されるプラグではありません。 一般に、静的変数を使用しないようにすることをお勧めします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 入手先 </h3>  <a href="">abi.h</a>および<a href="">abi.cpp</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 演算子newおよび演算子delete </h1>  new演算子とdelete演算子に関しては、マイクロコントローラーのメモリは非常に少ないと誰かが言うでしょうから、動的メモリーは許されない贅沢です。 これらの人々は、newおよびdeleteが動的メモリ管理だけではないことを知りません。 プログラマーによって割り当てられたバッファーにオブジェクトを配置する新しい配置もあります。 それなしでは、メッセージキューが実装されるファームウェアの開発者に愛されているリングバッファを書き込むことはできません。 さて、動的メモリが不要であると確信しているのなら、なぜmallocとfreeの実装を書いたのですか？ そのため、それらなしでは実行できないタスクがあります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 新しい演算子と削除演算子の種類 </h3> まず、単一オブジェクトにメモリを割り当てる演算子newと、配列にメモリを割り当てる演算子new []があります。 技術的には、新しい[]が配列のサイズを記憶して、各要素が削除されるときにデストラクタを呼び出すという点で異なります。 したがって、メモリを解放する場合は、ペア演算子deleteまたはoperator delete []を使用することが重要です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     第二に、これらの各演算子は、C ++の関数と同様にオーバーロードできます。 また、この規格では3つのオプションが定義されています。 <ol><li><pre> <code class="hljs lisp">void* operator new(<span class="hljs-name"><span class="hljs-name">std</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">:size_t</span></span> numBytes) throw(<span class="hljs-name"><span class="hljs-name">std</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">:bad_alloc</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> サイズnumBytesのメモリブロックを割り当てます。 エラーの場合、例外std :: bad_allocをスローします </li><li><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">operator</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numBytes, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">nothrow_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; )</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> サイズnumBytesのメモリブロックを割り当てます。 エラーの場合、nullptrを返します </li><li><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">operator</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* ptr)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ptr; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 新しい配置、彼らが言った場所にオブジェクトを配置します。 コンテナを実装するときに使用されます </li></ol>  arduinoでは、不明な理由で、void * operator new（std :: size_t numBytes）throw（std :: bad_alloc）のみが実装され、エラーの場合は0が返され、誰も戻り値をチェックしないため、プログラムの未定義の動作につながります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     演算子削除では、物事は少し複雑です。  void *演算子削除（std :: size_t numBytes）とvoid *演算子削除[]（std :: size_t numBytes）があります。 他のパラメーターに対してオーバーロードできますが、言語には対応する構文がないため、これらのオーバーロードを呼び出すことはできません。 コンパイラが削除演算子のオーバーロードバージョンを呼び出すケースは1つだけです。 動的メモリにオブジェクトを作成し、new演算子がメモリを正常に割り当て、コンストラクタがそれを埋め始め、例外をスローしたと想像してください。 コードはまだオブジェクトへのポインタを自由に受け取っていないため、失敗したオブジェクトのメモリをシステムに返すことはできません。 したがって、コンパイラーは、deleteを呼び出すことによってこれを行うことを強制されます。 しかし、新しい配置を使用してメモリが「割り当てられた」場合はどうなりますか？ この場合、通常の削除を呼び出すことはできません。したがって、コンストラクターが例外をスローした場合、コンパイラーは、newが呼び出されたのと同じパラメーターで削除のオーバーロードバージョンを呼び出します。 そのため、標準ライブラリは、演算子削除の3つのバージョンと演算子削除の3つのバージョンを定義します[]。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  bad_allocの処理 </h3> 前述のとおり、エラーが発生した場合に例外をスローするには、newの最も一般的に使用されるバージョンが必要です。 ただし、gccはavrの例外をサポートしていません。例外をスローまたはキャッチできません。 しかし、キャッチできない場合、プログラムには単一のtryセクションがありません。つまり、例外がスローされた場合、std :: terminateが呼び出されます。 さらに、C ++標準では、この場合（15.5.1を参照）、スタックを巻き戻さないことが許可されています。 したがって、newはstd ::を直接呼び出すことができ、これは標準に準拠します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     標準ライブラリがファームウェアを取得して完了することを恐れてはいけません！  bad_allocが発生した場合、どれくらいの頻度で修正できますか？ 通常は何もありません。 ファームウェアは正しい動作を続けることができず、エラーが発生したときに完了することを神に感謝します。 ただし、状況を修正する方法がわかっている場合は、newhrowバージョンのnew演算子を使用できます。 これを安全なmallocとして見て、返される値をチェックしない場合に正しく動作するようにしてください。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 入手先 </h3>  UClibc ++には、newおよびdeleteの完全で正しい実装があります。  True、std :: terminateの代わりに、そこでabort（）が呼び出されます。 そこで、 <a href="https://github.com/kibergus/StandardCplusplus">改訂</a>版を作成しました。 同時に、初期化リストstd :: moveおよびstd :: forvardが追加されました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  std ::終了vs中止（） </h1>  avr-libcの<a href="http://www.nongnu.org/avr-libc/user-manual/group__avr__stdlib.html">ドキュメント</a>によると、abort（）関数はすべての割り込みをブロックし、その後、無限ループに陥ります。 これは私が望むものではありません。  2つの理由があります。 まず、デバイスを<b>危険な状態にし</b>ます。 システムが発熱体を制御し、プログラムがオンになった瞬間にサイクルをたどることを想像してください。 エラーが発生した場合、ボードのすべての出力を0に設定することで安全な状態に切り替えたいと思っています。次に、すべてが悪いことをすでに知っているので、ウォッチドッグが動作してシステムを再起動するまで待つ必要はありません。 これはすぐに実行できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ファームウェアがstd :: terminateで終了した場合、独自のハンドラーをインストールし、そこで必要なすべてのアクションを実行できます。 私は中止を無効にすることはできません：unixでこれのために提供されたメカニズムはavrでは動作しません。 したがって、std :: terminate実装が占有する2バイトのRAMと14バイトのフラッシュを使用した方がよいでしょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 例外 </h1> 例外-直接使用するコードだけでなく、例外が飛ぶことができるコードでも、多くを払わなければならないC ++の部分：コンパイラはスタック上に作成された各変数のデストラクタを登録することを強制されます。 さらに、例外のために、RTTIと小さなバックアップメモリ​​バッファが必要です。そのため、メモリが不足したときにstd :: bad_allocを作成します。 さらに、これはC ++の唯一の部分であり、ランタイムを計算することは不可能ではありませんが、問題があります。 私が理解している限りでは、AVRにない例外サポート機能を作成するのに十分理解している人なら誰でもこれを行うことを望んでいません。 さらに多くの重要なことがあります。 したがって、gccのAVRの例外はサポートされておらず、サポートされない可能性があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  STL </h1> マイクロコントローラーのSTLが悪いという多くのレポートを見てきました。それはコードを膨張させ、複雑なものを単純にし、使用するように促します。 同時に、STLには、 <a href="http://www.cplusplus.com/reference/algorithm/sort/">クイックソート</a>などのプリミティブもあり<a href="http://www.cplusplus.com/reference/algorithm/sort/">ます</a> 。これは、qsortよりも高速でコンパクトなプリミティブ、またはminとmaxの<a href="http://www.cplusplus.com/reference/algorithm/binary_search/">バイナリ検索の</a>安全なバージョンです。 他のプログラマーよりも効率的に古典的なアルゴリズムを記述する神聖な方法を本当に知っていますか？ そして、あなたが書く必要があるのと同じくらいのスペースを占める既製のテスト済みアルゴリズムを使用しないのはなぜですか。 使用しないSTLの部分については、支払わない。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 入手先 </h3>  <a href="https://github.com/kibergus/StandardCplusplus">uClibc ++を</a>使用し<a href="https://github.com/kibergus/StandardCplusplus">ます</a> 。 このライブラリには1つの機能があります。std:: mapおよびstd :: setはベクターの上に実装されるため、挿入および削除時に反復子が無効になります。 さらに、それらは異なる複雑さを持っています。 ドキュメンテーションで、著者は彼がこれをした理由を詳細に説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  C ++とは何ですか？ </h1> これは別の記事のトピックであり、興味があれば書きたいと思います。 つまり、C ++を<b>正しく</b>使用すると、Cソリューションと同じくらい効率的なソリューションを作成できますが、同時にコンパイラーチェックにより読み取りやすく安全なコードを取得できます。 また、テンプレートメカニズムを使用すると、一般化されたアルゴリズムの効果的な実装を記述できます。これは、Cでは問題があります。私は慣れています。 いずれにせよ、このトピックについて今すぐ議論することは控えるようお願いします。 </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J149676/index.html">Debianコミュニティは19歳になります</a></li>
<li><a href="../J149679/index.html">英国当局はエクアドル大使館を襲撃すると脅迫</a></li>
<li><a href="../J14968/index.html">バイトパワー！</a></li>
<li><a href="../J149680/index.html">Androidサブスクリプションマネージャーとニュースアグリゲーター</a></li>
<li><a href="../J149682/index.html">IDCEE 2012カンファレンスの発表</a></li>
<li><a href="../J149684/index.html">CMS Joomlaのコンテンツ構築キット</a></li>
<li><a href="../J149685/index.html">黒い色-タブー、神話、それとも必需品？</a></li>
<li><a href="../J149686/index.html">Forth VHDLプロセッサ</a></li>
<li><a href="../J149687/index.html">サンプルテーブルを使用してQtインターフェイススタイルを作成する</a></li>
<li><a href="../J149691/index.html">「エクスプレスオフィス」で快適な些細なこと-快適なキーボード</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
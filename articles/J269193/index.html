<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☕️ 🤷🏽 🔚 安全なページに書き込む4つの方法 😕 🍃 🔐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="これは、x86アーキテクチャのハードウェア書き込み保護メモリアドレスへの書き込みを指します。 そして、これがLinuxオペレーティングシステムで行われる方法。 そしてもちろん、Linuxカーネルモードでは、ユーザー空間ではそのようなトリックは禁止されています。 それは、あなたが知っているように、保護...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>安全なページに書き込む4つの方法</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/269193/"> これは、x86アーキテクチャのハードウェア書き込み保護メモリアドレスへの書き込みを指します。 そして、これがLinuxオペレーティングシステムで行われる方法。 そしてもちろん、Linuxカーネルモードでは、ユーザー空間ではそのようなトリックは禁止されています。 それは、あなたが知っているように、保護された領域に書き込みたいという抵抗できない欲求が起こる...あなたがウイルスやトロイの木馬を書くために座っているとき... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 問題の説明 </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ...しかし、真剣に、Linuxでカーネルモジュールをプログラミングするときに、書き込み保護されたRAMページへの書き込みの問題が時々発生します。 たとえば、sys_call_tableシステムコールセレクタテーブルを変更して、システムコールを変更、埋め込み、実装、置換、インターセプトする場合、このアクションは出版物によって異なります。 しかし、これらの目的だけでなく...非常に短い要約では、状況は次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  x86アーキテクチャには、書き込み保護されたメモリページに書き込もうとすると例外をスローする保護メカニズムがあります。 </li><li> ページへのアクセス権（書き込み許可または禁止）は、このページに対応するpte_t型構造体の_PAGE_BIT_RWビット（1番目）によって記述されます。 このビットをリセットすると、ページへの書き込みが禁止されます。 </li><li> プロセッサ側では、書き込み保護はCR0システム制御レジスタのX86_CR0_WPビット（16番目）によって制御されます。このビットが設定されている場合、書き込み保護されたページへの書き込みを試みると、このプロセッサの例外が発生します。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ハードウェアで保護されたメモリ領域への書き込みタスクの関連性は、このトピックに関する多数の出版物と、問題を解決するための提案された方法の数によって示されます。 レビューの残りの部分は、メソッドの逐次的な検討に専念します...各メソッドについて、それが与えられます： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> テスト済みで使用可能なサンプルコード。 </li><li> 私はそのようなコードの作者への参照を知っています（この問題を解決するための独立したソースが非常に多いため、これは非常に相対的です）; </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <cut>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> ページ保護、アセンブラーをオフにする </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この問題の最も簡単な解決策は、レジスタCR0のX86_CR0_WPビットをリセットして、ページ保護を一時的に無効にすることです。 私はこの方法を10年ほど使用していますが、たとえば<a href="http://vulnfactory.org/blog/2011/08/12/wp-safe-or-not/">WP：Safe or Not？</a>など、異なる年のいくつかの出版物で言及されて<a href="http://vulnfactory.org/blog/2011/08/12/wp-safe-or-not/">います。</a>  （Dan Rosenberg、2011）。 これを行う1つの方法は、インラインアセンブラー挿入（マクロ、GCCコンパイラー拡張）を使用することです。 私のバージョンとデモテストでは、このバージョンは次のようになります（ファイルrw_cr0.c）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs perl">static inline void rw_enable( void ) { asm( <span class="hljs-string"><span class="hljs-string">"cli \n"</span></span> <span class="hljs-string"><span class="hljs-string">"pushl %eax \n"</span></span> <span class="hljs-string"><span class="hljs-string">"movl %cr0, %eax \n"</span></span> <span class="hljs-string"><span class="hljs-string">"andl $0xfffeffff, %eax \n"</span></span> <span class="hljs-string"><span class="hljs-string">"movl %eax, %cr0 \n"</span></span> <span class="hljs-string"><span class="hljs-string">"popl %eax"</span></span> ); } static inline void rw_disable( void ) { asm( <span class="hljs-string"><span class="hljs-string">"pushl %eax \n"</span></span> <span class="hljs-string"><span class="hljs-string">"movl %cr0, %eax \n"</span></span> <span class="hljs-string"><span class="hljs-string">"orl $0x00010000, %eax \n"</span></span> <span class="hljs-string"><span class="hljs-string">"movl %eax, %cr0 \n"</span></span> <span class="hljs-string"><span class="hljs-string">"popl %eax \n"</span></span> <span class="hljs-string"><span class="hljs-string">"sti "</span></span> ); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （eaxレジスタの保存と復元は除外できます。これは、実験の純度のためだけにここに示されています。） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そのような方法に常に一目で反対する最初のことは、特定のプロセッサの管理に基づいているため、CR0レジスタのインストールと保護領域への書き込みの間のSMPシステムでは、ページ保護の別のプロセッサにモジュール実行を再スケジュールできることです切断されていません。 このような状況の組み合わせの可能性は、動物園から逃げたモスクワ中心部のヘビに噛まれた場合にすぎません。 しかし、これの可能性は存在し、消失するほどではありますが、有限です。 この状況がアセンブラーコードから発生するのを防ぐため、書き込み前のcli操作によるローカルプロセッサの割り込みを禁止し、sti操作による記録が完了した後にのみ割り込みを解放します（Dan Rosenbergは前述の出版物で同じことを行います）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     表示されているコードでさらに不愉快なのは、32ビットアーキテクチャ（i386）向けに記述されていることです。64ビットアーキテクチャでは、実行するだけでなく、コンパイルすることさえできます。 これは、さまざまなアーキテクチャ固有のコードを使用することで解決できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#ifdef</span></span> __i386__ // ... ,     <span class="hljs-symbol"><span class="hljs-symbol">#else</span></span> static inline void rw_enable( void ) { asm( <span class="hljs-comment"><span class="hljs-comment">"cli \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"pushq %rax \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"movq %cr0, %rax \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"andq $0xfffffffffffeffff, %rax \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"movq %rax, %cr0 \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"popq %rax "</span></span> ); } static inline void rw_disable( void ) { asm( <span class="hljs-comment"><span class="hljs-comment">"pushq %rax \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"movq %cr0, %rax \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"xorq $0x0000000000001000, %rax \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"movq %rax, %cr0 \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"popq %rax \n"</span></span> <span class="hljs-comment"><span class="hljs-comment">"sti "</span></span> ); } <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> ページ保護、カーネルAPIを無効にする </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     以前と同じことを行うことができますが、アセンブラーコードではなく、カーネルAPI（ファイルrw_pax.c）に依存しています。  Dan Rosenbergが引用したのとほぼ同じ形式のこのようなコードのスニペットを次に示します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs kotlin">#include &lt;linux/preempt.h&gt; #include &lt;asm/paravirt.h&gt; #include &lt;asm-generic/bug.h&gt; #include &lt;linux/version.h&gt; static <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> unsigned long native_pax_open_kernel( void ) { unsigned long cr0; preempt_disable(); barrier(); cr0 = read_cr0() ^ X86_CR0_WP; BUG_ON( unlikely( cr0 &amp; X86_CR0_WP ) ); write_cr0( cr0 ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cr0 ^ X86_CR0_WP; } static <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> unsigned long native_pax_close_kernel( void ) { unsigned long cr0; cr0 = read_cr0() ^ X86_CR0_WP; BUG_ON( unlikely( !( cr0 &amp; X86_CR0_WP ) ) ); write_cr0( cr0 ); barrier(); #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> LINUX_VERSION_CODE &lt; KERNEL_VERSION(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) preempt_enable_no_resched(); #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> preempt_count_dec(); #endif <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cr0 ^ X86_CR0_WP; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      「ほぼ」という注記は、preempt_enable_no_resched（）呼び出しがカーネル3.13（2011年、記事が書かれたとき）まで利用可能であったという事実を指します。 カーネル3.14以降では、この呼び出しは次の条件付きプリプロセッサ定義で閉じられます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> MODULE </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* * Modules have no business playing preemption tricks. */</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> sched_preempt_enable_no_resched #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> preempt_enable_no_resched</span></span></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     しかし、マクロpreempt_enable_no_resched（）とpreempt_count_dec（）は、後のカーネルでもほぼ同じように定義されています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     さらに不愉快なのは、表示されているコードがカーネルの新しいバージョン（3.14より古いバージョン）で正常に実行されるという事実ですが、実行後すぐ<b>に</b> 、カーネルからの警告メッセージが他のアプリケーションから次の形式で表示されます： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="dos hljs">[ <span class="hljs-number"><span class="hljs-number">337</span></span>.<span class="hljs-number"><span class="hljs-number">230937</span></span>] ------------[ cut here ]------------ [ <span class="hljs-number"><span class="hljs-number">337</span></span>.<span class="hljs-number"><span class="hljs-number">230949</span></span>] WARNING: CPU: <span class="hljs-number"><span class="hljs-number">1</span></span> PID: <span class="hljs-number"><span class="hljs-number">3410</span></span> <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> /build/buildd/linux-lts-utopic-<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">16</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/init/main.c:<span class="hljs-number"><span class="hljs-number">802</span></span> do_one_initcall+<span class="hljs-number"><span class="hljs-number">0</span></span>x1cb/<span class="hljs-number"><span class="hljs-number">0</span></span>x1f0() [ <span class="hljs-number"><span class="hljs-number">337</span></span>.<span class="hljs-number"><span class="hljs-number">230955</span></span>] initcall rw_init+<span class="hljs-number"><span class="hljs-number">0</span></span>x0/<span class="hljs-number"><span class="hljs-number">0</span></span>x1000 [srw] returned with preemption imbalance</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （私は詳細に何が起こっているのかを掘り下げませんでした...それが必要だとは思いませんでしたが、それはどういうわけかSMPプロセッサ間の仕事の不均衡、またはそのようなバランスの評価に関連していました。） 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     カーネルで発生する警告でさえ、すでにかなり深刻です。それらを取り除きたいと思います。 これは、前述のアセンブラコード（rw_pai.cファイル）からのローカル割り込みでトリックを繰り返すことで実現できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">native_pai_open_kernel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> cr0; local_irq_disable(); barrier(); cr0 = read_cr0() ^ X86_CR0_WP; BUG_ON( unlikely( cr0 &amp; X86_CR0_WP ) ); write_cr0( cr0 ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cr0 ^ X86_CR0_WP; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">native_pai_close_kernel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> cr0; cr0 = read_cr0() ^ X86_CR0_WP; BUG_ON( unlikely( !( cr0 &amp; X86_CR0_WP ) ) ); write_cr0( cr0 ); barrier(); local_irq_enable(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cr0 ^ X86_CR0_WP; }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このコードは、32ビットアーキテクチャと64ビットアーキテクチャの両方で正常にコンパイルおよび動作します。これは、以前のアーキテクチャよりも優れている点です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> メモリページの保護を解除する </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に提案する方法は、対象のメモリページを記述するPTEレコードの_PAGE_BIT_RWビットを設定することです（rw_pte.cファイル）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs lua">#include &lt;asm/pgtable_types.h&gt; #include &lt;asm/tlbflush.h&gt; static inline void mem_setrw( void **<span class="hljs-built_in"><span class="hljs-built_in">table</span></span> ) { unsigned int l; pte_t *pte = lookup_address( (long unsigned int)<span class="hljs-built_in"><span class="hljs-built_in">table</span></span>, &amp;l ); pte-&gt;pte |= _PAGE_RW; __flush_tlb_one( (unsigned long)<span class="hljs-built_in"><span class="hljs-built_in">table</span></span> ); } static inline void mem_setro( void **<span class="hljs-built_in"><span class="hljs-built_in">table</span></span> ) { unsigned int l; pte_t *pte = lookup_address( (long unsigned int)<span class="hljs-built_in"><span class="hljs-built_in">table</span></span>, &amp;l ); pte-&gt;pte &amp;= ~_PAGE_RW; __flush_tlb_one( (unsigned long)<span class="hljs-built_in"><span class="hljs-built_in">table</span></span> ); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     実行ロジックによると、コードは完全に明確です。 コード自体は、ここでほぼどのように表示されるかという形で、最初にHabrahabr（Alexey Derlaft、Vladimir、2013）での<a href="http://habrahabr.ru/post/207122/">ディスカッション</a>で会い、その後、 <a href="http://rus-linux.net/forum/viewtopic.php%3Ff%3D18%26t%3D4346%26start%3D10">システムコールを変更する</a>フォーラムでのディスカッション（Max Filippov、サンクトペテルブルク、2015年）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このコードは、32ビットと64ビットの両方のアーキテクチャでテストされています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 記憶場所の表示のオーバーレイ </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     別の方法（今日検討された最後の方法）は、記事<a href="http://habrahabr.ru/post/207122/">「Linuxカーネルの書き込み保護された領域を変更するコーシャーの方法」</a> （Ilya V. Matveychikov、モスクワ、2013年後半）で提案されました。 著者の郷土料理における料理の好みについて良いことも悪いことも言いません...私は知りませんが、提案されたテクニックに関して、私はそれがオリジナルで美しいことに注意すべきです（rw_map.cファイル）： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map_writable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *addr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> len )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *vaddr; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nr_pages = DIV_ROUND_UP( offset_in_page( addr ) + len, PAGE_SIZE ); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">page</span></span></span><span class="hljs-class"> **</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pages</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">kmalloc</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nr_pages</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">(*</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pages</span></span></span><span class="hljs-class">), </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GFP_KERNEL</span></span></span><span class="hljs-class"> );</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *page_addr = (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)( (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)addr &amp; PAGE_MASK ); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( pages == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; nr_pages; i++ ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( __module_address( (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)page_addr ) == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) { pages[ i ] = virt_to_page( page_addr ); WARN_ON( !PageReserved( pages[ i ] ) ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { pages[i] = vmalloc_to_page(page_addr); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( pages[ i ] == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) { kfree( pages ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; } page_addr += PAGE_SIZE; } vaddr = vmap( pages, nr_pages, VM_MAP, PAGE_KERNEL ); kfree( pages ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( vaddr == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vaddr + offset_in_page( addr ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unmap_writable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *addr )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *page_addr = (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)( (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)addr &amp; PAGE_MASK ); vfree( page_addr ); }</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この方法は、32ビットと64ビットの両方のアーキテクチャで機能します。 いくつかの不利な点は、一見すると以前の方法に比べて大きな利点を示さないという事実にもかかわらず、かなり単純なタスク（「スズメの銃から」）を解決するための面倒さのせいです。 ただし、この手法（およびこのコードは実質的に変更されていません）は、説明されているよりも幅広いタスクに使用できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 実行テスト </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして今、根拠のないものとならないように、本格的な実験によって上記のすべてを確認する時が来ました。 確認するには、カーネルモジュール（srw.cファイル）を作成します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs lua">#include <span class="hljs-string"><span class="hljs-string">"rw_cr0.c"</span></span> #include <span class="hljs-string"><span class="hljs-string">"rw_pte.c"</span></span> #include <span class="hljs-string"><span class="hljs-string">"rw_pax.c"</span></span> #include <span class="hljs-string"><span class="hljs-string">"rw_map.c"</span></span> #include <span class="hljs-string"><span class="hljs-string">"rw_pai.c"</span></span> #define PREFIX <span class="hljs-string"><span class="hljs-string">"! "</span></span> #define LOG(...) printk( KERN_INFO PREFIX __VA_ARGS__ ) #define ERR(...) printk( KERN_ERR PREFIX __VA_ARGS__ ) #define __NR_rw_test <span class="hljs-number"><span class="hljs-number">31</span></span> //   sys_call_table static int mode = <span class="hljs-number"><span class="hljs-number">0</span></span>; module_param( mode, uint, <span class="hljs-number"><span class="hljs-number">0</span></span> ); #define do_write( addr, val ) { \ LOG( <span class="hljs-string"><span class="hljs-string">"writing address %p\n"</span></span>, addr ); \ *addr = val; \ } static bool <span class="hljs-built_in"><span class="hljs-built_in">write</span></span>( void** addr, void* val ) { switch( mode ) { case <span class="hljs-number"><span class="hljs-number">0</span></span>: rw_enable(); do_write( addr, val ); rw_disable(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; case <span class="hljs-number"><span class="hljs-number">1</span></span>: native_pax_open_kernel(); do_write( addr, val ); native_pax_close_kernel(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; case <span class="hljs-number"><span class="hljs-number">2</span></span>: mem_setrw( addr ); do_write( addr, val ); mem_setro( addr ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; case <span class="hljs-number"><span class="hljs-number">3</span></span>: addr = map_writable( (void*)addr, sizeof( val ) ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( NULL == addr ) { ERR( <span class="hljs-string"><span class="hljs-string">"wrong mapping\n"</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } do_write( addr, val ); unmap_writable( addr ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; case <span class="hljs-number"><span class="hljs-number">4</span></span>: native_pai_open_kernel(); do_write( addr, val ); native_pai_close_kernel(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; default: ERR( <span class="hljs-string"><span class="hljs-string">"illegal mode %d\n"</span></span>, mode ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } static int __init rw_init( void ) { void **taddr; //  sys_call_table asmlinkage long (*sys_ni_syscall) ( void ); //   __NR_rw_test <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( NULL == ( taddr = (void**)kallsyms_lookup_name( <span class="hljs-string"><span class="hljs-string">"sys_call_table"</span></span> ) ) ) { ERR( <span class="hljs-string"><span class="hljs-string">"sys_call_table not found\n"</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -EFAULT; } LOG( <span class="hljs-string"><span class="hljs-string">"sys_call_table address = %p\n"</span></span>, taddr ); sys_ni_syscall = (void*)taddr[ __NR_rw_test ]; //   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>( taddr + __NR_rw_test, (void*)<span class="hljs-number"><span class="hljs-number">0x12345</span></span> ) ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -EINVAL; LOG( <span class="hljs-string"><span class="hljs-string">"modified sys_call_table[%d] = %p\n"</span></span>, __NR_rw_test, taddr[ __NR_rw_test ] ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>( taddr + __NR_rw_test, (void*)sys_ni_syscall ) ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -EINVAL; LOG( <span class="hljs-string"><span class="hljs-string">"restored sys_call_table[%d] = %p\n"</span></span>, __NR_rw_test, taddr[ __NR_rw_test ] ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -EPERM; } module_init( rw_init );</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     いくらか重くて扱いにくいコードは、次の事実のみに起因します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 単一のコードで、異なるメソッドに属する書き込み可能な関数の異なるプロトタイプを調整する必要がありました（これらは動作は同じですが、異なる方法で呼び出されます）。 </li><li> さまざまなメソッドの実装は、さまざまな作成者による記述に可能な限り近づけました（構文はより新しいバージョンのカーネルと一致するように変更されました）。 これは、さまざまな関数プロトタイプを説明しています。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そして、すべての方法を順番に使用して、テスト対象のアーキテクチャの1つでのみ表示される方法を示します（少なくとも5つの異なるアーキテクチャとカーネルバージョンが実際にテストされました）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="dos hljs">$ uname -r <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">16</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">48</span></span>-generic $ uname -m x86_64 $ sudo insmod srw.ko <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span>=<span class="hljs-number"><span class="hljs-number">0</span></span> insmod: ERROR: could <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> insert module srw.ko: Operation <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> permitted $ dmesg | tail -n6 [ <span class="hljs-number"><span class="hljs-number">7258</span></span>.<span class="hljs-number"><span class="hljs-number">575977</span></span>] ! detected <span class="hljs-number"><span class="hljs-number">64</span></span>-bit platform [ <span class="hljs-number"><span class="hljs-number">7258</span></span>.<span class="hljs-number"><span class="hljs-number">584504</span></span>] ! sys_call_table address = ffffffff81801460 [ <span class="hljs-number"><span class="hljs-number">7258</span></span>.<span class="hljs-number"><span class="hljs-number">584579</span></span>] ! writing address ffffffff81801558 [ <span class="hljs-number"><span class="hljs-number">7258</span></span>.<span class="hljs-number"><span class="hljs-number">584653</span></span>] ! modified sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = <span class="hljs-number"><span class="hljs-number">0000000000012345</span></span> [ <span class="hljs-number"><span class="hljs-number">7258</span></span>.<span class="hljs-number"><span class="hljs-number">584654</span></span>] ! writing address ffffffff81801558 [ <span class="hljs-number"><span class="hljs-number">7258</span></span>.<span class="hljs-number"><span class="hljs-number">584666</span></span>] ! restored sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = ffffffff812db550 $ sudo insmod srw.ko <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span>=<span class="hljs-number"><span class="hljs-number">2</span></span> insmod: ERROR: could <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> insert module srw.ko: Operation <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> permitted $ dmesg | tail -n6 [ <span class="hljs-number"><span class="hljs-number">7282</span></span>.<span class="hljs-number"><span class="hljs-number">625539</span></span>] ! detected <span class="hljs-number"><span class="hljs-number">64</span></span>-bit platform [ <span class="hljs-number"><span class="hljs-number">7282</span></span>.<span class="hljs-number"><span class="hljs-number">633020</span></span>] ! sys_call_table address = ffffffff81801460 [ <span class="hljs-number"><span class="hljs-number">7282</span></span>.<span class="hljs-number"><span class="hljs-number">633129</span></span>] ! writing address ffffffff81801558 [ <span class="hljs-number"><span class="hljs-number">7282</span></span>.<span class="hljs-number"><span class="hljs-number">633178</span></span>] ! modified sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = <span class="hljs-number"><span class="hljs-number">0000000000012345</span></span> [ <span class="hljs-number"><span class="hljs-number">7282</span></span>.<span class="hljs-number"><span class="hljs-number">633228</span></span>] ! writing address ffffffff81801558 [ <span class="hljs-number"><span class="hljs-number">7282</span></span>.<span class="hljs-number"><span class="hljs-number">633291</span></span>] ! restored sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = ffffffff812db550 $ sudo insmod srw.ko <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span>=<span class="hljs-number"><span class="hljs-number">3</span></span> insmod: ERROR: could <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> insert module srw.ko: Operation <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> permitted $ dmesg | tail -n6 [ <span class="hljs-number"><span class="hljs-number">7297</span></span>.<span class="hljs-number"><span class="hljs-number">040272</span></span>] ! detected <span class="hljs-number"><span class="hljs-number">64</span></span>-bit platform [ <span class="hljs-number"><span class="hljs-number">7297</span></span>.<span class="hljs-number"><span class="hljs-number">059764</span></span>] ! sys_call_table address = ffffffff81801460 [ <span class="hljs-number"><span class="hljs-number">7297</span></span>.<span class="hljs-number"><span class="hljs-number">065930</span></span>] ! writing address ffffc900001e6558 [ <span class="hljs-number"><span class="hljs-number">7297</span></span>.<span class="hljs-number"><span class="hljs-number">066000</span></span>] ! modified sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = <span class="hljs-number"><span class="hljs-number">0000000000012345</span></span> [ <span class="hljs-number"><span class="hljs-number">7297</span></span>.<span class="hljs-number"><span class="hljs-number">066035</span></span>] ! writing address ffffc9000033d558 [ <span class="hljs-number"><span class="hljs-number">7297</span></span>.<span class="hljs-number"><span class="hljs-number">066073</span></span>] ! restored sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = ffffffff812db550 $ sudo insmod srw.ko <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span>=<span class="hljs-number"><span class="hljs-number">4</span></span> insmod: ERROR: could <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> insert module srw.ko: Operation <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> permitted $ dmesg | tail -n6 [ <span class="hljs-number"><span class="hljs-number">7309</span></span>.<span class="hljs-number"><span class="hljs-number">831119</span></span>] ! detected <span class="hljs-number"><span class="hljs-number">64</span></span>-bit platform [ <span class="hljs-number"><span class="hljs-number">7309</span></span>.<span class="hljs-number"><span class="hljs-number">836299</span></span>] ! sys_call_table address = ffffffff81801460 [ <span class="hljs-number"><span class="hljs-number">7309</span></span>.<span class="hljs-number"><span class="hljs-number">836311</span></span>] ! writing address ffffffff81801558 [ <span class="hljs-number"><span class="hljs-number">7309</span></span>.<span class="hljs-number"><span class="hljs-number">836359</span></span>] ! modified sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = <span class="hljs-number"><span class="hljs-number">0000000000012345</span></span> [ <span class="hljs-number"><span class="hljs-number">7309</span></span>.<span class="hljs-number"><span class="hljs-number">836368</span></span>] ! writing address ffffffff81801558 [ <span class="hljs-number"><span class="hljs-number">7309</span></span>.<span class="hljs-number"><span class="hljs-number">836424</span></span>] ! restored sys_call_table[<span class="hljs-number"><span class="hljs-number">31</span></span>] = ffffffff812db550</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1> 議論 </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     このレビューは、教科書や行動のガイドとして意図されていません。 ここでは、異なる作成者が使用する基本的に同等のアクションを持つさまざまな手法が体系的に収集されています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     これらの各方法の長所と短所に関する議論を続けることは興味深いでしょう。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     または、新しいオプションでアクションを実行するためにリストされた方法を補完します... 5番目、6番目など 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      （検証、使用、またはさらなる改善のために）議論されたすべてのコードは、 <a href="https://yadi.sk/d/stzgH1xEjsaLq">ここ</a>または<a href="https://drive.google.com/file/d/0B__cqmYoRw_6ejN0b0E3dWFkX0U/view%3Fusp%3Dsharing">ここで</a>入手でき<a href="https://drive.google.com/file/d/0B__cqmYoRw_6ejN0b0E3dWFkX0U/view%3Fusp%3Dsharing">ます</a> 。 </cut></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J269171/index.html">「Swift 2の新機能」例</a></li>
<li><a href="../J269175/index.html">Yandex MachineおよびHSE Machine Learningコース</a></li>
<li><a href="../J26918/index.html">ラップトップキーボードが分離しないのはなぜですか？</a></li>
<li><a href="../J269183/index.html">パート2. Officeストアでのアプリケーションの公開</a></li>
<li><a href="../J26919/index.html">Objective-J？ スタートアップはApple KeynoteのWebバージョンを導入しました</a></li>
<li><a href="../J269195/index.html">インドアナビゲーション：優れたiBeaconハードウェアレビュー</a></li>
<li><a href="../J269199/index.html">PHPでGUIアプリケーションを作成する</a></li>
<li><a href="../J26920/index.html">XQuery Wikipediaクエリ</a></li>
<li><a href="../J269203/index.html">MultiCAD.NET API：属性付きブロックを挿入</a></li>
<li><a href="../J269207/index.html">Angular2閉じる</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎰 ♾ 🏏 1時間でOpenfire用のJabberボット 👌🏽 😦 🤑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="約2年間、ICQ用のボットを開発しています。 最近の一連のイベントの後、ICQボットはしばしば動作不能であることが判明し、また記事「jabberボットの紹介」の後、Jabberのボットの開発に関連する問題を研究したいと強く望みました。 
  
 この投稿では、この分野での最初の経験を皆さんと共有した...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>1時間でOpenfire用のJabberボット</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/52523/"><img src="http://support.freevoicepbx.com/images/stories/openfire_logo.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     約2年間、ICQ用のボットを開発しています。 最近の一連の<a href="http://habrahabr.ru/blogs/im/51000/">イベントの</a>後、ICQボットはしばしば動作不能であることが判明し、また記事<a href="http://habrahabr.ru/blogs/im/51328/">「jabberボットの紹介」の</a>後、Jabberのボットの開発に関連する問題を研究したいと強く望みました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     この投稿では、この分野での最初の経験を皆さんと共有したいと思います。 簡単なJabberボットをゼロから記述し、1時間だけを費やす方法を説明します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ボットを開発するためのプラットフォームとして、 <a href="http://ru.wikipedia.org/wiki/Openfire">Openfire</a>を選択し<a href="http://ru.wikipedia.org/wiki/Openfire">ました</a> 。 この選択は、OpenfireがJavaで書かれているという事実に影響されました（私は絶対にPythonのようなものを学びたくありませんでした）。  Openfireのプラグイン構造により、ボット機能を迅速かつ便利に固定できます。 さらに、Openfireは簡単に構成でき、それまでに既にjabberサーバーとしてインストールされていました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 環境を設定する </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     まず、Openfireとそのプラグインをビルドして実行できる開発環境をセットアップする必要があります。  Windowsのインストールプロセスは次のとおりです。 他のオペレーティングシステムでは、プロセスは次のようになります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  <i>Java SE Development Kit（JDK）を</i>ダウンロードしてインストールし<i>ます</i> 。  <a href="http://java.sun.com/javase/downloads/index.jsp">ここで</a>取ることができ<a href="http://java.sun.com/javase/downloads/index.jsp">ます</a> 。  JDKを<i>C：\ Program Files \ Java</i> （デフォルトのフォルダー）にインストールしました。  <i>C：\ Program Files \ Java</i>にインストールした後、サブフォルダー<i>jdk1.6.0_12</i>および<i>jre6が表示されました</i> 。 </li><li>  <i>Java開発者向け</i>の<i>Eclipse IDEは</i> <a href="http://www.eclipse.org/downloads/">こちらから</a>ダウンロードして<a href="http://www.eclipse.org/downloads/">ください</a> 。 同じフォルダー<i>C：\ Program Files \ Javaに解凍します</i> 。 その結果、別のサブフォルダー-eclipseが表示されます。 </li><li> 環境変数を設定します（これは、 <i>[マイコンピューター]&gt; [プロパティ]&gt; [詳細設定]&gt; [環境変数]で行います</i> ）： 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <i>JAVA_HOME</i> = <i>C：\ Program Files \ Java \ jdk1.6.0_12</i>  JDKを別のフォルダーに解凍した場合は、適切なパスを指定します。 </li><li>  <i>C：\ Program Files \ Java \ jre6 \ binを</i> <i>Path</i>変数に追加します（パスが正しいことも確認します）。 </li></ul></li><li> 再起動します。 </li><li>  Eclipseを起動します。これにより、Workspace、つまりプロジェクトを配置するディレクトリを選択するように求められます。  <i>C：\ Edit</i>としましょう。 ワークスペースを選択すると、ようこそ画面が表示され、すぐに閉じることができます。 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Openfireをビルドする </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、2番目の段階、つまりOpenfireの構築と起動に進みます。 指示に正確に従うようにしてください。そうしないと、すぐに何も機能しない可能性があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  <a href="http://www.igniterealtime.org/downloads/source.jsp">ここから</a> Openfireソース<a href="http://www.igniterealtime.org/downloads/source.jsp">を</a>ダウンロード<a href="http://www.igniterealtime.org/downloads/source.jsp">します</a> 。  Openfire自体に加えて、アーカイブにはすべての無料プラグインのソースコードが含まれています。 プラグインを開発するとき、そのコードを調べることができます。 </li><li> ソースアーカイブには<i>openfire_src</i>フォルダーが含まれて<i>い</i>ます。  <i>C：\ Edit</i>で解凍します。 </li><li>  Eclipseに移動し、ソースに従って新しいプロジェクトを作成します。 これを行うには、メニューから[ <i>ファイル]&gt; [新規]&gt; [プロジェクト]&gt; [Javaプロジェクト</i> ]を選択します。 新しいJavaプロジェクトを作成するためのウィンドウが表示されます。 次のように記述します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <i>プロジェクト名</i> = <i>openfire_src</i> </li><li>  <i>既存のソースからプロジェクトを作成</i>をマークし<i>ます</i> 。  <i>ディレクトリで、</i> <i>C：\ Edit \ openfire_srcを</i>指定します。 </li><li>  <i>完了を</i>クリックします。 </li></ul></li><li>  Eclipseがプロジェクトを作成したら、それをビルドします。 これを行うには、メニューから「 <i>ウィンドウ」&gt;「ビューを表示」&gt;「Ant」を</i>選択します。  EclipseワークスペースにAntパネルが表示されます。 それを右クリックし、ドロップダウンメニューから[ <i>ビルドファイルの追加</i> ]を選択します。 </li><li> 表示されるツリーで、 <i>openfire_src&gt; build&gt; build.xmlを</i>選択します。  OKをクリックします。 </li><li>  <i>Openfire XMPPサーバー</i>が多くのビルドオプションとともにAntパネルに表示されます。 </li><li>  Openfireをビルドします。 これを行うには、ツリー内で<i>openfire [default]</i>というアセンブリオプションを見つけてダブルクリックします。 ツリーのルート要素をクリックすることもできます。 </li><li> アセンブリを開始するとすぐに、Eclipseにコンソールが表示され、アセンブリの進行状況に関する情報が表示されます。 私たちは、碑文が<i>成功</i>するのを待っています。 </li><li> 次に、Openfireの起動パラメーターを<i>構成し</i>ます。これを<i>実行</i>するには、 <i>[実行</i> ] <i>&gt; [構成の実行</i> ]メニューに移動します。 </li><li> 表示されるウィンドウで、 <i>Javaアプリケーションを</i>ダブルクリックし<i>ます</i> 。 新しい構成を作成していますが、アセンブリを正しく開始するように構成する必要があります。 以下を記述します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <i>名前</i> = <i>Openfire</i> （または重要ではない任意のもの）。 </li><li>  <i>プロジェクト</i> = <i>openfire_src</i> </li><li>  <i>メインクラス</i> = <i>org.jivesoftware.openfire.starter.ServerStarter</i> </li><li>  <i>VM</i> <i>引数の</i> [ <i>引数</i> ]タブで<i>、</i> <i>-DopenfireHome = "target / openfire"と</i>記述し<i>ます</i> 。  <i>-Dの</i>後にスペースがないことに注意してください。 </li><li>  [ <i>クラスパス</i> ]タブで、[ <i>ユーザーエントリ</i> ]を選択し、[ <i>詳細設定</i> ]ボタンをクリックします。  [ <i>フォルダーの追加]を</i>選択し、 <i>openfire_src \ src \ i18n</i> <i>フォルダー</i>を追加します。 その後、同様に<i>openfire_src \ src \ resources \ jar</i>フォルダーを追加します。 </li><li>  [ <i>適用]</i> 、[ <i>実行]の順に</i>クリックし<i>ます</i> 。 </li></ul></li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     すべてが正常に完了すると、Openfireのバージョンを示す行と、管理者のコンソールがポート9090でリッスンしていることを示すメッセージがコンソールに表示されます。作業の主な部分はすでに遅れているため、コーヒーを飲むことができます。 また、大切な碑文がコンソールに表示されなかった人々に精神的に同情することができます。 後者に目を向ける-行動の順序を注意深く確認してください。 先に警告したように、指示は正確に守らなければならず、余分なことは何もしません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Openfireをカスタマイズする </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     続けます。 次に、Openfireサーバー自体を構成する必要があります。 ブラウザに<i><a href="http://localhost/">localhost</a> ：9090</i>と入力すると、構成手順が開始されます。 ここではすべてが非常に簡単です。 開発用の構成を設定しているので、特に哲学はしません。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <i>[サーバー設定]</i>ページで、デフォルトのポートである<i>サーバー名</i> = <i>localhost</i>を設定します。 </li><li>  <i>[データベースの設定]</i>ページで、[ <i>埋め込み</i> <i>データベース]</i>を選択します。 </li><li>  <i>[プロファイル設定]</i>ページでは、すべてをデフォルトのままにします。 </li><li>  [ <i>管理者アカウント]</i>ページで、存在しないメールボックスを入力します。 また、管理者パスワードを入力して記憶します。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     その後<i>、管理コンソールへのログインを</i>選択し、認証ページに移動できます。 前に指定したパスワードで<i>管理者</i>アカウントでログインする必要があります。 同じ<i>adminの</i>下で、任意のjabber-clientを使用してサーバーに接続することもできます。 すべてが正常であれば、サーバーを停止して次の手順に進むことができます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> ボットを書く </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     それで、最も重要な段階に到達しました。 次に、ボットの機能を実装するプラグインを作成する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Openfireプラグインのすべてのソースは、 <i>openfire_src \ src \ plugins</i>フォルダーにあります。 各プラグインには、少なくともプラグインの説明を含む<i>plugin.xml</i>ファイルと、プラグインのメインクラスの説明を含むJavaファイルが含まれる個別のフォルダーがあります。 詳細については、Openfireのドキュメントを参照してください（たとえば、 <i>openfire_src \ documentation \ docs \ plugin-dev-guide.htmlを参照</i> ）。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     新しいプラグインのフォルダー<i>openfire_src \ src \ plugins \ simplebotを</i>作成します。 その中で、plugin.xmlファイルを開始し、そこに次の内容を書き込みます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">plugin</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">class</font> <font color="#0000ff">&gt;</font> org.jivesoftware.openfire.plugin.simplebot <font color="#0000ff">&lt;/</font> <font color="#800000">class</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> Simple Bot <font color="#0000ff">&lt;/</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font> Provides simple bot functionality. <font color="#0000ff">&lt;/</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">author</font> <font color="#0000ff">&gt;</font> Habrahabr <font color="#0000ff">&lt;/</font> <font color="#800000">author</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 1.0.0 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">date</font> <font color="#0000ff">&gt;</font> 18/2/2009 <font color="#0000ff">&lt;/</font> <font color="#800000">date</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">minServerVersion</font> <font color="#0000ff">&gt;</font> 3.5.0 <font color="#0000ff">&lt;/</font> <font color="#800000">minServerVersion</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">plugin</font> <font color="#0000ff">&gt;</font> &lt;br&gt;&lt;br&gt;</font> &lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、プラグインのソースコードを格納するフォルダーを作成する必要があります。 より正確には、一連のサブフォルダーになります： <i>openfire_src \ src \ plugins \ simplebot \ src \ java \ org \ jivesoftware \ openfire \ plugin</i> 各Openfireプラグインにはメインクラスへの同じパスがあるため、これらすべてのフォルダーを手動で作成するのではなく、単にMOTDプラグインからコピーしてから、古いコンテンツを削除しました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     最後に行うことは、ボットソースを<i>openfire_src \ src \ plugins \ simplebot \ src \ java \ org \ jivesoftware \ openfire \ pluginフォルダに配置すること</i>です。 これを行うには、 <i>そこにsimplebot.java</i>ファイルを作成し（大文字と小文字が重要です）、ソースコードをその中にコピーします。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package org.jivesoftware.openfire.plugin;&lt;br&gt;&lt;br&gt;import java.io.File;&lt;br&gt;import org.jivesoftware.openfire.container.Plugin;&lt;br&gt;import org.jivesoftware.openfire.container.PluginManager;&lt;br&gt;import org.jivesoftware.openfire.XMPPServer;&lt;br&gt;import org.jivesoftware.openfire.auth.AuthToken;&lt;br&gt;import org.jivesoftware.openfire.multiplex.ClientSessionConnection;&lt;br&gt;import org.jivesoftware.openfire.SessionManager;&lt;br&gt;import org.jivesoftware.openfire.SessionPacketRouter;&lt;br&gt;import org.jivesoftware.openfire.session.Session;&lt;br&gt;import org.jivesoftware.openfire.session.LocalClientSession;&lt;br&gt;import org.jivesoftware.openfire.interceptor.*;&lt;br&gt;import org.xmpp.packet.*;&lt;br&gt;&lt;br&gt; <font color="#008000">//</font> &lt;br&gt; <font color="#008000">// Simple Bot Plugin</font> &lt;br&gt; <font color="#008000">//</font> &lt;br&gt; <font color="#0000ff">public</font> <font color="#0000ff">class</font> simplebot implements Plugin {&lt;br&gt;&lt;br&gt; <font color="#0000ff">private</font> JID myJID;&lt;br&gt; <font color="#0000ff">private</font> LocalClientSession mySession;&lt;br&gt; <font color="#0000ff">private</font> myPacketInterceptor myInterceptor = <font color="#0000ff">new</font> myPacketInterceptor();&lt;br&gt;&lt;br&gt; <font color="#0000ff">public</font> <font color="#0000ff">void</font> initializePlugin(PluginManager manager, File pluginDirectory) {&lt;br&gt;    System. <font color="#0000ff">out</font> .println( <font color="#A31515">"Starting Simple Bot Plugin"</font> );&lt;br&gt;    &lt;br&gt;    myJID = <font color="#0000ff">new</font> JID( <font color="#A31515">"test"</font> , XMPPServer.getInstance().getServerInfo().getXMPPDomain(), <font color="#A31515">"simplebot"</font> );&lt;br&gt;    &lt;br&gt;    ClientSessionConnection connection = &lt;br&gt; <font color="#0000ff">new</font> ClientSessionConnection(XMPPServer.getInstance().getConnectionManager().getClass().getName(),&lt;br&gt; <font color="#A31515">"localhost"</font> , <font color="#A31515">"127.0.0.1"</font> );&lt;br&gt;    mySession = SessionManager.getInstance().createClientSession(connection);&lt;br&gt;    mySession.setAuthToken( <font color="#0000ff">new</font> AuthToken(myJID.getNode()), myJID.getResource());&lt;br&gt;    &lt;br&gt;    InterceptorManager.getInstance().addInterceptor(myInterceptor);&lt;br&gt;  } <font color="#008000">// initializePlugin</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">public</font> <font color="#0000ff">void</font> destroyPlugin() {&lt;br&gt; <font color="#008000">// Resources are no longer needed</font> &lt;br&gt;    InterceptorManager.getInstance().removeInterceptor(myInterceptor);&lt;br&gt;    mySession.close();&lt;br&gt;&lt;br&gt;    myJID = <font color="#0000ff">null</font> ;&lt;br&gt;    mySession = <font color="#0000ff">null</font> ;&lt;br&gt;    myInterceptor = <font color="#0000ff">null</font> ;&lt;br&gt;  } <font color="#008000">// destroyPlugin</font> &lt;br&gt;  &lt;br&gt; <font color="#0000ff">private</font> <font color="#0000ff">class</font> myPacketInterceptor implements PacketInterceptor {&lt;br&gt;    &lt;br&gt; <font color="#0000ff">public</font> <font color="#0000ff">void</font> interceptPacket(Packet packet,&lt;br&gt;        Session session,&lt;br&gt;        boolean incoming,&lt;br&gt;        boolean processed) throws PacketRejectedException&lt;br&gt;        {&lt;br&gt; <font color="#008000">// If there is an incoming message for the bot</font> &lt;br&gt; <font color="#0000ff">if</font> (packet instanceof Message &amp;&amp;&lt;br&gt;              packet.getTo().getNode().equals(myJID.getNode()) &amp;&amp;&lt;br&gt;              incoming == <font color="#0000ff">true</font> &amp;&amp;&lt;br&gt;              processed == <font color="#0000ff">true</font> )&lt;br&gt;            {&lt;br&gt; <font color="#008000">// Create the response ...</font> &lt;br&gt;              Message message = <font color="#0000ff">new</font> Message();&lt;br&gt;              message.setTo(packet.getFrom());&lt;br&gt;              message.setFrom(packet.getTo());&lt;br&gt;              message.setSubject( <font color="#A31515">""</font> );&lt;br&gt;              message.setBody( <font color="#A31515">"Hello from Simple OpenFire Bot"</font> );&lt;br&gt;              &lt;br&gt; <font color="#008000">// ... and send it</font> &lt;br&gt;              SessionPacketRouter router = <font color="#0000ff">new</font> SessionPacketRouter(mySession);&lt;br&gt;              router.route(message);&lt;br&gt;            }&lt;br&gt;        } <font color="#008000">// interceptPacket</font> &lt;br&gt;    &lt;br&gt;  } <font color="#008000">// myPacketInterceptor</font> &lt;br&gt;&lt;br&gt;} <font color="#008000">// simplebot</font> &lt;br&gt;&lt;br&gt;</font> &lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
     </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     すぐに、これは私がなんとか達成した作業コードの最小量であることに注意してください。 すべての追加機能とすべてのチェックがスローされます。 ボットは、ステータスを変更する方法を知らず、ユーザーを認証する方法も知りません。 しかし、彼は「Hello from Simple OpenFire Bot」というフレーズを使用して、すべての着信メッセージに安定して応答します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     それがどのように機能するかを見てみましょう。 プラグインのメインクラスは、内部に2つの関数を持つプラグインインターフェースの実装です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <i>initializePlugin-</i>起動時にプラグインを初期化します。 ここで、 <i>myJID</i>変数を初期化します。この変数には、 <i>test @ domain \ simplebot</i>という形式のボットJIDが含まれます。  localhostで実行する場合、これはそれぞれ<i>test @ localhost \ simplebotになります</i> 。 次に、JIDの新しいセッションを作成します。 これを行うには、サーバーへの接続（ <i>connection</i> ）を確立し、この接続内にセッション（ <i>mySession</i> ）を作成する必要があります。 結論として、このセッションでユーザーを承認する必要があります。 </li><li>  <i>destroyPlugin-</i>プラグインが破棄されるときに呼び出されます。 ここでは、以前にキャプチャしたすべてのリソースをリリースします。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     さらに、プラグインのメインクラスには、 <i>PacketInterceptor</i>インターフェイスを実装する補助クラス<i>myPacketInterceptor</i>が含まれて<i>い</i>ます。 このクラスは、Openfireサーバーを通過するすべてのメッセージをインターセプトします（このため、 <i>initializePlugin</i>内で、このクラスのインスタンスをサブスクライブして、 <i>InterceptorManager</i>を使用してメッセージをインターセプトします）。 これで、メッセージが表示されると、このクラスの<i>interceptPacket</i>関数が呼び出されます。 あとは、この関数内でJID宛てのメッセージを選択し、「Hello from Simple OpenFire Bot」というフレーズで返信するだけです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     次に、プラグインをビルドしてからOpenfireを実行する必要があります。 プラグイン（および他のすべてのプラグイン）をビルドするには、Antパネルで<i>プラグイン</i>ターゲットをダブルクリックする必要があります（ <i>pluginと</i>混同しないでください）。 その後、コンソールに<i>BUILD SUCCESSFUL</i>が表示されるまで待ちます。 これで、コンソールでOpenfireを起動すると、特に「 <i>シンプルボットプラグインの起動</i> 」という碑文が表示されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     さて、これですべてのjabberクライアントで（ <i>管理者</i>アカウントを使用して）サーバーに接続し、 <i>test @ localhost</i>にメッセージを書き込んでボットをチェックできるようになりました。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3> 次は？ </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     前述したように、ここで説明するボットには最も控えめな機能が備わっています。 現在、追加機能を追加しており、それに関する一連のメモを作成する予定です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     いずれにせよ、ジャバーボットの開発は実際には一見したように難しくないという考えを願っています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J52510/index.html">Gearsを搭載したOpera Mobile</a></li>
<li><a href="../J52512/index.html">私のプログラミング言語</a></li>
<li><a href="../J52517/index.html">game-torrent.infoがハッキングされています。 新しい情報</a></li>
<li><a href="../J52518/index.html">Ubuntu 9.10リリースのコードネームは「Karmic Koala」です</a></li>
<li><a href="../J52521/index.html">スマートな目標</a></li>
<li><a href="../J52524/index.html">Reaxion-Minskでの内部「ビールの下」セミナーの記録。 パート1。 マーキュリアル 分散システム。</a></li>
<li><a href="../J52526/index.html">Picasaからアルバムをダウンロードする</a></li>
<li><a href="../J52531/index.html">オペレーターについて</a></li>
<li><a href="../J52532/index.html">AUTOLOADの適切な使用</a></li>
<li><a href="../J52533/index.html">Twitter、スタートアップなどのNetscape Founder [2]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEDBM7F51Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FEDBM7F51Q');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👆🏼 🤸🏼 📛 I2Pネットワーククライアント開発の基礎 👩‍👧 😐 ▪️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事は、独自のI2Pクライアントをゼロから開発したい人を対象としています。 I2Pの基本的な概念と概念に精通していることを前提としています。 現時点では、ロシア語に翻訳されたものを含む、この主題に関する十分なドキュメントと記事があります。 一方、プロトコルとメッセージ形式について十分に説明してい...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml"/>

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>document.write('<script src="https://pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://tech-in-japan.github.io/index.html"></a>
    <div class="page-header-text">Clever Geek Handbook</div>
  </header>
  <section class="page js-page"><h1>I2Pネットワーククライアント開発の基礎</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body"> この記事は、独自のI2Pクライアントをゼロから開発したい人を対象としています。  I2Pの基本的な概念と概念に精通していることを前提としています。 現時点では、ロシア語に翻訳されたものを含む、この主題に関する十分なドキュメントと記事があります。 一方、プロトコルとメッセージ形式について十分に説明している公式ドキュメントがあります。 残念ながら、断片化されており、多くの明白でないものがそこにありません。 この記事は、主に公式I2P Javaクライアントの調査とデバッグに基づいて書かれています。 最終的な目標は、C ++で完全に実装することです。 現在の状態のプロジェクトソースコードは<a href="https://github.com/PurpleI2P/i2pd">githubにあり</a>ます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> 使用される暗号化 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     独自のI2Pルーターを構築するには、次の暗号化アルゴリズムの実装が必要です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> エル・ガマル。 ベースをモジュロで累乗することに基づく非対称暗号化。 ベースとモジュールは、I2Pネットワーク全体の固定定数です。  514バイトの標準サイズのブロックに加えて、512バイトのカスタムサイズのブロックも使用されます。 </li><li>  Diffie-Hellmanは、公開鍵を交換して対称暗号化鍵の共有鍵を取得します。  El-Gamalと同じキーが使用されます。 </li><li> 電子署名を作成および検証するためのDSA </li><li>  2つのモードのAES：暗号化キーと初期化ベクター（IV）を使用するCBC、16バイトの長さでIV自体を暗号化するECB </li><li> ハッシュを計算するためのSHA256 </li><li> メッセージのチェックサムを計算するAdler32 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> 主要プロトコル </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I2Pネットワークは、主に4つのレベルで構成されています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li> 輸送レベル。 これらは、暗号化されたインターネットTCP / IPまたはUDP接続です。 接続のセットアップと暗号化が含まれます。 </li><li> トンネル。 外の世界へのノードの「ウィンドウ」。他のノードにあり、実際の場所を隠すことができます。 それらは、トランスポート層プロトコルによって相互接続された一連のノードで構成されます。 トンネルは、クライアントとサーバーの両方を匿名化するためのプロキシサーバーのチェーンとして単純に想像することができます。 </li><li> ニンニク。 任意のルートとトンネルの2つのエンドノード間のメッセージまたはシーケンスの送信。 セッション識別子と非対称によって特徴付けられ、セッションの設定後、対称暗号化 </li><li> ノード間でユーザーデータを転送するためのアプリケーション層プロトコル。 </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     各レベルは、異なる目的のために独自の暗号化を追加します。 トランスポート層の暗号化は、トンネル間でメッセージを送信するときに、プロバイダーのトンネル、トンネルの中間ノードからのコンテンツと方向、「ニンニク」からのトラフィックをトンネルのエンドノードから隠します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> 輸送レベル </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     トランスポート層接続を確立するには、IPアドレスとポートを知る必要があります。  netDbと呼ばれる既知のノードのリストがあり、操作中に変更されます。新しいノードに関する情報は他のノードから取得されます。 最初に、ノードのリストはアドレスがrouter / networkdb / Reseeder.javaファイルに明示的にリストされている特別なサイトからダウンロードされます。  TCP / IP上で実行されるプロトコルはNTCPと呼ばれ、UDP上ではSSUと呼ばれます。 接続設定のいくつかの違いに加えて、SSUはパケットの性質上、長いメッセージをいくつかのフラグメントに分割することをサポートしています。 送信されるメッセージは、ヘッダー、I2PNメッセージ（以下のI2NPプロトコルについて）、およびチェックサムで構成されます。 同期を目的とした現在時刻を含む特別なメッセージが定期的に送信されます。 接続が確立されると、ルーターの公開鍵が交換され、それに基づいて、AES暗号化の共通鍵がDiffie-Helmanアルゴリズムに従ってそれぞれによって計算されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> トンネル </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     トンネルは常に単方向です。すべてのメッセージは、入力ノード（ゲートウェイ）から出力ノード（エンドポイント）にのみ送信できます。 トンネルのすべての情報を持つ所有者に属するトンネルの端に応じて、トンネルは着信（所有者-出力ノード）と発信（所有者-入力ノード）に分けられます。 トンネルの中間ノードは、トンネルが着信か発信かを知りません;中間ノードによって実行される唯一のアクションは、暗号化キーでメッセージを暗号化し、次のノードに送信することです。 これからの重要な結果は次のとおりです。所有者のみがすべての中間ノードの暗号化キーを持っているため、トンネルメッセージの順次復号化は所有者が実行する必要があります。 この事実は、着信トンネルでは非常に簡単です。つまり、メッセージを受信した場合、出力ノードはそれを順次復号化する必要がありますが、発信トンネルでは、送信前に元の暗号化されていないメッセージを順次復号化する必要があります。 このノードが所有者ではないトンネルは通過と呼ばれます。 トランジットトンネルは外部トラフィックを送信し、I2Pネットワーク全体の機能をサポートするために必要です。これにより、ノードがルーターに変わります。 トンネルノードは3つの異なるキーでAES暗号化を使用します：1つはトンネル作成時のノードの応答を暗号化するために使用され、他の2つはトンネルを介してデータを送信するために使用されます：1つのキーはデータ自体を暗号化し、もう1つは識別ベクトル（IV）を暗号化してデータを暗号化します。 この場合、IVは同じキーで2回暗号化されます。暗号化の前後に、これは二重暗号化と呼ばれます。 ノードは、El-Gamalを使用して公開キーで暗号化された関連トンネルレコードメッセージでこれら2つのキーを受信します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     トンネルの内部では、TunnelDataメッセージのみが送信され、一般的にはいくつかのフラグメントで構成されます。 トンネル間の伝送には、TunnelGatewayメッセージが使用されます。 公式のドキュメントでは、双方向接続には少なくとも4つのトンネル（インバウンド2つとアウトバウンド2つ）が必要であると記載されていますが、実際には、発信トンネルを介してメッセージを送信する必要はありませんが、TunnelGatewayメッセージを目的の着信トンネルの入力ノードに送信できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      TunnelDataメッセージでは、ゼロバイトとそれに添付された暗号化されていないIVに続く意味のあるデータからチェックサムが計算されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  I2NPプロトコル </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I2Pネットワーク内のデータ交換は、さまざまなタイプのI2NPメッセージを使用して行われます。 各メッセージにはタイプと長さのヘッダーが含まれているため、メッセージ間の境界を定義できます。 タイプに応じて、メッセージの長さは20〜64Kバイトまで変化します。 各レベルは、より高いレベルの他のI2NPメッセージを含む「ラッパー」メッセージを使用します。 トンネルの場合、これらの「ラッパー」は、トンネル内の伝送用のTunnelDataメッセージと、トンネル間の伝送用のTunnelGatewayです。  「ニンニク」の場合-ニンニク。  I2Pトラフィックのほとんどは、次の添付メッセージで表されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>データ-&gt;ニンニク-&gt; TunnelData。</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     原則として、メッセージはトンネルを介して送信されますが、特に新しいトンネルを最初に作成する場合は、マーシャター間で直接送信することもできます。 ルーターは、接続が確立された直後にDatabaseStoreメッセージも交換します。 対応するフィールドはそこにのみ存在するため、宛先ポイント間のメッセージは「ニンニク」を介して送信する必要があります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> ルーターと宛先 </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I2Pネットワークで動作するには、I2Pネットワークへのアクセスを提供するルーターと、意味のある情報の交換先を備えたI2Pクライアントが必要です。  IPアドレスを含むルーターに関する情報は公開されています。さらに、ルーターの現在のリストは特別なftpサイトからダウンロードできます。 同時に、目的地の位置情報は機密情報です。 このルーターにある宛先ポイントに関する情報は、このルーターでのみ使用できます。他のすべてのルーターでは、この情報を取得することはできません。これは、I2Pネットワークの匿名性を保証する主要なメカニズムの1つです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ルーターは主にネットワーク参加者のコンピューター上にあるため、その構成は常に変化しています。 そのため、ルーターは他のルーターのリストを常に最新の状態に保つことを強制されます。 このプロセスは探索的と呼ばれ、ランダムに選択された32バイトのアドレスを持つリクエストを、フラッドフィルと呼ばれる特別なルーターに送信します。 フラッドフィルルーターには、ネットワークに関するすべての情報があると想定されています。 とりわけ、フラッドフィルルーターは、検出された新しいノードに関する情報を常に相互に伝えます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     ノードに関する情報を要求するために、I2NPはDatabaseLookupメッセージを使用し、databaseStore情報自体を送信します。 原則として、メッセージはトンネルを介して送信されますが、DatabaseStoreは、接続が確立された直後にノードによってトランスポートレベルで直接送信されるため、ネットワークにその存在が通知されます。 そうしないと、新しいノード用のトンネルの構築が不可能になります。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      DatabaseStoreには、RouterInfo構造がこのアドレスに対応する場合、アドレスがルーターである場合、およびLeaseSetが宛先である場合、2種類の情報を含めることができます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      RouterInfoには、ルーターの公開キーとさまざまなサービス情報が含まれます。最も重要な情報は、IPアドレス、ポート、接続用のサポートされているトランスポートプロトコル、および特定のルーターがフラッドフィルかどうかに関する情報です。  RouterInfoには非常に多くのテキスト情報を含めることができるため、アーカイブされたgzipによって送信されます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      LeaseSetには、特定の宛先の着信トンネルのリストと、この宛先を宛先とするニンニクメッセージを暗号化するための公開キーが含まれています。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4> アプリケーション層サービス </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I2Pクライアントの実質的なアクションを検討してください。オンラインリソースの匿名ホスティングと、それに応じたそれらへのアクセス。 まず、FlibustaなどのWebサイトからデータを取得してみましょう。 現時点では、I2Pアドレスの32バイトのハッシュしか持っていません。目標はHTTPリクエストを送信し、レスポンスを受信することです。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     もちろん、そのようなアドレスを持つルーターはデータベースに存在しません（そうでない場合、リソースのIPアドレスはすべてのユーザーに表示されます）、リクエストを送信する唯一の方法は、最初にリクエストしてLeaseSetを取得する必要がある特定の時間に存在する目的のノードの何らかの着信トンネルを経由することです。 トランスポートレベルで隣接ノードから要求および受信できるRouterInfoとは異なり、LeaseSetは、最初に構築する必要があるトンネルを通じてのみ要求および受信できます。 したがって、「オンデマンド」でI2Pネットワークを使用すると失敗するという残念な結論は、I2Pルーターが稼働している必要があり、常にトンネルを構築してサポートする必要があるということです。 分散ネットワークのため、トンネルの構築は簡単な作業ではありません-トンネルを作成するほとんどの試みは失敗します。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     トンネルの建設を成功させるには、2つの条件が必要です。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li> トンネルに参加するすべてのノードは、少なくともトンネル内の前のノードからトランスポートレベルでアクセス可能でなければなりません </li><li> トンネルに関係するすべてのノードは、新しいトンネルを構築することに同意する必要があります。 ノードは、たとえば輻輳のためにトンネルの作成を拒否する場合があります </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     トンネルの最大存続期間は10分です。トンネルに参加しているノードがオフラインになると、トンネルは予定より早く停止する可能性があります。 そのため、トンネルの所有者は常にテストメッセージを送信して、ライブトンネルのリストを最新の状態に保ちます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     そのため、トンネルが利用可能であり、必要なLeaseSetが利用可能です。 これで、HTTPリクエストを送信でき、宛先に到達することさえできますが、レスポンスも受信したいと思います。 これを行うには、メッセージに独自のLeaseSetを指定する必要があります。そうすると、何らかの着信トンネルを介して回答が送信され、ノードに正常に到達する可能性が高くなります。 複数の接続がノードを介して同時に機能するため、各接続に独自のI2Pアドレスを割り当て、複数の着信トンネルからLeaseSetを形成するか、適切なフィールドを持つ特別なプロトコルを使用して接続を多重化する「共有」アドレスを作成する必要があります。アプリケーション層プロトコル。 このようなプロトコルはI2CPと呼ばれ、公式のI2Pクライアントでのみ使用されますが、独自のサービスを構築するために必要なわけではありません。 もちろん、I2CPを使用してFlibustにアクセスする必要があります。 ただし、たとえば、独自のトレントのようなネットワークを構築するには、I2Pアドレッシングのみを実行できます。 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I2CPプロトコルとその上に構築されたプロトコルスタックは別のトピックであり、別の<a href="http://habrahabr.ru/post/206160/">記事で</a>説明されてい<a href="http://habrahabr.ru/post/206160/">ます</a> 。 </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../J205310/index.html">3色。 Littlesnakeの代替品</a></li>
<li><a href="../J205312/index.html">ポケットに莫大な予算を持たずにどれくらいの期間ブラウザゲームを作れますか</a></li>
<li><a href="../J205314/index.html">OS XのFTPでスクリーンショットを自動ロードする方法、または簡単な方法を探していない方法についてのストーリー</a></li>
<li><a href="../J205316/index.html">オブジェクトプールやヒープ内のオブジェクトを簡単に作成</a></li>
<li><a href="../J20532/index.html">_</a></li>
<li><a href="../J205322/index.html">クラウドホスティングインスタンスの価格計算</a></li>
<li><a href="../J205324/index.html">PLCのヘビ。 シーメンスへの答え</a></li>
<li><a href="../J205326/index.html">Sambaアクセスウイルス対策スキャン</a></li>
<li><a href="../J205328/index.html">mooeditのチューニング</a></li>
<li><a href="../J20533/index.html">Yahooはそこに、またはソーシャルニュースについて</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter70218013 = new Ya.Metrika({
                  id:70218013,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/70218013" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'G-FEDBM7F51Q', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Clever Geek | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <div class="company-info js-company-info" itemscope="" itemtype="http://schema.org/Organization">
      <span itemprop="name">Western Town Media (WTM)</span>
      <div itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">1968 Stoney Lonesome Road</span>
        <br>
        <span itemprop="postalCode">PA 18640</span>
        <span itemprop="addressLocality">Pittston, USA</span>
      </div>
      <span itemprop="telephone">570-362-1316</span>
    </div>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Pittston, USA",
          "postalCode": "PA 18640",
          "streetAddress": "1968 Stoney Lonesome Road"
        },
        "name": "Western Town Media (WTM)",
        "telephone": "570-362-1316"
      }
    </script>
  </div>
</footer>
  
</body>

</html>